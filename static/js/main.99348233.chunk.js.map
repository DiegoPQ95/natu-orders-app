{"version":3,"sources":["lib/ExtendNumber.ts","serviceWorker.ts","Services/API.ts","Utils/Preferences.ts","Components/Login.tsx","Components/Products/ProductCard.tsx","Components/Products/ProductGrid.tsx","Components/Modal.tsx","Components/Order/ProductOptions.tsx","Components/ConfirmOrder/index.tsx","Utils/Calcs.ts","Utils/Validation.ts","Components/Input.tsx","Components/Order/Data.tsx","Components/ImageInput.tsx","Components/Order/Payment.tsx","Components/Order/Survey.tsx","Components/Message.tsx","Components/RouteMessage.tsx","Components/Order/ProductSelections.tsx","Components/Order/Redux/Thunks/FetchOrderDataThunk.ts","Components/Order/lib/OrderState.ts","Components/Order/lib/RecoverStoredOrder.ts","Utils/ImageReader.ts","Components/Order/Redux/Thunks/LoadImageThunk.ts","Components/Order/Redux/Thunks/LocalStorePedido.ts","lib/ValueChecks.ts","Components/Order/Redux/Thunks/OrderSaveThunk.ts","Components/Order/Redux/OrderReducer.ts","Services/GiftRulesService.ts","Components/Order/index.tsx","Components/Order/mapOrderState.ts","lib/DOMActions.ts","Services/OrderActions.ts","Components/OrderList/DetailComponents.tsx","lib/ExpandImage.ts","Components/OrderList/PagoSection.tsx","Components/Payment/RegisterPayment.tsx","Components/OrderList/RegistroMultiPago.tsx","Components/OrderList/OrderActionButtons.tsx","Components/OrderList/EnviarAction.tsx","Components/OrderList/OrderDetails.tsx","Components/OrderList/index.tsx","Components/Feed/LeftRightHeader.tsx","Components/Feed/RankingCard.tsx","Components/Feed/LineCard.tsx","Components/Feed/ProfitCard.tsx","Globals.ts","Components/Feed/PieCard.tsx","Components/Feed/WithTimeTravel.tsx","Components/Feed/lib/CardWithCycleTravel.tsx","Components/Feed/lib/RestrictiveGrid.tsx","Components/Feed/HierarchyFeed/HierarchyGraph.tsx","Components/Feed/lib/ResumenUsuarios.ts","Components/Feed/HierarchyFeed/HierarchyResume.tsx","Components/Feed/index.tsx","Components/Feed/HierarchyFeed/index.tsx","Components/Reports/ProductSales.tsx","Components/Reports/InvoiceReport.tsx","Components/Reports/index.tsx","Components/DataTable.tsx","Components/OrderQueue/Queue.tsx","Components/OrderQueue/Columns.ts","Components/OrderQueue/index.tsx","Components/ItemList.tsx","Components/Products/Edit.tsx","Components/Products/index.tsx","Components/Users/Columns.ts","Components/Users/RolInput.tsx","Components/Users/UserListInput.tsx","Components/Users/UserDataForm.tsx","Components/Users/ValidateUserForm.ts","Components/Users/Edit.tsx","Components/Users/index.tsx","Components/PolicyPage/index.tsx","Layouts/TermsAndConds.tsx","Components/UserProfile.tsx","Components/Order/Redux/Store.ts","Layouts/TabContainer.tsx","Components/Settings/GiftRules/Edit.tsx","Components/Settings/GiftRules/index.tsx","Components/Settings/index.tsx","Components/MultiLevel/ProcessCycle.tsx","Components/MultiLevel/index.tsx","Components/NavigationDrawer/index.tsx","Layouts/Main.tsx","Layouts/SignIn.tsx","App.tsx","index.tsx"],"names":["Number","prototype","toCurrency","Intl","NumberFormat","style","currency","minimumFractionDigits","format","this","moneyRound","decimal_digits","negative","n","digits","undefined","multiplicator","Math","pow","parseFloat","toFixed","round","Boolean","window","location","hostname","match","DOMAIN","KEY","body","F","method","todos","id","action","options","params","URLSearchParams","set","stats","join","semana","toString","year","isNaN","cycleIndex","param_str","Object","keys","length","columns","rol","userId","user","item","get_all","cycle","index","Promise","resolve","nombre","URI","DEFAULTS","cache","mode","ops","headers","JSON","stringify","fetch","then","response","ok","json","clone","catch","text","x","message","status","statusText","obj","ex","prefix","Preferences","_prefix","_key_","key","localStorage","getItem","parse","value","value_txt","setItem","removeItem","productoSelecciones","productList","product","find","opciones","list","filter","combo","ID","Login","props","state","LoginState","handleChange","event","currentTarget","name","setState","handleSubmit","preventDefault","loading","trim","pwd","error","API","r","Set","onLoggedIn","handlePassword","prev","isPasswordVisible","Get","setTimeout","requestAnimationFrame","document","getElementById","focus","paddingTop","Card","width","maxWidth","margin","textAlign","onSubmit","CardContent","src","alt","height","minHeight","TextField","inputProps","onChange","label","fullWidth","disabled","defaultStyle","type","InputProps","endAdornment","InputAdornment","position","IconButton","onClick","VisibilityOff","Visibility","Typography","color","variant","Button","Divider","display","component","Link","to","React","Component","marginTop","marginBottom","onCardClick","onActionClick","controls","remainProps","textStyle","CardActionArea","Content","CardActions","cantidad","Remove","Add","CardMedia","className","image","imgSrc","flexDirection","flex","overflow","editablePrice","Input","onPriceChange","pvp_final","startAdornment","AttachMoney","descripcion_url","target","href","aplica_comision","aplica_descuento","ProductGrid","visible_style","visible","useState","search","set_search","Products","items","toUpperCase","indexOf","async_status","CircularProgress","size","ThereIsNotProducts","async_error","placeholder","padding","Search","Grid","container","alignItems","spacing","map","sm","md","xs","ProductCard","editablePrices","habilitado","textDecoration","showNewItem","Transition","forwardRef","ref","Slide","direction","Modal","show","onClose","fullScreen","title","closeButtonText","Dialog","open","TransitionComponent","AppBar","Toolbar","flexGrow","Close","DialogTitle","DialogContent","children","footer","DialogActions","ItemCard","selectedStyle","selected","border","ProductOptions","selections","handleClose","maxItems","_Item","alert","onDone","showingID","toggleSelect","existsIndex","splice","push","nextProps","isOpen","Item","opcionIDs","idOpcion","paddingLeft","paddingRight","ConfirmOrder","show_next_discount","descuento","valor_envio","gran_total","total_pedido","subtotal","subtotal_con_descuentos","subtotal_con_descuento","porcentaje","valor","mostrarDescuentos","sgte_descuento_porcentaje","DESCUENTO_INCLUIDO_REGALOS","idReglaRegalo","reduce","a","b","DESCUENTO_PORCENTAJE_INCLUIDO_REGALOS","List","Row","col1","col2","col3","componentes","showComponentes","LabelDescuentoComponent","ListItem","sgte_descuento_falta","c","Totals","result","total","i","DocToString","doc","MonthToString","ValidateInput","char","twoParts","split","ValidarIdentificacion","documento","maxLength","_props","error_props","helperText","Location","onValueChange","direccion","tipo_envio","ciudad","referencia","sector","identificacion","razonSocial","direccion_factura","telefono_factura","email_factura","nombre_contacto","telefono_contacto","identificacion_contacto","documento_contacto","identificacion_e","telefono_e","tel","email_e","email","identificacion_contacto_e","telefono_contacto_e","mostrar_ciudad","mostrar_datos_envio","Paper","marginLeft","multiline","rows","select","SelectProps","native","PureComponent","ImageInput","COMPONENT_ID","Date","valueOf","handleClick","_","click","files","onDelete","hidden","accept","verticalAlign","Image","utilizarComision","marginRight","total_pagar","paddingBottom","cellPadding","cellSpacing","align","usarImagen","ImageList","imgTransaccionList","onImgChange","onImgDelete","isLoading","file","withRouter","txt1","txt2","bind","unblock","history","block","goBack","ActionOrder","autoFocus","Message","info","focusafter","get","ProductSelections","Rows","deletionClick","onDeleteSelection","ListItemText","ListItemSecondaryAction","Delete","GetProductsThunk","createAsyncThunk","all","GetProducts","GetGiftRules","OrderState","descuentoAplica","observacion","numeroTransaccion","new_state","updates","choosen","stored_direccion","hasOwnProperty","stored_factura","before","reject","mb","reader","FileReader","onload","onerror","readAsDataURL","ImgFileToObject","base64","base64ArrayBuffer","ext","readAsArrayBuffer","arrayBuffer","chunk","encodings","bytes","Uint8Array","byteLength","byteRemainder","mainLength","LoadingMessageWindow","LoadImageThunk","reportError","imgFile","ImageReader","imgUrl","LocalStoreOrder","ThunkAPI","clean","reportCompleted","getState","Order","data","isEmpty","ValidateSave","order","results","detalle","OrderSaveThunk","propertyName","envio","filesTransaccion","SaveOrder","idProducto","descuentoPorcentaje","descuentoTotal","regaloTotal","baseIva","iva","OrderReducer","createSlice","reducers","updateCurrentTab","currentTab","payload","changeProductQuantity","change_cantidad_item","Id","isDirty","changeDataValue","changeProductPrice","found","addProductSelection","removeProductSelection","deleteImgTransaccion","extraReducers","builder","addCase","FetchOrderData","pending","rejected","fulfilled","products","rules","giftRules","RecoverStoredOrder","assign","initialState","previous_cant","cantidad_desde","actions","GiftRulesService","pedido","regalos","rule","condiciones","Function","propName","operator","OrderComponent","guardarBorrador","setStoredOrder","handleDone","saveOrder","path","exception","handleProductAction","handleValueChange","imageChange","loadTransaccionImg","imageDelete","handleAddSelection","handleDeleteSelection","handlePriceChange","onMounted","onbeforeunload","unblockNavigation","routerWillLeave","fetchInitialData","nextLocation","pathname","confirm","tablaDescuentos","Tabs","Tab","Hide","if","subtotal_aplicable_descuento","ev","d","Payment","RouteMessage","Survey","Fab","bottom","right","Save","connect","rootState","ES_ASESOR","descuentos","normalizedProductList","sort","orden","exists","sorted","montoDesde","founded","desc","next","EstimarDescuento","getValorEnvio","detalle_regalo","ApplyRules","subtotal_regalos","resume","FetchOrderDataThunk","Focus","console","OrderActions","_pagos","PagoEsValido","prompt","_fechaEnvio","_envioImgFile","_envioImgSrcStatus","promise","numeroFactura","pago","metodoPago","monto","SectionHeader","center","TextRow","ExpandImage","img","createElement","appendChild","imgTransaccion","pagos","imagenes","objectFit","add_to_id","step","button","RegisterPayment","new_pago","new_array","changeValue","deleteItem","showReject","loadingAction","onImageChange","onTextChange","loadingStatus","detaOrderDetails","_fechaRecepcion","shouldRefresh","handleButton","Aprobar","Rechazar","Enviar","Facturar","handleCheck","checked","handleEnvioImg","_envioImgSrc","handlePagos","GetOrder","data_error_message","numero","fechaCreacion","fechaRecepcion","fechaEnvio","envioImgSrc","username","survey1","survey2","bienRecibido","observacionRecepcion","editable","estado","BugReport","toLocaleString","toLocaleDateString","PagoSection","RegistroMultiPago","EnviarAction","Fragment","msg","handleMessage","GetOrders","err","code","refresh","overflowX","Hidden","xsDown","implementation","borderBottom","smUp","EstadoToVariant","toDateString","render","LeftRigthHeader","onBackClick","onNextClick","subtitle","CardHeader","HourglassEmpty","ArrowLeft","ArrowRight","disableTypography","RankingCard","secondColType","colType","value1","value2","date","ahora","getDate","getMonth","getFullYear","toLocaleTimeString","este_dia","DateToString","me","PerfomanceCell","LineCard","legend","maintainAspectRatio","bezierCurve","scales","yAxes","ticks","maxTicksLimit","beginAtZero","xAxes","RawData","remain","labels","values","el","we","datasets","backgroundColor","borderColor","lineTension","fill","ProfitCard","acumulado","ciclo","comision","reduceMoney","borderLeft","ROLES","PieCard","current_week","statName","reduceFn","handleBack","fetchData","handleNext","updateData","showError","Stats","desde","start","hasta","end","remainState","current_cycle","componentProps","ComponentProps","gridProps","users","esUsuarioNuevo","total_comisionable","parent","parent1","background","initDiagram","divClassName","nodeDataArray","ExplanationContainer","resumen","usuarios","useMemo","isCurrentUser","nuevos","activos","minWidth","maximumFractionDigits","$","go","make","myDiagram","initialAutoScale","UniformToFill","layout","nodeSpacing","layerSpacing","model","isReadOnly","nodeTemplate","stroke","font","linkTemplate","selectable","Niveles","niveles","n1_usuarios","n1_activos","comisionable","n1_comisionable","n1_subtotal_comision","n2_usuarios","n2_activos","n2_comisionable","n2_subtotal_comision","n3_usuarios","n3_activos","n3_comisionable","n3_subtotal_comision","nX_activos","nX_usuarios","dense","primaryTypographyProps","primary","secondary","total_calificable","borderTop","subtotal_comision","TimeTravelRank","WithTimeTravel","PersonalGraph","TimeTravelHierarchyFeed","CardWithCycleTravel","descendants","descendants_resume","steps","set_steps","useEffect","Rangos","rangos","rango","titulo","selectedStepIndex","findIndex","Stepper","alternativeLabel","activeStep","Step","Tooltip","StepLabel","HierarchyGraph","HierarchyResume","TimeTravelHierarchyGraph","withStyles","theme","root","unmounted","week_ranking","group_graph","personal_graph","year_sales","product_resume","group_ranking","profit_summary","componentWillUnmount","productResumeReducer","esAdmin","ADMINISTRADOR","month","createdAt","profit","classes","RestrictiveGrid","ProductSales","toJSON","ProductSalesReport","Table","TableHead","TableRow","TableCell","TableBody","idPedido","fechaEntrega","motivoAnulacion","descripcion","aRef","createRef","a_ref_ID","dateformat","set_desde","set_hasta","set_estado","validationError","from","current","ServerURL","download","Reports","InvoiceReport","downloadOptions","customToolbar","remainOptions","separator","set_separator","onDownload","buildHead","buildBody","Queue","changedAt","DataTable","selectableRows","onRowClick","entrada_columns","aprobado_columns","enviado_columns","facturado_columns","rechazado_columns","OrderQueue","handleTab","openOrder","closeOrder","shouldUpdate","loadData","rawData","fechaAnulacion","exact","routeProps","COUNT","ItemList","inputValue","selectValue","showErrors","INPUT_ID","SELECT_ID","handleDelete","onRemove","handleAdd","InputConfig","IdProp","dataSource","onAdd","validateInput","DisplayProp","SecondaryDisplayProp","inputError","selectError","IDs","ListItemIcon","input","Edit","e","handleChecked","DeleteProduct","_updated","_failed","handleSave","errors","_validar","rawFile","imageFile","SaveProduct","handleFile","idComponente","handleRemove","errorSet","sku","nextId","p","acc","v","o","FormControlLabel","control","Switch","required","tabIndex","_Update","handleAction","productSorted","SendProductAction","UserColumns","readOnly","RolToString","UserListInput","readOnlyValue","setStatus","setUsers","setError","GetUsers","GetUsersHook","Autocomplete","loadingText","noOptionsText","renderInput","getOptionLabel","getOptionSelected","formType","editionType","editarEstado","editarModificarPVPs","editarTermsAndConds","noValidate","stopPropagation","telefono","nacionalidad","InputLabelProps","shrink","fechaNacimiento","Password","password","confirm_password","parentId","ParentName","RolInput","editarPVPsdurantePedido","mustAcceptTermsAndConds","termsAndCondsAcceptedAt","guardar","other_props","show_password","switchShowPassword","input_props","ValidateUserForm","parseInt","passwordOpcional","FocusOn","EditUserData","validarPassword","userData","validationErrors","SaveUser","forEach","DeleteUser","nextShow","initialData","grupos","UserDataForm","Users","downloadSeparator","FetchData","GetGroups","ultimoPedido","UltimoPedido","handleNew","update","arr_data","handleTermsAndConds","SendUserAction","Policy","customSort","colIndex","col","toLowerCase","TextSrc","set_user","set_status","errores","set_errores","GetUser","store","configureStore","reducer","tabs","tabId","set_currentTab","selectedTab","Children","new_tab_id","tabLabel","pedido_subtotal","set_pedido_subtotal","productos","set_productos","filteredProductList","set_filteredProductList","Validate","SaveGiftRule","isOk","errMsg","productos_nuevo","allowZero","TABS","records","set_records","openEdit","set_openEdit","Productos","Condiciones","Desde","day","Hasta","DeleteGiftRule","openEditView","print","viewColumns","pagination","onRowsDelete","rowsDeleted","textLabels","noMatch","should_reload","TabContainer","COLUMNS","set_cycle","cycleList","set_cycleList","set_data","GetMultiLevelUserData","GetCycles","cycles","errorMsg","buttonsAreDisabled","number","OPCIONES","Icon","Inbox","ShoppingCart","ListAlt","roles","Category","PeopleAlt","Report","AccountTree","Person","SettingsIcon","useStyles","makeStyles","drawer","breakpoints","up","flexShrink","toolbar","mixins","drawerPaper","palette","light","contrastText","icons","appBar","rangoHonorifico","selectedPath","isMenuOpen","set_isMenuOpen","Rango","set_Rango","accesos","drawerChildren","fontWeight","Help","Drawer","anchor","paper","ModalProps","keepMounted","aria-label","edge","Menu","content","token","solicitarDatosAlIniciar","TermsAndCondsAccepted","UserProfile","basename","CssBaseline","NavigationDrawer","Settings","MultiLevel","SignIn","fin_registro","ASESOR","App","createHashHistory","handleLoggedIn","setPrefix","user_routes","Theme","createMuiTheme","main","ReactDOM","StrictMode","ThemeProvider","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.99348233.chunk.js","sourcesContent":["Number.prototype.toCurrency = function () {\r\n    // Create our number formatter.\r\n    var formatter = new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: 'USD',\r\n        minimumFractionDigits: 2,\r\n        // These options are needed to round to whole numbers if that's what you want.\r\n        //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\r\n        //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\r\n    });\r\n    return formatter.format(this); /* $2,500.00 */\r\n}\r\n\r\nNumber.prototype.moneyRound = function (decimal_digits: number = 2) {\r\n    var negative = false;\r\n    var n = this;\r\n    var digits = decimal_digits;\r\n    if (digits === undefined) {\r\n        digits = 0;\r\n    }\r\n    if (n < 0) {\r\n        negative = true;\r\n        n = n * -1;\r\n    }\r\n    var multiplicator = Math.pow(10, digits);\r\n    n = parseFloat((n * multiplicator).toFixed(11));\r\n    n = (Math.round(n) / multiplicator).toFixed(digits);\r\n    if (negative) {\r\n        n = (n * -1).toFixed(digits);\r\n    }\r\n    return +n;\r\n}\r\nexport { };","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","/// <reference path=\"../shared/Order.DoAction.d.ts\" />\r\n/// <reference path=\"../shared/GiftRule.d.ts\" />\r\n/// <reference path=\"../shared/app.d.ts\" />\r\nconst DOMAIN = (process.env.NODE_ENV === \"development\"\r\n    ? (window.location.port ? \"http://localhost:9000\" : \"\")\r\n    : \"https://natuapp.ue.r.appspot.com\");\r\n\r\nclass API {\r\n    KEY = \"\";\r\n    Login(body) { return this.F(\"user/login\", { body, method: \"POST\" }); }\r\n    GetProducts(todos?: boolean): Promise<FullProduct[]> { return this.F(\"product\" + (todos ? \"?todos=1\" : \"\")); }\r\n    SendProductAction(id: number, action: string) { return this.F(\"product/\" + id, { body: { action }, method: \"PATCH\" }); }\r\n    GetOrders(): Promise<GetOrder[]> { return this.F(\"order\"); }\r\n    GetOrder(id: number): Promise<GetOrder> { return this.F(\"order/\" + id); }\r\n    SaveOrder(body: CreateOrder) { return this.F(\"order\", { method: \"POST\", body }); }\r\n    ActionOrder(id: number | string, body: DoOrderAction) { return this.F(\"order/\" + id, { method: \"PUT\", body }); }\r\n    Stats(options: {\r\n        stats: Array<keyof DashboardResult>,\r\n        semana?: number;\r\n        year?: number;\r\n        cycleIndex?: number;\r\n    }): Promise<DashboardResult> {\r\n        const params = new URLSearchParams();\r\n        params.set(\"data\", options.stats.join(\",\"));\r\n        if (options.semana) params.set(\"semana\", options.semana.toString());\r\n        if (options.year) params.set(\"year\", options.year.toString());\r\n        if (!isNaN(+options.cycleIndex)) params.set(\"cycleIndex\", options.cycleIndex.toString());\r\n        return this.F(\"dashboard?\" + params.toString());\r\n    }\r\n    ProductSalesReport(params: { desde: string, hasta: string, estado: any }) {\r\n        var param_str = \"\";\r\n        if (params && Object.keys(params).length)\r\n            param_str = \"?\" + new URLSearchParams(params).toString();\r\n\r\n        return this.F(\"reports/product-sales\" + param_str);\r\n    }\r\n    GetGroups() { return this.F(\"user/groups\"); }\r\n    SignIn(body: any) { return this.F(\"user\", { method: \"POST\", body }); }\r\n\r\n    GetUsers(columns?: Array<keyof VisibleUser>, rol?: 1 | 2 | 3): Promise<VisibleUser[]> {\r\n        const params = new URLSearchParams();\r\n        if (columns && columns.length) {\r\n            params.set(\"cols\", columns.join(\",\"));\r\n        }\r\n        if (rol) params.set(\"rol\", rol.toString());\r\n        return this.F(\"user\" + (params.toString() ? (\"?\" + params.toString()) : \"\"));\r\n    }\r\n    GetUser(userId: number): Promise<VisibleUser> { return this.F(\"user/\" + userId) }\r\n    SaveUser(user: VisibleUser) {\r\n        return this.F(\"user\" + (user.id ? `/${user.id}` : \"\"), {\r\n            method: user.id ? \"PUT\" : \"POST\",\r\n            body: user\r\n        });\r\n    }\r\n    DeleteUser(id: number) {\r\n        return this.F(\"user/\" + id, {\r\n            method: \"DELETE\"\r\n        });\r\n    }\r\n    SendUserAction(action: \"ACCEPT_TERMS_AND_CONDS\", id: any = null) {\r\n        return this.F(\"user\" + (id === null ? \"\" : `/${id}`), { method: \"PATCH\", body: { action } });\r\n    }\r\n\r\n    SaveProduct(item: FullProduct) {\r\n        return this.F(\"product\" + (item.id ? (\"/\" + item.id) : \"\"), {\r\n            method: item.id ? \"PUT\" : \"POST\",\r\n            body: item\r\n        });\r\n    }\r\n    DeleteProduct(id: number) {\r\n        return this.F(\"product/\" + id, { method: \"DELETE\" });\r\n    }\r\n    ServerURL() {\r\n        return DOMAIN;\r\n    }\r\n    GetGiftRules(get_all: boolean = false): Promise<GiftRule[]> {\r\n        return this.F(\"gift-rules?\" + (get_all ? \"all=1\" : \"\"), {\r\n            method: \"GET\"\r\n        });\r\n    }\r\n    SaveGiftRule(body: GiftRule): Promise<{ createdAt?: Date, id: number }> {\r\n        return this.F(\"gift-rules/\", {\r\n            method: \"POST\",\r\n            body\r\n        });\r\n    }\r\n    DeleteGiftRule(id?: number): Promise<void> {\r\n        return this.F(`gift-rules/${id}`, {\r\n            method: \"DELETE\"\r\n        });\r\n    }\r\n    GetCycles() {\r\n        return this.F(\"cycles/\", {\r\n            method: \"GET\"\r\n        });\r\n    }\r\n    GetMultiLevelUserData(cycle: Cycle) {\r\n        return this.F(\"cycles/data?cycleIndex=\" + cycle.index, {\r\n            method: \"GET\"\r\n        });\r\n    }\r\n    processMultiLevelUserData(cycle: Cycle) {\r\n    }\r\n    Rangos(): Promise<Array<{ id: string, nombre: string }>> {\r\n        return Promise.resolve([\r\n            { id: \"A\", nombre: \"Asesor\" },\r\n            { id: \"LN\", nombre: \"Luna Nueva\" },\r\n            { id: \"LC\", nombre: \"Luna Creciente\" },\r\n            { id: \"LL\", nombre: \"Luna Llena\" },\r\n            { id: \"LA\", nombre: \"Luna Azul\" },\r\n            { id: \"GT\", nombre: \"Guia de Tribu\" },\r\n            { id: \"GGT\", nombre: \"Gra Guia de Tribu\" }\r\n        ]);\r\n    }\r\n\r\n    private F(URI, options: SpecialRequest = {}) {\r\n        const DEFAULTS: any = {\r\n            method: \"GET\",\r\n            cache: \"reload\",\r\n            mode: \"cors\"\r\n        };\r\n        var ops: RequestInit = { ...DEFAULTS, ...options };\r\n        if (!ops.headers) ops.headers = {};\r\n        ops.headers['Content-Type'] = 'application/json';\r\n        ops.headers['Access-Control-Allow-Origin'] = '*';\r\n\r\n        if (this.KEY) {\r\n            if (!ops.headers) ops.headers = {};\r\n            ops.headers[\"Authorization\"] = 'Basic ' + this.KEY;\r\n        }\r\n\r\n        if (ops.body && (typeof ops.body !== typeof \"\"))\r\n            ops.body = JSON.stringify(ops.body);\r\n\r\n        return fetch(DOMAIN + \"/\" + URI, ops).then(response => {\r\n            if (response.ok) return response.json();\r\n            return response.clone().json()\r\n                .catch(() => {\r\n                    return response.text().then(x => {\r\n                        throw {\r\n                            message: x,\r\n                            status: response.status,\r\n                            statusText: response.statusText\r\n                        }\r\n                    })\r\n                }).then(obj => {\r\n                    throw {\r\n                        ...obj,\r\n                        status: response.status,\r\n                        statusText: response.statusText\r\n                    }\r\n                })\r\n        }).catch(ex => {\r\n            if (ex.message === \"Failed to fetch\") {\r\n                throw {\r\n                    message: \"Este servicio no se encuentra disponible por el momento. Intentelo más tarde.\",\r\n                    status: 0\r\n                }\r\n            }\r\n            if (!ex.message) ex.message = ex.statusText;\r\n            throw ex;\r\n        });\r\n    }\r\n}\r\nexport default new API();\r\n\r\ninterface SpecialRequest extends RequestInit {\r\n    body?: any\r\n}\r\n","import  OrderState  from \"../Components/Order/lib/OrderState\";\r\n\r\nvar prefix = \"\";\r\nexport default class Preferences {\r\n    static setPrefix(_prefix: string) {\r\n        prefix = _prefix || \"\";\r\n    }\r\n    static Get(_key_: \"current_order\" | \"direccion\" | \"user\" | \"factura\") {\r\n        var key = prefix + _key_;\r\n        var x = window.localStorage.getItem(key);\r\n        try {\r\n            return JSON.parse(x);\r\n        } catch (ex) { }\r\n        return x;\r\n    }\r\n    static Set(_key_: \"current_order\" | \"direccion\" | \"user\" | \"factura\", value: any = undefined) {\r\n        var key = prefix + _key_;\r\n        if (value === undefined) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        } else if (value === null) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        }\r\n        var value_txt = value;\r\n        if (typeof value === typeof {})\r\n            value_txt = JSON.stringify(value);\r\n\r\n        window.localStorage.setItem(key, value_txt);\r\n    }\r\n    static NormalizeProductoSelecciones(productoSelecciones: OrderState[\"productoSelecciones\"], productList: Product[]) {\r\n        if (!(productoSelecciones && Object.keys(productoSelecciones).length)) return false;\r\n        for (const key in productoSelecciones) {\r\n            var product = productList.find(x => x.id === +key);\r\n            // el producto no está en la lista, se borra\r\n            if (!product || !(product.opciones && product.opciones.length)) {\r\n                delete productoSelecciones[key];\r\n                continue;\r\n            }\r\n            var list = productoSelecciones[key];\r\n            // algun item no está en la lista, se borra el conjunto\r\n            list = list.filter(combo => {\r\n                var existingItems = combo.filter(ID => productList.find(x => x.id === +ID));\r\n                return existingItems.length === combo.length;\r\n            });\r\n            productoSelecciones[key] = list;\r\n            // la lista no tiene items, se borra\r\n            if (!productoSelecciones[key].length) delete productoSelecciones[key];\r\n        }\r\n        return Object.keys(productoSelecciones).length > 0;\r\n    }\r\n}","import React from \"react\";\r\nimport { Card, CardContent, TextField, Button, InputAdornment, IconButton, Typography, Divider } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Preferences from \"../Utils/Preferences\";\r\n\r\nexport default class Login extends React.Component<{ onLoggedIn: (params: LoggedIn) => void }, LoginState> {\r\n    state = new LoginState();\r\n    constructor(props: any) {\r\n        super(props);\r\n        API.KEY = \"\";\r\n        this.state.user = Preferences.Get(\"user\") || \"\";\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({\r\n            [name]: value\r\n        } as any);\r\n    }\r\n    componentDidMount() {\r\n        setTimeout(() =>\r\n            window.requestAnimationFrame(() => {\r\n                if (this.state.user) {\r\n                    document.getElementById(\"password-textfield\").focus();\r\n                } else {\r\n                    document.getElementById(\"user-textfield\").focus();\r\n                }\r\n            }), 100);\r\n    }\r\n    handleSubmit = (event: any) => {\r\n        event.preventDefault();\r\n        if (this.state.loading) return;\r\n        const user = this.state.user && this.state.user.toString().trim();\r\n        const pwd = this.state.pwd && this.state.pwd.toString().trim();\r\n        if (!user) return this.setState({ error: { message: \"Digite su usuario\" } });\r\n        if (!pwd) return this.setState({ error: { message: \"Digite su contraseña\" } });\r\n        this.setState({ loading: true, error: null });\r\n        API.Login({ user, pwd })\r\n            .then(r => {\r\n                // importante, se debe ejecutar ANTES de onLoggedIn\r\n                Preferences.Set(\"user\", user);\r\n                this.setState({ loading: null });\r\n                this.props.onLoggedIn({ ...r });\r\n            })\r\n            .catch(error => this.setState({ loading: null, error }));\r\n    }\r\n    handlePassword = (event) => {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.isPasswordVisible = !state.isPasswordVisible;\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const { loading, error, user, pwd, isPasswordVisible } = this.state;\r\n        return (<div style={{ paddingTop: 20 }}>\r\n            <Card style={{ width: \"100%\", maxWidth: 300, margin: \"auto\", textAlign: \"center\" }}>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <CardContent>\r\n                        <img src=\"./logo.png\" alt=\"Logo\"\r\n                            style={{ height: 150, minHeight: 150, width: \"auto\" }} />\r\n                        <TextField\r\n                            inputProps={{ id: \"user-textfield\" }}\r\n                            onChange={this.handleChange}\r\n                            value={user}\r\n                            label=\"Usuario\"\r\n                            name=\"user\"\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                        />\r\n                        <TextField\r\n                            onChange={this.handleChange}\r\n                            value={pwd}\r\n                            name=\"pwd\"\r\n                            label=\"Contraseña\"\r\n                            type={isPasswordVisible ? \"input\" : \"password\"}\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                            inputProps={{ id: \"password-textfield\" }}\r\n                            InputProps={{\r\n                                endAdornment: <InputAdornment position=\"end\">\r\n                                    <IconButton onClick={this.handlePassword}>\r\n                                        {isPasswordVisible ? <VisibilityOff /> : <Visibility />}\r\n                                    </IconButton>\r\n                                </InputAdornment>\r\n                            }}\r\n                        />\r\n                        {error && <Typography color=\"secondary\" variant=\"body1\" style={{ textAlign: \"center\" }}>{error.message}</Typography>}\r\n                        <Button type=\"submit\" variant=\"outlined\" style={defaultStyle} color=\"primary\" disabled={loading} fullWidth >\r\n                            {loading ? \"CARGANDO...\" : \"ENTRAR\"}\r\n                        </Button>\r\n                        <Divider style={{ margin: 20 }} />\r\n                        <Typography style={{ display: \"block\", textAlign: \"center\", margin: 5 }} variant=\"body2\" component={Link} to=\"/signin\">No eres asesor/a natú? Registrate aquí!</Typography>\r\n                    </CardContent>\r\n                </form>\r\n            </Card>\r\n        </div>)\r\n    }\r\n}\r\nconst defaultStyle = {\r\n    marginTop: 10,\r\n    marginBottom: 10\r\n}\r\n\r\nclass LoginState {\r\n    user = \"\";\r\n    pwd = \"\";\r\n    loading = false;\r\n    isPasswordVisible = false;\r\n    error = null;\r\n}","import React from \"react\";\r\nimport { CardMedia, Card, CardContent, Typography, Input, CardActions, InputAdornment, IconButton, CardActionArea } from \"@material-ui/core\";\r\nimport { AttachMoney, Add, Remove } from \"@material-ui/icons\";\r\n\r\ninterface Props extends Product {\r\n    id: any;\r\n    pvp_final: any;\r\n    editablePrice?: boolean;\r\n    onActionClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n    onPriceChange?: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\r\n    controls?: \"ADD-REMOVE\";\r\n    onCardClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n\r\n    textStyle?: any;\r\n}\r\n\r\nexport default function (props: Props) {\r\n    const { onCardClick, onActionClick, controls, ...remainProps } = props;\r\n\r\n    const item = props;\r\n    const textStyle = props.textStyle || {};\r\n\r\n    return (<Card>\r\n        {onCardClick\r\n            ? (<CardActionArea name=\"card\" value={props.id} onClick={onCardClick}>\r\n                <Content {...remainProps} />\r\n            </CardActionArea>)\r\n            : <Content {...remainProps} />}\r\n\r\n        {controls === \"ADD-REMOVE\"\r\n            && (<CardActions>\r\n                <IconButton disabled={!(item.cantidad > 0)} onClick={onActionClick} name=\"-\" value={item.id}>\r\n                    <Remove />\r\n                </IconButton>\r\n                <Typography variant=\"body1\" style={textStyle}>{item.cantidad}</Typography>\r\n                <IconButton onClick={onActionClick} name=\"+\" value={item.id}>\r\n                    <Add />\r\n                </IconButton>\r\n            </CardActions>)}\r\n    </Card>);\r\n}\r\n\r\nfunction Content(props: Props) {\r\n    const item = props;\r\n    const textStyle = props.textStyle || {};\r\n    return (<>\r\n        <CardMedia component=\"img\" className=\"card-product-img\" image={item.imgSrc || \"https://diegopq95.github.io/take-orders/img/default.png\"} />\r\n        <CardContent>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <Typography style={{ flex: 1, height: 60, overflow: \"hidden\", ...textStyle }} variant=\"subtitle1\">{item.nombre}</Typography>\r\n                {props.editablePrice\r\n                    ? <Input\r\n                        style={{ width: 100 }}\r\n                        type=\"number\"\r\n                        onChange={props.onPriceChange}\r\n                        value={\"\" + item.pvp_final}\r\n                        name={\"\" + item.id}\r\n                        startAdornment={<InputAdornment position=\"start\" >\r\n                            <AttachMoney />\r\n                        </InputAdornment>}\r\n                    />\r\n                    : <Typography variant=\"h6\" style={textStyle}>$ {item.pvp_final.toFixed(2)}</Typography>}\r\n            </div>\r\n            <div>\r\n                <Typography variant=\"caption\" style={{ display: \"inline\" }} component={item.descripcion_url ? \"a\" : \"p\"} target=\"_blank\" href={item.descripcion_url} >{item.descripcion_url ? \"Información del Producto.\" : \"Sin información.\"} </Typography>\r\n                <Typography variant=\"button\" style={{ display: \"inline\" }} > Producto {item.aplica_comision ? \"\" : \"NO\"} comisionable.</Typography>\r\n                <Typography variant=\"button\" style={{ display: \"inline\" }} > {item.aplica_descuento ? \"\" : \"No\"} Aplica descuento.</Typography>\r\n            </div>\r\n\r\n        </CardContent>\r\n    </>);\r\n}","import React from \"react\";\r\nimport { Grid, TextField, InputAdornment, Typography, CircularProgress } from \"@material-ui/core\";\r\nimport ProductCard from \"./ProductCard\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { OrderReduceState } from \"../Order/Redux/OrderReducer\";\r\n\r\nexport default function ProductGrid(props: {\r\n    items: FullProduct[];\r\n    visible: boolean;\r\n\r\n    onActionClick?: any;\r\n    editablePrices?: boolean;\r\n    onPriceChange?: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\r\n\r\n    controls?: \"ADD-REMOVE\";\r\n    onCardClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n    showNewItem?: boolean;\r\n    async_status?: OrderReduceState[\"status\"]\r\n    async_error?: string;\r\n}) {\r\n    const visible_style: any = {};\r\n    if (!props.visible) visible_style.display = \"none\";\r\n\r\n    const [search, set_search] = React.useState(\"\");\r\n\r\n    const Products = props.items.filter(\r\n        x => search ? x.nombre.toUpperCase().trim().indexOf((search || \"\").toUpperCase().trim()) >= 0 : true\r\n    );\r\n\r\n    if (props.async_status === \"fetch-data:loading\") {\r\n        return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div >);;\r\n    }\r\n\r\n    if (props.async_status === \"fetch-data:completed\" && !Products.length) var ThereIsNotProducts = true;\r\n\r\n    if (props.async_status === \"fetch-data:error\") {\r\n        return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n            <Typography variant=\"h4\">Ocurrió un error</Typography>\r\n            {props.async_error && <Typography variant=\"h4\">Ocurrió un error{props.async_error}</Typography>}\r\n        </div>)\r\n    }\r\n\r\n    return (<>\r\n        <TextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            placeholder=\"Buscar...\"\r\n            style={{\r\n                padding: 10\r\n            }}\r\n            value={search}\r\n            type=\"search\"\r\n            onChange={event => set_search(event.target.value)}\r\n            InputProps={{\r\n                startAdornment: <InputAdornment position=\"start\"> <Search /></InputAdornment>\r\n            }} />\r\n        {!ThereIsNotProducts ? null : (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n            <Typography variant=\"h6\">No hay productos</Typography>\r\n        </div>)}\r\n        <Grid\r\n            container\r\n            alignItems=\"center\"\r\n            style={{ flex: 1, /*overflow: \"auto\",*/ marginTop: 5, ...visible_style }}\r\n            spacing={3}>\r\n            {Products.map(item => (\r\n                <Grid item sm={4} md={3} xs={12} key={item.id}>\r\n                    <ProductCard\r\n                        {...item}\r\n                        editablePrice={props.editablePrices}\r\n                        onPriceChange={props.onPriceChange}\r\n                        onActionClick={props.onActionClick}\r\n                        onCardClick={props.onCardClick}\r\n                        controls={props.controls}\r\n                        textStyle={item.habilitado ? null : { textDecoration: \"line-through\" }}\r\n                    />\r\n                </Grid>\r\n            ))}\r\n            {props.showNewItem && <Grid item sm={4} md={3} xs={12}>\r\n                <ProductCard\r\n                    id=\"NUEVO\"\r\n                    imgSrc=\"./add.svg\"\r\n                    pvp_final={0}\r\n                    nombre=\"AGREGA UN NUEVO ITEM\"\r\n                    onCardClick={props.onCardClick}\r\n                />\r\n            </Grid>}\r\n        </Grid>\r\n    </>)\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, AppBar, Toolbar, Button, Typography, IconButton, DialogActions, DialogTitle } from \"@material-ui/core\";\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Close } from \"@material-ui/icons\";\r\n\r\nconst Transition: any = React.forwardRef(function (props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n} as any);\r\n\r\ninterface ModalProps {\r\n    show: boolean;\r\n    title: string;\r\n    onClose?: (event: {}, reason?: \"backdropClick\" | \"escapeKeyDown\") => void;\r\n    fullScreen?: boolean;\r\n    closeButtonText?: string | \"ICON\";\r\n    children?: any;\r\n    footer?: any;\r\n}\r\n\r\nexport default function Modal(props: ModalProps) {\r\n    const { show, onClose, fullScreen, title } = props;\r\n    var closeButtonText = props.closeButtonText || \"ICON\";\r\n\r\n    return (<Dialog\r\n        maxWidth={fullScreen ? false : \"sm\"}\r\n        fullWidth={true}\r\n        open={show}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        TransitionComponent={Transition}\r\n    >\r\n        {fullScreen\r\n            ? (<AppBar position=\"relative\">\r\n                <Toolbar>\r\n                    <Typography color=\"inherit\" variant=\"h4\" style={{ flexGrow: 1 }}>{title}</Typography>\r\n                    {closeButtonText === \"ICON\"\r\n                        ? (<IconButton onClick={onClose} type=\"button\" color=\"inherit\">\r\n                            <Close />\r\n                        </IconButton>)\r\n                        : (<Button type=\"button\" onClick={onClose} color=\"inherit\">\r\n                            {closeButtonText || \"SALIR\"}\r\n                        </Button>)\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>)\r\n            : (<DialogTitle\r\n                title={title}\r\n            />)}\r\n\r\n        <DialogContent>\r\n            {props.children}\r\n        </DialogContent>\r\n\r\n        {props.footer\r\n            && <DialogActions>\r\n                {props.footer}\r\n            </DialogActions>}\r\n    </Dialog>)\r\n}","import React from \"react\";\r\nimport { Grid, Card, CardMedia, CardActionArea, CardContent, Typography } from \"@material-ui/core\";\r\nimport Modal from \"../Modal\";\r\n\r\ninterface DoneObject {\r\n    id: number,\r\n    selections: number[]\r\n}\r\ninterface Props {\r\n    productList: Product[],\r\n    onDone: (DoneObject?) => void,\r\n    showingID: number,\r\n    match?: any\r\n}\r\n\r\nfunction ItemCard(props) {\r\n    const selectedStyle = props.selected ? { border: \"3px solid #333\" } : null;\r\n    return (<Card>\r\n        <CardActionArea onClick={props.onClick} value={props.id} style={selectedStyle} component=\"button\">\r\n            <CardMedia style={{ minHeight: 150, height: \"25vh\" }}\r\n                image={props.imgSrc}\r\n                title={props.nombre}\r\n            />\r\n            <CardContent>\r\n                <Typography>{props.nombre}</Typography>\r\n            </CardContent>\r\n        </CardActionArea>\r\n    </Card>);\r\n}\r\nexport default class ProductOptions extends React.Component<Props> {\r\n    state = { selections: [] }\r\n    handleClose = () => {\r\n        const Item = this._Item();\r\n        const maxItems = Item.maxItems || 0;\r\n\r\n        if (!this.state.selections.length)\r\n            return this.props.onDone();\r\n\r\n        if (maxItems < this.state.selections.length)\r\n            return alert(\"No se puede continuar selecciona \" + maxItems + \" items\");\r\n\r\n        this.props.onDone({\r\n            selections: this.state.selections,\r\n            id: this.props.showingID\r\n        });\r\n    }\r\n    componentWillReceiveProps(nextProps: Props) {\r\n        if (nextProps.showingID === null || nextProps.showingID === undefined) {\r\n            this.setState({ selections: [] });\r\n        }\r\n    }\r\n    // MIENTRAS ESTÉ CERRADO, EL COMPONENTE NO SE ACTUALIZARÁ\r\n    shouldComponentUpdate(nextProps) {\r\n        var isOpen = !(this.props.showingID === null || this.props.showingID === undefined);\r\n        var NextisOpen = !(nextProps.showingID === null || nextProps.showingID === undefined);\r\n        return (isOpen === NextisOpen && isOpen === false) ? false : true;\r\n    }\r\n    toggleSelect = event => {\r\n        const { value } = event.currentTarget;\r\n        const Item = this._Item();\r\n        const maxItems = Item.maxItems || 0;\r\n        this.setState(prev => {\r\n            const state: any = { ...prev };\r\n            state.selections = [...state.selections];\r\n            var existsIndex = state.selections.indexOf(+value);\r\n            if (existsIndex >= 0) {\r\n                state.selections.splice(existsIndex, 1);\r\n            } else {\r\n                state.selections.push(+value);\r\n                // quito el primero de la lista para agregar este!\r\n                if (state.selections.length > maxItems) {\r\n                    state.selections.splice(0, 1);\r\n                }\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n    _Item(): Product {\r\n        return this.props.productList.find(x => x.id === this.props.showingID) || {} as any;\r\n    }\r\n    render() {\r\n        const show = !(this.props.showingID === undefined || this.props.showingID === null);\r\n        const { selections } = this.state;\r\n        const Item = this._Item();\r\n        const opcionIDs = (Item.opciones || []).map(x => x.idOpcion);\r\n        const productList = this.props.productList.filter(x => opcionIDs.indexOf(x.id) >= 0);\r\n        return (<Modal\r\n            title=\"Crea tu combinación\"\r\n            onClose={this.handleClose}\r\n            show={show}\r\n            fullScreen={true}\r\n            closeButtonText={selections.length ? \"GUARDAR\" : \"SALIR\"}\r\n        >\r\n            <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\r\n                <Typography variant=\"h6\">{Item.nombre}</Typography>\r\n            </div>\r\n            <div style={{ paddingLeft: 10, paddingRight: 10, margin: \"auto\", width: \"calc(100% - 20px)\" }}>\r\n                <Grid container spacing={3}>\r\n                    {productList.map(x =>\r\n                        (<Grid key={x.id} item xs={12} sm={4}>\r\n                            <ItemCard\r\n                                {...x}\r\n                                onClick={this.toggleSelect}\r\n                                selected={selections.indexOf(x.id) >= 0}\r\n                            />\r\n                        </Grid>))}\r\n                </Grid>\r\n            </div>\r\n        </Modal>);\r\n    }\r\n}","import React from \"react\";\r\nimport { List, ListItem, Typography } from \"@material-ui/core\";\r\n\r\ninterface Props {\r\n    items: {\r\n        id?: number;\r\n        nombre: string,\r\n        cantidad: number;\r\n        pvp_final: number;\r\n        idReglaRegalo?: number;\r\n        componentes?: {\r\n            id?: number, nombre: string, cantidad: number\r\n        }[]\r\n    }[];\r\n    subtotal: number;\r\n    subtotal_con_descuento?: number;\r\n    total_pedido: number;\r\n    valor_envio: number;\r\n    gran_total: number;\r\n    show_next_discount?: boolean;\r\n    showComponentes?: boolean;\r\n    descuento?: DescuentoCalc;\r\n    LabelDescuentoComponent?: React.ReactElement;\r\n}\r\n\r\nexport default function ConfirmOrder(props: Props) {\r\n    var { items\r\n        , show_next_discount\r\n        , descuento\r\n        , valor_envio\r\n        , gran_total\r\n        , total_pedido\r\n        , subtotal\r\n    } = props;\r\n\r\n    var subtotal_con_descuentos = props.subtotal_con_descuento || 0;\r\n\r\n    if (!descuento) descuento = { porcentaje: 0, valor: 0 };\r\n    const mostrarDescuentos = show_next_discount && descuento.sgte_descuento_porcentaje;\r\n\r\n    const DESCUENTO_INCLUIDO_REGALOS = (descuento.valor + (items.filter(x => x.idReglaRegalo).reduce((a, b) => a + (b.pvp_final * b.cantidad), 0))).moneyRound();\r\n    const DESCUENTO_PORCENTAJE_INCLUIDO_REGALOS = subtotal_con_descuentos\r\n        && ((DESCUENTO_INCLUIDO_REGALOS / subtotal_con_descuentos) * 100).moneyRound();\r\n\r\n    return (<List>\r\n        {items.map((item, index) => <Row\r\n            key={item.id + \"-\" + index}\r\n            col1={item.cantidad}\r\n            col2={(item.idReglaRegalo ? \"🎁 \" : \"\") + item.nombre}\r\n            col3={(item.pvp_final * item.cantidad).toCurrency()}\r\n            componentes={props.showComponentes ? item.componentes : null}\r\n        />)}\r\n\r\n        <Row col1=\"SUBTOTAL (NO APLICA DESCUENTOS)\" col3={(subtotal - subtotal_con_descuentos).toCurrency()} />\r\n        <Row col1=\"SUBTOTAL (APLICA DESCUENTOS)\" col3={(subtotal_con_descuentos).toCurrency()} />\r\n\r\n        <Row\r\n            col1={props.LabelDescuentoComponent || `TU GANANCIA (${DESCUENTO_PORCENTAJE_INCLUIDO_REGALOS}%) EN ESTE PEDIDO`}\r\n            col3={DESCUENTO_INCLUIDO_REGALOS.toCurrency()}\r\n            color=\"primary\"\r\n        />\r\n\r\n\r\n        {mostrarDescuentos\r\n            && <ListItem>\r\n                <Typography variant=\"subtitle1\" color=\"secondary\">{`Obtén el ${descuento.sgte_descuento_porcentaje}% de descuento agregando ${descuento.sgte_descuento_falta.toCurrency()} más a tu pedido`}</Typography>\r\n            </ListItem>}\r\n        <Row col1=\"TOTAL DEL PEDIDO\" col3={total_pedido.toCurrency()} />\r\n\r\n        <Row col1={\"ENVÍO\"} col3={valor_envio.toCurrency()} />\r\n        <Row col1=\"VALOR A PAGAR\" variant=\"subtitle2\" col3={gran_total.toCurrency()} />\r\n    </List>);\r\n}\r\n\r\n\r\nfunction Row(props: {\r\n    col1: any,\r\n    col2?: string | number,\r\n    col3: string,\r\n    color?: any,\r\n    variant?: any,\r\n    componentes?: any[]\r\n}) {\r\n    const { col1, col2, col3, color, variant, componentes } = props;\r\n    return (<ListItem>\r\n        <div style={{ width: \"100%\" }}>\r\n            <div>\r\n                <div style={{ width: \"100%\", display: \"table\" }}>\r\n                    <Typography component=\"div\" color={color || \"initial\"} style={{ display: \"table-cell\", width: (col2 ? \"15%\" : \"75%\"), maxWidth: 100, textAlign: (col2 ? \"left\" : \"right\") }} variant={variant || \"body1\"}>{col1}</Typography>\r\n                    {col2 && <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"60%\" }} variant={variant || \"body1\"}>{col2}</Typography>}\r\n                    <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"25%\", maxWidth: 100, textAlign: \"right\" }} variant={variant || \"body1\"}>{col3}</Typography>\r\n                </div>\r\n            </div>\r\n\r\n            {(componentes && componentes.length)\r\n                ? (<div>\r\n                    {componentes.map(c => <Row\r\n                        key={c.id}\r\n                        col1={c.cantidad}\r\n                        col2={c.nombre}\r\n                        col3=\"\"\r\n                        variant=\"body2\"\r\n                        componentes={c.componentes}\r\n                    />)}\r\n                </div>)\r\n                : null}\r\n        </div>\r\n    </ListItem>)\r\n}","export function Totals(items: any[]) {\r\n    const result = {\r\n        total: 0,\r\n        cantidad: 0\r\n    }\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n        result.cantidad += item.cantidad;\r\n        result.total += (item.pvp_final * item.cantidad);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function EstimarDescuento(total: number, tablaDescuentos: Descuento[]) {\r\n    // de MAYOR a MENOR\r\n    var sorted = tablaDescuentos.sort((a, b) => b.montoDesde - a.montoDesde);\r\n    var founded = -1;\r\n    var results: DescuentoCalc = {\r\n        porcentaje: 0,\r\n        valor: 0,\r\n        sgte_descuento_porcentaje: 0,\r\n        sgte_descuento_falta: 0,\r\n        id: undefined\r\n    }\r\n    for (let i = 0; i < sorted.length; i++) {\r\n        const d = sorted[i];\r\n        if (total >= d.montoDesde) {\r\n            founded = i;\r\n            break;\r\n        }\r\n    }\r\n    if (founded >= 0) {\r\n        var desc = sorted[founded];\r\n        results.porcentaje = desc.porcentaje;\r\n        results.valor = (total * desc.porcentaje / 100);\r\n        results.id = desc.id;\r\n        // si no es el ultimo, busco al siguiente en la tabla\r\n    }\r\n    // si no existe, simulo que es el (MAXIMO+1), es decir esta fuera del rango\r\n    if (founded === -1) founded = sorted.length;\r\n    if ((founded - 1) >= 0) {\r\n        var next = sorted[founded - 1];\r\n        if (next) {\r\n            results.sgte_descuento_falta = next.montoDesde - total;\r\n            results.sgte_descuento_porcentaje = next.porcentaje;\r\n        }\r\n    }\r\n    return results;\r\n}\r\n\r\nexport function DocToString(doc: \"1\" | \"2\" | \"3\") {\r\n    if (!doc) doc = \"\" as any;\r\n    if (doc.toString() === \"1\") return \"RUC\";\r\n    if (doc.toString() === \"2\") return \"Cedula\";\r\n    if (doc.toString() === \"3\") return \"Pasaporte\";\r\n    return \"\";\r\n}\r\n\r\nexport function MonthToString(index: number) {\r\n    var months = [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sept\", \"Oct\", \"Nov\", \"Dic\"];\r\n    return months[index];\r\n}\r\n","export class ValidateInput {\r\n    static tel(value) {\r\n        if (!value) return;\r\n        if (value.length < 7) return \"El número de telefono debe tener al menos 7 digitos\";\r\n        for (let i = 0; i < value.length; i++) {\r\n            if (!(value[i] === \"+\" || isDigit(value[i]) || value[i].trim() === \"\")) {\r\n                return \"El número debe tener uno de estos formatos: '09123456789' o '+5931234567890'\";\r\n            }\r\n        }\r\n    }\r\n    static email(value) {\r\n        if (!value) return;\r\n        if (value.length < 5) return \"El email no está escrito correctamente\";\r\n        let twoParts = value.split(\"@\");\r\n        if (twoParts.length !== 2) return \"El email no está escrito correctamente\";\r\n        if (!(twoParts[1].indexOf(\".\") >= 0)) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\" \") >= 0) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\"\\t\") >= 0) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\"\\r\") >= 0) return \"El email no está escrito correctamente\";\r\n    }\r\n}\r\n\r\nexport function ValidarIdentificacion(value: string, documento: any) {\r\n    if (!value) value = \"\";\r\n    documento = +documento;\r\n    if (documento === 3) { return; }\r\n    if (documento === 1) {\r\n        if (value.length !== 13) return \"Número de RUC debe tener 13 digitos\";\r\n        if (value.length === 13 && value === \"9999999999999\") return;\r\n    }\r\n    if (documento === 2) {\r\n        if (value.length !== 10) return \"Número de Cedula debe tener 10 digitos\";\r\n    }\r\n    return \"\";\r\n}\r\n\r\nexport function isDigit(char) { return char >= \"0\" && char <= \"9\"; }\r\nfunction isNumber(obj) { return !isNaN(parseFloat(obj)) }\r\nfunction isEmptyOrNull(obj) {\r\n    if (obj === '' || obj == undefined || obj == null || obj == 'undefined') {\r\n        return true\r\n    } else {\r\n        return false;\r\n    }\r\n}","import React from \"react\";\r\nimport { TextField, TextFieldProps } from \"@material-ui/core\";\r\ninterface InputProps extends Omit<TextFieldProps, \"error\"> {\r\n    type?: string;\r\n    value?: string;\r\n    error?: string;\r\n    name?: string;\r\n    maxLength?: number;\r\n    style?: React.CSSProperties;\r\n}\r\n\r\nexport default function Input(props: InputProps) {\r\n    var { error, maxLength, ..._props } = props;\r\n    var error_props: any = {};\r\n\r\n    if (error) {\r\n        error_props.error = true;\r\n        error_props.helperText = error;\r\n    }\r\n\r\n    if (!_props.inputProps) _props.inputProps = {};\r\n    _props.inputProps.id = _props.name;\r\n    if (maxLength) _props.inputProps.maxLength = maxLength;\r\n    if (!_props.style) _props.style = {\r\n        margin: 10,\r\n        width: \"calc(100% - 20px)\"\r\n    }\r\n\r\n    return <TextField\r\n        {...error_props}\r\n        {..._props}\r\n    >{props.children}\r\n    </TextField>\r\n}","import React from \"react\";\r\nimport { TextField, Paper, Grid, Typography } from \"@material-ui/core\";\r\nimport { DocToString } from \"../../Utils/Calcs\";\r\nimport { ValidarIdentificacion, ValidateInput } from \"../../Utils/Validation\";\r\nimport Input from \"../Input\";\r\nexport default class Location extends React.PureComponent<DataProps, {}> {\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.props.onValueChange(name, value);\r\n    }\r\n    render() {\r\n\r\n        const { direccion, tipo_envio, ciudad, referencia, sector, visible,\r\n            documento, identificacion, razonSocial,\r\n            direccion_factura, telefono_factura, email_factura,\r\n            nombre_contacto, telefono_contacto, identificacion_contacto, documento_contacto\r\n        } = this.props;\r\n\r\n        let identificacion_e = identificacion\r\n            ? ValidarIdentificacion(identificacion, documento)\r\n            : \"\";\r\n        let telefono_e = ValidateInput.tel(telefono_factura);\r\n        let email_e = ValidateInput.email(email_factura);\r\n\r\n        let identificacion_contacto_e = identificacion_contacto\r\n            ? ValidarIdentificacion(identificacion_contacto, documento_contacto)\r\n            : \"\";\r\n        let telefono_contacto_e = ValidateInput.tel(telefono_contacto);\r\n\r\n        const mostrar_ciudad = tipo_envio !== \"DENTRO DE CIUDAD\" ? true : null;\r\n        const mostrar_datos_envio = tipo_envio !== \"PICK-UP\" ? true : null;\r\n\r\n        return (<Paper style={{ margin: \"auto\", height: \"100%\", width: \"100%\", padding: 10, marginTop: 10, display: visible ? \"block\" : \"none\" }}>\r\n\r\n            <Grid container >\r\n                <Grid item sm={6}>\r\n                    <Typography variant=\"subtitle1\" style={{ marginLeft: 10 }}>Datos de Envío</Typography>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"nombre_contacto\"\r\n                        inputProps={{ id: \"nombre_contacto\" }}\r\n                        value={nombre_contacto}\r\n                        onChange={this.handleChange}\r\n                        label=\"Nombre *\"\r\n                        multiline\r\n                        rows={2}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        name=\"documento_contacto\"\r\n                        value={documento_contacto}\r\n                        inputProps={{ id: \"documento_contacto\" }}\r\n                        variant=\"outlined\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Documento *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    >\r\n                        <option value=\"1\">{DocToString(\"1\")}</option>\r\n                        <option value=\"2\">{DocToString(\"2\")}</option>\r\n                        <option value=\"3\">{DocToString(\"3\")}</option>\r\n                    </TextField>\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"identificacion_contacto\"\r\n                        value={identificacion_contacto}\r\n                        error={identificacion_contacto_e}\r\n                        onChange={this.handleChange}\r\n                        type=\"phone\"\r\n                        maxLength={20}\r\n                        label={\"Numero de \" + DocToString(documento_contacto) + \" *\"}\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"telefono_contacto\"\r\n                        value={telefono_contacto}\r\n                        error={telefono_contacto_e}\r\n                        maxLength={20}\r\n                        onChange={this.handleChange}\r\n                        label=\"Telefono *\"\r\n                        type=\"phone\"\r\n                    />\r\n                    <TextField\r\n                        name=\"tipo_envio\"\r\n                        value={tipo_envio}\r\n                        inputProps={{ id: \"tipo_envio\" }}\r\n                        variant=\"outlined\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Tipo de Envío *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    >\r\n                        <option value=\"DENTRO DE CIUDAD\">ENVÍO A QUITO</option>\r\n                        <option value=\"ZONA CONTINENTAL\">ENVÍO AL RESTO DEL PAÍS</option>\r\n                        <option value=\"PICK-UP\">RETIRO GRATIS EN OFICINA QUITO</option>\r\n                        <option value=\"GALAPAGOS ISLA CRUZ - BALTRA\">GALAPAGOS ISLA CRUZ - BALTRA</option>\r\n                        <option value=\"GALAPAGOS ISLA ISABELA Y FERNANDINA\">GALAPAGOS ISLA ISABELA Y FERNANDINA</option>\r\n                    </TextField>\r\n                    {mostrar_datos_envio && (<>\r\n                        {mostrar_ciudad && <TextField\r\n                            variant=\"outlined\"\r\n                            name=\"ciudad\"\r\n                            inputProps={{ id: \"ciudad\" }}\r\n                            value={ciudad}\r\n                            onChange={this.handleChange}\r\n                            label=\"Ciudad *\"\r\n                            style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                        />}\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            name=\"sector\"\r\n                            inputProps={{ id: \"sector\" }}\r\n                            value={sector}\r\n                            onChange={this.handleChange}\r\n                            label=\"Sector *\"\r\n                            style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                        />\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            name=\"direccion\"\r\n                            inputProps={{ id: \"direccion\" }}\r\n                            value={direccion}\r\n                            onChange={this.handleChange}\r\n                            label=\"Direccion Exacta* \"\r\n                            multiline\r\n                            rows={3}\r\n                            style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                        />\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            name=\"referencia\"\r\n                            inputProps={{ id: \"referencia\" }}\r\n                            value={referencia}\r\n                            onChange={this.handleChange}\r\n                            label=\"Referencia\"\r\n                            multiline\r\n                            rows={2}\r\n                            style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                        />\r\n                    </>)}\r\n                </Grid>\r\n                <Grid item sm={6}>\r\n                    <Typography style={{ marginLeft: 10 }} variant=\"subtitle1\">Datos de Facturación</Typography>\r\n                    <TextField\r\n                        name=\"documento\"\r\n                        value={documento}\r\n                        inputProps={{ id: \"documento\" }}\r\n                        variant=\"outlined\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Documento *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    >\r\n                        <option value=\"1\">{DocToString(\"1\")}</option>\r\n                        <option value=\"2\">{DocToString(\"2\")}</option>\r\n                        <option value=\"3\">{DocToString(\"3\")}</option>\r\n                    </TextField>\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"identificacion\"\r\n                        value={identificacion}\r\n                        error={identificacion_e}\r\n                        onChange={this.handleChange}\r\n                        type=\"phone\"\r\n                        maxLength={20}\r\n                        label={\"Numero de \" + DocToString(documento) + \" *\"}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"razonSocial\"\r\n                        value={razonSocial}\r\n                        onChange={this.handleChange}\r\n                        label=\"Nombre / Empresa *\"\r\n                        inputProps={{ maxLength: 200, id: \"razonSocial\" }}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"direccion_factura\"\r\n                        value={direccion_factura}\r\n                        onChange={this.handleChange}\r\n                        label=\"Direccion *\"\r\n                        inputProps={{ maxLength: 300, id: \"direccion_factura\" }}\r\n                        multiline\r\n                        rows={2}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"telefono_factura\"\r\n                        value={telefono_factura}\r\n                        error={telefono_e}\r\n                        maxLength={20}\r\n                        onChange={this.handleChange}\r\n                        label=\"Telefono *\"\r\n                        type=\"phone\"\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"email_factura\"\r\n                        value={email_factura}\r\n                        error={email_e}\r\n                        maxLength={50}\r\n                        onChange={this.handleChange}\r\n                        label=\"Email *\"\r\n                        type=\"email\"\r\n                    />\r\n                </Grid>\r\n            </Grid >\r\n\r\n        </Paper >)\r\n    }\r\n}\r\ninterface DataProps extends Order_Datos_Envio, Order_Datos_Facturacion {\r\n    visible?: boolean,\r\n    onValueChange: (prop: string, value: string) => void\r\n} ","import React from \"react\";\r\nimport { CardActionArea, CardMedia, Card, Typography, IconButton } from \"@material-ui/core\";\r\nimport { Close, Image } from \"@material-ui/icons\";\r\ninterface Props {\r\n    src: string;\r\n    onChange(imageFile?: File): void;\r\n    onDelete?(): void;\r\n    className: string;\r\n    title?: string;\r\n    disabled?: boolean;\r\n    loading?: boolean;\r\n}\r\nexport default class ImageInput extends React.PureComponent<Props> {\r\n    COMPONENT_ID = \"IMAGE_INPUT_\" + new Date().valueOf()\r\n    handleClick = _ => {\r\n        document.getElementById(this.COMPONENT_ID).click();\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.currentTarget.files;\r\n        this.props.onChange((files && files.length && files[0]) || null);\r\n    }\r\n    render() {\r\n        const { src, title, className, loading, disabled, onDelete } = this.props;\r\n        return (<Card>\r\n            {onDelete && <div style={{ textAlign: \"right\" }}>\r\n                <IconButton onClick={onDelete}>\r\n                    <Close />\r\n                </IconButton>\r\n            </div>}\r\n            <CardActionArea disabled={disabled} onClick={this.handleClick} style={{ textAlign: \"center\" }} type=\"button\">\r\n                <input\r\n                    hidden={true}\r\n                    type=\"file\"\r\n                    onChange={this.handleChange}\r\n                    accept=\"image/*\"\r\n                    id={this.COMPONENT_ID}\r\n                />\r\n                {src\r\n                    ? <CardMedia component=\"img\" className={className} title={title || \"Imagen\"} image={src} />\r\n                    : <div className={className} style={{ display: \"table\", textAlign: \"center\", margin: \"auto\" }} >\r\n                        <div style={{ display: \"table-cell\", verticalAlign: \"middle\" }}>\r\n                            {loading ?\r\n                                <Typography variant=\"h3\">CARGANDO...</Typography>\r\n                                : <>\r\n                                    <Image />\r\n                                    <Typography>Aplasta aquí para subir una imagen</Typography>\r\n                                </>}\r\n                        </div>\r\n                    </div>}\r\n            </CardActionArea>\r\n        </Card>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Paper, Typography, TextField, Button, Divider, CircularProgress, Switch, Checkbox, FormControlLabel } from \"@material-ui/core\";\r\nimport ImageInput from \"../ImageInput\";\r\nexport default function (props: {\r\n    onValueChange: Function;\r\n    numeroTransaccion: string;\r\n    onImgChange(imageFile?: File, index?: number): void;\r\n    onImgDelete(index: number): void;\r\n    usarImagen?: boolean;\r\n    imgTransaccionList: { src: string, file: File, isLoading?: boolean }[];\r\n    items: any[];\r\n    onDone: any;\r\n    total_pagar: number;\r\n    loading: boolean;\r\n    visible: boolean;\r\n}): JSX.Element {\r\n\r\n    const PUEDE_CAMBIAR_A_NUMERO = null;\r\n    const comision_pendiente = 12;\r\n    const [utilizarComision, set_utilizarComision] = React.useState(false);\r\n\r\n    return (<Paper style={{ maxWidth: 400, padding: 10, marginTop: 10, height: \"100%\", marginLeft: \"auto\", marginRight: \"auto\", display: props.visible ? \"block\" : \"none\" }}>\r\n        <form onSubmit={props.onDone} style={{ textAlign: \"center\" }}>\r\n            <Typography style={{ marginTop: 10, marginBottom: 10, textAlign: \"center\" }} variant=\"h6\">\r\n                Total a Pagar : {(props.total_pagar - (utilizarComision ? comision_pendiente : 0)).toCurrency()}\r\n            </Typography>\r\n            <Divider />\r\n            <div style={{ padding: 20, paddingBottom: 0 }}>\r\n                <Typography variant=\"h6\" >Realiza tu pago mediante Transferencia o Deposito Bancario a la cuenta:</Typography>\r\n                <Typography>BANCO PICHINCHA Cta. Ahorros #2205511631</Typography>\r\n                <Typography>RUC. 1792627192001</Typography>\r\n                <Typography>COSMETICOSNATU CIA LTDA</Typography>\r\n                <Typography>pagos@natucosmetic.com</Typography>\r\n                <div style={{ marginTop: 10 }}>\r\n                    <Typography variant=\"h6\">O realiza tu pago con tarjeta de crédito:</Typography>\r\n                    {/*<!-- PayPal Logo -->*/}\r\n                    <table cellPadding=\"10\" cellSpacing=\"0\" style={{ textAlign: \"center\", border: 0, margin: \"auto\", padding: 0 }} >\r\n                        <tr>\r\n                            <td align=\"center\" style={{ padding: 0 }} >\r\n                                <a href=\"https://www.paypal.me/natucosmeticoficial\"\r\n                                    target=\"_blank\"\r\n                                    title=\"Paga con paypal aqui\"\r\n                                >\r\n                                    <img src=\"https://www.paypalobjects.com/webstatic/mktg/logo/AM_mc_vs_dc_ae.jpg\" alt=\"PayPal Acceptance Mark\"></img>\r\n                                </a>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                    {/*<!-- PayPal Logo -->*/}\r\n                </div>\r\n            </div>\r\n            {PUEDE_CAMBIAR_A_NUMERO && <FormControlLabel\r\n                label=\"Subir una Imagen\"\r\n                control={<Switch\r\n                    disabled={props.loading}\r\n                    checked={Boolean(props.usarImagen)}\r\n                    onChange={e => props.onValueChange(\"usarImagen\", e.currentTarget.checked)}\r\n                />}\r\n            />}\r\n\r\n            {PUEDE_CAMBIAR_A_NUMERO && !props.usarImagen && <TextField\r\n                style={{ width: \"calc(100% - 20px)\", margin: 10 }}\r\n                variant=\"outlined\"\r\n                inputMode=\"numeric\"\r\n                inputProps={{ id: \"numeroTransaccion\" }}\r\n                onChange={event => props.onValueChange(\"numeroTransaccion\", event.currentTarget.value)}\r\n                value={props.numeroTransaccion}\r\n                label=\"Numero de Comprobante *\"\r\n            />}\r\n            {props.usarImagen && <ImageList\r\n                items={props.imgTransaccionList}\r\n                onImgChange={props.onImgChange}\r\n                onImgDelete={props.onImgDelete}\r\n            />}\r\n\r\n            <Button type=\"submit\" disabled={props.loading} variant=\"outlined\" color=\"primary\" style={{ margin: 10, width: \"calc(100% - 20px)\" }}>\r\n                {props.loading ? <CircularProgress size={25} /> : \"ENVIAR\"}\r\n            </Button>\r\n        </form>\r\n    </Paper >)\r\n}\r\n\r\nfunction ImageList(props: {\r\n    items: { src: string, file: File, isLoading?: boolean }[],\r\n    loading?: boolean;\r\n    onImgChange(File?, index?: number): void;\r\n    onImgDelete(index: number): void;\r\n}) {\r\n    const { items } = props;\r\n    return (<>\r\n        {items.map((item, index) => (<ImageInput key={index}\r\n            loading={item.isLoading}\r\n            disabled={props.loading}\r\n            className=\"transaction-img\"\r\n            onChange={file => props.onImgChange(file, index)}\r\n            onDelete={() => props.onImgDelete(index)}\r\n            src={item.src}\r\n        />))}\r\n        <ImageInput\r\n            loading={false}\r\n            disabled={props.loading}\r\n            className=\"transaction-img\"\r\n            onChange={file => props.onImgChange(file)}\r\n            src=\"\"\r\n        />\r\n    </>);\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, TextField, DialogActions, Button, CircularProgress } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(class Survey extends React.Component<any, any> {\r\n    state = { txt1: \"\", txt2: \"\", loading: false, id: \"\" };\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.state.id = props.match.params.id;\r\n    }\r\n    handleChange(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    unblock() { }\r\n    componentDidMount() {\r\n        this.unblock = this.props.history.block = () =>\r\n            this.state.loading ? \"Espera un momento, tu información se está guardando\" : null\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        const { txt1, txt2, loading, id } = this.state;\r\n        if (loading) return;\r\n        if (!txt1 && !txt2) {\r\n            return this.props.history.goBack();\r\n        }\r\n        this.setState({ loading: true });\r\n        API.ActionOrder(id, {\r\n            action: \"SURVEY\",\r\n            value: [txt1, txt2]\r\n        }).then(x => {\r\n            this.setState({ loading: false });\r\n            this.props.history.goBack();\r\n        }).catch(ex => {\r\n            this.setState({ loading: false });\r\n            alert(ex.message);\r\n        });\r\n    }\r\n    handleClose() {\r\n        if (this.state.loading) return;\r\n        this.props.history.goBack();\r\n    }\r\n    render() {\r\n        const { props } = this;\r\n        const { txt1, txt2, loading } = this.state;\r\n        return (<Dialog open={true} onClose={this.handleClose}>\r\n            <form onSubmit={this.handleSubmit}>\r\n                <DialogContent>\r\n                    <Typography style={{ textAlign: \"center\" }} variant=\"h6\" >{props.title}</Typography>\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">Cómo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                    <TextField autoFocus={true} name=\"txt1\" multiline rows={2} label=\"Escribe tu respuesta\" value={txt1} onChange={this.handleChange} fullWidth />\r\n\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">Compártenos alguna experiencia que hayan tenido tus clientes usando nuestros productos</Typography>\r\n                    <TextField name=\"txt2\" multiline rows={3} label=\"Escribe tu respuesta\" value={txt2} onChange={this.handleChange} fullWidth />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button type=\"submit\" variant=\"outlined\" >{loading ? <CircularProgress size={25} /> : \"GUARDAR\"}</Button>\r\n                </DialogActions>\r\n            </form>\r\n        </Dialog>)\r\n    }\r\n});","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, DialogTitle, DialogActions, Button } from \"@material-ui/core\";\r\n\r\nexport default function Message(props: {\r\n    title?: string,\r\n    message?: string,\r\n    info?: string,\r\n    onClose: (ev) => void,\r\n    children?: any\r\n}) {\r\n    const { title, message, info, onClose } = props;\r\n    return (<Dialog open={Boolean(message) || Boolean(props.children)} onClose={onClose}>\r\n        <DialogTitle>{title}</DialogTitle>\r\n        <DialogContent style={{ textAlign: \"center\" }}>\r\n            {props.children || (<div>\r\n                <Typography variant=\"subtitle1\">{message}</Typography>\r\n                <Typography variant=\"body1\">{info}</Typography>\r\n            </div>)}\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button type=\"button\" onClick={props.onClose} >SALIR</Button>\r\n        </DialogActions>\r\n    </Dialog>);\r\n}","import React from \"react\";\r\nimport Message from \"./Message\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(class RouteMessage extends React.PureComponent<any> {\r\n    unblock = () => null;\r\n    componentDidMount() {\r\n        var params: any = new URLSearchParams(this.props.location.search);\r\n        var focusafter = params.get(\"focusafter\");\r\n        if (focusafter)\r\n            this.unblock = this.props.history.block(x => {\r\n                setTimeout(function () {\r\n                    window.requestAnimationFrame(function () {\r\n                        try {\r\n                            document.getElementById(focusafter).focus();\r\n                        } catch (ex) { }\r\n                    });\r\n                }, 100);\r\n            });\r\n    }\r\n    componentWillUnmount() {\r\n        this.unblock && this.unblock();\r\n    }\r\n    render() {\r\n        var params: any = new URLSearchParams(this.props.location.search);\r\n        return (<Message title={params.get(\"a\")} message={params.get(\"b\")} onClose={x => this.props.history.goBack()} />)\r\n    }\r\n});","import React from \"react\";\r\nimport { Typography, List, ListItem, ListItemSecondaryAction, ListItemText, IconButton } from \"@material-ui/core\";\r\nimport Modal from \"../Modal\";\r\nimport { Delete } from \"@material-ui/icons\";\r\n\r\ninterface Props {\r\n    productList: Product[];\r\n    selections: { [idProducto: number]: number[][] };\r\n    onDeleteSelection: (DoneObject?) => void;\r\n    id: number;\r\n}\r\n\r\nexport default function ProductSelections(props: Props) {\r\n\r\n    const { id, productList, selections } = props;\r\n    const show = !(id === undefined || id === null);\r\n    const Item = productList.find(x => x.id === +id) || {} as Product;\r\n    const Rows = ((selections || {})[id] || []);\r\n\r\n    function deletionClick(event) {\r\n        const index = +event.currentTarget.value;\r\n        if (index === null || index === undefined || isNaN(index)) return;\r\n        props.onDeleteSelection({ id, index });\r\n    }\r\n\r\n    return (<Modal\r\n        title=\"Elimina una combinación\"\r\n        onClose={props.onDeleteSelection}\r\n        show={show}\r\n        fullScreen={true}\r\n    >\r\n        <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\r\n            <Typography variant=\"h6\">{Item.nombre}</Typography>\r\n        </div>\r\n        <div style={{ paddingLeft: 10, paddingRight: 10, margin: \"auto\", width: \"calc(100% - 20px)\" }}>\r\n            <List>\r\n                {Rows.map((r, index) => <ListItem>\r\n                    <ListItemText>\r\n                        {r.map(idOpcion => <Typography>{(\r\n                            productList.find(x => x.id === idOpcion) ||\r\n                            { nombre: `id ${idOpcion} - Not Found` }\r\n                        ).nombre}\r\n                        </Typography>)}\r\n                    </ListItemText>\r\n                    <ListItemSecondaryAction>\r\n                        <IconButton onClick={deletionClick} value={index}>\r\n                            <Delete />\r\n                        </IconButton>\r\n                    </ListItemSecondaryAction>\r\n                </ListItem>)}\r\n            </List>\r\n        </div>\r\n    </Modal>);\r\n}\r\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport API from \"../../../../Services/API\";\r\n\r\n\r\nconst GetProductsThunk = createAsyncThunk(\r\n    \"Order/FetchData\"\r\n    , function () {\r\n        return Promise.all([API.GetProducts(), API.GetGiftRules()]);\r\n    }\r\n)\r\n\r\nexport default GetProductsThunk;","\r\nexport default class OrderState {\r\n    productList: Product[] = [];\r\n    productoSelecciones: { [idProducto: number]: number[][] } = {};\r\n    descuentoAplica: DescuentoCalc = null;\r\n    subtotal: number = 0;\r\n\r\n    tipo_envio: TIPO_ENVIO = \"PICK-UP\";\r\n    direccion: string = \"\";\r\n    sector: string = \"\";\r\n    ciudad: string = \"\";\r\n    referencia: string = \"\";\r\n\r\n    documento: \"1\" | \"2\" | \"3\" = \"1\";\r\n    razonSocial: string = \"\";\r\n    identificacion: string = \"\";\r\n    telefono_factura: string = \"\";\r\n    direccion_factura: string = \"\";\r\n    email_factura: string = \"\";\r\n\r\n    documento_contacto: \"1\" | \"2\" | \"3\" = \"2\";\r\n    identificacion_contacto: string = \"\";\r\n    nombre_contacto: string = \"\";\r\n    telefono_contacto: string = \"\";\r\n\r\n    observacion: string = \"\";\r\n    numeroTransaccion: string = \"\";\r\n    imgTransaccionList = [] as { src: string, file: File, isLoading?: boolean }[];\r\n\r\n    usarImagen: boolean = true;\r\n}\r\n","import Preferences from \"../../../Utils/Preferences\";\r\nimport OrderState from \"./OrderState\";\r\n\r\nexport default function (): [Partial<OrderState>, { cantidad: number, id: number }[]] {\r\n    try {\r\n        var new_state = new OrderState();\r\n        var updates = {} as Partial<OrderState>;\r\n        var choosen = [] as { cantidad: number, id: number }[];\r\n\r\n        const stored_direccion = Preferences.Get(\"direccion\") || {};\r\n        for (const key in stored_direccion) {\r\n            if (new_state.hasOwnProperty(key) && stored_direccion[key]) {\r\n                updates[key] = stored_direccion[key];\r\n            }\r\n        }\r\n\r\n        const stored_factura = Preferences.Get(\"factura\") || {};\r\n        for (const key in stored_factura) {\r\n            if (new_state.hasOwnProperty(key) && stored_factura[key]) {\r\n                updates[key] = stored_factura[key];\r\n            }\r\n        }\r\n\r\n        const before = Preferences.Get(\"current_order\") || {};\r\n        for (const key in before) {\r\n            if (new_state.hasOwnProperty(key)) {\r\n                updates[key] = before[key];\r\n            }\r\n        }\r\n        if (before && before.choosen && before.choosen.length) choosen = before.choosen;\r\n    } catch (ex) { }\r\n    return [updates, choosen];\r\n}\r\n","export default function (file: Blob): Promise<string> {\r\n    return new Promise((resolve, reject) => {\r\n        if (file.size > (15 * 1024 * 1024)) {\r\n            var mb = (file.size / 1024 / 1024).toFixed(2);\r\n            return reject({ message: `Tu imagen (${mb} Mb) es muy pesada, selecciona otra máximo de 15 Mb` });\r\n        }\r\n        setTimeout(x => {\r\n            var reader = new FileReader();\r\n            reader.onload = function (event) {\r\n                resolve(event.target.result as string);\r\n            }\r\n            reader.onerror = reject;\r\n            reader.readAsDataURL(file);\r\n        }, 100);\r\n    });\r\n}\r\nexport function ImgFileToObject(file: Blob): Promise<{ ext: string, base64: string }> {\r\n    return new Promise((resolve, reject) => {\r\n        var reader = new FileReader();\r\n        reader.onload = function (event) {\r\n            resolve({\r\n                base64: base64ArrayBuffer(event.target.result as any),\r\n                ext: file.type.split(\"/\")[1]\r\n            });\r\n        }\r\n        reader.onerror = reject;\r\n        reader.readAsArrayBuffer(file);\r\n    });\r\n}\r\n\r\nfunction base64ArrayBuffer(arrayBuffer: ArrayBuffer): string {\r\n    var base64 = ''\r\n    var encodings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\r\n\r\n    var bytes = new Uint8Array(arrayBuffer);\r\n    var byteLength = bytes.byteLength;\r\n    var byteRemainder = byteLength % 3;\r\n    var mainLength = byteLength - byteRemainder;\r\n\r\n    var a, b, c, d;\r\n    var chunk;\r\n\r\n    // Main loop deals with bytes in chunks of 3\r\n    for (var i = 0; i < mainLength; i = i + 3) {\r\n        // Combine the three bytes into a single integer\r\n        chunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2]\r\n\r\n        // Use bitmasks to extract 6-bit segments from the triplet\r\n        a = (chunk & 16515072) >> 18 // 16515072 = (2^6 - 1) << 18\r\n        b = (chunk & 258048) >> 12 // 258048   = (2^6 - 1) << 12\r\n        c = (chunk & 4032) >> 6 // 4032     = (2^6 - 1) << 6\r\n        d = chunk & 63               // 63       = 2^6 - 1\r\n\r\n        // Convert the raw binary segments to the appropriate ASCII encoding\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + encodings[d]\r\n    }\r\n\r\n    // Deal with the remaining bytes and padding\r\n    if (byteRemainder === 1) {\r\n        chunk = bytes[mainLength]\r\n\r\n        a = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2\r\n\r\n        // Set the 4 least significant bits to zero\r\n        b = (chunk & 3) << 4 // 3   = 2^2 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + '=='\r\n    } else if (byteRemainder === 2) {\r\n        chunk = (bytes[mainLength] << 8) | bytes[mainLength + 1]\r\n\r\n        a = (chunk & 64512) >> 10 // 64512 = (2^6 - 1) << 10\r\n        b = (chunk & 1008) >> 4 // 1008  = (2^6 - 1) << 4\r\n\r\n        // Set the 2 least significant bits to zero\r\n        c = (chunk & 15) << 2 // 15    = 2^4 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + '='\r\n    }\r\n    return base64\r\n}","import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport ImageReader from \"../../../../Utils/ImageReader\";\r\n\r\nconst LoadingMessageWindow = document.getElementById(\"loading-full-message\");\r\nconst LoadImageThunk = createAsyncThunk(\r\n    \"Image/LoadImage\", function (params: { imgFile: File, index?: number, reportError?(message: string): void }) {\r\n\r\n        const { reportError, imgFile, index } = params;\r\n\r\n        return new Promise(resolve => {\r\n\r\n            LoadingMessageWindow.style.display = \"none\";\r\n\r\n            if (window.requestAnimationFrame)\r\n                return window.requestAnimationFrame(() => resolve(void 0));\r\n\r\n            resolve(void 0);\r\n\r\n        }).then(() => ImageReader(imgFile)\r\n            .then(imgUrl => {\r\n                LoadingMessageWindow.style.display = \"none\";\r\n                return { imgUrl, imgFile, index };\r\n            }).catch(ex => {\r\n                LoadingMessageWindow.style.display = \"none\";\r\n                reportError(ex.message);\r\n                throw ex;\r\n            }));\r\n    });\r\n\r\nexport default LoadImageThunk;\r\n\r\n/*\r\ndocument.getElementById(\"loading-full-message\").style.display = \"block\";\r\nif (window.requestAnimationFrame) {\r\nwindow.requestAnimationFrame(() => this._renderImage(imageFile));\r\n} else {\r\nthis._renderImage(imageFile);\r\n}\r\n}\r\nprivate _renderImage(imageFile) {\r\nImageReader(imageFile)\r\n    .then(imgTransaccion => {\r\n        this.setState({ imgTransaccion, imageFile }, () => {\r\n            document.getElementById(\"loading-full-message\").style.display = \"none\";\r\n        });\r\n    }).catch(ex => {\r\n        document.getElementById(\"loading-full-message\").style.display = \"none\";\r\n        this.failed_msg(\"No se pudo cargar tu imagen. \" + ex.message);\r\n    });\r\n}*/","import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport Preferences from \"../../../../Utils/Preferences\";\r\nimport { RootState } from \"../Store\";\r\n\r\nconst PREFERENCES_KEY = \"current_order\";\r\n\r\nconst LocalStoreOrder = createAsyncThunk(\"pedido/LocalStoreOrder\", function (params: { clean?: boolean, reportCompleted?: Function }, ThunkAPI) {\r\n\r\n    if (params.clean) {\r\n        if (params.reportCompleted) params.reportCompleted();\r\n        return Promise.resolve(Preferences.Set(PREFERENCES_KEY));\r\n    }\r\n\r\n    const state = (ThunkAPI.getState() as RootState).Order.data;\r\n    // actualizar todo!\r\n    var choosen = state.productList.filter(x => x.cantidad).map(x => ({ id: x.id, cantidad: x.cantidad }));\r\n\r\n    const { numeroTransaccion, observacion,\r\n        direccion, ciudad, sector, referencia,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura, tipo_envio,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto, productoSelecciones\r\n    } = state;\r\n\r\n    Preferences.Set(PREFERENCES_KEY, {\r\n        numeroTransaccion, direccion, ciudad, choosen,\r\n        sector, observacion, referencia,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura, tipo_envio,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto, productoSelecciones\r\n    });\r\n\r\n    params.reportCompleted && params.reportCompleted();\r\n    return Promise.resolve();\r\n\r\n});\r\nexport default LocalStoreOrder;\r\n","export function isEmpty(value: any) {\r\n    if (value === null) return true;\r\n    if (value === undefined) return true;\r\n    if (value === \"\") return true;\r\n    if (!value.toString().length) return true;\r\n    return false;\r\n}","import API from \"../../../../Services/API\";\r\nimport { DocToString } from \"../../../../Utils/Calcs\";\r\nimport { ValidarIdentificacion, ValidateInput } from \"../../../../Utils/Validation\";\r\nimport Preferences from \"../../../../Utils/Preferences\";\r\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport { mapOrderStateProps } from \"../../mapOrderState\";\r\nimport { ImgFileToObject } from \"../../../../Utils/ImageReader\";\r\nimport { isEmpty } from \"../../../../lib/ValueChecks\";\r\n\r\n\r\nconst OrderSaveThunk = createAsyncThunk(\r\n    \"Order/SaveOrderIntoAPI\", async function (params: {\r\n        order: mapOrderStateProps[\"order\"]\r\n        , reportError(message: Error, propertyName?: string): void\r\n            , reportCompleted(id: number): void\r\n    }) {\r\n    const { order, reportError, reportCompleted } = params;\r\n    try {\r\n        const error = ValidateSave(order);\r\n        if (error) {\r\n            if (error.productList) throw {\r\n                message: error.productList,\r\n                name: \"ProductsValidationError\"\r\n            };\r\n\r\n            var keys = Object.keys(error);\r\n            if (keys.length) {\r\n                if ([\r\n                    \"ciudad\", \"referencia\", \"direccion\", \"sector\", \"tipo_envio\",\r\n                    \"identificacion\", \"documento\", \"razonSocial\",\r\n                    \"tipo_envio\", \"direccion_factura\", \"telefono_factura\", \"email_factura\",\r\n                    \"identificacion_contacto\", \"nombre_contacto\", \"telefono_contacto\"\r\n                ].indexOf(keys[0]) >= 0) throw {\r\n                    message: error[keys[0]],\r\n                    propertyName: keys[0],\r\n                    name: \"OrderDataValidationError\"\r\n                };\r\n\r\n                throw {\r\n                    message: error[keys[0]],\r\n                    propertyName: keys[0],\r\n                    name: \"OrderValidationError\"\r\n                };\r\n            }\r\n        }\r\n\r\n        const { observacion, tipo_envio,\r\n            documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n            documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n            descuentoAplica, usarImagen, productoSelecciones,\r\n            imgTransaccionList,\r\n            subtotal, envio, total\r\n        } = order;\r\n\r\n        let { ciudad, sector, direccion, referencia } = order;\r\n        if (tipo_envio === \"PICK-UP\") {\r\n            ciudad = \"\";\r\n            sector = \"\";\r\n            direccion = \"\";\r\n            referencia = \"\";\r\n        }\r\n        if (tipo_envio === \"DENTRO DE CIUDAD\") {\r\n            ciudad = \"QUITO\";\r\n        }\r\n\r\n        if (usarImagen) {\r\n            var filesTransaccion = await Promise.all(imgTransaccionList.map(x => ImgFileToObject(x.file)));\r\n        } else {\r\n            var numeroTransaccion = order.numeroTransaccion;\r\n        }\r\n        const { id } = await API.SaveOrder({\r\n            ciudad, sector, direccion, observacion, referencia, tipo_envio,\r\n            documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n            documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n            detalle: order.detalle.map(x => ({\r\n                ...x\r\n                , idProducto: x.id\r\n                , cantidad: x.cantidad as number\r\n                , descuentoPorcentaje: x.idReglaRegalo\r\n                    ? 100\r\n                    : (x.aplica_descuento ? (descuentoAplica && descuentoAplica.porcentaje) : 0)\r\n                , descuentoTotal: x.idReglaRegalo\r\n                    ? (x.cantidad * x.pvp_final)\r\n                    : 0\r\n            })).map(x => {\r\n                delete x.id;\r\n                if (x.descuentoPorcentaje && !x.descuentoTotal) {\r\n                    x.descuentoTotal = ((x.cantidad * x.pvp_final) * x.descuentoPorcentaje) / 100;\r\n                    x.descuentoTotal = x.descuentoTotal.moneyRound();\r\n                }\r\n                return x;\r\n            }),\r\n            numeroTransaccion,\r\n            filesTransaccion,\r\n\r\n            subtotal,\r\n            envio,\r\n            regaloTotal: order.detalle.reduce((a, b) => a + (b.idReglaRegalo ? (b.pvp_final * b.cantidad) : 0), 0).moneyRound(),\r\n            baseIva: 0,\r\n            iva: 0,\r\n            total,\r\n\r\n            descuentoPorcentaje: descuentoAplica && descuentoAplica.porcentaje,\r\n            descuentoTotal: descuentoAplica && descuentoAplica.valor,\r\n            productoSelecciones\r\n        });\r\n        Preferences.Set(\"current_order\");\r\n        Preferences.Set(\"direccion\", {\r\n            direccion, ciudad, sector, referencia, tipo_envio,\r\n            documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        });\r\n        Preferences.Set(\"factura\", {\r\n            identificacion, documento, razonSocial,\r\n            telefono_factura, direccion_factura, email_factura,\r\n        });\r\n        reportCompleted(id);\r\n        return id;\r\n    } catch (ex) {\r\n        reportError(ex);\r\n        throw ex;\r\n    }\r\n});\r\n\r\n\r\n\r\nfunction ValidateSave(order: mapOrderStateProps[\"order\"]) {\r\n    var { numeroTransaccion, ciudad, sector, direccion, tipo_envio,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        email_factura, usarImagen, imgTransaccionList, detalle\r\n    } = order;\r\n\r\n    var results: any = {};\r\n\r\n    if (!detalle.length) return { productList: \"Debes elegir por lo menos un producto\" };\r\n\r\n    if (isEmpty(tipo_envio)) results.tipo_envio = \"Selecciona el tipo de envío\";\r\n\r\n    if ([\"PICK-UP\", \"DENTRO DE CIUDAD\"].indexOf(tipo_envio) < 0 && isEmpty(ciudad)) results.ciudad = \"Digita la ciudad\";\r\n    if (tipo_envio !== \"PICK-UP\" && isEmpty(sector)) results.sector = \"Digita el sector\";\r\n    if (tipo_envio !== \"PICK-UP\" && isEmpty(direccion)) results.direccion = \"Digita la direccion\";\r\n\r\n    if (isEmpty(documento_contacto)) results.documento_contacto = \"Selecciona el documento de identificación de la persona que recibe\";\r\n    if (isEmpty(identificacion_contacto)) {\r\n        results.identificacion_contacto = \"Digita el número de \" + DocToString(documento_contacto) + \" de la persona que recibe\";\r\n    } else {\r\n        let error = ValidarIdentificacion(identificacion_contacto, documento_contacto)\r\n        if (error) results.identificacion_contacto = \"La identificación de la persona que recibe es incorrecta: \" + error;\r\n    }\r\n    if (isEmpty(nombre_contacto)) results.nombre_contacto = \"Digita el nombre de la persona que recibe\";\r\n    if (isEmpty(telefono_contacto)) {\r\n        results.telefono_contacto = \"Digita el numero de Telefono de la persona que recibe\";\r\n    } else {\r\n        let error = ValidateInput.tel(telefono_contacto);\r\n        if (error) results.telefono_contacto = \"Telefono de persona que recibe inválido: \" + error;\r\n    }\r\n\r\n\r\n    if (isEmpty(documento)) results.documento = \"Selecciona un documento de identificación\";\r\n    if (isEmpty(identificacion)) {\r\n        results.identificacion = \"Digita el número de \" + DocToString(documento) + \" de facturación\";\r\n    } else {\r\n        let error = ValidarIdentificacion(identificacion, documento)\r\n        if (error) results.identificacion = \"La identificación de facturación está incorrecta: \" + error;\r\n    }\r\n    if (isEmpty(razonSocial)) results.razonSocial = \"Digita la Razon Social de la factura\";\r\n    if (isEmpty(telefono_factura)) {\r\n        results.telefono_factura = \"Digita el número de Telefono de facturación\";\r\n    } else {\r\n        let error = ValidateInput.tel(telefono_factura);\r\n        if (error) results.telefono_factura = \"Telefono de facturación inválido: \" + error;\r\n    }\r\n    if (isEmpty(direccion_factura)) results.direccion_factura = \"Digita la dirección de facturación\";\r\n    if (isEmpty(email_factura)) results.email_factura = \"Digita el email de facturación\";\r\n    if (isEmpty(email_factura)) {\r\n        results.email_factura = \"Digita el email de facturación\";\r\n    } else {\r\n        let error = ValidateInput.email(email_factura);\r\n        if (error) results.email_factura = error;\r\n    }\r\n\r\n    if (usarImagen) {\r\n        if (!(imgTransaccionList && imgTransaccionList.length)) results.imgTransaccionList = \"Agrega la imagen del comprobante de pago\";\r\n    } else {\r\n        if (isEmpty(numeroTransaccion)) results.numeroTransaccion = \"Digita el numero de comprobante de pago\";\r\n    }\r\n\r\n    if (Object.keys(results).length) return results;\r\n    return null;\r\n}\r\n\r\nexport default OrderSaveThunk;","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport OrderState from \"../lib/OrderState\";\r\nimport RecoverStoredOrder from \"../lib/RecoverStoredOrder\";\r\nimport FetchOrderData from \"./Thunks/FetchOrderDataThunk\";\r\nimport LoadImageThunk from \"./Thunks/LoadImageThunk\";\r\nimport LocalStoreOrder from \"./Thunks/LocalStorePedido\";\r\nimport OrderSaveThunk from \"./Thunks/OrderSaveThunk\";\r\n\r\nconst OrderReducer = createSlice({\r\n    name: \"Order\",\r\n    reducers: {\r\n        updateCurrentTab(state, action: PayloadAction<TabName>) {\r\n            if (state.status !== \"save-order:loading\")\r\n                state.currentTab = action.payload;\r\n        },\r\n        changeProductQuantity(state, action: PayloadAction<{ Id: number, type: \"+\" | \"-\" }>) {\r\n            change_cantidad_item(state, action.payload.Id, action.payload.type);\r\n            state.isDirty = true;\r\n        },\r\n        changeDataValue(state, action: PayloadAction<{ name: keyof typeof state[\"data\"], value: any }>) {\r\n            const { name, value } = action.payload;\r\n            state.data[name as any] = value;\r\n            state.isDirty = true;\r\n        },\r\n        changeProductPrice(state, action: PayloadAction<{ id: number, pvp_final: number }>) {\r\n            const { pvp_final, id } = action.payload;\r\n            var found = state.data.productList.find(x => x.id === id);\r\n            if (found)\r\n                found.pvp_final = pvp_final;\r\n            state.isDirty = true;\r\n        },\r\n        addProductSelection(state, action: PayloadAction<{ id: number, selections: number[] }>) {\r\n            const { id, selections } = action.payload;\r\n            if (!state.data.productoSelecciones.hasOwnProperty(id)) {\r\n                state.data.productoSelecciones[id] = [];\r\n            }\r\n            state.data.productoSelecciones[id].push(selections);\r\n            state.isDirty = true;\r\n        },\r\n        removeProductSelection(state, action: PayloadAction<{ id: number, index: number }>) {\r\n            const { id, index } = action.payload;\r\n            if (state.data.productoSelecciones.hasOwnProperty(id)) {\r\n                var exists = state.data.productoSelecciones[id][index];\r\n                if (exists) state.data.productoSelecciones[id].splice(index, 1);\r\n            }\r\n            state.isDirty = true;\r\n        },\r\n        deleteImgTransaccion(state, action: PayloadAction<number>) {\r\n            const index = action.payload;\r\n            const item = state.data.imgTransaccionList[index];\r\n            if (item) state.data.imgTransaccionList.splice(index, 1);\r\n        }\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(FetchOrderData.pending, (state) => {\r\n                state.status = \"fetch-data:loading\";\r\n            })\r\n            .addCase(FetchOrderData.rejected, (state, payload) => {\r\n                state.status = \"fetch-data:error\";\r\n                state.error = payload.error.message;\r\n            })\r\n            .addCase(FetchOrderData.fulfilled, (state, action) => {\r\n                const [products, rules] = action.payload;\r\n                state.status = \"fetch-data:completed\";\r\n                state.data.productList = products.map(x => ({ ...x, cantidad: 0 }));\r\n                state.giftRules = rules;\r\n                const [updates, choosen] = RecoverStoredOrder();\r\n                Object.assign(state.data, updates);\r\n                for (const item of choosen) {\r\n                    for (let i = 0; i < item.cantidad; i++) {\r\n                        change_cantidad_item(state, item.id, \"+\");\r\n                    }\r\n                }\r\n            })\r\n\r\n\r\n            .addCase(LoadImageThunk.pending, state => {\r\n                state.status = \"image:loading\";\r\n            })\r\n            .addCase(LoadImageThunk.fulfilled, (state, action) => {\r\n                state.status = \"image:completed\";\r\n                const item = {\r\n                    src: action.payload.imgUrl\r\n                    , file: action.payload.imgFile\r\n                };\r\n                const index = action.payload.index;\r\n                if (state.data.imgTransaccionList[index]) {\r\n                    state.data.imgTransaccionList[index] = item;\r\n                } else {\r\n                    state.data.imgTransaccionList.push(item);\r\n                }\r\n\r\n                state.isDirty = true;\r\n            })\r\n            .addCase(LoadImageThunk.rejected, (state, error) => {\r\n                state.status = \"image:error\";\r\n                state.error = error.error.message;\r\n\r\n\r\n            }).addCase(LocalStoreOrder.fulfilled, (state) => {\r\n                state.isDirty = false;\r\n            })\r\n\r\n\r\n            .addCase(OrderSaveThunk.pending, (state) => {\r\n                state.status = \"save-order:loading\";\r\n            })\r\n            .addCase(OrderSaveThunk.rejected, (state, action) => {\r\n                state.status = \"save-order:error\";\r\n                state.error = action.error.message;\r\n                if (action.error.name === \"OrderDataValidationError\") {\r\n                    state.currentTab = \"OrderData\";\r\n                }\r\n                if (action.error.name === \"ProductsValidationError\") {\r\n                    state.currentTab = \"ProductList\";\r\n                }\r\n            })\r\n            .addCase(OrderSaveThunk.fulfilled, (state) => {\r\n                state.isDirty = false;\r\n                state.status = \"save-order:completed\";\r\n                const [updates] = RecoverStoredOrder();\r\n                state.data = Object.assign({}, new OrderState(), updates, {\r\n                    productList: state.data.productList.map(x => ({ ...x, cantidad: 0 }))\r\n                });\r\n                state.currentTab = \"ProductList\";\r\n            });\r\n    },\r\n    initialState: {\r\n        currentTab: \"ProductList\" as TabName\r\n        , isDirty: false\r\n        , status: \"\" as \"\" |\r\n            \"fetch-data:loading\" | \"fetch-data:completed\" | \"fetch-data:error\" |\r\n            \"save-order:loading\" | \"save-order:completed\" | \"save-order:error\" |\r\n            \"image:loading\" | \"image:completed\" | \"image:error\"\r\n        , error: undefined as string\r\n        , data: Object.assign({}, new OrderState())\r\n        , giftRules: [] as GiftRule[]\r\n    }\r\n});\r\n\r\n\r\n\r\nfunction change_cantidad_item(state: ReturnType<typeof OrderReducer[\"getInitialState\"]>, Id: number, type: \"+\" | \"-\") {\r\n    var item = state.data.productList.find(x => x.id === Id);\r\n    if (!item) return;\r\n    var previous_cant = (item.cantidad && !isNaN(+item.cantidad)) ? item.cantidad : 0;\r\n    if (type === \"+\") {\r\n        if (item.cantidad_desde && previous_cant <= 0) {\r\n            item.cantidad = item.cantidad_desde;\r\n        } else {\r\n            item.cantidad = (+previous_cant) + 1;\r\n        }\r\n    }\r\n    if (type === \"-\") {\r\n        if (item.cantidad_desde && previous_cant <= item.cantidad_desde) {\r\n            item.cantidad = 0\r\n        } else {\r\n            item.cantidad = (+previous_cant) - 1;\r\n        }\r\n    }\r\n}\r\n\r\nexport default OrderReducer.reducer;\r\nexport type OrderReduceState = ReturnType<typeof OrderReducer[\"getInitialState\"]>\r\nexport const { actions } = OrderReducer;\r\nexport type TabName = \"ProductList\" | \"OrderData\" | \"ConfirmOrder\" | \"OrderPayment\";","import { mapOrderStateProps } from \"../Components/Order/mapOrderState\";\r\n\r\nexport default class GiftRulesService {\r\n    ApplyRules(rules: GiftRule[], pedido: mapOrderStateProps[\"order\"]): Array<FullProduct & { cantidad: number }> {\r\n        const regalos: Array<FullProduct & { cantidad: number }> = [];\r\n        for (const rule of rules) {\r\n            var passed_assertions = rule.condiciones.filter(x =>\r\n                new Function(\r\n                    `var pedido= arguments[0]; return ${x.propName} ${x.operator} ${x.value};`\r\n                )(pedido)\r\n            );\r\n            if (passed_assertions.length !== rule.condiciones.length) continue;\r\n            regalos.push(\r\n                ...rule.regalos.map(r => ({\r\n                    id: r.id,\r\n                    nombre: r.nombre,\r\n                    imgSrc: \"\",\r\n                    pvp_final: r.pvp_final,\r\n                    aplica_comision: false,\r\n                    aplica_descuento: false,\r\n                    cantidad: r.cantidad,\r\n                    idReglaRegalo: rule.id\r\n                }))\r\n            );\r\n        }\r\n        return regalos;\r\n    }\r\n}","import React, { ReactNode } from \"react\";\r\nimport { Tabs, Tab, Paper, Typography, TextField, Fab } from \"@material-ui/core\";\r\nimport ProductGrid from \"../Products/ProductGrid\";\r\nimport ProductOptions from \"./ProductOptions\";\r\nimport ConfirmOrder from \"../ConfirmOrder\";\r\nimport Data from \"./Data\";\r\nimport Payment from \"./Payment\";\r\nimport Survey from \"./Survey\";\r\nimport { withRouter, Route } from \"react-router-dom\";\r\nimport RouteMessage from \"../RouteMessage\";\r\nimport { Save } from \"@material-ui/icons\";\r\nimport ProductSelections from \"./ProductSelections\";\r\nimport OrderState from \"./lib/OrderState\";\r\nimport { connect } from \"react-redux\";\r\nimport FetchOrderDataThunk from \"./Redux/Thunks/FetchOrderDataThunk\";\r\nimport { actions } from \"./Redux/OrderReducer\";\r\nimport LoadImageThunk from \"./Redux/Thunks/LoadImageThunk\";\r\nimport LocalStoreOrder from \"./Redux/Thunks/LocalStorePedido\";\r\nimport mapOrderState, { mapOrderStateProps } from \"./mapOrderState\";\r\nimport OrderSaveThunk from \"./Redux/Thunks/OrderSaveThunk\";\r\n\r\ntype OrderReduceActions = typeof actions;\r\ninterface OrderProps extends OrderReduceActions, mapOrderStateProps {\r\n    onMounted: (path: string) => void;\r\n    history: any;\r\n    match: any;\r\n    rol: number;\r\n    editablePrices?: boolean;\r\n    descuentos: Descuento[];\r\n\r\n    fetchInitialData: typeof FetchOrderDataThunk;\r\n    loadTransaccionImg: typeof LoadImageThunk;\r\n    setStoredOrder: typeof LocalStoreOrder;\r\n    saveOrder: typeof OrderSaveThunk;\r\n}\r\nconst OrderComponent = withRouter(class Order extends React.PureComponent<OrderProps, OrderState> {\r\n    unblockNavigation() { }\r\n    constructor(props: any) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.match.path);\r\n    }\r\n    componentDidMount() {\r\n        window.onbeforeunload = _ =>\r\n            this.props.isDirty\r\n                ? \"Tu pedido aún está incompleto, deseas salir sin guardarlo?\"\r\n                : null;\r\n        this.unblockNavigation = this.props.history.block(this.routerWillLeave.bind(this));\r\n        this.props.fetchInitialData();\r\n    }\r\n    componentWillUnmount() {\r\n        this.props.updateCurrentTab(\"ProductList\");\r\n        this.unblockNavigation && this.unblockNavigation();\r\n        window.onbeforeunload && (window.onbeforeunload = undefined);\r\n    }\r\n    routerWillLeave(nextLocation?) {\r\n        if (nextLocation && nextLocation.pathname.indexOf(this.props.match.path) === 0) return;\r\n        if (!this.props.isDirty) return;\r\n\r\n        var confirm = window.confirm(\"Tu pedido está incompleto, quieres guardarlo para completarlo después?\");\r\n        if (confirm) {\r\n            this.props.setStoredOrder({});\r\n        } else {\r\n            // actualizar todo!\r\n            this.props.setStoredOrder({ clean: true });\r\n        }\r\n    }\r\n    guardarBorrador = (event) => {\r\n        if (!this.props.isDirty) return;\r\n        this.props.setStoredOrder({\r\n            reportCompleted: () => this.message(\"Tu pedido fue guardado como borrador\", \"Listo!\")\r\n        });\r\n    }\r\n    handleDone = event => {\r\n        event.preventDefault();\r\n        if (this.props.async_status.indexOf(\":loading\") >= 0) return;\r\n        this.props.saveOrder({\r\n            order: this.props.order\r\n            , reportCompleted: (id) => {\r\n                this.props.history.push(this.props.match.path + \"/survey/\" + id);\r\n            },\r\n            reportError: (exception) => {\r\n                this.message(exception.message, undefined, (exception as any).propertyName);\r\n            }\r\n        });\r\n    }\r\n    message = (message: string, title?: string, focusafter?: string) => {\r\n        var params = new URLSearchParams();\r\n        params.set(\"a\", title || \"Ocurrió un problem\");\r\n        params.set(\"b\", message);\r\n        if (focusafter) params.set(\"focusafter\", focusafter);\r\n        this.props.history.push(this.props.match.path + \"/msg?\" + params.toString());\r\n    }\r\n    handleProductAction = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        const item = this.props.order.productList.find(x => x.id === (+value));\r\n        if (item && item.opciones && item.opciones.length)\r\n            return this.props.history.push(this.props.match.path + \"/select-product-options/\" + item.id);\r\n\r\n        this.props.changeProductQuantity({ Id: +value, type: name as any });\r\n    }\r\n    handleValueChange = (name: string, value: string) => {\r\n        this.props.changeDataValue({ name: name as any, value });\r\n    }\r\n    imageChange = (imgFile?: File, index?: number) => {\r\n        if (!imgFile) return;\r\n        this.props.loadTransaccionImg({ imgFile, index, reportError: this.message });\r\n    }\r\n    imageDelete = (index: number) => {\r\n        if (index < 0) return;\r\n        this.props.deleteImgTransaccion(index);\r\n    }\r\n\r\n    handleAddSelection = (result?) => {\r\n        if (result) this.props.addProductSelection(result);\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    handleDeleteSelection = (result) => {\r\n        if (result) this.props.removeProductSelection(result);\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    handlePriceChange = (event) => {\r\n        const id = +event.currentTarget.name;\r\n        const pvp_final = event.currentTarget.value;\r\n        this.props.changeProductPrice({ id, pvp_final });\r\n    }\r\n    render() {\r\n        const { currentTab, order, async_status, tablaDescuentos } = this.props;\r\n\r\n        const isLoading = async_status.indexOf(\":loading\") >= 0;\r\n\r\n        return (<div style={{ width: \"100%\", height: \"calc(100% - 1px)\", display: \"flex\", flexDirection: \"column\", padding: 10, overflow: \"hidden\" }} >\r\n            <Tabs variant=\"fullWidth\" onChange={(_, currentTab) => this.props.updateCurrentTab(currentTab)} value={currentTab}>\r\n                <Tab value=\"ProductList\" label=\"Productos\" />\r\n                <Tab value=\"OrderData\" label=\"Datos\" />\r\n                <Tab value=\"ConfirmOrder\" label=\"Pedido\" />\r\n                <Tab value=\"OrderPayment\" label=\"Pago\" />\r\n            </Tabs>\r\n            <Hide if={currentTab !== \"ProductList\"} >\r\n                <ProductGrid\r\n                    visible={true}\r\n                    controls=\"ADD-REMOVE\"\r\n                    onActionClick={this.handleProductAction}\r\n                    items={order.productList}\r\n                    editablePrices={this.props.editablePrices}\r\n                    onPriceChange={this.handlePriceChange}\r\n                    async_status={this.props.async_status}\r\n                    async_error={(this.props.async_status || \"\").indexOf(\"products\") >= 0 ? this.props.async_error : undefined}\r\n                />\r\n            </Hide>\r\n            <Hide if={currentTab !== \"OrderData\"} >\r\n                <Data visible={true} {...order} onValueChange={this.handleValueChange} />\r\n            </Hide>\r\n            {currentTab === \"ConfirmOrder\" && (<Paper style={{\r\n                textAlign: \"center\"\r\n                , padding: 10\r\n                , margin: \"auto\"\r\n                , marginTop: 10\r\n                , width: \"100%\"\r\n                , maxWidth: 500\r\n                , height: \"100%\"\r\n            }}>\r\n                <Typography variant=\"h5\">TU PEDIDO</Typography>\r\n                <ConfirmOrder\r\n                    show_next_discount={true}\r\n                    items={order.detalle}\r\n\r\n                    descuento={order.descuentoAplica}\r\n                    valor_envio={order.envio}\r\n                    gran_total={order.total}\r\n                    total_pedido={order.total_pedido}\r\n                    subtotal={order.subtotal}\r\n                    subtotal_con_descuento={order.subtotal_aplicable_descuento}\r\n\r\n                    LabelDescuentoComponent={this.props.rol === 3\r\n                        ? (<TextField\r\n                            onChange={(ev) => this.handleValueChange(\"descuentoAplica\", tablaDescuentos.find(x => x.id === (+ev.currentTarget.value)))}\r\n                            value={(order.descuentoAplica && order.descuentoAplica.id) || \"\"}\r\n                            SelectProps={{ native: true }}\r\n                            select\r\n                        >\r\n                            <option>- SELECCIONA UN DESCUENTO -</option>\r\n                            {tablaDescuentos.map(d => (\r\n                                <option key={d.id} value={d.id}>DESCUENTO {d.porcentaje}%</option>\r\n                            ))}\r\n                        </TextField>)\r\n                        : null}\r\n                />\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    value={order.observacion}\r\n                    name=\"observacion\"\r\n                    onChange={(ev) => this.handleValueChange(ev.currentTarget.name, ev.currentTarget.value)}\r\n                    style={{ width: \"calc(100% - 20px)\", margin: 10 }}\r\n                    label=\"Observacion\"\r\n                    multiline\r\n                    rows=\"2\"\r\n                    inputProps={{ maxLength: 300, id: \"observacion\" }}\r\n                />\r\n            </Paper>)}\r\n            {currentTab === \"OrderPayment\" && <Payment\r\n                visible={true}\r\n                loading={isLoading}\r\n                total_pagar={order.total}\r\n                onDone={this.handleDone}\r\n                items={order.detalle}\r\n                numeroTransaccion={order.numeroTransaccion}\r\n                imgTransaccionList={order.imgTransaccionList}\r\n                onImgChange={this.imageChange}\r\n                onImgDelete={this.imageDelete}\r\n                usarImagen={order.usarImagen}\r\n                onValueChange={this.handleValueChange}\r\n            />}\r\n\r\n            <Route path={this.props.match.path + \"/msg\"} component={RouteMessage} />\r\n            <Route path={this.props.match.path + \"/survey/:id\"} component={Survey} />\r\n            <Route path={this.props.match.path + \"/select-product-options/:id\"}\r\n                children={({ match }) => <ProductOptions\r\n                    showingID={match && +match.params.id}\r\n                    onDone={this.handleAddSelection}\r\n                    productList={order.productList}\r\n                />}\r\n            />\r\n            <Route path={this.props.match.path + \"/view-product-options/:id\"}\r\n                children={({ match }) => <ProductSelections\r\n                    id={match && match.params.id}\r\n                    onDeleteSelection={this.handleDeleteSelection}\r\n                    productList={order.productList}\r\n                    selections={order.productoSelecciones}\r\n                />}\r\n            />\r\n            <Fab title=\"Guardar Borrador\" onClick={this.guardarBorrador} variant=\"extended\" style={{ position: \"fixed\", bottom: 20, right: 20 }} color=\"primary\">\r\n                <Save />\r\n            </Fab>\r\n        </div>);\r\n    }\r\n});\r\n\r\n\r\nexport default connect(mapOrderState, {\r\n    ...actions\r\n    , fetchInitialData: FetchOrderDataThunk\r\n    , loadTransaccionImg: LoadImageThunk\r\n    , setStoredOrder: LocalStoreOrder\r\n    , saveOrder: OrderSaveThunk\r\n})(OrderComponent);\r\n\r\n\r\nfunction Hide(props: { if: boolean, children: ReactNode }) {\r\n    if (props.if) return null;\r\n    return <>{props.children}</>;\r\n}","import GiftRulesService from \"../../Services/GiftRulesService\";\r\nimport { Totals, EstimarDescuento } from \"../../Utils/Calcs\";\r\nimport { RootState } from \"./Redux/Store\";\r\n\r\n\r\ninterface OrderDetalle extends Product {\r\n    cantidad: number;\r\n    idReglaRegalo?: number;\r\n}\r\nexport default function mapOrderState(rootState: RootState, props) {\r\n    const { Order } = rootState;\r\n    const ES_ASESOR = props.rol === 3;\r\n    const tablaDescuentos = (props.descuentos || [])\r\n        .map((d, index) => {\r\n            return { ...d, id: d.id || index };\r\n        });\r\n\r\n    /** Lista de productos incluyendo los productos seleccionados desde OPCIONES */\r\n    var normalizedProductList = [...Order.data.productList].sort((a, b) => a.orden - b.orden).map(x => {\r\n        if (x.opciones && x.opciones.length) {\r\n            x = { ...x, cantidad: 0 };\r\n            var exists = Order.data.productoSelecciones[x.id];\r\n            // Creo un nuevo articulo, para evitar la Mutación\r\n            if (exists) x.cantidad = exists.length;\r\n        }\r\n        return x;\r\n    });\r\n\r\n    const detalle = [...normalizedProductList.filter(x => x.cantidad)] as OrderDetalle[];\r\n\r\n    var subtotal = Totals(detalle).total;\r\n    const subtotal_aplicable_descuento = Totals(detalle.filter(x => x.aplica_descuento)).total;\r\n    // en ROL 3, el descuento es MANUAL, no calculado\r\n    if (ES_ASESOR) {\r\n        if (Order.data.descuentoAplica) var descuentoAplica = {\r\n            ...Order.data.descuentoAplica,\r\n            valor: (Order.data.descuentoAplica.porcentaje * subtotal_aplicable_descuento / 100).moneyRound()\r\n        }\r\n    } else {\r\n        descuentoAplica = EstimarDescuento(subtotal_aplicable_descuento, tablaDescuentos);\r\n    }\r\n\r\n    const total_pedido = subtotal - ((descuentoAplica && descuentoAplica.valor) || 0);\r\n    const envio = getValorEnvio(subtotal, Order.data.tipo_envio);\r\n    const total = (total_pedido + envio).moneyRound();\r\n\r\n    const order = {\r\n        ...Order.data\r\n        , descuentoAplica\r\n        , detalle\r\n        , productList: normalizedProductList\r\n        , subtotal\r\n        , subtotal_aplicable_descuento\r\n        , total_pedido\r\n        , envio\r\n        , total\r\n    };\r\n    const detalle_regalo = new GiftRulesService().ApplyRules(rootState.Order.giftRules, order);\r\n    order.detalle.push(...detalle_regalo);\r\n    // el subtotal se actualiza aquí, pero no importa ya que \r\n    const subtotal_regalos = detalle_regalo.reduce((resume, x) => resume + (x.cantidad * x.pvp_final), 0);\r\n    order.subtotal = (subtotal_regalos + order.subtotal).moneyRound();\r\n    order.subtotal_aplicable_descuento = (subtotal_regalos + order.subtotal_aplicable_descuento).moneyRound();\r\n\r\n    return {\r\n        order,\r\n        isDirty: Order.isDirty,\r\n        tablaDescuentos,\r\n        currentTab: Order.currentTab,\r\n        async_status: Order.status,\r\n        async_error: Order.error\r\n    }\r\n}\r\n\r\nconst ENVIO_GRATIS_A_PARTIR_DE = 60;\r\n\r\nfunction getValorEnvio(total_pedido: number, tipo_envio: RootState[\"Order\"][\"data\"][\"tipo_envio\"]) {\r\n    if (total_pedido >= ENVIO_GRATIS_A_PARTIR_DE && tipo_envio.indexOf(\"GALAPAGOS\") < 0) return 0;\r\n    if (tipo_envio === \"PICK-UP\") return 0;\r\n    if (tipo_envio === \"DENTRO DE CIUDAD\") return 3;\r\n    if (tipo_envio === \"ZONA CONTINENTAL\") return 5;\r\n    if (tipo_envio === \"GALAPAGOS ISLA CRUZ - BALTRA\") return 10;\r\n    if (tipo_envio === \"GALAPAGOS ISLA ISABELA Y FERNANDINA\") return 14;\r\n}\r\n\r\nexport type mapOrderStateProps = ReturnType<typeof mapOrderState>","export function Focus(ID: string) {\r\n    window.requestAnimationFrame(function () {\r\n        try {\r\n            document.getElementById(ID).focus();\r\n        } catch (ex) {\r\n            console.error(`Focus(${ID}) error`, ex)\r\n        }\r\n    });\r\n    return;\r\n}","import { OrderDetailsState } from \"../Components/OrderList/OrderDetails\";\r\nimport { Focus } from \"../lib/DOMActions\";\r\nimport { isEmpty } from \"../lib/ValueChecks\";\r\nimport { ImgFileToObject } from \"../Utils/ImageReader\";\r\nimport API from \"./API\";\r\n\r\nexport default class OrderActions {\r\n    static Aprobar(state: OrderDetailsState) {\r\n        const { _pagos } = state;\r\n        if (!(_pagos && _pagos.length)) return alert(\"Necesitas registrar al menos un pago.\");\r\n        for (let index = 0; index < _pagos.length; index++) {\r\n            if (!PagoEsValido(_pagos[index], index)) return;\r\n        }\r\n        let cf = window.confirm(\"Esta seguro de APROBAR este pedido?\");\r\n        if (!cf) return;\r\n        return API.ActionOrder(state.id, { action: \"APROBAR\", value: _pagos });\r\n    }\r\n    static Rechazar(state: OrderDetailsState) {\r\n        let cf = window.confirm(\"Esta seguro de RECHAZAR este pedido?\");\r\n        if (!cf) return;\r\n        let value = window.prompt(\"Digita el Motivo de Rechazo\");\r\n        if (!value) return;\r\n        return API.ActionOrder(state.id, { action: \"RECHAZAR\", value })\r\n    }\r\n    static Enviar(state: OrderDetailsState) {\r\n        const { _fechaEnvio, _envioImgFile, _envioImgSrcStatus } = state;\r\n        if (!(_fechaEnvio && _fechaEnvio.toString().trim().length && !isNaN(+new Date(_fechaEnvio)))) {\r\n            alert(\"Agregue una fecha de envío válida\");\r\n            return Focus(\"_fechaEnvio\");\r\n        }\r\n        if (_envioImgSrcStatus) return alert(\"No puede continuar, la imagen se está procesando\");\r\n\r\n        const cf = window.confirm(\"Esta seguro de seleccionar este pedido como ENVIADO?\");\r\n        if (!cf) return;\r\n        const value = new Date(\r\n            +_fechaEnvio.split(\"-\")[0],\r\n            (+_fechaEnvio.split(\"-\")[1]) - 1,\r\n            +_fechaEnvio.split(\"-\")[2]\r\n        );\r\n        var promise = Promise.resolve() as Promise<any>;\r\n        if (_envioImgFile)\r\n            promise = ImgFileToObject(_envioImgFile);\r\n\r\n        return promise.then(imgFile =>\r\n            API.ActionOrder(state.id, { action: \"ENVIAR\", value, imgFile })\r\n        );\r\n    }/*\r\n    static Recibir(state: OrderDetailsState) {\r\n        const { _fechaRecepcion, bienRecibido, observacionRecepcion } = state;\r\n        if (!(_fechaRecepcion && _fechaRecepcion.toString().trim().length && !isNaN(+new Date(_fechaRecepcion)))) {\r\n            alert(\"Agregue una fecha de recepción válida\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"_fechaRecepcion\").focus();\r\n            });\r\n            return;\r\n        }\r\n        if (!bienRecibido && !(observacionRecepcion && observacionRecepcion.toString().trim().length)) {\r\n            alert(\"Agregue la observación de la Recepción\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"observacionRecepcion\").focus();\r\n            });\r\n            return;\r\n        }\r\n        let value = new Date(\r\n            +_fechaRecepcion.split(\"-\")[0],\r\n            (+_fechaRecepcion.split(\"-\")[1]) - 1,\r\n            +_fechaRecepcion.split(\"-\")[2]\r\n        );\r\n        if (value.valueOf() < new Date(state.fechaEnvio).valueOf()) {\r\n            alert(\"La fecha de Recepción no puede ser menor a la fecha de envío\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"_fechaRecepcion\").focus();\r\n            });\r\n        }\r\n\r\n        let cf = window.confirm(\"Esta seguro de seleccionar este pedido como RECIBIDO?\");\r\n        if (!cf) return;\r\n\r\n        return API.ActionOrder(state.id, {\r\n            action: \"RECIBIR\",\r\n            value,\r\n            bienRecibido,\r\n            observacionRecepcion\r\n        });\r\n    }*/\r\n    static Facturar(state: OrderDetailsState) {\r\n        if (!(state.numeroFactura && state.numeroFactura.toString().trim().length)) {\r\n            alert(\"Agregue el número de factura\");\r\n            return Focus(\"numeroFactura\");\r\n        }\r\n        let cf = window.confirm(\"Esta seguro de FACTURAR este pedido?\");\r\n        if (!cf) return;\r\n        return API.ActionOrder(state.id, { action: \"FACTURAR\", value: state.numeroFactura });\r\n    }\r\n}\r\n\r\n\r\nfunction PagoEsValido(pago: SavePayment, index: number) {\r\n    if (isEmpty(pago.metodoPago)) {\r\n        alert(\"Selecciona el metodo de pago\");\r\n        return Focus(\"pago#\" + index + \".metodoPago\");\r\n    }\r\n    if (isEmpty(pago.numeroTransaccion)) {\r\n        alert(\"Digita el número de transaccion\");\r\n        return Focus(\"pago#\" + index + \".numeroTransaccion\");\r\n    }\r\n    if (isEmpty(pago.monto)) {\r\n        alert(\"Digita el monto recibido\");\r\n        return Focus(\"pago#\" + index + \".monto\");\r\n    }\r\n    return true;\r\n}","import React from \"react\";\r\nimport { Typography, Divider } from \"@material-ui/core\";\r\n\r\nexport function SectionHeader(props: any) {\r\n    const style = { marginTop: 12, marginBottom: 5 } as any;\r\n    if (props.center) style.textAlign = \"center\";\r\n    return (\r\n        <div style={style}>\r\n            <Typography variant=\"h6\">{props.children}</Typography>\r\n            <Divider />\r\n        </div>);\r\n}\r\n\r\n\r\nexport function TextRow(props: { value: any, label: any }) {\r\n    const { value, label } = props;\r\n    return <div style={{ width: \"100%\", textAlign: \"left\" }}>\r\n        <div style={{ width: 120, display: \"inline-block\" }}>\r\n            <Typography variant=\"body1\" >{label}</Typography>\r\n        </div>\r\n        <Typography variant=\"body2\" style={{ width: \"auto\", display: \"inline\" }}>{value}</Typography>\r\n    </div>\r\n}","export default function ExpandImage(src: string) {\r\n\r\n    var children = window.open(\"\", \"_blank\");\r\n    var img = children.document.createElement(\"img\");\r\n    img.src = src;\r\n    children.document.body.appendChild(img);\r\n    children.document.body.style.textAlign = \"center\";\r\n    children.document.body.style.margin = \"auto\";\r\n}","import { CardMedia, List, ListItem, ListItemSecondaryAction, ListItemText, Typography } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport ExpandImage from \"../../lib/ExpandImage\";\r\nimport { SectionHeader, TextRow } from \"./DetailComponents\";\r\n\r\nexport default function (props: { numeroTransaccion?: string, imgTransaccion?: string, pagos?: GetOrder[\"pagos\"] }) {\r\n\r\n    const { numeroTransaccion, imgTransaccion, pagos } = props;\r\n\r\n    const imagenes = imgTransaccion.indexOf(\",\") >= 0 ? imgTransaccion.split(\",\") : [imgTransaccion];\r\n\r\n    return <>\r\n        <SectionHeader>PAGO SUBIDO:</SectionHeader>\r\n\r\n        {numeroTransaccion && <TextRow\r\n            value={numeroTransaccion}\r\n            label=\"Comprobante\"\r\n        />}\r\n\r\n        {imagenes.map(src => <CardMedia\r\n            component=\"img\"\r\n            style={{ height: \"auto\", width: \"calc(100% - 20px)\", objectFit: \"contain\", border: \"1px solid black\", margin: 10 }}\r\n            image={src}\r\n            title=\"Comprobante\"\r\n            onClick={() => ExpandImage(src)}\r\n        />)}\r\n        {pagos && pagos.length\r\n            ? (<>\r\n                <Typography>PAGOS VERIFICADOS:</Typography>\r\n                <List style={{ maxWidth: 300 }}>\r\n                    {pagos.map(x => (\r\n                        <ListItem key={x.id} >\r\n                            <ListItemText>{x.metodoPago} {parseFloat(x.monto as string).toCurrency()}</ListItemText>\r\n                            <ListItemSecondaryAction># {x.numeroTransaccion}</ListItemSecondaryAction>\r\n                        </ListItem>\r\n                    ))}\r\n                </List>\r\n            </>)\r\n            : null}\r\n    </>\r\n}\r\n","import { Grid, InputAdornment } from \"@material-ui/core\";\r\nimport { AttachMoney } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport Input from \"../Input\";\r\n\r\nexport default function (props: SavePayment & {\r\n    onChange(propName: \"metodoPago\" | \"monto\" | \"numeroTransaccion\", value: string)\r\n        , add_to_id?: string\r\n}) {\r\n\r\n    const { metodoPago, monto, numeroTransaccion, onChange, add_to_id } = props;\r\n\r\n    return (<Grid container>\r\n        <Grid item md={3} sm={12}>\r\n            <Input\r\n                placeholder=\"Método de pago\"\r\n                select\r\n                SelectProps={{ native: true }}\r\n                name={\"pago\" + (add_to_id ? (\"#\" + add_to_id) : \"\") + \".metodoPago\"}\r\n                value={metodoPago}\r\n                onChange={ev => onChange(\"metodoPago\", ev.currentTarget.value)}\r\n            >\r\n                <option>- Selecciona una opción -</option>\r\n                <option value=\"PICHINCHA\">BANCO PICHINCHA</option>\r\n                <option value=\"PRODUBANCO\">BANCO PRODUBANCO</option>\r\n                <option value=\"PAYPAL\">PayPal</option>\r\n            </Input>\r\n        </Grid>\r\n        <Grid item md={3} sm={6}>\r\n            <Input\r\n                placeholder=\"# Comprobante\"\r\n                name={\"pago\" + (add_to_id ? (\"#\" + add_to_id) : \"\") + \".numeroTransaccion\"}\r\n                type=\"tel\"\r\n                value={numeroTransaccion}\r\n                onChange={ev => onChange(\"numeroTransaccion\", ev.currentTarget.value)}\r\n            />\r\n        </Grid>\r\n        <Grid item md={3} sm={6}>\r\n            <Input\r\n                InputProps={{\r\n                    startAdornment: (<InputAdornment position=\"start\">\r\n                        <AttachMoney />\r\n                    </InputAdornment>)\r\n                }}\r\n                placeholder=\"Monto\"\r\n                type=\"number\"\r\n                name={\"pago\" + (add_to_id ? (\"#\" + add_to_id) : \"\") + \".monto\"}\r\n                inputProps={{\r\n                    step: \"0.01\"\r\n                }}\r\n                value={monto ? (\"\" + monto) : \"\"}\r\n                onChange={ev => onChange(\"monto\", ev.currentTarget.value)}\r\n            />\r\n        </Grid>\r\n    </Grid>)\r\n}","import { IconButton, List, ListItem, ListItemSecondaryAction } from \"@material-ui/core\";\r\nimport { Delete, Add } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport RegisterPayment from \"../Payment/RegisterPayment\";\r\n\r\nexport default function (props: {\r\n    onChange(new_value: SavePayment[]): void;\r\n    value?: SavePayment[]\r\n}) {\r\n    var pagos = props.value || [];\r\n\r\n    const deleteItem = function (item) {\r\n        var index = pagos.indexOf(item);\r\n        const new_array = [...pagos];\r\n        new_array.splice(index, 1);\r\n        props.onChange(new_array);\r\n    }\r\n    const changeValue = function (name: string, value: string, item: SavePayment) {\r\n        var index = pagos.indexOf(item);\r\n        const new_pago = { ...item, [name]: value };\r\n        const new_array = [...pagos];\r\n        new_array[index] = new_pago;\r\n        props.onChange(new_array);\r\n    }\r\n    const addItem = function () {\r\n        props.onChange([...pagos, {\r\n            metodoPago: \"\",\r\n            monto: \"\",\r\n            numeroTransaccion: \"\",\r\n        }])\r\n    }\r\n\r\n    return (<List>\r\n        <ListItem button onClick={() => addItem()} >AGREGAR PAGO <Add /></ListItem>\r\n        {pagos.map((item, index) => {\r\n            return (<ListItem key={index}>\r\n                <div style={{ flex: 1 }}>\r\n                    <RegisterPayment\r\n                        {...item}\r\n                        add_to_id={\"\" + index}\r\n                        onChange={(propName, value) => changeValue(propName, value, item)}\r\n                    />\r\n                </div>\r\n                <ListItemSecondaryAction >\r\n                    <IconButton onClick={() => deleteItem(item)} type=\"button\">\r\n                        <Delete />\r\n                    </IconButton>\r\n                </ListItemSecondaryAction>\r\n            </ListItem>)\r\n        })}\r\n    </List>)\r\n}","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nexport default function(props: {\r\n    loadingAction?: string,\r\n    label?: string,\r\n    onClick?: any,\r\n    showReject?: boolean | \"ONLY\",\r\n    name?: string\r\n}) {\r\n    return <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n        {props.showReject === \"ONLY\"\r\n            ? null\r\n            : (<Button\r\n                style={{ margin: 10, flex: 1 }}\r\n                onClick={props.onClick}\r\n                variant=\"outlined\"\r\n                color=\"primary\"\r\n                disabled={Boolean(props.loadingAction)}\r\n                name={props.name || props.label}\r\n            >\r\n                {props.loadingAction === (props.name || props.label)\r\n                    ? \"CARGANDO...\"\r\n                    : props.label}\r\n            </Button>)\r\n        }\r\n        {props.showReject &&\r\n            (<Button\r\n                style={{ margin: 10, flex: 1 }}\r\n                onClick={props.onClick}\r\n                variant=\"outlined\"\r\n                color=\"secondary\"\r\n                disabled={Boolean(props.loadingAction)}\r\n                name=\"RECHAZAR\"\r\n            >\r\n                {props.loadingAction === \"RECHAZAR\"\r\n                    ? \"CARGANDO...\"\r\n                    : \"RECHAZAR\"}\r\n            </Button>)}\r\n    </div>\r\n}","import React from \"react\";\r\nimport { Typography, TextField } from \"@material-ui/core\";\r\nimport { SectionHeader } from \"./DetailComponents\";\r\nimport ActionButtons from \"./OrderActionButtons\";\r\nimport ImageInput from \"../ImageInput\";\r\nexport default function (this: undefined, props: {\r\n    _fechaEnvio?: string,\r\n    onTextChange(event: React.ChangeEvent<HTMLInputElement>): void,\r\n    loadingStatus?: string,\r\n    src?: string,\r\n    onImageChange(file: File): void;\r\n    onSubmit(event: React.MouseEvent<HTMLButtonElement>): void\r\n}) {\r\n    const { _fechaEnvio, src, onSubmit, onImageChange, onTextChange, loadingStatus } = props;\r\n    return (<>\r\n        <SectionHeader>ENVIAR (imagen opcional)</SectionHeader>\r\n        <ImageInput\r\n            onChange={onImageChange}\r\n            src={src}\r\n            className=\"\"\r\n            title=\"Guía de Envío\"\r\n        />\r\n        <div style={{ display: \"flex\", flexDirection: \"row\", marginTop: 15, marginBottom: 10 }}>\r\n            <Typography variant=\"button\" style={{ marginRight: 10, paddingTop: 5 }} >Fecha de Envío</Typography>\r\n            <TextField\r\n                type=\"date\"\r\n                fullWidth\r\n                inputProps={{ id: \"_fechaEnvio\" }}\r\n                name=\"_fechaEnvio\"\r\n                value={_fechaEnvio || \"\"}\r\n                style={{ flex: 1 }}\r\n                onChange={onTextChange}\r\n            />\r\n        </div>\r\n        <ActionButtons\r\n            loadingAction={loadingStatus}\r\n            label=\"ENVIAR\"\r\n            showReject={true}\r\n            onClick={onSubmit}\r\n        />\r\n    </>)\r\n}","/// <reference path=\"../../shared/Payment.d.ts\"/>\r\nimport React from \"react\";\r\nimport { Dialog, DialogContent, DialogTitle, Typography, TextField, Button, CircularProgress, DialogActions, CardMedia } from \"@material-ui/core\";\r\nimport ConfirmOrder from \"../ConfirmOrder\";\r\nimport API from \"../../Services/API\";\r\nimport { DocToString } from \"../../Utils/Calcs\";\r\nimport OrderActions from \"../../Services/OrderActions\";\r\nimport { SectionHeader, TextRow } from \"./DetailComponents\";\r\nimport PagoSection from \"./PagoSection\";\r\nimport { BugReport } from \"@material-ui/icons\";\r\nimport RegistroMultiPago from \"./RegistroMultiPago\";\r\nimport EnviarAction from \"./EnviarAction\";\r\nimport ActionButtons from \"./OrderActionButtons\";\r\nimport ImageReader from \"../../Utils/ImageReader\";\r\nimport ExpandImage from \"../../lib/ExpandImage\";\r\n\r\nexport default class detaOrderDetails extends React.Component<{\r\n    onClose: (refresh: boolean) => void,\r\n    editable?: boolean,\r\n    id: number\r\n}> {\r\n    state = {\r\n        loading: \"data\",\r\n        _fechaEnvio: \"\",\r\n        _fechaRecepcion: \"\",\r\n        _pagos: []\r\n    } as OrderDetailsState\r\n    componentWillMount() {\r\n        API.GetOrder(this.props.id)\r\n            .then(order => this.setState({ ...order, loading: null }))\r\n            .catch(ex => this.setState({ loading: \"data-error\", data_error_message: ex.message }))\r\n    }\r\n    handleClose = (_: React.MouseEvent<HTMLElement>) => {\r\n        this.props.onClose(this.state.shouldRefresh);\r\n    }\r\n    handleButton = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        const { name } = event.currentTarget;\r\n        if (this.state.loading) return;\r\n        if (name === \"APROBAR\") {\r\n            let promise = OrderActions.Aprobar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"RECHAZAR\") {\r\n            let promise = OrderActions.Rechazar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"ENVIAR\") {\r\n            let promise = OrderActions.Enviar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }/*\r\n        if (name === \"RECIBIR\") {\r\n            let promise = OrderActions.Recibir(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }*/\r\n        if (name === \"FACTURAR\") {\r\n            let promise = OrderActions.Facturar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        this.setState({ loading: name });\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleCheck = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, checked } = event.currentTarget;\r\n        this.setState({ [name]: checked });\r\n    }\r\n    handleEnvioImg = (file: File) => {\r\n        this.setState({ _envioImgSrcStatus: \"loading\" });\r\n        if (this.state._envioImgSrcStatus) return;\r\n        ImageReader(file)\r\n            .then(src => {\r\n                this.setState({\r\n                    _envioImgSrc: src,\r\n                    _envioImgFile: file,\r\n                    _envioImgSrcStatus: null\r\n                })\r\n            }).catch(ex => {\r\n                alert(\"No se pudo cargar la imagen:\" + ex.message);\r\n            });\r\n    }\r\n    handlePagos = _pagos => {\r\n        this.setState({ ...this.state, _pagos });\r\n    }\r\n    render() {\r\n        const { numero,\r\n            data_error_message,\r\n            fechaCreacion, fechaRecepcion,\r\n            fechaEnvio, envioImgSrc,\r\n            detalle,\r\n            descuentoPorcentaje, descuentoTotal, observacion,\r\n            direccion, sector, ciudad, referencia, tipo_envio,\r\n            statusText, total, envio, username,\r\n            subtotal,\r\n            survey1, survey2, loading,\r\n            documento, identificacion, razonSocial,\r\n            telefono_factura, direccion_factura, email_factura,\r\n            nombre_contacto, identificacion_contacto, documento_contacto, telefono_contacto,\r\n            numeroFactura, /*, _fechaRecepcion*/ bienRecibido, observacionRecepcion\r\n        } = this.state;\r\n\r\n        const subtotal_con_descuento = (detalle || []).filter(x => x.descuentoTotal).reduce((a, b) => a + (b.cantidad * b.pvp_final), 0);\r\n\r\n        const editable = this.props.editable === true;\r\n\r\n        const estado = statusText;\r\n\r\n        const total_pedido = (total - envio).moneyRound();\r\n\r\n        if (loading === \"data\" || loading === \"data-error\")\r\n            return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\" >\r\n                <DialogContent style={{ textAlign: \"center\", paddingTop: 100, width: 400, height: 400 }}>\r\n                    {loading === \"data\"\r\n                        ? <>\r\n                            <CircularProgress size={100} />\r\n                            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                        </>\r\n                        : null}\r\n\r\n                    {loading === \"data-error\"\r\n                        ? <>\r\n                            <BugReport color=\"secondary\" />\r\n                            <Typography color=\"secondary\" variant=\"h6\">{data_error_message}</Typography>\r\n                        </>\r\n                        : null}\r\n                </DialogContent>\r\n            </Dialog>);\r\n\r\n        return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\">\r\n            <DialogTitle>PEDIDO #{numero}</DialogTitle>\r\n            <DialogContent>\r\n                <TextRow value={new Date(fechaCreacion).toLocaleString()} label=\"Fecha\" />\r\n                <TextRow value={username} label=\"Usuario\" />\r\n                <TextRow value={estado} label=\"Estado\" />\r\n\r\n                {numeroFactura && <TextRow value={numeroFactura} label=\"Factura #\" />}\r\n                {fechaEnvio && <TextRow value={new Date(fechaEnvio).toLocaleDateString()} label=\"Enviado\" />}\r\n                {envioImgSrc && <CardMedia\r\n                    component=\"img\"\r\n                    style={{ height: \"auto\", width: \"calc(100% - 20px)\", objectFit: \"contain\", border: \"1px solid black\", margin: 10 }}\r\n                    image={envioImgSrc}\r\n                    title=\"Guia de Envio\"\r\n                    onClick={() => ExpandImage(envioImgSrc)}\r\n                />}\r\n                {fechaRecepcion && <TextRow value={new Date(fechaRecepcion).toLocaleDateString()} label=\"Recibido\" />}\r\n                {estado === \"RECIBIDO\" && <TextRow value={(bienRecibido ? \"NO\" : \"SI\")} label=\"Incompleto\" />}\r\n                {estado === \"RECIBIDO\" && <TextRow label=\"Comentarios\" value={observacionRecepcion} />}\r\n\r\n                <SectionHeader>PRODUCTOS</SectionHeader>\r\n                <ConfirmOrder\r\n                    items={detalle}\r\n                    descuento={{ porcentaje: descuentoPorcentaje, valor: descuentoTotal }}\r\n                    valor_envio={envio}\r\n                    total_pedido={total_pedido}\r\n                    gran_total={total}\r\n                    subtotal={subtotal}\r\n                    subtotal_con_descuento={subtotal_con_descuento}\r\n\r\n                    showComponentes={true}\r\n                />\r\n                <TextRow value={observacion} label=\"Observación\" />\r\n\r\n                <SectionHeader>DATOS DE ENTREGA</SectionHeader>\r\n\r\n                <TextRow value={nombre_contacto} label=\"Nombre\" />\r\n                <TextRow value={identificacion_contacto} label={DocToString(documento_contacto as any)} />\r\n                <TextRow value={telefono_contacto} label=\"Telefono\" />\r\n\r\n                <TextRow value={tipo_envio} label=\"Tipo de Envío\" />\r\n                <TextRow value={ciudad} label=\"Ciudad\" />\r\n                <TextRow value={sector} label=\"Sector\" />\r\n                <TextRow value={direccion} label=\"Direccion\" />\r\n                <TextRow value={referencia} label=\"Referencia\" />\r\n\r\n\r\n                <SectionHeader>DATOS DE FACTURACIÓN</SectionHeader>\r\n                <TextRow value={identificacion} label={DocToString(documento as any)} />\r\n                <TextRow value={razonSocial} label=\"Nombre\" />\r\n                <TextRow value={direccion_factura} label=\"Dirección\" />\r\n                <TextRow value={telefono_factura} label=\"Teléfono\" />\r\n                <TextRow value={email_factura} label=\"Email\" />\r\n\r\n                <PagoSection {...this.state} />\r\n\r\n\r\n                <SectionHeader>ENCUESTA</SectionHeader>\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">Cómo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                <Typography>{survey1 || \"\"}</Typography>\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">\r\n                    Compártenos alguna experiencia que hayan tenido tus clientes usando nuestros productos\r\n                </Typography>\r\n                <Typography>{survey2 || \"\"}</Typography>\r\n\r\n                {estado === \"PENDIENTE\" && editable && <>\r\n                    <SectionHeader>APROBACIÓN</SectionHeader>\r\n                    <RegistroMultiPago\r\n                        value={this.state._pagos}\r\n                        onChange={this.handlePagos}\r\n                    />\r\n                    <ActionButtons\r\n                        loadingAction={this.state.loading}\r\n                        label=\"APROBAR\"\r\n                        showReject={true}\r\n                        onClick={this.handleButton}\r\n                    />\r\n                </>}\r\n\r\n                {estado === \"APROBADO\" && editable && <EnviarAction\r\n                    onSubmit={this.handleButton}\r\n                    _fechaEnvio={this.state._fechaEnvio}\r\n                    onTextChange={this.handleChange}\r\n                    onImageChange={this.handleEnvioImg}\r\n                    loadingStatus={this.state._envioImgSrcStatus}\r\n                    src={this.state._envioImgSrc}\r\n                />}\r\n\r\n                {/*estado === \"ENVIADO\" && editable && <React.Fragment>\r\n                    <SectionHeader>RECIBIR</SectionHeader>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\", margin: 10 }}>\r\n                        <Typography variant=\"button\" style={{ marginRight: 10, paddingTop: 5 }} >Fecha Recepción</Typography>\r\n                        <TextField\r\n                            type=\"date\"\r\n                            fullWidth\r\n                            name=\"_fechaRecepcion\"\r\n                            value={_fechaRecepcion || \"\"}\r\n                            inputProps={{ id: \"_fechaRecepcion\" }}\r\n                            style={{ flex: 1 }}\r\n                            onChange={this.handleChange}\r\n                        /></div>\r\n                    <FormControlLabel\r\n                        label=\"El pedido se envió completo?\"\r\n                        control={<Checkbox\r\n                            checked={bienRecibido}\r\n                            onChange={this.handleCheck}\r\n                            name=\"bienRecibido\"\r\n                        />}\r\n                    />\r\n                    <TextField\r\n                        name=\"observacionRecepcion\"\r\n                        value={observacionRecepcion || \"\"}\r\n                        onChange={this.handleChange}\r\n                        rows={2}\r\n                        required={!bienRecibido}\r\n                        label=\"Comentarios\"\r\n                        fullWidth\r\n                        multiline\r\n                        inputProps={{\r\n                            id: \"observacionRecepcion\",\r\n                            maxLength: 300\r\n                        }}\r\n                    />\r\n                    <ActionButtons\r\n                        loadingAction={this.state.loading}\r\n                        name=\"RECIBIR\"\r\n                        label=\"COMPLETAR\"\r\n                        showReject={true}\r\n                        onClick={this.handleButton}\r\n                    />\r\n                    </React.Fragment>*/}\r\n\r\n                {estado === \"ENVIADO\" && editable && <React.Fragment>\r\n                    <SectionHeader>REGISTRAR FACTURA</SectionHeader>\r\n                    <TextField\r\n                        label=\"Numero de Factura\"\r\n                        placeholder=\"###-###-#####\"\r\n                        value={numeroFactura}\r\n                        inputProps={{\r\n                            id: \"numeroFactura\",\r\n                            maxLength: 20\r\n                        }}\r\n                        fullWidth\r\n                        onChange={this.handleChange}\r\n                        name=\"numeroFactura\"\r\n                    />\r\n                    <ActionButtons\r\n                        loadingAction={this.state.loading}\r\n                        label=\"FACTURAR\"\r\n                        showReject={true}\r\n                        onClick={this.handleButton}\r\n                    />\r\n                </React.Fragment>}\r\n\r\n                {estado === \"FACTURADO\" && editable && <ActionButtons\r\n                    loadingAction={this.state.loading}\r\n                    onClick={this.handleButton}\r\n                    showReject=\"ONLY\"\r\n                />}\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={this.handleClose}>SALIR</Button>\r\n            </DialogActions>\r\n        </Dialog>);\r\n    }\r\n}\r\n\r\nexport interface OrderDetailsState extends Partial<GetOrder> {\r\n    loading: \"data\" | \"data-error\" | \"APROBAR\" | \"RECHAZAR\" | \"FACTURAR\" | \"ENVIAR\";\r\n    data_error_message?: string;\r\n    _fechaRecepcion: string;\r\n    shouldRefresh?: boolean;\r\n    _pagos: SavePayment[]\r\n\r\n    _fechaEnvio: string;\r\n    _envioImgSrc?: string;\r\n    _envioImgFile?: File;\r\n    _envioImgSrcStatus?: string | null;\r\n}\r\n","import React from \"react\";\r\nimport { List, ListItem, Grid, Paper, Typography, Hidden, CircularProgress } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { Route } from \"react-router-dom\";\r\nimport OrderDetails from \"./OrderDetails\";\r\nimport Message from \"../Message\";\r\nexport default class extends React.PureComponent<any> {\r\n    state = {\r\n        data: [] as GetOrder[],\r\n        msg: null,\r\n        loading: true\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleMessage = this.handleMessage.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        API.GetOrders()\r\n            .then(data => this.setState({ data, loading: null }))\r\n            .catch(err => this.setState({\r\n                loading: null,\r\n                msg: { title: \"Ocurrió un error\", message: err.message, info: err.code }\r\n            }));\r\n    }\r\n    handleMessage() {\r\n        this.setState({ msg: null });\r\n    }\r\n    handleClick(event: React.MouseEvent<HTMLElement>) {\r\n        const { id } = event.currentTarget;\r\n        this.props.history.push(this.props.match.path + \"/\" + id);\r\n    }\r\n    handleClose(refresh: boolean) {\r\n        if (refresh) {\r\n            this.setState({ loading: true });\r\n            API.GetOrders()\r\n                .then(data => this.setState({ data, loading: null }))\r\n                .catch(ex => this.setState({\r\n                    msg: { title: \"No se pudo actualizar el listado\", message: ex.message, info: ex.code },\r\n                    loading: null\r\n                }));\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    render() {\r\n        const { data, msg, loading } = this.state;\r\n        const { rol } = this.props;\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        return (<Paper style={{ width: \"calc(100%-20px)\", height: \"calc(100% - 30px)\", display: \"flex\", flexDirection: \"column\", margin: 10, padding: 10, paddingBottom: 0, overflowX: \"hidden\" }}>\r\n            <List>\r\n                <Hidden xsDown implementation=\"css\" >\r\n                    <ListItem>\r\n                        <Grid container spacing={1} style={{ borderBottom: \"1px solid #ebebeb\" }}>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Numero</Typography></Grid>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Creado</Typography></Grid>\r\n\r\n                            {rol === 3 && <Grid sm={3} item><Typography variant=\"overline\">Usuario</Typography></Grid>}\r\n\r\n                            <Grid sm={1} item><Typography variant=\"overline\">Total</Typography></Grid>\r\n\r\n                            {rol === 1 && <Grid sm={1} item><Typography variant=\"overline\">Ganancia</Typography></Grid>}\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Estado</Typography></Grid>\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Fecha de Envío</Typography></Grid>\r\n                        </Grid>\r\n                    </ListItem>\r\n                </Hidden>\r\n                {data.map(d => <ListItem key={d.id} id={\"\" + d.id} button onClick={this.handleClick}>\r\n                    <Grid container spacing={1} style={{ paddingTop: 5, paddingBottom: 5, borderBottom: \"1px solid #fafafa\" }}>\r\n\r\n                        <Grid xs={12} sm={2} item >\r\n                            <Hidden smUp >PEDIDO #</Hidden>\r\n                            {d.id}\r\n                        </Grid>\r\n                        <Grid xs={12} sm={2} item >\r\n                            {new Date(d.fechaCreacion).toLocaleDateString()}\r\n                        </Grid>\r\n\r\n                        {rol === 3 && <Grid xs={12} sm={3} item >\r\n                            {d.username}\r\n                        </Grid>}\r\n\r\n                        <Grid xs={12} sm={1} item >$ {d.total.toFixed(2)}</Grid>\r\n\r\n                        {rol === 1 && <Grid xs={12} sm={1} item >$ {(d.descuentoTotal || 0).toFixed(2)}</Grid>}\r\n\r\n                        <Grid xs={12} sm={2} item ><Typography color={EstadoToVariant(d.statusText)}>{d.statusText}</Typography></Grid>\r\n\r\n                        <Grid xs={12} sm={2} item >{d.fechaEnvio && new Date(d.fechaEnvio).toDateString()}</Grid>\r\n                    </Grid>\r\n                </ListItem>)}\r\n            </List>\r\n\r\n            {msg && <Message {...msg} onClose={this.handleMessage} />}\r\n\r\n            <Route\r\n                path={this.props.match.path + \"/:id\"}\r\n                render={props => <OrderDetails id={+props.match.params.id} onClose={this.handleClose} />}\r\n            />\r\n        </Paper>);\r\n    }\r\n}\r\n\r\nfunction EstadoToVariant(estado): any {\r\n    if (estado === \"APROBADO\") return \"primary\";\r\n    if (estado === \"RECHAZADO\") return \"secondary\";\r\n    return \"initial\";\r\n}","import React from \"react\";\r\nimport { CardHeader, IconButton, Typography } from \"@material-ui/core\";\r\nimport { HourglassEmpty, ArrowLeft, ArrowRight } from \"@material-ui/icons\";\r\n\r\n\r\ninterface Props {\r\n    onBackClick?: (any) => void,\r\n    onNextClick?: (any) => void,\r\n    loading?: boolean,\r\n    title?: string,\r\n    subtitle?: string\r\n}\r\n\r\nexport default function LeftRigthHeader(props: Props) {\r\n    const { onBackClick, loading, onNextClick, title, subtitle } = props;\r\n    return (\r\n        <CardHeader\r\n            title={<div style={{ flex: 1, display: \"flex\", flexDirection: \"row\" }}>\r\n                {onBackClick && <div><IconButton onClick={onBackClick} disabled={loading}>\r\n                    {loading ? <HourglassEmpty /> : <ArrowLeft />}\r\n                </IconButton></div>}\r\n                <div style={{ flex: 1 }}>\r\n                    <Typography variant=\"h5\">{title}</Typography>\r\n                    <Typography variant=\"body1\">{subtitle}</Typography>\r\n                </div>\r\n                {onNextClick && <div><IconButton onClick={onNextClick} disabled={loading}>\r\n                    {loading ? <HourglassEmpty /> : <ArrowRight />}\r\n                </IconButton></div>}\r\n            </div>}\r\n            disableTypography={true}\r\n            style={{ textAlign: \"center\" }}\r\n        />);\r\n}","import React from \"react\";\r\nimport { CardContent, Card, List, ListItem, Typography } from \"@material-ui/core\";\r\nimport LeftRigthHeader from \"./LeftRightHeader\";\r\nexport default function RankingCard(props: RankProps) {\r\n    const {\r\n        data,\r\n        col1,\r\n        col2,\r\n        secondColType,\r\n        colType,\r\n        ...remainProps\r\n    } = props;\r\n\r\n    return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n        <LeftRigthHeader {...remainProps} />\r\n        <CardContent style={{ flex: 1, overflow: \"auto\" }}>\r\n            <List>\r\n                {data.sort((a, b) => b[col1] - a[col1])\r\n                    .map((r, index) => {\r\n                        var value1 = r[col1];\r\n                        if (col2) {\r\n                            var value2 = r[col2];\r\n                            if (secondColType && secondColType === \"DATE\") {\r\n                                value2 = DateToString(r[col2]);\r\n                            } else {\r\n                                value2 = value2.toFixed(2);\r\n                            }\r\n                        }\r\n\r\n                        return (<ListItem key={index} id={\"ranking-listitem-\" + index} >\r\n                            <div style={{ display: \"table\", width: \"100%\" }} >\r\n\r\n                                <Typography style={{ display: \"table-cell\", width: 50 }} variant={r.me ? \"body1\" : \"caption\"}># {index + 1}</Typography>\r\n                                <Typography style={{ display: \"table-cell\" }} variant={r.me ? \"body1\" : \"caption\"} >\r\n                                    {r.username}\r\n                                </Typography>\r\n\r\n                                {colType === \"PERFOMANCE\" && <PerfomanceCell value={value1} me={r.me} />}\r\n\r\n                                {colType === \"MONEY\" && <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                    $ {value1.toFixed(2)}\r\n                                </Typography>}\r\n\r\n                                {colType === \"NUMBER\" && <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                    {value1}\r\n                                </Typography>}\r\n\r\n                                {col2\r\n                                    ? (secondColType === \"PERFOMANCE\"\r\n                                        ? <PerfomanceCell value={+value2} me={r.me} />\r\n                                        : <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100, paddingLeft: 10 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                            {secondColType === \"MONEY\" ? \"$\" : null} {value2}\r\n                                        </Typography>)\r\n                                    : null\r\n                                }\r\n                            </div>\r\n                        </ListItem>)\r\n                    })}\r\n            </List>\r\n        </CardContent>\r\n    </Card>)\r\n}\r\nfunction PerfomanceCell(props: { value: any, me: boolean }) {\r\n    return <Typography\r\n        color={props.value ? (props.value > 0 ? \"primary\" : \"secondary\") : \"inherit\"}\r\n        style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }}\r\n        variant={props.me ? \"body1\" : \"caption\"}\r\n    >\r\n        % {props.value.toFixed(2)} {props.value ? (props.value > 0 ? \"↑\" : \"↓\") : null}\r\n    </Typography>\r\n}\r\n\r\nfunction DateToString(x) {\r\n    if (!x) return \"Nunca\";\r\n    var date = new Date(x);\r\n    if (isNaN(+date)) return x;\r\n    var ahora = new Date();\r\n    if (date.getDate() === ahora.getDate() &&\r\n        date.getMonth() === ahora.getMonth() &&\r\n        date.getFullYear() === ahora.getFullYear()) {\r\n        return date.toLocaleTimeString();\r\n    }\r\n\r\n    for (let i = 1; i < 30; i++) {\r\n        var este_dia = new Date(ahora.getFullYear(), ahora.getMonth(), ahora.getDate() - i);\r\n        if (date.getDate() === este_dia.getDate() &&\r\n            date.getMonth() === este_dia.getMonth() &&\r\n            date.getFullYear() === este_dia.getFullYear()) {\r\n            if (i === 1) return \"Ayer\";\r\n            return \"Hace \" + i + \" días\";\r\n        }\r\n    }\r\n    return date.toLocaleDateString();\r\n}\r\n\r\n\r\nexport interface RankProps {\r\n    data: Rank[];\r\n    title: string;\r\n    col1: string;\r\n    col2?: string;\r\n    colType: \"MONEY\" | \"PERFOMANCE\" | \"NUMBER\";\r\n    secondColType?: \"MONEY\" | \"DATE\" | \"PERFOMANCE\";\r\n\r\n    subtitle?: string;\r\n    onBackClick?: any;\r\n    onNextClick?: any;\r\n    loading?: boolean;\r\n}","import React from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { Card, CardContent } from \"@material-ui/core\";\r\nimport { MonthToString } from \"../../Utils/Calcs\";\r\nimport LeftRigthHeader from \"./LeftRightHeader\";\r\n\r\nexport default class LineCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false,\r\n            bezierCurve: false,\r\n            scales: {\r\n                yAxes: [{\r\n\r\n                    ticks: {\r\n                        maxTicksLimit: 10,\r\n                        padding: 5,\r\n                        beginAtZero: true\r\n                    }\r\n                }],\r\n                xAxes: [{\r\n                    ticks: {\r\n                        padding: 5\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        const { data: RawData, ...remain } = this.props;\r\n        var labels = [];\r\n        var values = [];\r\n        for (let i = 0; i < RawData.length; i++) {\r\n            const el = RawData[i];\r\n            if (el.we) {\r\n                var x = new Date(el.we);\r\n                labels.push(`${x.getDate()} ${MonthToString(x.getMonth())}`);\r\n            } else {\r\n                labels.push(el.label);\r\n            }\r\n            values.push(el.value);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor: \"#3f51b5\",\r\n                borderColor: \"#3f51b5\",\r\n                data: values,\r\n                lineTension: 0,\r\n                fill: false\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <LeftRigthHeader\r\n                {...remain}\r\n            />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Line options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >);\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { Card, CardContent, Typography, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default function ProfitCard(props: ProfitSummary) {\r\n\r\n    const descuento = {\r\n        acumulado: props?.descuento?.acumulado || 0,\r\n        ciclo: props?.descuento?.ciclo || 0\r\n    }\r\n\r\n    const comision = {\r\n        acumulado: props?.comision?.acumulado || 0,\r\n        ciclo: props?.comision?.ciclo || 0\r\n    }\r\n\r\n    return (<Card className=\"dashboard-card\">\r\n        <CardHeader title=\"GANANCIAS\" style={{ textAlign: \"center\" }} />\r\n        <CardContent>\r\n            <Typography variant=\"overline\">Descuentos</Typography>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\", marginBottom: 10 }}>\r\n                <div style={{ textAlign: \"center\", flex: 1 }}>\r\n                    <Typography color=\"primary\" variant=\"h5\" style={{ flex: 1 }}>{reduceMoney(descuento.ciclo)}</Typography>\r\n                    <Typography color=\"primary\">ESTE CICLO</Typography>\r\n                </div>\r\n                <div style={{ borderLeft: \"1px solid black\", textAlign: \"center\", flex: 1 }}>\r\n                    <Typography variant=\"h5\" style={{ flex: 1 }} >{reduceMoney(descuento.acumulado)}</Typography>\r\n                    <Typography>ACUMULADO</Typography>\r\n                </div>\r\n            </div>\r\n            <Typography variant=\"overline\">Comisiones</Typography>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\", marginBottom: 10 }}>\r\n                <div style={{ textAlign: \"center\", flex: 1 }}>\r\n                    <Typography color=\"primary\" variant=\"h5\" style={{ flex: 1 }}>{reduceMoney(comision.ciclo)}</Typography>\r\n                    <Typography color=\"primary\">ESTE CICLO</Typography>\r\n                </div>\r\n                <div style={{ borderLeft: \"1px solid black\", textAlign: \"center\", flex: 1 }}>\r\n                    <Typography variant=\"h5\" style={{ flex: 1 }} >{reduceMoney(comision.acumulado)}</Typography>\r\n                    <Typography>ACUMULADO</Typography>\r\n                </div>\r\n            </div>\r\n            <Typography variant=\"overline\">Total</Typography>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\", marginBottom: 10 }}>\r\n                <div style={{ textAlign: \"center\", flex: 1 }}>\r\n                    <Typography color=\"primary\" variant=\"h5\" style={{ flex: 1 }}>\r\n                        {reduceMoney(comision.ciclo + descuento.ciclo)}\r\n                    </Typography>\r\n                    <Typography color=\"primary\">ESTE CICLO</Typography>\r\n                </div>\r\n                <div style={{ borderLeft: \"1px solid black\", textAlign: \"center\", flex: 1 }}>\r\n                    <Typography variant=\"h5\" style={{ flex: 1 }}>\r\n                        {reduceMoney(comision.acumulado + descuento.acumulado)}\r\n                    </Typography>\r\n                    <Typography>ACUMULADO</Typography>\r\n                </div>\r\n            </div>\r\n        </CardContent>\r\n    </Card >)\r\n}\r\nfunction reduceMoney(value) {\r\n    if (!value) return 0;\r\n    if (value > 1000) return (+(value / 1000).toFixed(1)) + \" K\";\r\n    if (value > 1000000) return (+(value / 1000).toFixed(1)) + \" M\";\r\n    return +value.toFixed(2);\r\n}","export enum ROLES {\r\n    ASESOR = 1,\r\n    GUIA = 2,\r\n    ADMINISTRADOR = 3,\r\n}","import React from \"react\";\r\nimport { Pie } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default class PieCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        var backgroundColor = [];\r\n        var info = this.props.data.sort((a, b) => b.value - a.value);\r\n        for (let i = 0; i < info.length; i++) {\r\n            const el = info[i];\r\n            labels.push(el.label);\r\n            values.push(el.value);\r\n            backgroundColor.push(el.color);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor,\r\n                data: values\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Pie options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >)\r\n    }\r\n}","import React from \"react\";\r\nimport API from \"../../Services/API\";\r\nimport { MonthToString } from \"../../Utils/Calcs\";\r\nexport default function <T = { [key: string]: any }>(Component) {\r\n    return class WithTimeTravel extends React.Component<RankWithTimeTravel & T> {\r\n        state = {\r\n            data: [] as any,\r\n            current_week: null as Week,\r\n            statName: null as any,\r\n            reduceFn: null as (data: any[]) => any[],\r\n            loading: false\r\n        }\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = { ...props };\r\n        }\r\n        handleBack = () => {\r\n            if (this.state.loading) return;\r\n            this.setState({ loading: true });\r\n            this.fetchData(this.state.current_week.id - 1);\r\n        }\r\n        fetchData(semana: number) {\r\n            API.Stats({ stats: [this.state.statName, \"current_week\"], semana })\r\n                .then(this.updateData).catch(this.showError);\r\n        }\r\n        handleNext = () => {\r\n            if (this.state.loading) return;\r\n            this.setState({ loading: true });\r\n            this.fetchData(this.state.current_week.id + 1);\r\n        }\r\n        updateData = (results) => {\r\n            const { current_week, ...remain } = results;\r\n            this.setState({\r\n                data: remain[this.state.statName] || [],\r\n                current_week,\r\n                loading: false\r\n            });\r\n        }\r\n        showError = (ex) => {\r\n            this.setState({ loading: false });\r\n            alert(ex.message);\r\n        }\r\n        render() {\r\n            var { current_week, data, reduceFn, loading } = this.state;\r\n            var subtitle = \"\";\r\n            if (current_week) {\r\n                let desde = new Date(current_week.start);\r\n                let hasta = new Date(current_week.end);\r\n                subtitle = `${desde.getDate()} ${MonthToString(desde.getMonth())} - ` +\r\n                    `${hasta.getDate()} ${MonthToString(hasta.getMonth())}`;\r\n            }\r\n            var { data, ...remainState } = this.state;\r\n            if (reduceFn) data = reduceFn(data);\r\n\r\n            return (<Component\r\n                {...remainState}\r\n                data={data}\r\n                subtitle={subtitle}\r\n                loading={loading}\r\n                onBackClick={this.handleBack}\r\n                onNextClick={this.handleNext}\r\n            />);\r\n        }\r\n    }\r\n}\r\n\r\ninterface RankWithTimeTravel {\r\n    statName: string;\r\n    reduceFn?: (data: any[]) => any[];\r\n    current_week?: Week;\r\n}","import { Card, CardContent } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport API from \"../../../Services/API\";\r\nimport { MonthToString } from \"../../../Utils/Calcs\";\r\nimport LeftRigthHeader from \"../LeftRightHeader\";\r\n\r\nexport interface CycleTraveleableProps {\r\n    data: DashboardResult\r\n    , current_cycle: Cycle\r\n    , loading?: boolean\r\n}\r\nexport default function <P extends CycleTraveleableProps>(Component: React.ComponentType<P>) {\r\n    return class CardWithCycleTravel extends React.Component<P & CardWithCycleTravelProps> {\r\n        state = {\r\n            data: {} as DashboardResult,\r\n            current_cycle: null as Cycle,\r\n            stats: [] as Array<keyof DashboardResult>,\r\n            loading: false\r\n        }\r\n        constructor(props) {\r\n            super(props);\r\n            this.state.stats = props.stats;\r\n            this.state.current_cycle = props.current_cycle;\r\n            this.state.data = props.data;\r\n        }\r\n        handleBack = () => {\r\n            if (this.state.loading) return;\r\n            this.setState({ loading: true });\r\n            this.fetchData(this.state.current_cycle.index - 1);\r\n        }\r\n        fetchData(cycleIndex: number) {\r\n            API.Stats({ stats: [...this.state.stats, \"current_cycle\"], cycleIndex })\r\n                .then(this.updateData).catch(this.showError);\r\n        }\r\n        handleNext = () => {\r\n            if (this.state.loading) return;\r\n            this.setState({ loading: true });\r\n            this.fetchData(this.state.current_cycle.index + 1);\r\n        }\r\n        updateData = (response: DashboardResult) => {\r\n            const { current_cycle, ...data } = response;\r\n            this.setState({\r\n                data,\r\n                current_cycle,\r\n                loading: false\r\n            });\r\n        }\r\n        showError = (ex) => {\r\n            this.setState({ loading: false });\r\n            alert(ex.message);\r\n        }\r\n        render() {\r\n\r\n            var { stats, title, ...componentProps } = this.props;\r\n            const { current_cycle, loading, data } = this.state;\r\n            var subtitle = \"\";\r\n            if (current_cycle) {\r\n                let desde = new Date(current_cycle.start);\r\n                let hasta = new Date(current_cycle.end);\r\n                subtitle = `${desde.getDate()} ${MonthToString(desde.getMonth())} - ` +\r\n                    `${hasta.getDate()} ${MonthToString(hasta.getMonth())}`;\r\n            }\r\n\r\n            const ComponentProps = {\r\n                ...componentProps\r\n                , current_cycle\r\n                , loading\r\n                , data\r\n            } as P;\r\n\r\n            return (<Card style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n                <LeftRigthHeader\r\n                    loading={loading}\r\n                    onBackClick={(current_cycle && current_cycle.index) ? this.handleBack : null}\r\n                    onNextClick={this.handleNext}\r\n                    subtitle={subtitle}\r\n                    title={title}\r\n                />\r\n                <CardContent style={{ flex: 1, padding: 0, overflow: \"hidden\" }}>\r\n                    <Component\r\n                        {...ComponentProps}\r\n                    />\r\n                </CardContent>\r\n            </Card>);\r\n        }\r\n    }\r\n}\r\n\r\ninterface CardWithCycleTravelProps {\r\n    stats: Array<keyof DashboardResult>;\r\n    current_cycle: Cycle;\r\n    title: string;\r\n    reduceFn?: (data: any[]) => any[];\r\n}","import React from \"react\";\r\nimport { GridProps, Grid } from \"@material-ui/core\";\r\n\r\nexport default function (props: { show: boolean } & GridProps) {\r\n    var { show, ...remainProps } = props;\r\n    var gridProps = {\r\n        ...remainProps,\r\n        item: true,\r\n        xs: 12\r\n    } as GridProps;\r\n\r\n    if (!props.show) return null;\r\n\r\n    return (<Grid {...gridProps}>\r\n        {props.children}\r\n    </Grid>);\r\n}","/// <reference path=\"../../../shared/MultiLevel.d.ts\"/>\r\nimport React from 'react';\r\nimport * as go from 'gojs';\r\nimport { ReactDiagram } from 'gojs-react';\r\nimport { Typography } from '@material-ui/core';\r\nimport ResumenUsuarios from '../lib/ResumenUsuarios';\r\n\r\nconst ACTIVE = \"#31d45f\";\r\nconst INACTIVE = \"#1F4963\";\r\n\r\nexport default function (props: {\r\n    data: MultiLevelUser[]\r\n}) {\r\n    const users = props.data\r\n        .sort((a: any, b: any) => a.nombre - b.nombre)\r\n        .map(x => ({\r\n            key: x.id\r\n            , name: (x.esUsuarioNuevo ? \"⭐ \" : \"\")\r\n                + x.nombre\r\n                + \" - \" + (x.total_comisionable || 0).toCurrency()\r\n            , parent: x.parent1 || undefined\r\n            , background: x.total_comisionable > 0 ? ACTIVE : INACTIVE\r\n        }));\r\n\r\n    return (<ReactDiagram\r\n        initDiagram={initDiagram}\r\n        divClassName=\"diagram-component\"\r\n        nodeDataArray={users}\r\n    />);\r\n}\r\n\r\nexport function ExplanationContainer(props: {\r\n    usuarios: MultiLevelUser[]\r\n}) {\r\n\r\n    const resumen = ResumenUsuarios(props.usuarios);\r\n\r\n    return (<div style={{ padding: 10 }}>\r\n        <div>\r\n            <div style={{ marginRight: 5, background: ACTIVE, minWidth: 13, minHeight: 13, display: \"inline-block\" }} />\r\n            <Typography style={{ display: \"inline-block\" }}>Usuarios activos - {resumen.activos.toLocaleString(undefined, { maximumFractionDigits: 0 })}</Typography>\r\n        </div>\r\n        <div>\r\n            <div style={{ marginRight: 5, background: INACTIVE, minWidth: 13, minHeight: 13, display: \"inline-block\" }} />\r\n            <Typography style={{ display: \"inline-block\" }}>Usuarios inactivos - {(resumen.total - resumen.activos).toLocaleString(undefined, { maximumFractionDigits: 0 })}  | Total de Usuarios : {resumen.total} </Typography>\r\n        </div>\r\n        <div>\r\n            <div style={{ marginRight: 5, minWidth: 13, minHeight: 13, display: \"inline-block\" }} >⭐</div>\r\n            <Typography style={{ display: \"inline-block\" }}>Usuarios nuevos - {resumen.nuevos.toLocaleString(undefined, { maximumFractionDigits: 0 })}</Typography>\r\n        </div>\r\n    </div>);\r\n}\r\n\r\n\r\nfunction initDiagram() {\r\n    // Since 2.2 you can also author concise templates with method chaining instead of GraphObject.make\r\n    // For details, see https://gojs.net/latest/intro/buildingObjects.html\r\n    const $ = go.GraphObject.make;  // for conciseness in defining templates\r\n\r\n    const myDiagram =\r\n        $(go.Diagram,\r\n            {\r\n                initialAutoScale: go.Diagram.UniformToFill,\r\n                // define the layout for the diagram\r\n                layout: $(go.TreeLayout, { nodeSpacing: 5, layerSpacing: 30 }),\r\n                model: new go.TreeModel({\r\n                    isReadOnly: true\r\n                })\r\n            });\r\n\r\n    // Define a simple node template consisting of text followed by an expand/collapse button\r\n    myDiagram.nodeTemplate =\r\n        $(go.Node, \"Horizontal\",\r\n            //{ selectionChanged: nodeSelectionChanged },  // this event handler is defined below\r\n            $(go.Panel, \"Auto\",\r\n                $(go.Shape, { stroke: null }, new go.Binding(\"fill\", \"background\")),\r\n                $(go.TextBlock,\r\n                    {\r\n                        font: \"bold 13px Helvetica, bold Arial, sans-serif\",\r\n                        stroke: \"white\", margin: 3\r\n                    },\r\n                    new go.Binding(\"text\", \"name\"))\r\n            ),\r\n            $(\"TreeExpanderButton\")\r\n        );\r\n\r\n    // Define a trivial link template with no arrowhead.\r\n    myDiagram.linkTemplate = $(go.Link,\r\n        { selectable: false },\r\n        $(go.Shape));  // the link shape\r\n\r\n    return myDiagram;\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function (users: MultiLevelUser[]) {\r\n    return React.useMemo(() => users.reduce((a, b) => {\r\n        if (b.isCurrentUser) return a;\r\n        if (b.esUsuarioNuevo) a.nuevos++;\r\n        if (b.total_comisionable > 0) a.activos++;\r\n        a.total++;\r\n        return a;\r\n    }, {\r\n        total: 0,\r\n        activos: 0,\r\n        nuevos: 0\r\n    }), [users, users.length]);\r\n}","import React from \"react\";\r\nimport { List, ListItem, ListItemText, ListItemSecondaryAction, Typography } from \"@material-ui/core\";\r\n\r\n\r\ninterface ComisionLista {\r\n    usuarios: number,\r\n    activos: number,\r\n    comisionable: number,\r\n    comision: number\r\n};\r\n\r\nexport default function (props: MultiLevelUserDataWithCalcs) {\r\n\r\n    const Niveles = React.useMemo(() => {\r\n        const niveles = [] as ComisionLista[];\r\n        if (props.n1_usuarios) {\r\n            niveles.push({\r\n                usuarios: props.n1_usuarios,\r\n                activos: props.n1_activos,\r\n                comisionable: props.n1_comisionable,\r\n                comision: props.n1_subtotal_comision\r\n            });\r\n        }\r\n\r\n        if (!(props.n2_usuarios)) return niveles;\r\n        niveles.push({\r\n            usuarios: props.n2_usuarios,\r\n            activos: props.n2_activos,\r\n            comisionable: props.n2_comisionable,\r\n            comision: props.n2_subtotal_comision\r\n        });\r\n\r\n        if (!(props.n3_usuarios)) return niveles;\r\n        niveles.push({\r\n            usuarios: props.n3_usuarios,\r\n            activos: props.n3_activos,\r\n            comisionable: props.n3_comisionable,\r\n            comision: props.n3_subtotal_comision\r\n        });\r\n\r\n        return niveles;\r\n    }, Object.values(props));\r\n\r\n\r\n    const { nX_activos, nX_usuarios } = Niveles.reduce((a, b) => {\r\n        a.nX_activos += b.activos;\r\n        a.nX_usuarios += b.usuarios;\r\n        return a;\r\n    }, { nX_activos: 0, nX_usuarios: 0 });\r\n\r\n    return (\r\n        <List>\r\n            <ListItem dense>\r\n                <ListItemText\r\n                    primaryTypographyProps={{ variant: \"button\" }}\r\n                    primary=\"Venta Comisionable\"\r\n                />\r\n                <ListItemSecondaryAction>\r\n                    <Typography variant=\"button\">\r\n                        Comision\r\n                    </Typography>\r\n                </ListItemSecondaryAction>\r\n            </ListItem>\r\n            <ListItem dense>\r\n                <ListItemText\r\n                    primary=\"Venta Individual\"\r\n                    secondary={`Valor Comisionable: ${props.total_calificable.toCurrency()}`}\r\n                />\r\n                <ListItemSecondaryAction></ListItemSecondaryAction>\r\n            </ListItem>\r\n            {Niveles.map((n, index) => (<ListItem dense key={index}>\r\n                <ListItemText\r\n                    primary={`Nivel ${index + 1} (${n.activos} / ${n.usuarios})`}\r\n                    secondary={`Valor Comisionable: ${n.comisionable.toCurrency()}`}\r\n                />\r\n                <ListItemSecondaryAction>{n.comision.toCurrency()}</ListItemSecondaryAction>\r\n            </ListItem>))}\r\n            <ListItem dense style={{ borderTop: \"1px solid #eaeaea\" }} >\r\n                <ListItemText\r\n                    primaryTypographyProps={{ variant: \"button\" }}\r\n                    primary=\"Total\"\r\n                    secondary={`${nX_activos} / ${nX_usuarios}`}\r\n                />\r\n                <ListItemSecondaryAction>\r\n                    <Typography variant=\"button\">\r\n                        {props.subtotal_comision.toCurrency()} + imp\r\n                    </Typography>\r\n                </ListItemSecondaryAction>\r\n            </ListItem>\r\n        </List>);\r\n}","import React from \"react\";\r\nimport { Grid, CircularProgress, Typography, Hidden, Divider, Theme } from \"@material-ui/core\";\r\nimport RankingCard, { RankProps } from \"./RankingCard\";\r\nimport API from \"../../Services/API\";\r\nimport LineCard from \"./LineCard\"\r\nimport ProfitCard from \"./ProfitCard\";\r\nimport PieCard from \"./PieCard\";\r\nimport WithTimeTravel from \"./WithTimeTravel\";\r\nimport { ROLES } from \"../../Globals\";\r\nimport CardWithCycleTravel from \"./lib/CardWithCycleTravel\";\r\nimport RestrictiveGrid from \"./lib/RestrictiveGrid\";\r\nimport HierarchyFeed from \"./HierarchyFeed\";\r\nimport { withStyles } from \"@material-ui/styles\";\r\nimport HierarchyGraph, { ExplanationContainer } from \"./HierarchyFeed/HierarchyGraph\";\r\n\r\nconst TimeTravelRank = WithTimeTravel<RankProps>(RankingCard);\r\nconst PersonalGraph = WithTimeTravel(LineCard);\r\nconst TimeTravelHierarchyFeed = CardWithCycleTravel(HierarchyFeed);\r\nconst TimeTravelHierarchyGraph = CardWithCycleTravel(props => (<>\r\n    <HierarchyGraph data={props.data.descendants} />\r\n    <ExplanationContainer usuarios={props.data.descendants || []} />\r\n</>));\r\n\r\n\r\nfunction stylesCreator(theme: Theme) {\r\n    return {\r\n        root: {\r\n            margin: \"auto\",\r\n            width: `calc(100% - ${(theme.spacing(2) * 2)}px)`,\r\n            textAlign: \"center\",\r\n            overflow: \"hidden\"\r\n        }\r\n    };\r\n}\r\n\r\nexport default withStyles(stylesCreator as any)(class Feed\r\n    extends React.Component<{ onMounted: Function, username: string, rol: number } & { classes: any }> {\r\n    unmounted = false;\r\n    state = {\r\n        loading: true\r\n        , error: null\r\n        , week_ranking: []\r\n        , group_graph: []\r\n        , personal_graph: []\r\n        , year_sales: []\r\n        , product_resume: []\r\n        , group_ranking: []\r\n        , descendants: []\r\n        , descendants_resume: null\r\n        , current_week: null\r\n        , current_cycle: null\r\n        , profit_summary: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    componentDidMount() {\r\n        const stats = [\r\n            \"week_ranking\",\r\n            \"personal_graph\",\r\n            \"year_sales\",\r\n            \"product_resume\",\r\n            \"current_week\",\r\n            \"descendants\",\r\n            \"current_cycle\",\r\n            \"profit_summary\"\r\n        ] as Array<keyof DashboardResult>;\r\n        if (!this.esAdmin()) stats.push(\r\n            \"descendants_resume\"\r\n        );\r\n        //if (this.props.rol === ROLES.ADMINISTRADOR) stats.push(\"group_graph\");\r\n        // if (this.props.rol === ROLES.ADMINISTRADOR) stats.push(\"group_ranking\");\r\n        API.Stats({ stats })\r\n            .then(x => {\r\n                if (this.unmounted) return;\r\n                this.setState({ ...x, loading: null })\r\n            })\r\n            .catch(error => {\r\n                if (this.unmounted) return;\r\n                this.setState({ error, loading: null });\r\n            });\r\n    }\r\n    componentWillUnmount = () => this.unmounted = true;\r\n    productResumeReducer = data => data.map(a => {\r\n        a.username = a.label;\r\n        return a;\r\n    });\r\n    esAdmin = () => {\r\n        return this.props.rol === ROLES.ADMINISTRADOR;\r\n    }\r\n    render() {\r\n        var {\r\n            loading, error,\r\n            week_ranking,\r\n            personal_graph,\r\n            group_graph,\r\n            year_sales,\r\n            product_resume,\r\n            group_ranking,\r\n            current_week,\r\n            descendants,\r\n            descendants_resume,\r\n            current_cycle,\r\n            profit_summary\r\n        } = this.state;\r\n        const { rol, username } = this.props;\r\n        var resume = { month: 0, year: 0 };\r\n        var ahora = new Date();\r\n        const esAdmin = this.esAdmin();\r\n\r\n        for (let i = 0; i < year_sales.length; i++) {\r\n            const x = year_sales[i];\r\n            x.createdAt = new Date(x.createdAt);\r\n            if (x.createdAt.getMonth() === ahora.getMonth() &&\r\n                x.createdAt.getFullYear() === ahora.getFullYear()) {\r\n                resume.month += x.profit;\r\n            }\r\n            resume.year += x.profit;\r\n        }\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        if (error) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <Typography variant=\"h5\">OCURRIÓ UN PROBLEMA</Typography>\r\n            <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n            <Typography variant=\"body1\">{error.status} {error.code}</Typography>\r\n        </div>);\r\n\r\n        return (<Grid container spacing={2} className={this.props.classes.root} >\r\n            <Grid item xs={12}>\r\n                <Typography color=\"primary\" variant=\"h6\">\r\n                    Hola {username}. Esta es tu oficina virtual.\r\n                </Typography>\r\n                <Typography variant=\"subtitle1\">\r\n                    Estamos aquí para prosperar juntos.\r\n                </Typography>\r\n            </Grid>\r\n\r\n            <RestrictiveGrid show={group_ranking && group_ranking.length > 0}>\r\n                <TimeTravelRank\r\n                    statName=\"group_ranking\"\r\n                    data={group_ranking}\r\n                    current_week={current_week}\r\n                    title=\"RANKING DE GRUPOS\"\r\n                    colType=\"MONEY\"\r\n                    secondColType=\"MONEY\"\r\n                    col1=\"stat\"\r\n                    col2=\"ventas_lider\"\r\n                />\r\n            </RestrictiveGrid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <PersonalGraph\r\n                    data={personal_graph}\r\n                    statName=\"personal_graph\"\r\n                    current_week={current_week}\r\n                    title={\"ESTADISTICA SEMANAL\"}\r\n                />\r\n            </Grid>\r\n\r\n            <RestrictiveGrid sm={6} show={(group_graph && group_graph.length > 0)}>\r\n                <PieCard data={product_resume} title=\"PRODUCTOS VENDIDOS\" />\r\n            </RestrictiveGrid>\r\n\r\n            <RestrictiveGrid sm={6} show={!esAdmin && !!Object.values(profit_summary || {}).filter(x => x).length}>\r\n                <ProfitCard {...(profit_summary || {})} />\r\n            </RestrictiveGrid>\r\n\r\n            <Hidden smUp>\r\n                <Grid item xs={12}>\r\n                    <Divider />\r\n                </Grid>\r\n            </Hidden>\r\n\r\n            <RestrictiveGrid sm={6} show={esAdmin} >\r\n                <TimeTravelRank\r\n                    current_week={current_week}\r\n                    statName=\"product_resume\"\r\n                    reduceFn={this.productResumeReducer}\r\n                    data={product_resume}\r\n                    title=\"PRODUCTOS VENDIDOS\"\r\n                    colType=\"NUMBER\"\r\n                    col1=\"value\"\r\n                />\r\n            </RestrictiveGrid>\r\n\r\n            <RestrictiveGrid sm={6} show={esAdmin} >\r\n                <TimeTravelRank\r\n                    statName=\"week_ranking\"\r\n                    current_week={current_week}\r\n                    data={week_ranking}\r\n                    reduceFn={data => esAdmin ? data.filter(x => x.rol === ROLES.ADMINISTRADOR) : data}\r\n                    title=\"RANKING DE LA SEMANA\"\r\n                    colType=\"MONEY\"\r\n                    secondColType=\"DATE\"\r\n                    col1=\"stat\"\r\n                    col2=\"ultimoPedido\"\r\n                />\r\n            </RestrictiveGrid>\r\n\r\n            <RestrictiveGrid sm={6} show={esAdmin} >\r\n                <RankingCard\r\n                    data={week_ranking}\r\n                    title=\"RANKING ACUMULATIVO\"\r\n                    colType=\"MONEY\"\r\n                    col1=\"monto_acumulativo\"\r\n                />\r\n            </RestrictiveGrid>\r\n\r\n            <Hidden smUp>\r\n                <Grid item xs={12}>\r\n                    <Divider />\r\n                </Grid>\r\n            </Hidden>\r\n\r\n            <RestrictiveGrid show={!esAdmin && descendants_resume && descendants.length > 1}>\r\n                <TimeTravelHierarchyFeed\r\n                    stats={[\"descendants\", \"descendants_resume\"]}\r\n                    data={{\r\n                        descendants_resume,\r\n                        descendants\r\n                    }}\r\n                    current_cycle={current_cycle}\r\n                    title=\"Genealogía\"\r\n                />\r\n            </RestrictiveGrid>\r\n\r\n            <RestrictiveGrid show={esAdmin && descendants.length > 1}>\r\n                <TimeTravelHierarchyGraph\r\n                    stats={[\"descendants\"]}\r\n                    data={{ descendants }}\r\n                    current_cycle={current_cycle}\r\n                    title=\"Genealogía Completa\"\r\n                />\r\n            </RestrictiveGrid>\r\n\r\n        </Grid>);\r\n    }\r\n});\r\n","import React from \"react\";\r\nimport { CycleTraveleableProps } from \"../lib/CardWithCycleTravel\";\r\nimport { Grid, Stepper, Step, StepLabel, Hidden, Typography, Tooltip } from \"@material-ui/core\";\r\nimport HierarchyGraph, { ExplanationContainer } from \"./HierarchyGraph\";\r\nimport HierarchyResume from \"./HierarchyResume\";\r\nimport API from \"../../../Services/API\";\r\n\r\nexport default function (props: CycleTraveleableProps) {\r\n\r\n    const { descendants, descendants_resume } = props.data;\r\n\r\n    const [steps, set_steps] = React.useState([] as AsyncReturnType<typeof API[\"Rangos\"]>);\r\n\r\n    React.useEffect(() => {\r\n        API.Rangos().then(rangos => set_steps(rangos));\r\n    }, []);\r\n\r\n    const rango = descendants_resume?.titulo;\r\n    const selectedStepIndex = steps.findIndex(x => x.id === rango);\r\n\r\n    return (<Grid container spacing={2}>\r\n        <Grid item xs={12} >\r\n            <Stepper\r\n                style={{ width: \"100%\", padding: 0, paddingTop: 0, paddingBottom: 10 }}\r\n                alternativeLabel={true}\r\n                activeStep={selectedStepIndex}\r\n                color=\"primary\">\r\n                {steps.map(x => <Step key={x.id} >\r\n                    <Tooltip title={x.nombre}>\r\n                        <StepLabel>\r\n                            <Typography variant=\"caption\">\r\n                                {x.id}\r\n                            </Typography>\r\n                        </StepLabel>\r\n                    </Tooltip>\r\n                </Step>)}\r\n            </Stepper>\r\n        </Grid>\r\n        <Grid item xs={12} sm={8}>\r\n            <div className=\"dashboard-card\">\r\n                <HierarchyGraph data={descendants} />\r\n            </div>\r\n            <Hidden smUp>\r\n                <Grid item xs={12}>\r\n                    <ExplanationContainer usuarios={descendants} />\r\n                    <hr />\r\n                </Grid>\r\n            </Hidden>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4}>\r\n            <HierarchyResume {...(descendants_resume || {} as any)} />\r\n        </Grid>\r\n        <Hidden xsDown >\r\n            <Grid item xs={12}>\r\n                <ExplanationContainer usuarios={descendants} />\r\n            </Grid>\r\n        </Hidden>\r\n    </Grid>);\r\n}\r\ntype AsyncReturnType<T extends (...args: any) => any> =\r\n    T extends (...args: any) => Promise<infer U> ? U :\r\n    T extends (...args: any) => infer U ? U :\r\n    any","import React from \"react\";\r\nimport { Table, TableHead, TextField, TableCell, TableRow, Button, CircularProgress, Typography, TableBody } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nexport default class ProductSales extends React.Component {\r\n    state = {\r\n        loading: null,\r\n        error: null,\r\n        data: []\r\n    }\r\n    handleClick = () => {\r\n        if (this.state.loading) return;\r\n        var desde = this.valueOf(\"desde\");\r\n        var hasta = this.valueOf(\"hasta\");\r\n        var estado = this.valueOf(\"estado\");\r\n        if (!(desde && !isNaN(+new Date(desde)))) return alert(\"Selecciona la fecha desde\");\r\n        if (!(hasta && !isNaN(+new Date(hasta)))) return alert(\"Selecciona la fecha hasta\");\r\n        if (!estado) return alert(\"Selecciona el estado\");\r\n\r\n        this.setState({ loading: true });\r\n\r\n        desde = new Date(desde).toJSON();\r\n        hasta = new Date(hasta).toJSON();\r\n\r\n        API.ProductSalesReport({ desde, hasta, estado })\r\n            .then(data => this.setState({ data, loading: null, error: null }))\r\n            .catch(error => this.setState({ error, loading: null }));\r\n    }\r\n    valueOf(ID: string) {\r\n        var el = document.getElementById(ID) as any;\r\n        return el && el.value;\r\n    }\r\n    render() {\r\n        const { data, error, loading } = this.state;\r\n        return (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <div>\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"desde\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"hasta\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} select SelectProps={{ native: true }} inputProps={{ id: \"estado\" }} >\r\n                    <option value={1}>PENDIENTE</option>\r\n                    <option value={0}>APROBADO</option>\r\n                    <option value={2}>RECHAZADO</option>\r\n                    <option value={3}>ENTREGADO</option>\r\n                </TextField>\r\n                <Button disabled={loading} style={{ marginLeft: 10, marginRight: 10 }} variant=\"outlined\" onClick={this.handleClick} >GENERAR</Button>\r\n            </div>\r\n            {loading\r\n                ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </div>)\r\n                : (error\r\n                    ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                        <Typography variant=\"h4\">OCURRIÓ UN ERROR</Typography>\r\n                        <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                        <Typography variant=\"subtitle2\" >{error.code} {error.status}</Typography>\r\n                    </div>)\r\n                    : (<div>\r\n                        <Table>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell component=\"th\" >Fecha</TableCell>\r\n                                    <TableCell component=\"th\" >#</TableCell>\r\n                                    <TableCell component=\"th\" >Usuario</TableCell>\r\n                                    <TableCell component=\"th\" >Estado</TableCell>\r\n                                    <TableCell component=\"th\" >Observacion</TableCell>\r\n                                    <TableCell component=\"th\" >Fecha Envío</TableCell>\r\n                                    <TableCell component=\"th\" >Entregado</TableCell>\r\n                                    <TableCell component=\"th\" >Motivo Anulacion</TableCell>\r\n                                    <TableCell component=\"th\" >Producto</TableCell>\r\n                                    <TableCell component=\"th\" >Cant</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {data.map(d => (<TableRow key={d.id}>\r\n                                    <TableCell >{new Date(d.createdAt).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.idPedido}</TableCell>\r\n                                    <TableCell>{d.username}</TableCell>\r\n                                    <TableCell>{d.estado}</TableCell>\r\n                                    <TableCell>{d.observacion}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.motivoAnulacion}</TableCell>\r\n                                    <TableCell>{d.descripcion}</TableCell>\r\n                                    <TableCell>{d.cantidad}</TableCell>\r\n                                </TableRow>))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>)\r\n                )}\r\n        </div >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Button, TextField } from \"@material-ui/core\";\r\nimport * as dateformat from \"date-format\";\r\nimport API from \"../../Services/API\";\r\n\r\nexport default function () {\r\n\r\n    const aRef = React.createRef<HTMLAnchorElement>();\r\n    const [a_ref_ID] = React.useState(new Date().valueOf());\r\n\r\n    const [desde, set_desde] = React.useState(\r\n        dateformat(\"yyyy-MM-dd\", new Date(new Date().getFullYear(), new Date().getMonth(), 1))\r\n    );\r\n    const [hasta, set_hasta] = React.useState(\r\n        dateformat(\"yyyy-MM-dd\", new Date(new Date().getFullYear(), new Date().getMonth() + 1, -1))\r\n    );\r\n    const [estado, set_estado] = React.useState(\"0\");\r\n\r\n    const validationError = function () {\r\n        if (!(from && from.toJSON())) return \"Digite una fecha `Desde` valida \";\r\n        if (!(to && to.toJSON())) return \"Digite una fecha `hasta` valida\";\r\n        if (estado === null || estado === undefined) return \"Seleccione el estado\";\r\n    }\r\n\r\n    try {\r\n        var from = dateformat.parse(\"yyyy-MM-dd hh:mm:ss.SSS\", desde + \" 00:00:00.000\");\r\n        var to = dateformat.parse(\"yyyy-MM-dd hh:mm:ss.SSS\", hasta + \" 00:00:00.000\");\r\n    } catch (ex) {\r\n        console.error(ex.message, { desde, hasta });\r\n    }\r\n\r\n    return (<div style={{ paddingTop: 10, paddingBottom: 20 }}>\r\n        <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"date\" onChange={ev => set_desde(ev.currentTarget.value as any)} value={desde} />\r\n        <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"date\" onChange={ev => set_hasta(ev.currentTarget.value as any)} value={hasta} />\r\n        <TextField style={{ marginLeft: 10, marginRight: 10 }} select onChange={ev => set_estado(ev.currentTarget.value as any)} value={estado}\r\n            SelectProps={{\r\n                native: true\r\n            }}\r\n        >\r\n            <option value=\"0\">APROBADO</option>\r\n            <option value=\"3\">ENVIADO</option>\r\n            <option value=\"5\">FACTURADO</option>\r\n        </TextField>\r\n        <Button style={{ marginLeft: 10, marginRight: 10 }} variant=\"outlined\" onClick={() => {\r\n            const err = validationError();\r\n            if (err) return alert(err);\r\n            aRef.current.href = `${API.ServerURL()}/reports/items-invoice-report.xlsx?from=${from.toJSON()}&to=${to.toJSON()}&estado=${estado}`;\r\n            aRef.current.click();\r\n        }} >\r\n            DESCARGAR PRODUCTOS\r\n        </Button>\r\n\r\n        <Button style={{ marginLeft: 10, marginRight: 10 }} variant=\"outlined\" onClick={() => {\r\n            const err = validationError();\r\n            if (err) return alert(err);\r\n            aRef.current.href = `${API.ServerURL()}/reports/payments-invoice-report.xlsx?from=${from.toJSON()}&to=${to.toJSON()}&estado=${estado}`;\r\n            aRef.current.click();\r\n        }} >\r\n            DESCARGAR PAGOS\r\n        </Button>\r\n        <a style={{ display: \"none\" }} ref={aRef} target=\"_blank\" download id={\"a-download-no-\" + a_ref_ID} ></a>\r\n    </div>)\r\n}","import React from \"react\";\r\nimport { Tabs, Tab, Paper } from \"@material-ui/core\";\r\nimport ProductSales from \"./ProductSales\";\r\nimport InvoiceReport from \"./InvoiceReport\";\r\n\r\nexport default class Reports extends React.Component<any> {\r\n    state = {\r\n        currentTab: 0\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    handleChange = (x, currentTab) => {\r\n        this.setState({ currentTab });\r\n    }\r\n    render() {\r\n        const { currentTab } = this.state;\r\n        return (\r\n            <Paper style={{ margin: 10 }}>\r\n                <Tabs style={{ marginBottom: 10 }} value={currentTab} onChange={this.handleChange}>\r\n                    <Tab label=\"Detalle de Productos\" />\r\n                    <Tab label=\"Reporte de Facturación\" />\r\n                </Tabs>\r\n                {currentTab === 0 && <ProductSales />}\r\n                {currentTab === 1 && <InvoiceReport />}\r\n            </Paper>)\r\n    }\r\n}","import React from \"react\";\r\nimport MUIDataTable, { MUIDataTableProps } from \"mui-datatables\";\r\nimport { TextField } from \"@material-ui/core\";\r\nexport default function (props: MUIDataTableProps) {\r\n\r\n    const { options, ...remainProps } = props;\r\n\r\n    const { download, downloadOptions, customToolbar, ...remainOptions } = (options || {});\r\n\r\n    const [separator, set_separator] = React.useState(\",\");\r\n\r\n    return <MUIDataTable\r\n        options={{\r\n            ...(remainOptions || {})\r\n            , customToolbar(...args) {\r\n                return (<>\r\n                    <TextField\r\n                        value={separator}\r\n                        onChange={ev => set_separator(ev.target.value)}\r\n                        select\r\n                        SelectProps={{\r\n                            native: true\r\n                        }}\r\n                        helperText=\"descarga de csv\"\r\n                        label=\"Separador\"\r\n                    >\r\n                        <option value=\",\" >, (MAC)</option>\r\n                        <option value=\";\">; (Windows)</option>\r\n                    </TextField>\r\n                    <div style={{ height: \"100%\", right: \"1px solid #eaeaea\", marginLeft: 5, marginRight: 10 }} ></div>\r\n                    {customToolbar ? customToolbar(...args) : null}\r\n                </>);\r\n            }\r\n            , onDownload(buildHead: (columns) => string, buildBody: (data) => string, columns: any[], data: any[]): string {\r\n                var forExcel = window.confirm(\"Hacer archivo compatible con Microsoft Excel (para lectura de caracteres especiales) ?\");\r\n                if (forExcel) return \"\\uFEFF\" + buildHead(columns) + buildBody(data);\r\n                return buildHead(columns) + buildBody(data);\r\n            }\r\n            , downloadOptions: {\r\n                separator,\r\n                ...(downloadOptions || {})\r\n            }\r\n        }}\r\n        {...(remainProps || {} as any)}\r\n    />\r\n}","import React from \"react\";\r\nimport DataTable from \"../DataTable\";\r\n\r\nexport default class Queue extends React.PureComponent<{\r\n    data: any[],\r\n    columns: any[],\r\n    estado: string,\r\n    onClick: (id: number) => void\r\n}> {\r\n    handleClick = (values, index) => {\r\n        this.props.onClick(values[0]);\r\n    }\r\n    render() {\r\n        const { data, columns } = this.props;\r\n        const rows = data.filter(x => x.estado === this.props.estado)\r\n            .sort((a, b) => a.changedAt - b.changedAt)\r\n        return (\r\n            <DataTable\r\n            title=\"\"\r\n                data={rows}\r\n                columns={columns}\r\n                options={{\r\n                    selectableRows: \"none\",\r\n                    onRowClick: this.handleClick\r\n                }}\r\n            />\r\n        )\r\n    }\r\n}","export const entrada_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"numeroTransaccion\",\r\n        label: \"# Comprobante\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    }\r\n];\r\n\r\nexport const aprobado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: true\r\n        }\r\n    }\r\n];\r\nexport const enviado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaEnvio\",\r\n        label: \"Enviado\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"comisionableTotal\",\r\n        label: \"Comisionable\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: true\r\n        }\r\n    }\r\n];\r\nexport const recibido_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaRecepcion\",\r\n        label: \"Recepcion\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"bienRecibido\",\r\n        label: \"Incompleto\",\r\n        options: {\r\n            filter: true,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"observacionRecepcion\",\r\n        label: \"Observaciones\",\r\n        options: {\r\n            sort: false,\r\n            filter: false\r\n        }\r\n    }\r\n];\r\nexport const facturado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaRecepcion\",\r\n        label: \"Recepcion\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"comisionableTotal\",\r\n        label: \"Comisionable\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"bienRecibido\",\r\n        label: \"Incompleto\",\r\n        options: {\r\n            filter: true,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"observacionRecepcion\",\r\n        label: \"Observaciones\",\r\n        options: {\r\n            sort: false,\r\n            filter: false\r\n        }\r\n    },\r\n    {\r\n        name: \"numeroFactura\",\r\n        label: \"Factura\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    }\r\n];\r\n\r\nexport const rechazado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaAnulacion\",\r\n        label: \"Rechazado\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"motivoAnulacion\",\r\n        label: \"Motivo\",\r\n        options: {\r\n            filter: false,\r\n            sort: false\r\n        }\r\n    }\r\n];","import React from \"react\";\r\nimport { Tabs, Tab, AppBar } from \"@material-ui/core\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport API from \"../../Services/API\";\r\nimport Queue from \"./Queue\";\r\nimport OrderDetails from \"../OrderList/OrderDetails\";\r\nimport { entrada_columns, aprobado_columns, enviado_columns, facturado_columns, rechazado_columns } from \"./Columns\";\r\n\r\nexport default class OrderQueue extends React.Component<{\r\n    match?: any,\r\n    history?: any,\r\n    location?: any,\r\n    onMounted?: Function\r\n}> {\r\n    state = {\r\n        data: [],\r\n        loading: true,\r\n        error: null,\r\n        id: null\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.match.path);\r\n        this.loadData();\r\n    }\r\n    loadData() {\r\n        API.GetOrders()\r\n            .then(rawData => {\r\n                const data = rawData.map(x => {\r\n                    var fechaCreacion = new Date(x.fechaCreacion);\r\n                    x.fechaCreacion = fechaCreacion.toLocaleDateString() as any;\r\n                    x.fechaEnvio = x.fechaEnvio && new Date(x.fechaEnvio).toLocaleDateString() as any;\r\n                    x.fechaRecepcion = x.fechaRecepcion && new Date(x.fechaRecepcion).toLocaleDateString() as any;\r\n                    x.fechaAnulacion = x.fechaAnulacion && new Date(x.fechaAnulacion).toLocaleDateString() as any;\r\n                    if (x.fechaAnulacion) console.info(x);\r\n                    x.total = x.total.toFixed(2) as any;\r\n                    x.bienRecibido = (x.bienRecibido ? \"\" : \"SI\") as any;\r\n                    x.changedAt = (x.changedAt\r\n                        ? new Date(x.changedAt).valueOf()\r\n                        : 0) as any;\r\n\r\n                    //x.numeroTransaccion = x.imgTransaccion ? \"IMAGEN\" : x.numeroTransaccion;\r\n                    return x;\r\n                });\r\n                this.setState({ data, loading: null });\r\n            })\r\n            .catch(error => this.setState({ error }));\r\n    }\r\n    handleTab = (_, value) => {\r\n        this.props.history.push(this.props.match.path + value);\r\n    }\r\n    openOrder = id => {\r\n        this.props.history.push(this.props.match.path + this.currentTab() + \"/\" + id);\r\n    }\r\n    closeOrder = shouldUpdate => {\r\n        if (shouldUpdate) this.loadData();\r\n        this.props.history.push(this.props.match.path + this.currentTab());\r\n    }\r\n    currentTab() {\r\n        return \"/\" + (this.props.location.pathname.split(\"/\")[2] || \"inbox\");\r\n    }\r\n    render() {\r\n        return (<div>\r\n            <AppBar position=\"relative\" color=\"primary\">\r\n                <Tabs onChange={this.handleTab} value={this.currentTab()} variant=\"fullWidth\">\r\n                    <Tab label=\"Entrada\" value=\"/inbox\" />\r\n                    <Tab label=\"Aprobado\" value=\"/ok\" />\r\n                    <Tab label=\"Enviado\" value=\"/sent\" />\r\n                    {/*<Tab label=\"Recibido\" value=\"/ack\" />*/}\r\n                    <Tab label=\"Facturado\" value=\"/invoice\" />\r\n                    <Tab label=\"Rechazado\" value=\"/denied\" />\r\n                </Tabs>\r\n            </AppBar>\r\n            <Switch>\r\n                <Route path={this.props.match.path + \"/inbox\"}\r\n                    render={_ => (<Queue\r\n                        columns={entrada_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"PENDIENTE\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/ok\"}\r\n                    render={_ => (<Queue\r\n                        columns={aprobado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"APROBADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/sent\"}\r\n                    render={_ => (<Queue\r\n                        columns={enviado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"ENVIADO\"\r\n                    />)}\r\n                />\r\n                {/*<Route path={this.props.match.path + \"/ack\"}\r\n                    render={_ => (<Queue\r\n                        columns={recibido_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"RECIBIDO\"\r\n                    />)}\r\n                />*/}\r\n                <Route path={this.props.match.path + \"/invoice\"}\r\n                    render={_ => (<Queue\r\n                        columns={facturado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"FACTURADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/denied\"}\r\n                    render={_ => (<Queue\r\n                        columns={rechazado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"RECHAZADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/\"} exact>\r\n                    <Redirect to={this.props.match.path + \"/inbox\"} />\r\n                </Route>\r\n            </Switch>\r\n            <Route path={this.props.match.path + \"/:group/:id\"}\r\n                render={routeProps => <OrderDetails\r\n                    id={+routeProps.match.params.id}\r\n                    onClose={this.closeOrder}\r\n                    editable={true} />}\r\n            />\r\n        </div>);\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { ListItem, List, ListItemIcon, IconButton, ListItemText, ListItemSecondaryAction, TextField } from \"@material-ui/core\";\r\nimport { Add, Delete } from \"@material-ui/icons\";\r\n\r\ninterface InputOptions {\r\n    label?: string;\r\n    type?: \"number\" | \"string\";\r\n    allowZero?: boolean;\r\n}\r\n\r\ninterface Props {\r\n    dataSource: any[];\r\n    onAdd: (results: { name?: string, item?: any, inputValue?: string }) => void;\r\n    onRemove: (results: { name?: string, item?: any }) => void;\r\n    items: any[];\r\n    name?: string;\r\n    IdProp: string;\r\n    DisplayProp: string;\r\n    SecondaryDisplayProp?: string;\r\n\r\n    InputConfig?: InputOptions\r\n}\r\n\r\nvar COUNT = 0;\r\n\r\nexport default class ItemList extends React.PureComponent<Props> {\r\n    state = {\r\n        inputValue: \"\",\r\n        selectValue: \"\",\r\n        showErrors: false\r\n    }\r\n    INPUT_ID = \"CUSTOM_INPUT_ID_NO_\";\r\n    SELECT_ID = \"CUSTOM_SELECT_ID_NO_\";\r\n    constructor(props) {\r\n        super(props);\r\n        this.INPUT_ID += COUNT;\r\n        this.SELECT_ID += COUNT;\r\n        COUNT++;\r\n    }\r\n    handleDelete = event => {\r\n        const index = event.currentTarget.value;\r\n        var item = this.props.items[index];\r\n        this.props.onRemove({ name: this.props.name, item });\r\n    }\r\n    handleAdd = () => {\r\n        const { InputConfig, IdProp, dataSource, onAdd, name } = this.props;\r\n        const { inputValue, selectValue } = this.state;\r\n\r\n        if (InputConfig) {\r\n            var error = validateInput(inputValue, InputConfig);\r\n            if (error) {\r\n                window.requestAnimationFrame(() => {\r\n                    try { document.getElementById(this.INPUT_ID).focus() } catch (ex) { }\r\n                });\r\n                return this.setState({ showErrors: true });\r\n            }\r\n        }\r\n        if (!selectValue) {\r\n            window.requestAnimationFrame(() => {\r\n                try { document.getElementById(this.SELECT_ID).focus() } catch (ex) { }\r\n            });\r\n            return this.setState({ showErrors: true });\r\n        }\r\n        var item = dataSource.find(x => x[IdProp].toString() === selectValue.toString());\r\n        onAdd({ name: name, item: { ...item }, inputValue });\r\n        this.setState({ selectValue: \"\", inputValue: \"\", showErrors: false });\r\n    }\r\n    handleChange = event => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value } as any);\r\n    }\r\n    render() {\r\n        const { InputConfig, DisplayProp, IdProp, SecondaryDisplayProp, items } = this.props;\r\n        var dataSource = this.props.dataSource;\r\n        const { inputValue, selectValue, showErrors } = this.state;\r\n\r\n        const inputError = showErrors\r\n            ? (InputConfig ? validateInput(inputValue, InputConfig) : \"\")\r\n            : \"\";\r\n        const selectError = showErrors\r\n            ? (selectValue ? \"\" : \"Selecciona un item\")\r\n            : \"\";\r\n\r\n        var IDs = this.props.items.map(x => x[IdProp]);\r\n        dataSource = dataSource.filter(x => IDs.indexOf(x[IdProp]) < 0);\r\n\r\n        return (<>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\", width: \"calc(100% - 20px)\", margin: \"auto\" }}>\r\n                <TextField\r\n                    style={{ flex: 1, marginTop: 8, marginBottom: 8 }}\r\n                    inputProps={{ id: this.SELECT_ID }}\r\n                    SelectProps={{ native: true }}\r\n                    error={!!selectError} helperText={selectError}\r\n                    select\r\n                    name=\"selectValue\"\r\n                    value={selectValue}\r\n                    onChange={this.handleChange}\r\n                >\r\n                    <option value=\"\"> - SELECCIONA UNA OPCIÓN - </option>\r\n                    {dataSource.map(x => (\r\n                        <option key={x[IdProp]} value={x[IdProp]}>{x[DisplayProp]}</option>\r\n                    ))}\r\n                </TextField>\r\n                {InputConfig && <TextField\r\n                    error={!!inputError}\r\n                    helperText={inputError}\r\n                    style={{ margin: 10 }}\r\n                    margin=\"dense\"\r\n                    type={InputConfig.type || \"text\"}\r\n                    value={inputValue}\r\n                    name=\"inputValue\"\r\n                    onChange={this.handleChange}\r\n                    placeholder={InputConfig.label || \"\"}\r\n                    inputProps={{ id: this.INPUT_ID }}\r\n                />}\r\n                <div>\r\n                    <IconButton onClick={this.handleAdd} >\r\n                        <Add />\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n            {items && items.length\r\n                ? (<List>\r\n                    {items.map((x, index) => (<ListItem key={x[IdProp]} dense >\r\n                        {SecondaryDisplayProp && <ListItemIcon>{x[SecondaryDisplayProp]}</ListItemIcon>}\r\n                        <ListItemText>{x[DisplayProp]}</ListItemText>\r\n                        <ListItemSecondaryAction>\r\n                            <IconButton value={index} name=\"delete\" onClick={this.handleDelete}>\r\n                                <Delete />\r\n                            </IconButton>\r\n                        </ListItemSecondaryAction>\r\n                    </ListItem>))}\r\n                </List>)\r\n                : null}\r\n        </>);\r\n    }\r\n}\r\n\r\nfunction validateInput(value: string, input: InputOptions) {\r\n    var x = (value || \"\").trim();\r\n    if (!x) return \"Digite un valor\";\r\n    if (input.type === \"number\") {\r\n        if (isNaN(+x)) return \"Digite un número\";\r\n    }\r\n    return;\r\n}","import React from \"react\";\r\nimport Input from \"../Input\";\r\nimport Modal from \"../Modal\";\r\nimport API from \"../../Services/API\";\r\nimport ImageInput from \"../ImageInput\";\r\nimport ImageReader, { ImgFileToObject } from \"../../Utils/ImageReader\";\r\nimport { Button, Typography, FormControlLabel, Switch } from \"@material-ui/core\";\r\nimport ItemList from \"../ItemList\";\r\nimport { Focus } from \"../../lib/DOMActions\";\r\n\r\ninterface Props {\r\n    onDone: (update?: boolean) => void,\r\n    showingID: string,\r\n    productList: FullProduct[]\r\n}\r\ninterface State extends FullProduct {\r\n    error?: { [name: string]: string }\r\n    loading?: string;\r\n    rawFile?: File;\r\n}\r\n\r\nexport default class Edit extends React.Component<Props, State> {\r\n    state = {} as State;\r\n    handleChange = e => {\r\n        const { name, value } = e.currentTarget;\r\n        this.setState({ [name]: value } as any);\r\n    }\r\n    handleChecked = e => {\r\n        const { name, checked } = e.currentTarget;\r\n        this.setState({ [name]: checked } as any);\r\n    }\r\n    handleDelete = () => {\r\n        if (!this.state.id) return;\r\n        var doIt = window.confirm(\"Deseas continuar con esta acción?\");\r\n        if (!doIt) return;\r\n        this.setState({ loading: \"ELIMINAR\" });\r\n        API.DeleteProduct(this.state.id)\r\n            .then(this._updated)\r\n            .catch(this._failed);\r\n    }\r\n    handleSave = () => {\r\n        const errors = this._validar(this.state);\r\n        if (errors) return Focus(Object.keys(errors)[0]);\r\n\r\n        this.setState({ loading: \"GUARDAR\" });\r\n        if (this.state.rawFile) {\r\n            const { rawFile, ...product } = this.state;\r\n            return ImgFileToObject(this.state.rawFile)\r\n                .then(imageFile => API.SaveProduct({ imageFile, ...product }))\r\n                .then(this._updated)\r\n                .catch(this._failed);\r\n        }\r\n        API.SaveProduct(this.state)\r\n            .then(this._updated)\r\n            .catch(this._failed);\r\n    }\r\n    _validar(data: FullProduct) {\r\n        var nombre = (data.nombre || \"\").trim();\r\n        const errorSet: any = {};\r\n        if (!nombre) errorSet.nombre = \"Digita el nombre\";\r\n\r\n        const pvp_final = (data.pvp_final === undefined || data.pvp_final === null) ? \"\" : data.pvp_final;\r\n        if (!pvp_final.toString().trim()) {\r\n            errorSet.pvp_final = \"Digita el Precio Final\";\r\n        } else {\r\n            if (isNaN(+data.pvp_final)) {\r\n                errorSet.pvp_final = \"Precio final debe ser un número\";\r\n            }\r\n        }\r\n        if (data.opciones && data.opciones.length && !data.maxItems)\r\n            errorSet.maxItems = \"Digita la cantidad máxima a escoger\";\r\n\r\n        if (!(data.sku && data.sku.toString().trim().length)) errorSet.sku = \"Digita el SKU (codigo)\";\r\n        if (!(data.orden && data.orden.toString().trim().length)) errorSet.orden = \"Digita el orden en que aparecerá el producto\";\r\n\r\n        if (data.descripcion_url && data.descripcion_url.trim().length > 300)\r\n            errorSet.descripcion_url = `El enlace de la descripción solo puede tener hasta 300 caracteres. Actualmente tiene ${data.descripcion_url.trim().length}`\r\n\r\n        if (Object.keys(errorSet).length) return errorSet;\r\n        return;\r\n    }\r\n    _updated = () => {\r\n        this.setState({ loading: null, error: null });\r\n        this.props.onDone(true);\r\n    }\r\n    _failed = error => {\r\n        this.setState({ loading: null, error });\r\n        window.requestAnimationFrame(() => {\r\n            try { document.getElementById(\"ERROR_MESSAGE\").focus(); } catch (ex) { }\r\n        });\r\n    }\r\n    handleClose = () => {\r\n        if (this.state.loading) return;\r\n        this.props.onDone();\r\n    }\r\n    handleFile = rawFile => {\r\n        ImageReader(rawFile)\r\n            .then(imgSrc => this.setState({ imgSrc, rawFile }))\r\n            .catch(this._failed);\r\n    }\r\n\r\n    handleAdd = ({ name, item, inputValue }) => {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            if (name === \"OPCIONES\") {\r\n                state.opciones = state.opciones ? [...state.opciones] : [];\r\n                state.opciones.push({ idOpcion: +item.id });\r\n                return state;\r\n            }\r\n            if (name === \"COMPONENTES\") {\r\n                state.componentes = state.componentes ? [...state.componentes] : [];\r\n                state.componentes.push({ idComponente: +item.id, cantidad: +(inputValue || 1) });\r\n                return state;\r\n            }\r\n        });\r\n    }\r\n    handleRemove = ({ name, index }) => {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            if (name === \"OPCIONES\") {\r\n                state.opciones = [...state.opciones];\r\n                state.opciones.splice(index, 1);\r\n            }\r\n            if (name === \"COMPONENTES\") {\r\n                state.componentes = [...state.componentes];\r\n                state.componentes.splice(index, 1);\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        const id = this.props.showingID;\r\n        const nextId = nextProps.showingID;\r\n        var show = !(id === null || id === undefined);\r\n        var nextShow = !(nextId === null || nextId === undefined);\r\n        if (!show && nextShow) {\r\n            this.setState(prev => {\r\n                var { habilitado, ...exists } = this.props.productList.find(p => p.id === +nextId) || {} as any;\r\n                const keys = Object.keys(this.state);\r\n                // RESETEO LAS PROPIEDADES QUE NO EXISTEN\r\n                if (habilitado === undefined || habilitado === null) habilitado = true;\r\n                return {\r\n                    ...keys.reduce((acc, v) => ({ ...acc, [v]: undefined }), {})\r\n                    , ...exists\r\n                    , habilitado\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // MIENTRAS ESTÉ CERRADO, EL COMPONENTE NO SE ACTUALIZARÁ\r\n    shouldComponentUpdate(nextProps) {\r\n        var isOpen = !(this.props.showingID === null || this.props.showingID === undefined);\r\n        var NextisOpen = !(nextProps.showingID === null || nextProps.showingID === undefined);\r\n        return (isOpen === NextisOpen && isOpen === false) ? false : true;\r\n    }\r\n    render() {\r\n        const { loading } = this.state;\r\n        const id = this.props.showingID;\r\n        const error: any = this._validar(this.state) || {};\r\n        const show = !(id === null || id === undefined);\r\n\r\n        const opciones = (this.state.opciones || []).map(o => ({\r\n            id: o.idOpcion\r\n            , nombre: (this.props.productList.find(a => a.id === o.idOpcion) || {}).nombre\r\n        }));\r\n        const componentes = (this.state.componentes || []).map(o => ({\r\n            id: o.idComponente\r\n            , nombre: (this.props.productList.find(a => a.id === o.idComponente) || {}).nombre\r\n            , cantidad: o.cantidad\r\n        }));\r\n        const dataSource = this.props.productList.filter(x => !x.combo && x.id !== +id);\r\n\r\n        const footer = (<>\r\n            <FormControlLabel\r\n                label=\"Habilitado\"\r\n                style={{ flexGrow: 1 }}\r\n                control={<Switch\r\n                    checked={!!this.state.habilitado}\r\n                    name=\"habilitado\"\r\n                    onChange={this.handleChecked}\r\n                />}\r\n            />\r\n            {id !== \"NUEVO\" && <Button disabled={!!loading} onClick={this.handleDelete} color=\"secondary\" variant=\"outlined\" >\r\n                {loading === \"ELIMINAR\" ? \"ELIMINANDO...\" : \"ELIMINAR\"}\r\n            </Button>}\r\n            <Button disabled={!!loading} onClick={this.handleSave} color=\"primary\" variant=\"outlined\" >\r\n                {loading === \"GUARDAR\" ? \"GUARDANDO...\" : \"GUARDAR\"}\r\n            </Button>\r\n            <Button color=\"inherit\" disabled={!!loading} onClick={this.handleClose}>SALIR</Button>\r\n        </>);\r\n\r\n        return (<Modal\r\n            title=\"\"\r\n            onClose={this.handleClose}\r\n            show={show}\r\n            footer={footer}\r\n\r\n        >\r\n            <Input\r\n                value={this.state.nombre || \"\"}\r\n                onChange={this.handleChange}\r\n                name=\"nombre\"\r\n                required\r\n                label=\"Nombre\"\r\n                maxLength={100}\r\n                error={error.nombre}\r\n            />\r\n            <ImageInput\r\n                className=\"card-product-img\"\r\n                onChange={this.handleFile}\r\n                src={this.state.imgSrc}\r\n                title={this.state.nombre}\r\n            />\r\n            <div style={{ textAlign: \"center\", marginBottom: 10 }}>\r\n                <Typography variant=\"caption\">\r\n                    El peso recomendado para la imagen es entre 100 y 200 Kbs.\r\n                </Typography>\r\n            </div>\r\n\r\n            <div style={{ marginLeft: \"auto\", marginRight: \"auto\", textAlign: \"center\" }}>\r\n                <Input type=\"phone\"\r\n                    value={(this.state.pvp_final === undefined || this.state.pvp_final === null) ? \"\" : this.state.pvp_final as any}\r\n                    onChange={this.handleChange}\r\n                    name=\"pvp_final\"\r\n                    required\r\n                    label=\"Precio Final\"\r\n                    maxLength={10}\r\n                    error={error.pvp_final}\r\n                    style={{ marginRight: 10 }}\r\n                />\r\n                <Input type=\"phone\"\r\n                    value={this.state.cantidad_desde || \"\" as any}\r\n                    onChange={this.handleChange}\r\n                    name=\"cantidad_desde\"\r\n                    label=\"Cantidad mínima\"\r\n                    maxLength={2}\r\n                    error={error.cantidad_desde}\r\n                />\r\n            </div>\r\n\r\n            <Input\r\n                type=\"url\"\r\n                value={this.state.descripcion_url || \"\"}\r\n                onChange={this.handleChange}\r\n                name=\"descripcion_url\"\r\n                required\r\n                label=\"Descripción\"\r\n                maxLength={300}\r\n            />\r\n\r\n            <div style={{ marginTop: 20, margin: \"auto\", display: \"flex\", flexDirection: \"row\" }} >\r\n                <Input\r\n                    style={{ flex: 1, marginLeft: 10, marginRight: 10 }}\r\n                    value={this.state.sku || \"\" as any}\r\n                    onChange={this.handleChange}\r\n                    name=\"sku\"\r\n                    required\r\n                    label=\"SKU\"\r\n                    maxLength={20}\r\n                    error={error.sku}\r\n                />\r\n                <Input\r\n                    onChange={this.handleChange}\r\n                    value={this.state.orden || \"\" as any}\r\n                    style={{ width: 100, marginLeft: 10 }}\r\n                    name=\"orden\"\r\n                    required\r\n                    label=\"Orden\"\r\n                    maxLength={5}\r\n                    error={error.orden}\r\n                />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 20, margin: \"auto\", display: \"flex\", flexDirection: \"row\" }} >\r\n                <FormControlLabel\r\n                    label=\"Aplica a comisión\"\r\n                    control={<Switch\r\n                        checked={!!this.state.aplica_comision}\r\n                        name=\"aplica_comision\"\r\n                        onChange={this.handleChecked}\r\n                    />}\r\n                />\r\n                <FormControlLabel\r\n                    label=\"Aplica a Descuento\"\r\n                    control={<Switch\r\n                        checked={!!this.state.aplica_descuento}\r\n                        name=\"aplica_descuento\"\r\n                        onChange={this.handleChecked}\r\n                    />}\r\n                />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 20, textAlign: \"center\", marginLeft: \"auto\", marginRight: \"auto\" }}>\r\n                <FormControlLabel\r\n                    label=\"El producto es un combo\"\r\n                    control={<Switch\r\n                        checked={!!this.state.combo}\r\n                        name=\"combo\"\r\n                        onChange={this.handleChecked}\r\n                    />}\r\n                />\r\n            </div>\r\n\r\n            {this.state.combo && <>\r\n                <Typography style={{ marginTop: 20 }} variant=\"h6\">COMPONENTES</Typography>\r\n                <ItemList\r\n                    dataSource={dataSource}\r\n                    items={componentes}\r\n                    onAdd={this.handleAdd}\r\n                    onRemove={this.handleRemove}\r\n                    IdProp=\"id\"\r\n                    DisplayProp=\"nombre\"\r\n                    SecondaryDisplayProp=\"cantidad\"\r\n                    InputConfig={{ type: \"number\", label: \"Cantidad\" }}\r\n                    name=\"COMPONENTES\"\r\n                />\r\n\r\n                <Typography style={{ marginTop: 20 }} variant=\"h6\">OPCIONES</Typography>\r\n                <ItemList\r\n                    dataSource={dataSource}\r\n                    items={opciones}\r\n                    onAdd={this.handleAdd}\r\n                    onRemove={this.handleRemove}\r\n                    IdProp=\"id\"\r\n                    DisplayProp=\"nombre\"\r\n                    name=\"OPCIONES\"\r\n                />\r\n                <Input type=\"phone\"\r\n                    value={this.state.maxItems || \"\" as any}\r\n                    onChange={this.handleChange}\r\n                    name=\"maxItems\"\r\n                    label=\"Máximo\"\r\n                    maxLength={2}\r\n                    error={error.maxItems}\r\n                    style={{}}\r\n                />\r\n\r\n\r\n                <Typography variant=\"body2\" color=\"secondary\" id=\"ERROR_MESSAGE\" tabIndex={0} style={{ marginTop: 10 }}>\r\n                    {this.state.error && this.state.error.message}\r\n                </Typography>\r\n            </>}\r\n\r\n        </Modal>);\r\n    }\r\n}","import React from \"react\";\r\nimport API from \"../../Services/API\";\r\nimport ProductGrid from \"./ProductGrid\";\r\nimport { Typography, CircularProgress } from \"@material-ui/core\";\r\nimport { Route } from \"react-router-dom\";\r\nimport Edit from \"./Edit\";\r\n\r\nexport default class extends React.Component<any, any> {\r\n    state = {\r\n        data: [] as Product[],\r\n        loading: true,\r\n        error: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.match.path);\r\n        this._Update();\r\n    }\r\n\r\n    _Update = () => {\r\n        API.GetProducts(true)\r\n            .then(data => this.setState({ data, loading: false }))\r\n            .catch(error => this.setState({ loading: false, error }));\r\n    }\r\n    handleClick = e => {\r\n        this.props.history.push(this.props.match.path + \"/\" + e.currentTarget.value);\r\n    }\r\n    handleDone = shouldUpdate => {\r\n        if (shouldUpdate) this._Update();\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    productSorted() {\r\n        return this.state.data.sort((a, b) => a.orden - b.orden);\r\n    }\r\n    handleAction = event => {\r\n        const { name, value } = event.currentTarget;\r\n        var sorted = this.productSorted();\r\n        var exists = sorted.find(x => x.id === +value);\r\n        // NO EXISTE\r\n        if (!exists) return;\r\n        // PRIMERO\r\n        if (name === \"LEFT\" && sorted.indexOf(exists) === 0) return;\r\n        // ULTIMO\r\n        if (name === \"RIGHT\" && sorted.length === (sorted.indexOf(exists) + 1)) return;\r\n\r\n        API.SendProductAction(value, name)\r\n            .then(this._Update)\r\n            .catch(error => this.setState({ error }));\r\n    }\r\n    render() {\r\n        if (this.state.loading)\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h6\">CARGANDO...</Typography>\r\n            </div>);\r\n\r\n        return (<div style={{ width: \"calc(100% - 25px)\", margin: \"auto\", marginTop: 10 }}>\r\n            <ProductGrid\r\n                items={this.productSorted()}\r\n                showNewItem={true}\r\n                visible={true}\r\n                onActionClick={this.handleAction}\r\n                onCardClick={this.handleClick}\r\n            />\r\n            <Route\r\n                path={this.props.match.path + \"/:id\"}\r\n                children={({ match }) => (\r\n                    <Edit\r\n                        productList={this.state.data}\r\n                        showingID={match && match.params.id}\r\n                        onDone={this.handleDone}\r\n                    />\r\n                )}\r\n            />\r\n        </div>);\r\n    }\r\n}","import { MUIDataTableColumn } from \"mui-datatables\";\r\n\r\nconst UserColumns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"ID\"\r\n    }, {\r\n        name: \"nombre\",\r\n        label: \"Nombre\"\r\n    }, {\r\n        name: \"ParentName\",\r\n        label: \"Patrocinador\"\r\n    }, {\r\n        name: \"parentId\",\r\n        label: \"ID Patrocinador\"\r\n    }, {\r\n        name: \"username\",\r\n        label: \"Usuario\"\r\n    }, {\r\n        name: \"Rol\",\r\n        label: \"Rol\"\r\n    }, {\r\n        name: \"ultimoPedido\",\r\n        options: { display: \"none\" }\r\n    }, {\r\n        name: \"UltimoPedido\",\r\n        label: \"Ultimo Pedido\"\r\n    }, {\r\n        name: \"Estado\",\r\n        label: \"Estado\"\r\n    }\r\n] as Array<MUIDataTableColumn>\r\nexport default UserColumns;","import React from \"react\";\r\nimport { InputProps, Typography } from \"@material-ui/core\";\r\nimport Input from \"../Input\";\r\n\r\nexport default function (props: {\r\n    readOnly: boolean\r\n    , loading: boolean\r\n    , value: string\r\n    onChange: InputProps[\"onChange\"]\r\n}) {\r\n    if (props.readOnly)\r\n        return (<div style={{ marginTop: 10, marginBottom: 10 }}>\r\n            <Typography style={{ display: \"inline\" }} >ROL: </Typography>\r\n            <Typography style={{ display: \"inline\" }} variant=\"button\" >{RolToString(props.value)}</Typography>\r\n        </div>);\r\n\r\n    return (<Input\r\n        select\r\n        disabled={props.loading}\r\n        value={props.value || \"\"}\r\n        name=\"rol\"\r\n        label=\"Rol\"\r\n        SelectProps={{ native: true }}\r\n        onChange={props.onChange}\r\n    >\r\n        <option value=\"1\" >{RolToString(1)}</option>\r\n        <option value=\"3\" >{RolToString(3)}</option>\r\n    </Input>)\r\n}\r\n\r\n\r\nfunction RolToString(rol: number | string) {\r\n    if (+rol === 1) return \"ASESOR/A\";\r\n    if (+rol === 3) return \"ADMINISTRADOR/A\";\r\n    return \"\";\r\n}","import { Typography } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport React from \"react\";\r\nimport API from \"../../Services/API\";\r\nimport Input from \"../Input\";\r\nexport default function UserListInput(props: {\r\n    onChange: (parentId: number) => void;\r\n    value: number;\r\n    readOnlyValue?: string;\r\n    id?: string;\r\n    error?: string;\r\n    loading?: boolean;\r\n}) {\r\n\r\n    if (props.readOnlyValue) {\r\n        return (<div style={{ display: \"flex\", flexDirection: \"row\" }} >\r\n            <Typography>Madre/Padre: </Typography>\r\n            <Typography variant=\"button\" >{props.readOnlyValue}</Typography>\r\n        </div>);\r\n    }\r\n    const [users, status] = GetUsersHook();\r\n\r\n\r\n    if (props.value !== undefined && props.value !== null) {\r\n        var value = users.find(x => x.id === props.value);\r\n    }\r\n    if (value === undefined) value = null;\r\n\r\n\r\n    return <Autocomplete\r\n        options={users}\r\n        loading={status === \"LOADING\"}\r\n        loadingText=\"Cargando datos...\"\r\n        noOptionsText=\"No se encontraron registros\"\r\n        renderInput={params => <Input\r\n            label={status === \"LOADING\" ? \"CARGANDO DATOS...\" : \"Selecciona el Asesor/a Natú que te invitó\"}\r\n            {...params}\r\n            error={props.error}\r\n            name=\"parentId\"\r\n        />}\r\n        getOptionLabel={item => `${item.id} - ${item.nombre}`}\r\n        value={value}\r\n        onChange={(_, value: VisibleUser) => props.onChange(value && value.id)}\r\n        getOptionSelected={(item, value) => item.id === value.id}\r\n    />\r\n}\r\n\r\n\r\n\r\nfunction GetUsersHook(): [VisibleUser[], \"\" | \"LOADING\" | \"COMPLETED\" | \"ERROR\", Error?] {\r\n    const [status, setStatus] = React.useState<\"\" | \"LOADING\" | \"COMPLETED\" | \"ERROR\">(\"LOADING\");\r\n    const [users, setUsers] = React.useState([]);\r\n    const [error, setError] = React.useState(null);\r\n\r\n    React.useEffect(() => {\r\n        if (status === \"LOADING\") {\r\n            API.GetUsers([\"id\", \"nombre\"], 1)\r\n                .then(data => {\r\n                    setUsers(data);\r\n                    setStatus(\"COMPLETED\");\r\n                })\r\n                .catch(ex => {\r\n                    setStatus(\"ERROR\");\r\n                    setError(ex);\r\n                });\r\n        }\r\n    }, [status]);\r\n    return [users, status, error];\r\n}","/// <reference path=\"./lib/UserDataFormProps.d.ts\" />\r\nimport React from \"react\";\r\nimport { InputAdornment, TextField, IconButton, Typography, Button, CircularProgress, FormControlLabel, Switch } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport Input from \"../Input\";\r\nimport RolInput from \"./RolInput\";\r\nimport UserListInput from \"./UserListInput\";\r\n\r\n\r\nexport default function (props: UserDataFormProps) {\r\n\r\n    const {\r\n        loading, id, onSubmit, onChange, formType, editionType,\r\n        ...state } = props;\r\n\r\n\r\n    function _onSubmit(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        onSubmit();\r\n    }\r\n\r\n    const editarEstado = formType === \"EDIT\" && editionType !== \"USER\" ? true : null;\r\n    const editarModificarPVPs = (formType === \"EDIT\" && editionType !== \"USER\" && +state.rol === 3) ? true : null;\r\n    const editarTermsAndConds = formType === \"EDIT\" && editionType !== \"USER\";\r\n\r\n    const error = props.error || {};\r\n\r\n    return (<form style={{ margin: \"auto\", maxWidth: 600 }} noValidate onSubmit={_onSubmit}>\r\n        <Typography variant=\"h6\">Información Personal</Typography>\r\n        <Input\r\n            disabled={loading}\r\n            error={error.nombre}\r\n            onChange={onChange}\r\n            value={state.nombre || \"\"}\r\n            name=\"nombre\"\r\n            label=\"Nombres Completos\"\r\n        />\r\n        <Input\r\n            disabled={loading}\r\n            error={error.identificacion}\r\n            onChange={onChange}\r\n            value={state.identificacion || \"\"}\r\n            name=\"identificacion\"\r\n            label=\"Identificacion (CI o Pasaporte)\"\r\n            type=\"phone\"\r\n        />\r\n        <Input\r\n            disabled={loading}\r\n            error={error.telefono}\r\n            onChange={onChange}\r\n            value={state.telefono || \"\"}\r\n            name=\"telefono\"\r\n            label=\"Telefono\"\r\n            type=\"phone\"\r\n        />\r\n        <Input\r\n            disabled={loading}\r\n            error={error.email}\r\n            onChange={onChange}\r\n            value={state.email || \"\"}\r\n            name=\"email\"\r\n            label=\"Correo Electronico\"\r\n            type=\"email\"\r\n        />\r\n        <Input\r\n            disabled={loading}\r\n            error={error.nacionalidad}\r\n            onChange={onChange}\r\n            value={state.nacionalidad || \"\"}\r\n            name=\"nacionalidad\"\r\n            label=\"Nacionalidad\"\r\n        />\r\n        <Input\r\n            InputLabelProps={{ shrink: true }}\r\n            disabled={loading}\r\n            error={error.fechaNacimiento}\r\n            onChange={onChange}\r\n            value={state.fechaNacimiento || \"\"}\r\n            name=\"fechaNacimiento\"\r\n            label=\"Fecha Nacimiento\"\r\n            type=\"date\"\r\n        />\r\n\r\n        <Typography variant=\"h6\" style={{ marginTop: 30 }}>{formType === \"SIGN-IN\" ? \"Agrega tu dirección\" : \"Dirección\"}</Typography>\r\n        <Input disabled={loading}\r\n            error={error.ciudad}\r\n            onChange={onChange}\r\n            value={state.ciudad || \"\"}\r\n            name=\"ciudad\"\r\n            label=\"Ciudad\"\r\n        />\r\n        <Input disabled={loading}\r\n            error={error.direccion}\r\n            onChange={onChange}\r\n            value={state.direccion || \"\"}\r\n            name=\"direccion\"\r\n            label=\"Direccion\"\r\n        />\r\n\r\n        <Typography variant=\"h6\" style={{ marginTop: 30 }}>{formType === \"SIGN-IN\" ? \"Crea tu Usuario\" : \"Usuario\"}</Typography>\r\n        <Input\r\n            disabled={loading}\r\n            error={error.username}\r\n            onChange={onChange}\r\n            value={state.username || \"\"}\r\n            name=\"username\"\r\n            label=\"Usuario\"\r\n        />\r\n        <Password\r\n            required={formType === \"SIGN-IN\"}\r\n            disabled={loading}\r\n            error={error.password}\r\n            onChange={onChange}\r\n            value={state.password || \"\"}\r\n            name=\"password\"\r\n            label={formType === \"EDIT\" ? \"Nueva contraseña\" : \"Contraseña\"}\r\n        />\r\n        <Password\r\n            required={formType === \"SIGN-IN\"}\r\n            disabled={loading}\r\n            error={error.confirm_password}\r\n            onChange={onChange}\r\n            value={state.confirm_password || \"\"}\r\n            name=\"confirm_password\"\r\n            label={formType === \"EDIT\" ? \"confirma la nueva contraseña\" : \"Confirma tu contraseña\"}\r\n        />\r\n\r\n        <UserListInput\r\n            value={state.parentId}\r\n            readOnlyValue={editionType === \"ADMIN\" ? undefined : state.ParentName}\r\n            onChange={(value: any) => onChange({ currentTarget: { name: \"parentId\", value } } as any)}\r\n            error={error.parentId}\r\n            loading={loading}\r\n        />\r\n\r\n        {formType === \"EDIT\"\r\n            ? <RolInput value={\"\" + (state.rol || \"\")} loading={loading} onChange={onChange} readOnly={editionType !== \"ADMIN\"} />\r\n            : null}\r\n\r\n        {editarEstado &&\r\n            <Input\r\n                select\r\n                disabled={loading}\r\n                value={(state.estado === undefined || state.estado === null) ? \"\" : state.estado.toString()}\r\n                name=\"estado\"\r\n                label=\"Estado\"\r\n                SelectProps={{ native: true }}\r\n                onChange={onChange}\r\n            >\r\n                <option value=\"1\" >PENDIENTE</option>\r\n                <option value=\"0\" >APROBADO (Habilitado)</option>\r\n                <option value=\"2\" >RECHAZADO (Deshabilitado)</option>\r\n            </Input>}\r\n\r\n        {editarModificarPVPs &&\r\n            <FormControlLabel\r\n                label=\"Puede modificar precios durante toma de pedido\"\r\n                control={<Switch\r\n                    checked={Boolean(state.editarPVPsdurantePedido)}\r\n                    name=\"editarPVPsdurantePedido\"\r\n                    onChange={onChange}\r\n                />}\r\n            />\r\n        }\r\n\r\n        {editarTermsAndConds &&\r\n            <div style={{ margin: \"auto\", textAlign: \"center\", paddingTop: 20, paddingBottom: 20 }}>\r\n                <FormControlLabel\r\n                    control={<input\r\n                        type=\"checkbox\"\r\n                        onChange={onChange}\r\n                        name=\"mustAcceptTermsAndConds\"\r\n                        checked={state.mustAcceptTermsAndConds || false}\r\n                    />}\r\n                    label=\"Mostrar Aceptar Terminos y Condiciones; y aceptar Políticas de privacidad al iniciar\"\r\n                />\r\n                {state.termsAndCondsAcceptedAt && <div style={{ marginTop: 10 }}>\r\n                    <Typography variant=\"button\">\r\n                        Este usuario ha aceptado los Términos y Condiciones el:\r\n                        {new Date(state.termsAndCondsAcceptedAt).toLocaleString()}\r\n                    </Typography>\r\n                </div>}\r\n            </div>}\r\n\r\n\r\n        {(error.guardar) ? <Typography tabIndex={0} id=\"guardar\" color=\"secondary\">{error.guardar}</Typography> : null}\r\n        {formType === \"SIGN-IN\" &&\r\n            (<Button type=\"submit\" color=\"primary\" variant=\"outlined\" fullWidth style={{ marginTop: 20 }} >\r\n                {loading ? <CircularProgress size={20} color=\"inherit\" /> : \"ENVIAR\"}\r\n            </Button>)}\r\n        {props.children}\r\n    </form >\r\n    );\r\n}\r\nfunction Password(props: any) {\r\n    const { error, ...other_props } = props;\r\n    const [show_password, switchShowPassword] = React.useState(false);\r\n    var input_props: any = { inputProps: { id: props.name } };\r\n    if (error) {\r\n        input_props.error = true;\r\n        input_props.helperText = error;\r\n    }\r\n    return (<TextField\r\n        type={show_password ? \"text\" : \"password\"}\r\n        required\r\n        fullWidth\r\n        {...other_props}\r\n        {...input_props}\r\n        style={{ marginTop: 5, marginBottom: 5 }}\r\n        InputProps={{\r\n            endAdornment: <InputAdornment position=\"end\" >\r\n                <IconButton onClick={x => switchShowPassword(!show_password)}>\r\n                    {show_password ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n            </InputAdornment>\r\n        }}\r\n    />);\r\n}","interface Options {\r\n    passwordOpcional?: boolean;\r\n}\r\nexport default function ValidateUserForm(state: VisibleUser, options: Options = {}) {\r\n    const { nombre,\r\n        telefono,\r\n        identificacion,\r\n        email,\r\n        fechaNacimiento,\r\n        nacionalidad,\r\n        ciudad,\r\n        direccion,\r\n        username,\r\n        password,\r\n        parentId,\r\n        confirm_password\r\n    } = state;\r\n\r\n    const result: any = {};\r\n\r\n    if (isEmpty(nombre)) result.nombre = \"Digita tu nombre\";\r\n\r\n    if (isEmpty(telefono)) {\r\n        result.telefono = \"Digita tu telefono\";\r\n    } else {\r\n        if (isNaN(parseInt(telefono))) result.telefono = \"El telefono solo puede contener numeros\";\r\n        if (telefono.length <= 5) result.telefono = \"El telefono debe tener mínimo 6 digitos\";\r\n    }\r\n\r\n    if (isEmpty(identificacion)) {\r\n        result.identificacion = \"Digita tu identificacion\";\r\n    }\r\n\r\n    if (isEmpty(email)) {\r\n        result.email = \"Digita tu email\";\r\n    } else {\r\n        if (email.indexOf(\"@\") === -1) result.email = \"El correo es incorrecto\";\r\n        if (email.indexOf(\".\") === -1) result.email = \"El correo es incorrecto\";\r\n    }\r\n\r\n    if (isEmpty(fechaNacimiento)) {\r\n        result.fechaNacimiento = \"Digita tu fecha de nacimiento\";\r\n    } else {\r\n        if (isNaN(+new Date(fechaNacimiento))) result.fechaNacimiento = \"La fecha no es válida\";\r\n    }\r\n\r\n    if (isEmpty(nacionalidad)) result.nacionalidad = \"Digita tu nacionalidad\";\r\n    if (isEmpty(ciudad)) result.ciudad = \"Digita tu ciudad\";\r\n    if (isEmpty(direccion)) result.direccion = \"Digita tu direccion\";\r\n\r\n    if (isEmpty(username)) result.username = \"Digita tu Usuario\";\r\n    if (isEmpty(password)) {\r\n        if (!options.passwordOpcional)\r\n            result.password = \"Digita la contraseña\";\r\n    } else {\r\n        if (password.length < 5) result.password = \"La contraseña debe tener más de 6 caracteres\";\r\n        if (password.trim() !== (confirm_password || \"\").trim()) result.confirm_password = \"Las contraseñas no concuerdan entre si\";\r\n    }\r\n    /*\r\n    if (isEmpty(grupo)) {\r\n        if (+rol === 2) result.grupo = \"Digita el nombre de tu grupo\";\r\n        if (+rol === 1 || rol === undefined) result.grupo = \"Selecciona tu grupo\";\r\n    }*/\r\n\r\n    if (state.id !== 1 && isEmpty(parentId)) {\r\n        result.parentId = \"Selecciona tu Mamá Natú\";\r\n    }\r\n\r\n    if (Object.keys(result).length) {\r\n        var key = Object.keys(result)[0];\r\n        FocusOn(key);\r\n        return result;\r\n    }\r\n    return null;\r\n}\r\nexport function FocusOn(id) {\r\n    window.requestAnimationFrame(() => {\r\n        try {\r\n            document.getElementById(id).focus();\r\n        } catch (ex) { }\r\n    });\r\n}\r\nfunction isEmpty(value) {\r\n    if (value === null) return true;\r\n    if (value === undefined) return true;\r\n    if (!value.toString().length) return true;\r\n    return false;\r\n}","import React from \"react\";\r\nimport Modal from \"../Modal\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport UserDataForm from \"./UserDataForm\";\r\nimport ValidateUserForm, { FocusOn } from \"./ValidateUserForm\";\r\nimport API from \"../../Services/API\";\r\nimport { Focus } from \"../../lib/DOMActions\";\r\n\r\ninterface EditUserProps {\r\n    show: boolean;\r\n    initialData: VisibleUser;\r\n    grupos: any[];\r\n    onClose: (shouldUpdate?: boolean) => void;\r\n}\r\ninterface State extends VisibleUser {\r\n    loading: boolean;\r\n    error: any;\r\n    validarPassword?: boolean;\r\n}\r\n\r\nexport default class EditUserData extends React.Component<EditUserProps, State> {\r\n    state = {} as State;\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        var show = this.props.show;\r\n        var nextShow = nextProps.show;\r\n        if (!show && nextShow) {\r\n            this.setState(prev => {\r\n                const keys = Object.keys(prev);\r\n                // RESETEO LAS PROPIEDADES QUE NO EXISTEN\r\n                var state = {\r\n                    ...keys.reduce((acc, v) => ({ ...acc, [v]: undefined }), {})\r\n                    , ...nextProps.initialData || {}\r\n                }\r\n                if (state.estado === undefined) state.estado = 1;\r\n                if (state.rol === undefined) state.rol = 1;\r\n                state.validarPassword = !state.id;\r\n                return state;\r\n            });\r\n        }\r\n    }\r\n    // MIENTRAS ESTÉ CERRADO, EL COMPONENTE NO SE ACTUALIZARÁ\r\n    shouldComponentUpdate(nextProps) {\r\n        var isOpen = this.props.show;\r\n        var NextisOpen = nextProps.show;\r\n        return (isOpen === NextisOpen && isOpen === false) ? false : true;\r\n    }\r\n\r\n    handleClose = () => {\r\n        if (this.state.loading) return;\r\n        this.props.onClose();\r\n    }\r\n\r\n    handleChange = event => {\r\n        var { name, value, type, checked } = event.currentTarget;\r\n        value = type === \"checkbox\" ? checked : value;\r\n        this.setState({ [name]: value } as any);\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        // divido el objeto para evitar enviar TODOS los parametros secundarios al servidor\r\n        const { loading, error, validarPassword, ...userData } = this.state;\r\n        if (loading) return;\r\n        var validationErrors = ValidateUserForm(userData, {\r\n            passwordOpcional: !validarPassword\r\n        });\r\n        if (validationErrors) return this.setState({ error: validationErrors });\r\n        this.setState({ loading: true });\r\n        API.SaveUser(userData)\r\n            .then(x => this.props.onClose(true))\r\n            .catch(error => this.setState({ error, loading: false },\r\n                () => Object.keys(error).forEach(FocusOn))\r\n            );\r\n    }\r\n    handleDelete = event => {\r\n        if (!this.state.id) return;\r\n        if (this.state.loading) return;\r\n        var isOk = window.confirm(\"Deseas eliminar este usuario?\");\r\n        if (!isOk) return;\r\n        this.setState({ loading: true });\r\n        API.DeleteUser(this.state.id)\r\n            .then(x => this.props.onClose(true))\r\n            .catch(err => this.setState({\r\n                error: { guardar: err.message },\r\n                loading: false\r\n            }, () => Focus(\"guardar\")));\r\n    }\r\n    render() {\r\n        const { grupos } = this.props;\r\n        const { loading, error, ...state } = this.state;\r\n\r\n        const footer = (<>\r\n            <Button disabled={loading} variant=\"outlined\" onClick={this.handleDelete} color=\"secondary\">ELIMINAR</Button>\r\n            <Button disabled={loading} variant=\"outlined\" onClick={this.handleSubmit} color=\"primary\">GUARDAR</Button>\r\n            <Button disabled={loading} onClick={this.handleClose} color=\"primary\">SALIR</Button>\r\n        </>);\r\n\r\n        return (<Modal show={this.props.show} title=\"Usuario\" footer={footer} onClose={this.handleClose}>\r\n            <UserDataForm\r\n                formType=\"EDIT\"\r\n                editionType=\"ADMIN\"\r\n                grupos={grupos}\r\n                {...state as any}\r\n                loading={loading}\r\n                error={error}\r\n                onSubmit={this.handleSubmit}\r\n                onChange={this.handleChange}\r\n            />\r\n\r\n        </Modal>);\r\n    }\r\n}","import React from \"react\";\r\nimport UserColumns from \"./Columns\";\r\nimport { Tooltip, IconButton, Typography, CircularProgress, TextField } from \"@material-ui/core\";\r\nimport { Add, Policy } from \"@material-ui/icons\";\r\nimport API from \"../../Services/API\";\r\nimport Edit from \"./Edit\";\r\nimport { Route } from \"react-router-dom\";\r\nimport RouteMessage from \"../RouteMessage\";\r\nimport DataTable from \"../DataTable\";\r\n\r\nexport default class Users extends React.Component<UserProps> {\r\n    unmounted = false;\r\n    state = {\r\n        data: [] as VisibleUser[],\r\n        grupos: [],\r\n        loading: true,\r\n        error: null,\r\n        downloadSeparator: \",\"\r\n    }\r\n    componentWillMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.match.path);\r\n        this.FetchData();\r\n    }\r\n    componentWillUnmount() { this.unmounted = true };\r\n    FetchData = () => {\r\n        this.setState({ loading: true });\r\n        Promise.all([API.GetUsers(), API.GetGroups()])\r\n            .then(([data, grupos]) => {\r\n                if (this.unmounted) return;\r\n                this.setState({\r\n                    grupos, data: (data || []).map(x => {\r\n                        if (x.ultimoPedido)\r\n                            x.UltimoPedido = new Date(x.ultimoPedido).toLocaleDateString();\r\n                        return x;\r\n                    }),\r\n                    loading: false\r\n                });\r\n            }).catch(error => {\r\n                this.setState({ loading: false });\r\n                if (this.unmounted) return;\r\n                this.reportError(error.message);\r\n            });\r\n    }\r\n    reportError(b: string, a?: string, focusafter: string = \"\") {\r\n        if (this.unmounted) return;\r\n        var params = new URLSearchParams({\r\n            a: a || \"Ocurrió un problema\",\r\n            b,\r\n            focusafter\r\n        });\r\n        this.props.history.push(this.props.match.path + \"/msg?\" + params.toString());\r\n    }\r\n    handleNew = () => {\r\n        this.props.history.push(this.props.match.path + \"/view/NUEVO\");\r\n    }\r\n    handleClose = update => {\r\n        if (update) this.FetchData();\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n\r\n    handleClick = (arr_data) => {\r\n        var ID = arr_data[0];\r\n        this.props.history.push(this.props.match.path + \"/view/\" + ID);\r\n    }\r\n    handleTermsAndConds = () => {\r\n        var isOk = window.confirm(\"Esta seguro de Mostrar en TODOS los usuarios ACEPTAR TERMINOS Y CONDICIONES al entrar\");\r\n        if (isOk) {\r\n            API.SendUserAction(\"ACCEPT_TERMS_AND_CONDS\", \"all\")\r\n                .then(this.FetchData)\r\n                .catch(ex => this.reportError(ex.message));\r\n        }\r\n    }\r\n    render() {\r\n        const { data, loading, grupos, downloadSeparator } = this.state;\r\n\r\n        if (loading)\r\n            return (<div style={{ paddingTop: 10, textAlign: \"center\" }}>\r\n                <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                <CircularProgress size={50} color=\"primary\" />\r\n            </div>)\r\n\r\n        return (<div>\r\n            <DataTable\r\n                title=\"\"\r\n                data={data}\r\n                columns={UserColumns}\r\n                options={{\r\n                    selectableRows: \"none\",\r\n                    onRowClick: this.handleClick,\r\n                    customToolbar: () => {\r\n                        return (<>\r\n                            <div style={{ maxWidth: 100, minWidth: 100, width: 100 }} ></div>\r\n                            <Tooltip title=\"Mostrar en TODOS los usuarios ACEPTAR TERMINOS Y CONDICIONES al entrar\">\r\n                                <IconButton color=\"secondary\" onClick={this.handleTermsAndConds}  >\r\n                                    <Policy />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                            <Tooltip title=\"Agregar Usuario\" >\r\n                                <IconButton color=\"primary\" onClick={this.handleNew} >\r\n                                    <Add />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </>);\r\n                    },\r\n                    customSort(data, colIndex: number, order: \"asc\" | \"desc\") {\r\n                        var col = UserColumns[colIndex];\r\n                        return data.sort((a, b) => {\r\n                            var value1 = a.data[colIndex];\r\n                            var value2 = b.data[colIndex];\r\n\r\n                            if (col.name === \"UltimoPedido\") {\r\n                                value1 = (a.data[colIndex - 1] && new Date(a.data[colIndex - 1]).valueOf()) || 0;\r\n                                value2 = (b.data[colIndex - 1] && new Date(b.data[colIndex - 1]).valueOf()) || 0;\r\n                            } else {\r\n                                if (typeof value1 === typeof \"\") value1 = value1.toLowerCase().trim();\r\n                                if (typeof value2 === typeof \"\") value2 = value2.toLowerCase().trim();\r\n                            }\r\n                            if (order === \"desc\") {\r\n                                if (value1 > value2) return -1;\r\n                                if (value2 > value1) return 1;\r\n                                return 0;\r\n                            }\r\n                            if (value1 < value2) return -1;\r\n                            if (value2 < value1) return 1;\r\n                            return 0;\r\n                        });\r\n                    }\r\n                }}\r\n            />\r\n            <Route path={this.props.match.path + \"/msg\"} component={RouteMessage} />\r\n            <Route path={this.props.match.path + \"/view/:id\"} children={({ match }) => <Edit\r\n                show={match && match.params.id ? true : false}\r\n                grupos={grupos}\r\n                initialData={match && data.find(d => d.id === +match.params.id)}\r\n                onClose={this.handleClose}\r\n            />} />\r\n        </div>);\r\n    }\r\n}\r\n\r\ninterface UserProps {\r\n    onMounted?: any,\r\n    match?: any,\r\n    history?: any\r\n}","import React from \"react\";\r\n\r\nexport default class extends React.PureComponent<{\r\n    TextSrc: string;\r\n    onMounted?: (path: any) => void;\r\n    path?: string;\r\n    className?: string;\r\n}> {\r\n    componentWillMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.path);\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"Iframe-Liason-Sheet\" className={\"iframe-border center-block-horiz \" + (this.props.className || \"\")}>\r\n                <div className=\"responsive-wrapper responsive-wrapper-wxh-760x1200\">\r\n                    <iframe\r\n                        title=\"Politicas de Natú\"\r\n                        src={this.props.TextSrc}\r\n                    >Cargando...</iframe>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport PolicyPage from \"../Components/PolicyPage\";\r\nimport { Button, FormControlLabel } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\n\r\nexport default class extends React.Component<{\r\n    onDone: () => void\r\n}> {\r\n    state = {\r\n        checked: false,\r\n        loading: false\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleCheck = this.handleCheck.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n    handleCheck(event) {\r\n        const checked = event.currentTarget.checked;\r\n        this.setState({ checked });\r\n    }\r\n    handleClick(event) {\r\n        if (this.state.loading) return;\r\n        if (!this.state.checked) return;\r\n        this.setState({ loading: true });\r\n\r\n        API.SendUserAction(\"ACCEPT_TERMS_AND_CONDS\")\r\n            .then(this.props.onDone)\r\n            .catch(ex => {\r\n                alert(ex.message);\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n    render() {\r\n        const { checked, loading } = this.state;\r\n        return (<div className=\"full-height\" style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <PolicyPage\r\n                className=\"iframe-wrapper-with-max-height\"\r\n                TextSrc=\"https://docs.google.com/document/d/e/2PACX-1vQM7gflRmudx9mnIJpfZMu5gM3WUl3u_h8RRuyVbb6yErxWTnU_jeu8kcKUJhht3VadenapB4nINf7h/pub?embedded=true\"\r\n            />\r\n            <div style={{\r\n                margin: \"auto\",\r\n                textAlign: \"center\",\r\n                paddingTop: 10,\r\n                paddingBottom: 10,\r\n                width: \"100%\"\r\n            }}>\r\n                <FormControlLabel\r\n                    control={<input\r\n                        disabled={loading}\r\n                        checked={checked}\r\n                        type=\"checkbox\"\r\n                        onChange={this.handleCheck}\r\n                    />}\r\n                    label=\"Acepto los términos y condiciones, y acepto la Política de Privacidad\"\r\n                />\r\n                <Button\r\n                    disabled={loading || !checked}\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    onClick={this.handleClick}\r\n                >\r\n                    CONTINUAR\r\n                </Button>\r\n            </div>\r\n        </div>);\r\n    }\r\n}","import React from \"react\";\r\nimport UserDataForm from \"./Users/UserDataForm\";\r\nimport API from \"../Services/API\";\r\nimport ValidateUserForm from \"./Users/ValidateUserForm\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nexport default function (props: {\r\n    userId: number,\r\n    onSubmit?: Function\r\n    onMounted?: Function,\r\n    match?: any,\r\n}) {\r\n    const [user, set_user] = React.useState({} as VisibleUser);\r\n    const [status, set_status] = React.useState(\"\" as \"GUARDAR\" | \"\" | \"GUARDADO\");\r\n    const [errores, set_errores] = React.useState(undefined);\r\n\r\n    function userchanged(event: React.ChangeEvent<HTMLInputElement>) {\r\n        set_user({ ...user, [event.target.name]: event.target.value });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        props.onMounted && props.match && props.onMounted(props.match.path);\r\n        API.GetUser(props.userId).then(set_user);\r\n    }, []);\r\n    React.useEffect(() => {\r\n        if (!status) return;\r\n        var validationErrors = ValidateUserForm(user, { passwordOpcional: true });\r\n        if (validationErrors) {\r\n            set_status(\"\");\r\n            set_errores(validationErrors);\r\n            return;\r\n        }\r\n        API.SaveUser(user).then(x => {\r\n            set_status(\"GUARDADO\");\r\n            set_errores(undefined);\r\n            props.onSubmit && props.onSubmit();\r\n        }).catch(ex => {\r\n            set_status(\"\");\r\n            set_errores({\r\n                guardar: ex.message\r\n            });\r\n        });\r\n    }, [status]);\r\n\r\n    const isLoading = user.id === undefined || (status === \"GUARDAR\");\r\n\r\n    return <div style={{ padding: 15 }}>\r\n        <UserDataForm\r\n            onSubmit={() => set_status(\"GUARDAR\")}\r\n            onChange={userchanged}\r\n            error={errores}\r\n            formType=\"EDIT\"\r\n            editionType=\"USER\"\r\n            loading={isLoading}\r\n            {...user as any}\r\n        >\r\n            <div style={{ padding: 5 }}>\r\n                <Button fullWidth type=\"submit\" color={status === \"GUARDADO\" ? \"secondary\" : \"primary\"} disabled={isLoading} variant=\"outlined\" >\r\n                    {status === \"GUARDADO\" ? \"Listo!\" : \"Actualizar datos\"}\r\n                </Button>\r\n            </div>\r\n        </UserDataForm>\r\n    </div>\r\n}","import { configureStore } from '@reduxjs/toolkit'\r\nimport Order from \"./OrderReducer\";\r\n\r\nexport const store = configureStore({\r\n    reducer: {\r\n        Order\r\n    },\r\n})\r\n\r\n// Infer the `RootState` and `AppDispatch` types from the store itself\r\nexport type RootState = ReturnType<typeof store.getState>;\r\n// Inferred type: {posts: PostsState, comments: CommentsState, users: UsersState}\r\nexport type AppDispatch = typeof store.dispatch;","import { Tabs, Tab } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { match } from \"react-router-dom\";\r\n\r\nexport default function (props: {\r\n    onMounted(path: string): void;\r\n    match: match;\r\n    tabs: {\r\n        tabLabel: React.ReactNode;\r\n        Component: React.ComponentType;\r\n        tabId?: string;\r\n    }[];\r\n}) {\r\n    const [currentTab, set_currentTab] = React.useState(props.tabs[0].tabId);\r\n\r\n    React.useEffect(() => {\r\n        props.onMounted && props.match && props.onMounted(props.match.path);\r\n    }, []);\r\n\r\n    const selectedTab = props.tabs.find(x => x.tabId === currentTab);\r\n    if (selectedTab) var Children = <selectedTab.Component />;\r\n    return (<div>\r\n        <Tabs value={currentTab} onChange={(ev, new_tab_id) => set_currentTab(new_tab_id)}>\r\n            {props.tabs.map(x => <Tab key={x.tabId} value={x.tabId} label={x.tabLabel} />)}\r\n        </Tabs>\r\n        {Children}\r\n    </div>);\r\n}","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField, Typography } from \"@material-ui/core\";\r\nimport * as dateformat from \"date-format\";\r\nimport React from \"react\";\r\nimport API from \"../../../Services/API\";\r\nimport ItemList from \"../../ItemList\";\r\n\r\nexport default function (props: {\r\n    onClose(has_changed?: boolean): void;\r\n}) {\r\n    const [status, set_status] = React.useState(\"fetch_products\");\r\n    const [desde, set_desde] = React.useState(dateformat(\"yyyy-MM-dd\", new Date()));\r\n    const [hasta, set_hasta] = React.useState(dateformat(\"yyyy-MM-dd\", new Date()));\r\n    const [pedido_subtotal, set_pedido_subtotal] = React.useState(\"\" as string);\r\n    const [productos, set_productos] = React.useState([] as { id: number, nombre: string, cantidad: string }[]);\r\n\r\n\r\n    const [filteredProductList, set_filteredProductList] = React.useState([] as { id: number, nombre: string, cantidad: string }[]);\r\n\r\n    React.useEffect(() => {\r\n        if (status === \"fetch_products\") {\r\n            API.GetProducts()\r\n                .then(products => {\r\n                    set_filteredProductList(products.filter(x => !((x.componentes && x.componentes.length) || (x.opciones && x.opciones.length)))\r\n                        .map(x => ({\r\n                            id: x.id,\r\n                            nombre: x.nombre,\r\n                            cantidad: \"\"\r\n                        }))\r\n                    );\r\n                    set_status(\"\");\r\n                });\r\n        }\r\n        if (status === \"guardar\") {\r\n            const results = Validate(desde, hasta, pedido_subtotal, productos);\r\n            if (results.error) return set_status(results.error);\r\n            API.SaveGiftRule(results.data)\r\n                .then(isOk => props.onClose(true))\r\n                .catch(ex => set_status(ex.message));\r\n        }\r\n    }, [status]);\r\n\r\n    const isLoading = [\"guardar\", \"eliminar\", \"fetch_products\", \"fetch_record\"].indexOf(status) >= 0;\r\n    const errMsg = (!isLoading && status.length) ? status : null;\r\n\r\n    return (<Dialog open={true} onClose={() => {\r\n        if (!isLoading) props.onClose();\r\n    }}>\r\n        <DialogContent>\r\n            <div>\r\n                <TextField\r\n                    value={desde}\r\n                    onChange={ev => set_desde(ev.target.value)}\r\n                    label=\"Desde\"\r\n                    type=\"date\"\r\n                />\r\n                <TextField\r\n                    value={hasta}\r\n                    onChange={ev => set_hasta(ev.target.value)}\r\n                    label=\"Hasta\"\r\n                    type=\"date\"\r\n                />\r\n            </div>\r\n            <TextField\r\n                label=\"Pedido.Subtotal\"\r\n                value={pedido_subtotal}\r\n                onChange={ev => set_pedido_subtotal(ev.target.value)}\r\n                type=\"number\"\r\n                inputProps={{\r\n                    step: \"0.01\"\r\n                }}\r\n            />\r\n            <Typography>Productos a Regalar</Typography>\r\n            <ItemList\r\n                dataSource={filteredProductList}\r\n                DisplayProp=\"nombre\"\r\n                IdProp=\"id\"\r\n                items={productos}\r\n                onAdd={results => {\r\n                    const productos_nuevo = [...productos];\r\n                    productos_nuevo.push({\r\n                        cantidad: results.inputValue,\r\n                        nombre: results.item.nombre,\r\n                        id: results.item.id\r\n                    });\r\n                    set_productos(productos_nuevo);\r\n                }}\r\n                onRemove={result => {\r\n                    const productos_nuevo = [...productos];\r\n                    const index = productos_nuevo.indexOf(result.item);\r\n                    if (index < 0) return;\r\n                    productos_nuevo.splice(index, 1);\r\n                    set_productos(productos_nuevo);\r\n                }}\r\n                InputConfig={{\r\n                    allowZero: false, label: \"Cantidad\", type: \"number\"\r\n                }}\r\n                SecondaryDisplayProp=\"cantidad\"\r\n            />\r\n        </DialogContent>\r\n        <DialogActions>\r\n            {errMsg && <Typography color=\"error\">{errMsg}</Typography>}\r\n            <Button disabled={isLoading} type=\"button\" onClick={() => props.onClose()} >SALIR</Button>\r\n            <Button disabled={isLoading} type=\"button\" onClick={() => set_status(\"guardar\")} >GUARDAR</Button>\r\n        </DialogActions>\r\n    </Dialog>)\r\n}\r\n\r\n\r\nfunction Validate(desde, hasta, pedido_subtotal, productos): { error?: string, data?: GiftRule } {\r\n    const data = {\r\n        desde: null as Date,\r\n        hasta: null as Date,\r\n        condiciones: [],\r\n        regalos: []\r\n    };\r\n    try {\r\n        data.desde = dateformat.parse(\"yyyy-MM-dd hh:mm:ss.SSS\", desde + \" 00:00:00.000\");\r\n    } catch (ex) {\r\n        return { error: \"La fecha `Desde` no es correcta\" };\r\n    }\r\n    try {\r\n        data.hasta = dateformat.parse(\"yyyy-MM-dd hh:mm:ss.SSS\", hasta + \" 23:59:59.999\");\r\n    } catch (ex) {\r\n        return { error: \"La fecha `Hasta` no es correcta\" };\r\n    }\r\n    if (!(pedido_subtotal && (+pedido_subtotal) > 0 && !isNaN(+pedido_subtotal)))\r\n        return { error: \"El valor de `Pedido Subtotal` no es valido\" };\r\n\r\n    data.condiciones.push({\r\n        propName: \"pedido.subtotal\", value: pedido_subtotal, operator: \">=\"\r\n    });\r\n\r\n    if (!(productos && productos.length && !productos.find(x => isNaN(+x.cantidad) || !(+x.cantidad))))\r\n        return { error: \"Seleccione al menos un producto y agregue una cantidad mayor a 0\" };\r\n\r\n    data.regalos = productos;\r\n\r\n    return { data };\r\n}","import { Tooltip, IconButton, Typography } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport API from \"../../../Services/API\";\r\nimport Edit from \"./Edit\";\r\nimport DataTable from \"../../DataTable\";\r\n\r\nexport default function () {\r\n\r\n    const [records, set_records] = React.useState([] as GiftConditionRow[]);\r\n    const [status, set_status] = React.useState(\"data\");\r\n    const [openEdit, set_openEdit] = React.useState(false as true | false | number);\r\n\r\n    React.useEffect(() => {\r\n        if (status === \"data\")\r\n            API.GetGiftRules(true)\r\n                .then(results => {\r\n                    set_records(results.map(x => {\r\n                        return {\r\n                            ID: x.id,\r\n                            Productos: x.regalos.map(x => `${x.nombre} x${x.cantidad}`).join(\", \"),\r\n                            Condiciones: x.condiciones.map(x => `${x.propName} ${x.operator} ${x.value}`).join(\"y \"),\r\n                            Desde: new Date(x.desde).toLocaleDateString(\"es-EC\", {\r\n                                month: \"short\", day: \"numeric\", year: \"numeric\"\r\n                            }),\r\n                            Hasta: new Date(x.hasta).toLocaleDateString(\"es-EC\", {\r\n                                month: \"short\", day: \"numeric\", year: \"numeric\"\r\n                            })\r\n                        }\r\n                    }));\r\n                }).catch(ex => {\r\n                    alert(ex.message);\r\n                }).then(() => {\r\n                    set_status(\"\");\r\n                });\r\n        if (status.indexOf(\"delete:\") === 0)\r\n            API.DeleteGiftRule(+status.split(\":\")[1])\r\n                .then(() => {\r\n                    set_status(\"data\");\r\n                }).catch(ex => {\r\n                    set_status(ex.message);\r\n                });\r\n\r\n\r\n    }, [status]);\r\n\r\n    const isLoading = status.indexOf(\"delete:\") >= 0 || status === \"data\" ? true : null;\r\n    const errMsg = status.length && !isLoading ? status : null;\r\n    const openEditView = openEdit ? true : null;\r\n\r\n    return (<>\r\n        <div style={{ textAlign: \"center\" }}>\r\n            {errMsg && <>\r\n                <Typography variant=\"h4\" color=\"error\">Ocurrió un error</Typography>\r\n                <Typography variant=\"h6\" color=\"error\">{errMsg}</Typography>\r\n            </>}\r\n        </div>\r\n        <DataTable\r\n        title=\"\"\r\n            columns={[\r\n                { name: \"ID\" }\r\n                , { name: \"Condiciones\" }\r\n                , { name: \"Desde\" }\r\n                , { name: \"Hasta\" }\r\n                , { name: \"Productos\" }\r\n            ]}\r\n            data={records}\r\n            options={{\r\n                print: false,\r\n                download: false,\r\n                sort: false,\r\n                filter: false,\r\n                search: false,\r\n                viewColumns: false,\r\n                pagination: false,\r\n                selectableRows: \"single\",\r\n                onRowsDelete(rowsDeleted: { data: { index: number }[] }) {\r\n                    var confirmed = window.confirm(\"Desea eliminar el registro?\");\r\n                    if (!confirmed) return false;\r\n                    return set_status(\"delete:\" + records[rowsDeleted.data[0].index].ID);\r\n                },\r\n                textLabels: {\r\n                    body: {\r\n                        noMatch: isLoading ? \"Buscando Registros 🔎 .... \" : \"No se encontraron registros 🤷‍♀️\"\r\n                    }\r\n                },\r\n                customToolbar() {\r\n                    return (<Tooltip title=\"Agregar Regla\" >\r\n                        <IconButton color=\"primary\" onClick={() => set_openEdit(true)} >\r\n                            <Add />\r\n                        </IconButton>\r\n                    </Tooltip>);\r\n                }\r\n            }}\r\n        />\r\n        {openEditView && <Edit\r\n            onClose={should_reload => {\r\n                set_openEdit(false);\r\n                if (should_reload) set_status(\"data\");\r\n            }}\r\n        />}\r\n    </>);\r\n}\r\n\r\ninterface GiftConditionRow {\r\n    Condiciones: string\r\n    , Productos: string\r\n    , ID: number\r\n    , Desde: string\r\n    , Hasta: string\r\n}","import React from \"react\";\r\nimport { match } from \"react-router-dom\";\r\nimport TabContainer from \"../../Layouts/TabContainer\";\r\nimport GiftRules from \"./GiftRules\";\r\n\r\nconst TABS = [\r\n    { tabId: \"gift-rules\", Component: GiftRules, tabLabel: \"Reglas de Regalos\" }\r\n]\r\nexport default function (props: {\r\n    onMounted(path: string): void;\r\n    match: match\r\n}) {\r\n    return (<TabContainer\r\n        match={props.match}\r\n        onMounted={props.onMounted}\r\n        tabs={TABS}\r\n    />);\r\n}","import React from \"react\";\r\nimport { MUIDataTableColumn } from \"mui-datatables\";\r\nimport { Button, IconButton, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport API from \"../../Services/API\";\r\nimport DataTable from \"../DataTable\";\r\nexport default function () {\r\n\r\n    const [status, set_status] = React.useState(\r\n        \"fetch_cycles\" as \"fetch_data\" | \"fetch_cycles\" | \"validate_data\" | \"submit_data\" | string\r\n    );\r\n\r\n    const [cycle, set_cycle] = React.useState(null as Cycle);\r\n    const [cycleList, set_cycleList] = React.useState([] as Cycle[]);\r\n    const [data, set_data] = React.useState([] as MultiLevelUserData[]);\r\n\r\n    React.useEffect(() => {\r\n        if (status === \"fetch_data\") {\r\n            if (!(cycle && cycle.index >= 0)) {\r\n                return set_status(\"Selecciona un ciclo válido\");\r\n            }\r\n            API.GetMultiLevelUserData(cycle)\r\n                .then(data => {\r\n                    set_data(data);\r\n                    set_status(\"\");\r\n                }).catch(ex => set_status(ex.message));\r\n        }\r\n        if (status === \"fetch_cycles\") {\r\n            API.GetCycles().then(cycles => {\r\n                set_cycleList(cycles);\r\n                set_status(\"\");\r\n            }).catch(ex => set_status(ex.message));\r\n        }\r\n    }, [status]);\r\n\r\n\r\n    const isLoading = [\"fetch_data\", \"fetch_cycles\", \"validate_data\", \"submit_data\"].indexOf(status) >= 0;\r\n    const errorMsg = (isLoading || !status.length) ? \"\" : status;\r\n\r\n    const buttonsAreDisabled = isLoading || !(cycle && cycle.index >= 0);\r\n\r\n    return (<DataTable\r\n        title={isLoading ? \"Cargando datos...\" : errorMsg}\r\n        columns={COLUMNS}\r\n        data={data}\r\n        options={{\r\n            selectableRows: \"none\",\r\n            textLabels: {\r\n                body: {\r\n                    noMatch: \"No se encontraron registros\"\r\n                }\r\n            },\r\n            customToolbar() {\r\n                return (<>\r\n                    <TextField\r\n                        style={{ margin: 5, minWidth: 200 }}\r\n                        select\r\n                        disabled={isLoading}\r\n                        value={cycle ? cycle.index : \"\"}\r\n                        onChange={ev => {\r\n                            set_cycle(cycleList.find(x => x.index.toString() == ev.target.value));\r\n                        }}\r\n                        SelectProps={{ native: true }}\r\n                        InputProps={{\r\n                            startAdornment: <InputAdornment position=\"start\" >\r\n                                <IconButton disabled={buttonsAreDisabled} type=\"button\" onClick={() => set_status(\"fetch_data\")} >\r\n                                    <Search />\r\n                                </IconButton>\r\n                            </InputAdornment>\r\n                        }}\r\n                    >\r\n                        <option>- Selecciona un ciclo -</option>\r\n                        {cycleList.map(c => <option key={c.number + \"-\" + c.year} value={c.index}>{c.year} - Ciclo {c.number}</option>)}\r\n                    </TextField>\r\n                    <div style={{ minWidth: 100, width: 100, minHeight: 20 }} ></div>\r\n                    <Button\r\n                        disabled={buttonsAreDisabled || !data.length}\r\n                        color=\"primary\"\r\n                        variant=\"contained\"\r\n                        type=\"button\"\r\n                        onClick={() => set_status(\"validate_data\")}\r\n                    >\r\n                        GUARDAR Y CERRAR CICLO 🔒\r\n                    </Button>\r\n                </>)\r\n            }\r\n        }}\r\n    />)\r\n}\r\n\r\n\r\nconst COLUMNS = [\r\n    { name: \"id\", label: \"ID\" },\r\n    { name: \"nombre\", label: \"Nombre\" },\r\n    { name: \"parent1\", label: \"ID Patrocinador\" },\r\n    { name: \"total_comisionable\", label: \"Venta Individual Comisionable\" },\r\n    { name: \"total_calificable\", label: \"Venta Individual\" },\r\n    { name: \"nX_total_calificable\", label: \"Venta Grupal\" },\r\n\r\n    { name: \"n1_comisionable\", label: \"Comisionable N1\" },\r\n    { name: \"n1_activos\", label: \"Activos N1\" },\r\n\r\n    { name: \"n2_comisionable\", label: \"Comisionable N2\" },\r\n    { name: \"n2_activos\", label: \"Activos N2\" },\r\n\r\n    { name: \"n3_comisionable\", label: \"Comisionable N3\" },\r\n    { name: \"n3_activos\", label: \"Activos N3\" },\r\n\r\n    { name: \"titulo\", label: \"Titulo\" },\r\n    { name: \"subtotal_comision\", label: \"Comision a Pagar\" },\r\n    { name: \"total_comision\", label: \"Total a Pagar\" }\r\n] as MUIDataTableColumn[];\r\n\r\n\r\n\r\nfunction DateAsLabel(d: Date) {\r\n    return new Date(d).toLocaleString(\"es-EC\", {\r\n        day: \"numeric\", month: \"short\", year: \"numeric\"\r\n    });\r\n}","import React from \"react\";\r\nimport { match } from \"react-router-dom\";\r\nimport TabContainer from \"../../Layouts/TabContainer\";\r\nimport ProcessCycle from \"./ProcessCycle\";\r\n\r\nconst TABS = [\r\n    { tabId: \"cycles\", tabLabel: \"Ciclos\", Component: ProcessCycle }\r\n]\r\nexport default function (props: {\r\n    match: match,\r\n    onMounted(path: string): void;\r\n}) {\r\n    return <TabContainer\r\n        tabs={TABS}\r\n        match={props.match}\r\n        onMounted={props.onMounted}\r\n    />\r\n}","import React from \"react\";\r\nimport { Hidden, Drawer, IconButton, AppBar, Toolbar, Typography, List, ListItem, ListItemIcon, ListItemText, makeStyles } from \"@material-ui/core\";\r\nimport { ShoppingCart, ListAlt, Menu, Close, Help, Inbox, Report, Category, Policy, PeopleAlt, Person, AccountTree } from \"@material-ui/icons\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useMemo } from \"react\";\r\nimport API from \"../../Services/API\";\r\n\r\nconst OPCIONES = [\r\n    { label: \"Inicio\", Icon: Inbox, path: \"/feed\" }\r\n    /** NINGUN PATH puede comenzar por order porque dana algunas partes de la logica */\r\n    , { label: \"Nuevo Pedido\", Icon: ShoppingCart, path: \"/order\" }\r\n\r\n    , { label: \"Pedidos\", Icon: ListAlt, path: \"/my-orders\", roles: [1, 2] }\r\n    , { label: \"Pedidos\", Icon: ListAlt, path: \"/queue\", roles: [3] }\r\n\r\n    , { label: \"Politicas\", Icon: Policy, path: \"/policy\" }\r\n\r\n    , { label: \"Catálogo\", Icon: Category, path: \"/products\", roles: [3] }\r\n    , { label: \"Usuarios\", Icon: PeopleAlt, path: \"/users\", roles: [3] }\r\n\r\n    , { label: \"Reportes\", Icon: Report, path: \"/reports\", roles: [3] }\r\n    , { label: \"Ciclos\", Icon: AccountTree, path: \"/multi-level-cycle\", roles: [3] }\r\n    , { label: \"Perfil\", Icon: Person, path: \"/my-profile\" }\r\n    , { label: \"Configuración\", Icon: SettingsIcon, path: \"/settings\", roles: [3] }\r\n];\r\n\r\nconst drawerWidth = 200;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    drawer: {\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: drawerWidth,\r\n            flexShrink: 0\r\n        }\r\n    },\r\n    toolbar: theme.mixins.toolbar,\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        background: theme.palette.primary.light,\r\n        color: theme.palette.primary.contrastText,\r\n    },\r\n    icons: {\r\n        color: theme.palette.primary.contrastText\r\n    },\r\n    appBar: {\r\n        display: \"block\"\r\n    }\r\n}));\r\n\r\nexport default function (props: {\r\n    username: string,\r\n    ParentName: string,\r\n    rangoHonorifico?: string;\r\n    selectedPath: string,\r\n    rol: number,\r\n    window?: any\r\n}) {\r\n\r\n    const container = props.window ? props.window().document.body : undefined;\r\n\r\n    const { username, ParentName, rangoHonorifico } = props;\r\n\r\n    const selected = props.selectedPath;\r\n    const [isMenuOpen, set_isMenuOpen] = React.useState(false);\r\n    const [Rango, set_Rango] = React.useState({ id: \"-1\", nombre: \"\" });\r\n\r\n    const classes = useStyles();\r\n\r\n    React.useEffect(() => {\r\n\r\n        if (Rango.id !== props.rangoHonorifico)\r\n            API.Rangos().then(rangos => {\r\n                const found = rangos.find(x => props.rangoHonorifico! === x.id);\r\n                if (!found) return;\r\n                set_Rango(found);\r\n            }).catch(ex => set_Rango({\r\n                id: \"-1\", nombre: \"Rango no encontrado\"\r\n            }));\r\n\r\n    }, [props.rangoHonorifico]);\r\n\r\n    const accesos = useMemo(() => {\r\n        return OPCIONES.filter(x => (x.roles || [props.rol]).indexOf(props.rol) >= 0);\r\n    }, [props.rol]);\r\n\r\n    const drawerChildren = (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n        <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\r\n            <Typography style={{ display: \"block\" }} variant=\"button\">{username}</Typography>\r\n            <Typography style={{ display: \"block\" }} variant=\"caption\">PATROCINADOR:</Typography>\r\n            <Typography style={{ display: \"block\" }} variant=\"caption\">{ParentName}</Typography>\r\n            <Typography style={{ display: \"block\" }} variant=\"button\">{Rango.nombre}</Typography>\r\n        </div>\r\n        <List style={{ flex: 1 }}>\r\n            {accesos.map(o => (<ListItem onClick={() => set_isMenuOpen(false)} selected={selected === o.path} component={Link} to={o.path} button key={o.label}>\r\n                <ListItemIcon >{<o.Icon className={classes.icons} />}</ListItemIcon>\r\n                <ListItemText primaryTypographyProps={{\r\n                    variant: \"button\",\r\n                    style: {\r\n                        fontWeight: selected === o.path ? \"bolder\" : \"normal\"\r\n                    }\r\n                }} primary={o.label} />\r\n            </ListItem>))}\r\n        </List>\r\n        <ListItem className=\"a-link\" component=\"a\" target=\"_a\" href=\"https://wa.me/\" >\r\n            <ListItemIcon> <Help className={classes.icons} /> </ListItemIcon>\r\n            <ListItemText primaryTypographyProps={{ variant: \"button\" }} primary=\"AYUDA\" />\r\n        </ListItem>\r\n    </div >);\r\n\r\n    return (<>\r\n        <nav className={classes.drawer}>\r\n            <Hidden smUp implementation=\"css\" >\r\n                <Drawer\r\n                    container={container}\r\n                    variant=\"temporary\"\r\n                    anchor={'left'}\r\n                    open={isMenuOpen}\r\n                    onClose={() => set_isMenuOpen(false)}\r\n                    classes={{ paper: classes.drawerPaper }}\r\n                    ModalProps={{\r\n                        keepMounted: true, // Better open performance on mobile.\r\n                    }}\r\n                >\r\n                    <div className={classes.toolbar} style={{ textAlign: \"right\" }}>\r\n                        <IconButton onClick={() => set_isMenuOpen(false)}>\r\n                            <Close className={classes.icons} />\r\n                        </IconButton>\r\n                    </div>\r\n                    {drawerChildren}\r\n                </Drawer>\r\n            </Hidden>\r\n            <Hidden xsDown implementation=\"css\">\r\n                <Drawer\r\n                    classes={{ paper: classes.drawerPaper }}\r\n                    variant=\"permanent\"\r\n                    open\r\n                >\r\n                    {drawerChildren}\r\n                </Drawer>\r\n            </Hidden>\r\n        </nav>\r\n\r\n        <Hidden smUp implementation=\"css\" >\r\n            <AppBar position=\"fixed\">\r\n                <Toolbar>\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        edge=\"start\"\r\n                        onClick={() => set_isMenuOpen(true)}\r\n                    >\r\n                        <Menu />\r\n                    </IconButton>\r\n                    <Typography style={{ flexGrow: 1 }}>{(OPCIONES.find(x => x.path === selected) || {}).label}</Typography>\r\n                </Toolbar>\r\n            </AppBar>\r\n        </Hidden>\r\n    </>)\r\n}","import React from 'react';\r\nimport { Typography, CssBaseline, withStyles, Hidden } from '@material-ui/core';\r\nimport { Switch, Route, Redirect, HashRouter } from \"react-router-dom\";\r\nimport Order from './../Components/Order';\r\nimport OrderList from './../Components/OrderList';\r\nimport Feed from './../Components/Feed';\r\nimport Reports from './../Components/Reports';\r\nimport OrderQueue from '../Components/OrderQueue';\r\nimport Products from '../Components/Products';\r\nimport Users from '../Components/Users';\r\nimport PolicyPage from '../Components/PolicyPage';\r\nimport TermsAndConds from './TermsAndConds';\r\nimport UserProfile from '../Components/UserProfile';\r\nimport { Provider } from 'react-redux';\r\nimport { store } from '../Components/Order/Redux/Store';\r\nimport Settings from '../Components/Settings';\r\nimport MultiLevel from '../Components/MultiLevel';\r\nimport NavigationDrawer from '../Components/NavigationDrawer';\r\nconst drawerWidth = 200;\r\n\r\nexport default withStyles(theme => ({\r\n  toolbar: theme.mixins.toolbar,\r\n  content: {\r\n    flexGrow: 1,\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginLeft: drawerWidth\r\n    }\r\n  }\r\n}))(class Main extends React.Component<MainProps, any> {\r\n\r\n  state = {\r\n    selected: \"\"\r\n    , editarPVPsdurantePedido: false\r\n    , username: \"\"\r\n    , userId: undefined as number\r\n    , ParentName: \"\"\r\n    , rangoHonorifico: \"\"\r\n    , token: \"\"\r\n    , rol: 0\r\n    , descuentos: [] as Descuento[]\r\n    , mustAcceptTermsAndConds: false\r\n    , solicitarDatosAlIniciar: false\r\n  };\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.onMounted = this.onMounted.bind(this);\r\n    this.TermsAndCondsAccepted = this.TermsAndCondsAccepted.bind(this);\r\n    this.state.username = props.username;\r\n    this.state.ParentName = props.ParentName;\r\n    this.state.rangoHonorifico = props.rangoHonorifico;\r\n    this.state.rol = props.rol;\r\n    this.state.descuentos = props.descuentos || [];\r\n    this.state.editarPVPsdurantePedido = props.editarPVPsdurantePedido;\r\n    this.state.mustAcceptTermsAndConds = props.mustAcceptTermsAndConds;\r\n    this.state.solicitarDatosAlIniciar = props.solicitarDatosAlIniciar;\r\n    this.state.userId = props.id;\r\n  }\r\n  onMounted(selected: string) {\r\n    this.setState({ selected });\r\n  }\r\n  handleMenu() {\r\n    this.setState(prev => {\r\n      const state = { ...prev };\r\n      state.isMenuOpen = !state.isMenuOpen;\r\n      return state;\r\n    });\r\n  }\r\n  TermsAndCondsAccepted() {\r\n    this.setState({ mustAcceptTermsAndConds: false });\r\n  }\r\n  render() {\r\n    const { mustAcceptTermsAndConds, solicitarDatosAlIniciar } = this.state;\r\n    const { window, classes } = this.props;\r\n\r\n    if (mustAcceptTermsAndConds)\r\n      return (<TermsAndConds onDone={this.TermsAndCondsAccepted} />);\r\n\r\n    if (solicitarDatosAlIniciar)\r\n      return (<div style={{ textAlign: \"center\", paddingTop: 15 }}>\r\n        <Typography variant=\"overline\"  >Hola! estamos actualizando la información de nuestros miembros. Por favor llena los campos que faltan para continuar.</Typography>\r\n        <UserProfile userId={this.state.userId} onSubmit={() => this.setState({ solicitarDatosAlIniciar: false })} />\r\n      </div>);\r\n\r\n\r\n    return (<HashRouter basename=\"/app\" >\r\n      <div style={{ width: \"100%\", height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\r\n        <CssBaseline />\r\n        <NavigationDrawer\r\n          ParentName={this.state.ParentName}\r\n          rol={this.state.rol}\r\n          selectedPath={this.state.selected}\r\n          username={this.state.username}\r\n          rangoHonorifico={this.state.rangoHonorifico}\r\n          window={this.props.window}\r\n        />\r\n        <main className={classes.content}>\r\n          <Provider store={store}>\r\n            <Hidden smUp implementation=\"css\">\r\n              <div className={classes.toolbar}></div>\r\n            </Hidden>\r\n            {process.env.NODE_ENV === \"development\" ? <Typography style={{ color: \"blue\", background: \"yellow\", textAlign: \"center\" }} variant=\"h6\" > AMBIENTE DE PRUEBAS </Typography> : null}\r\n            <Switch>\r\n              <Route path=\"/feed\" render={props => <Feed {...props} onMounted={this.onMounted} username={this.state.username} rol={this.state.rol} />} />\r\n              <Route path=\"/order\" render={_ => <Order onMounted={this.onMounted} rol={this.state.rol} descuentos={this.state.descuentos} editablePrices={this.state.editarPVPsdurantePedido} />} />\r\n              <Route path=\"/my-orders\" render={props => <OrderList {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\r\n              <Route path=\"/queue\" render={props => <OrderQueue {...props} onMounted={this.onMounted} />} />\r\n\r\n              <Route path=\"/policy\" render={props => <PolicyPage\r\n                onMounted={this.onMounted}\r\n                path={props.match && props.match.path}\r\n                TextSrc=\"https://docs.google.com/document/d/e/2PACX-1vSC-0iC8dbpYgrNhlDyRWAQdwdFM4esg40JLZQS-zg6Koix_w1B86KoGI3YPpq-TdNjoJV0eenbcRKv/pub?embedded=true\"\r\n              />}\r\n              />\r\n\r\n              <Route path=\"/users\" render={props => <Users {...props} onMounted={this.onMounted} />} />\r\n              <Route path=\"/products\" render={props => <Products {...props} onMounted={this.onMounted} />} />\r\n\r\n              <Route path=\"/reports\" render={props => <Reports {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\r\n              <Route path=\"/my-profile\" render={props => <UserProfile {...props} userId={this.state.userId} onMounted={this.onMounted} />} />\r\n              <Route path=\"/settings\" render={props => <Settings {...props} onMounted={this.onMounted} />} />\r\n              <Route path=\"/multi-level-cycle\" render={props => <MultiLevel {...props} onMounted={this.onMounted} />} />\r\n              <Route path=\"/\" exact><Redirect to=\"/feed\" /></Route>\r\n            </Switch>\r\n          </Provider>\r\n        </main>\r\n      </div>\r\n    </HashRouter>)\r\n  }\r\n});\r\n\r\ninterface MainProps {\r\n  username: string;\r\n  rol: number;\r\n  ParentName?: string;\r\n  editarPVPsdurantePedido?: boolean;\r\n\r\n  token: string;\r\n  window?: any;\r\n  classes: any;\r\n}","import React from \"react\";\r\nimport { Paper, Typography, Divider } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Preferences from \"../Utils/Preferences\";\r\nimport UserDataForm from \"../Components/Users/UserDataForm\";\r\nimport ValidateUserForm, { FocusOn } from \"../Components/Users/ValidateUserForm\";\r\nimport { ROLES } from \"../Globals\";\r\n\r\nexport default class SignIn extends React.Component {\r\n    state = {\r\n        nombre: \"\",\r\n        identificacion: \"\",\r\n        telefono: \"\",\r\n        email: \"\",\r\n        fechaNacimiento: \"\",\r\n        nacionalidad: \"\",\r\n        ciudad: \"\",\r\n        direccion: \"\",\r\n        username: \"\",\r\n        password: \"\",\r\n        confirm_password: \"\",\r\n        error: null,\r\n        parentId: null,\r\n        loading: false,\r\n        fin_registro: null\r\n    }/*\r\n    componentDidMount() {\r\n        API.GetGroups()\r\n            .then(grupos => this.setState({ grupos }))\r\n            .catch(ex => this.setState({\r\n                error: { grupo: \"No se pudieron cargar los grupos: \" + ex.message }\r\n            }));\r\n    }*/\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleSubmit = () => {\r\n        if (this.state.loading) return;\r\n        var error = ValidateUserForm(this.state);\r\n        if (error) return this.setState({ error });\r\n        this.setState({ loading: true, error: null });\r\n        setTimeout(() => {\r\n            // AQUI POR DEFAULT los envio como ROL=3 (asesores)\r\n            API.SignIn({ ...this.state, rol: ROLES.ASESOR })\r\n                .then(x => {\r\n                    this.setState({ loading: false, fin_registro: x.email });\r\n                    Preferences.Set(\"user\", this.state.username);\r\n                }).catch(error =>\r\n                    this.setState({ error, loading: false },\r\n                        () => {\r\n                            Object.keys(error).forEach(a => {\r\n                                FocusOn(a);\r\n                            });\r\n                        })\r\n                );\r\n        }, 2000);\r\n    }\r\n    render() {\r\n        const { fin_registro, ...state } = this.state;\r\n\r\n        if (fin_registro) return (<div style={{ width: \"100%\", padding: 30, textAlign: \"center\" }}>\r\n            <Typography variant=\"h4\">Registro completado!</Typography>\r\n            <Typography variant=\"subtitle1\">\r\n                Para habilitar tu cuenta entra a tu correo ({fin_registro})\r\n                y abre el enlace que te enviamos.\r\n            </Typography>\r\n            <Typography variant=\"body1\">\r\n                Si no encuentras nuestro correo en tu Bandeja de Entreda, es posible que encuentre en SPAM o NO DESEADOS.\r\n            </Typography>\r\n        </div>);\r\n\r\n        return (<main style={{ width: \"100%\", padding: 10, textAlign: \"center\", backgroundColor: \"#fafafa\" }}>\r\n            <Paper style={{ padding: 20, margin: \"auto\", maxWidth: 600 }}>\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <img style={{ height: 100 }} src=\"./logo.png\" alt=\"Natu - Logo\"></img>\r\n                    <div style={{ flexGrow: 1, margin: 20, textAlign: \"left\" }}>\r\n                        <Typography variant=\"h4\">REGISTRATE</Typography>\r\n                        <Typography component={Link} to=\"/login\" >Ya tienes una cuenta? Inicia sesión aquí</Typography>\r\n                    </div>\r\n                </div>\r\n                <Divider />\r\n                <UserDataForm editionType=\"USER\" {...state} onChange={this.handleChange} onSubmit={this.handleSubmit} formType=\"SIGN-IN\" />\r\n            </Paper>\r\n        </main>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Router, Switch, Route, Redirect } from \"react-router-dom\";\r\nimport { createHashHistory } from \"history\";\r\nimport Login from \"./Components/Login\";\r\nimport Main from \"./Layouts/Main\";\r\nimport API from \"./Services/API\";\r\nimport SignIn from \"./Layouts/SignIn\";\r\nimport Preferences from \"./Utils/Preferences\";\r\n\r\nexport default class App extends React.Component {\r\n    state: { user?: LoggedIn } = { user: undefined };\r\n    history = createHashHistory();\r\n    constructor(props: any) {\r\n        super(props);\r\n        if (props.user) {\r\n            this.state.user = props.user;\r\n            API.KEY = props.user.token;\r\n        }\r\n    }\r\n    handleLoggedIn = (user: LoggedIn) => {\r\n        this.setState({ user });\r\n        // aun esta pendiente, por lo que tiene que ir directamente al curso\r\n        if (user.estado === \"PENDIENTE\")\r\n            return this.history.push(\"/classroom\");\r\n        this.history.push(\"/app\");\r\n        API.KEY = user.token;\r\n        try {\r\n            Preferences.setPrefix(user.id ? (user.id + \"_\") : \"\");\r\n        } catch (ex) {\r\n            console.info(\"Ocurrio un error en Preferences.setPrefix\", ex);\r\n        }\r\n    }\r\n    render() {\r\n        const { user } = this.state;\r\n        var user_routes;\r\n        if (user) {\r\n            switch (user.estado) {\r\n                case \"PENDIENTE\":\r\n                    user_routes = <Route>BIENVENIDO A CLASSROOM</Route>;\r\n                    break;\r\n                case \"RECHAZADO\":\r\n                    user_routes = <Route>USUARIO ESTÁ DESHABILITADO</Route>;\r\n                    break;\r\n                default:\r\n                    user_routes = (<Switch>\r\n                        <Route path=\"/classroom\">BIENVENIDO A CLASSROOM</Route>\r\n                        <Route path=\"/app\" render={() => <Main {...user} />} />\r\n                        <Route>\r\n                            <Redirect to=\"/app\" />\r\n                        </Route>\r\n                    </Switch>);\r\n                    break;\r\n            }\r\n        }\r\n        return (<Router history={this.history} >\r\n            {user\r\n                ? user_routes\r\n                : (<Switch>\r\n                    <Route path=\"/signin\" component={SignIn} />\r\n                    <Route path=\"/recover-password\">AQUI PUEDE RECUPERAR TU CONTRAEÑA</Route>\r\n                    <Route path=\"/login\" render={_ => <Login onLoggedIn={this.handleLoggedIn} />} />\r\n                    <Route>\r\n                        <Redirect to=\"/login\" />\r\n                    </Route>\r\n                </Switch>)\r\n            }\r\n        </Router>)\r\n    }\r\n}","/// <reference path=\"./typings/index.d.ts\" />\r\nimport \"./lib/ExtendNumber\";\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport App from \"./App\";\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core\";\r\n/** \r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n*/\r\n\r\nconst Theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: \"#9f7c3a\"\r\n      , contrastText: \"#fff\"\r\n    },\r\n    secondary: {\r\n      main: \"#be6337\"\r\n      , contrastText: \"#fff\"\r\n    }\r\n  }\r\n})\r\nReactDOM.render(<React.StrictMode>\r\n  <ThemeProvider theme={Theme}>\r\n    <App />\r\n  </ThemeProvider>\r\n</React.StrictMode>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}