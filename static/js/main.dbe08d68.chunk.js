(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{309:function(e,t,a){e.exports=a(428)},428:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),i=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(8),c=a(9),s=a(12),u=a(11),d=a(28),m=a(41),h=a(14),p=a(25),f=a(21),g=a(447),E=a(450),v=a(261),b=a(451),y=a(195),C=a(45),O=a(262),A=a(454),S="development"===window.PROJECT_ENVIROMENT?"http://localhost:9000":"https://natuapp.ue.r.appspot.com",w=new(function(){function e(){Object(l.a)(this,e),this.KEY=""}return Object(c.a)(e,[{key:"Login",value:function(e){return this.F("user/login",{body:e,method:"POST"})}},{key:"GetProducts",value:function(e){return this.F("product"+(e?"?todos=1":""))}},{key:"SendProductAction",value:function(e,t){return this.F("product/"+e,{body:{action:t},method:"PATCH"})}},{key:"GetOrders",value:function(){return this.F("order")}},{key:"GetOrder",value:function(e){return this.F("order/"+e)}},{key:"SaveOrder",value:function(e){return this.F("order",{method:"POST",body:e})}},{key:"ActionOrder",value:function(e,t){return this.F("order/"+e,{method:"PUT",body:t})}},{key:"Stats",value:function(e,t,a){return this.F("dashboard?data="+e.join(",")+(t?"&semana="+t:"")+(a?"&year="+a:""))}},{key:"ProductSalesReport",value:function(e){var t="";return e&&Object.keys(e).length&&(t="?"+new URLSearchParams(e).toString()),this.F("reports/product-sales"+t)}},{key:"GetGroups",value:function(){return this.F("user/groups")}},{key:"SignIn",value:function(e){return this.F("user",{method:"POST",body:e})}},{key:"GetUsers",value:function(){return this.F("user")}},{key:"SaveUser",value:function(e){return this.F("user"+(e.id?"/".concat(e.id):""),{method:e.id?"PUT":"POST",body:e})}},{key:"DeleteUser",value:function(e){return this.F("user/"+e,{method:"DELETE"})}},{key:"SendUserAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.F("user"+(null===t?"":"/".concat(t)),{method:"PATCH",body:{action:e}})}},{key:"SaveProduct",value:function(e){return this.F("product"+(e.id?"/"+e.id:""),{method:e.id?"PUT":"POST",body:e})}},{key:"DeleteProduct",value:function(e){return this.F("product/"+e,{method:"DELETE"})}},{key:"F",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={method:"GET",cache:"reload",mode:"cors"},n=Object(h.a)(Object(h.a)({},a),t);return n.headers||(n.headers={}),n.headers["Content-Type"]="application/json",n.headers["Access-Control-Allow-Origin"]="*",this.KEY&&(n.headers||(n.headers={}),n.headers.Authorization="Basic "+this.KEY),n.body&&"string"!==typeof n.body&&(n.body=JSON.stringify(n.body)),fetch(S+"/"+e,n).then((function(e){return e.ok?e.json():e.clone().json().catch((function(){return e.text().then((function(t){throw{message:t,status:e.status,statusText:e.statusText}}))})).then((function(t){throw Object(h.a)(Object(h.a)({},t),{},{status:e.status,statusText:e.statusText})}))})).catch((function(e){if("Failed to fetch"===e.message)throw{message:"Este servicio no se encuentra disponible por el momento. Intentelo m\xe1s tarde.",status:0};throw e.message||(e.message=e.statusText),e}))}}]),e}()),D=a(452),k=a(453),T=a(35),x="",j=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"setPrefix",value:function(e){x=e||""}},{key:"Get",value:function(e){var t=x+e,a=window.localStorage.getItem(t);try{return JSON.parse(a)}catch(n){}return a}},{key:"Set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=x+e;if(void 0!==t)if(null!==t){var n=t;typeof t===typeof{}&&(n=JSON.stringify(t)),window.localStorage.setItem(a,n)}else window.localStorage.removeItem(a);else window.localStorage.removeItem(a)}}]),e}(),R=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={loading:!1,user:"",pwd:"",error:null,isPasswordVisible:!1},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n.handlePassword=n.handlePassword.bind(Object(f.a)(n)),w.KEY="",n.state.user=j.Get("user")||"",n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return window.requestAnimationFrame((function(){e.state.user?document.getElementById("password-textfield").focus():document.getElementById("user-textfield").focus()}))}),100)}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.loading){var a=this.state.user&&this.state.user.toString().trim(),n=this.state.pwd&&this.state.pwd.toString().trim();if(!a)return this.setState({error:{message:"Digite su usuario"}});if(!n)return this.setState({error:{message:"Digite su contrase\xf1a"}});this.setState({loading:!0,error:null}),w.Login({user:a,pwd:n}).then((function(e){j.Set("user",a),t.setState({loading:null}),t.props.onLoggedIn(Object(h.a)({},e))})).catch((function(e){return t.setState({loading:null,error:e})}))}}},{key:"handlePassword",value:function(e){this.setState((function(e){var t=Object(h.a)({},e);return t.isPasswordVisible=!t.isPasswordVisible,t}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.error,n=e.user,o=e.pwd,i=e.isPasswordVisible;return r.a.createElement("div",{style:{paddingTop:20}},r.a.createElement(g.a,{style:{width:"100%",maxWidth:300,margin:"auto",textAlign:"center"}},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(E.a,null,r.a.createElement("img",{src:"./logo.png",alt:"Logo",style:{height:150,minHeight:150,width:"auto"}}),r.a.createElement(v.a,{inputProps:{id:"user-textfield"},onChange:this.handleChange,value:n,label:"Usuario",name:"user",fullWidth:!0,disabled:t,style:I}),r.a.createElement(v.a,{onChange:this.handleChange,value:o,name:"pwd",label:"Contrase\xf1a",type:i?"input":"password",fullWidth:!0,disabled:t,style:I,inputProps:{id:"password-textfield"},InputProps:{endAdornment:r.a.createElement(b.a,{position:"end"},r.a.createElement(y.a,{onClick:this.handlePassword},i?r.a.createElement(D.a,null):r.a.createElement(k.a,null)))}}),a&&r.a.createElement(C.a,{color:"secondary",variant:"body1",style:{textAlign:"center"}},a.message),r.a.createElement(O.a,{type:"submit",variant:"outlined",style:I,color:"primary",disabled:t,fullWidth:!0},t?"CARGANDO...":"ENTRAR"),r.a.createElement(A.a,{style:{margin:20}}),r.a.createElement(C.a,{style:{display:"block",textAlign:"center",margin:5},variant:"body2",component:T.b,to:"/signin"},"No eres asesor/a nat\xfa? Registrate aqu\xed!")))))}}]),a}(r.a.Component),I={marginTop:10,marginBottom:10},N=a(4),_=a(435),P=a(438),M=a(482),L=a(265),F=a(481),U=a(494),B=a(52),G=a(465),V=a(263),z=a(484),W=a(485),q=a(486),H=a(483),Y=a(487),J=a(488),K=a(489),Z=a(490),$=a(466),Q=a(491),X=a(66),ee=a(29),te=a(472),ae=a(493),ne=a(476),re=a(77),oe=a(477),ie=a(463),le=a(455),ce=a(456),se=a(461),ue=a(156),de=a(457),me=a(458),he=a(459),pe=a(460),fe=a(462),ge=function(e){var t=e.onCardClick,a=e.onActionClick,n=e.controls,o=Object(ee.a)(e,["onCardClick","onActionClick","controls"]),i=e,l=e.textStyle||{};return r.a.createElement(g.a,null,t?r.a.createElement(le.a,{name:"card",value:e.id,onClick:t},r.a.createElement(Ee,o)):r.a.createElement(Ee,o),"ADD-REMOVE"===n&&r.a.createElement(ce.a,null,r.a.createElement(y.a,{onClick:a,name:"+",value:i.id},r.a.createElement(de.a,null)),r.a.createElement(C.a,{variant:"body1",style:l},i.cantidad),r.a.createElement(y.a,{disabled:!(i.cantidad>0),onClick:a,name:"-",value:i.id},r.a.createElement(me.a,null))),"LEFT-RIGHT"===n&&r.a.createElement(ce.a,null,r.a.createElement(y.a,{onClick:a,name:"LEFT",value:i.id},r.a.createElement(he.a,null)),r.a.createElement(y.a,{onClick:a,name:"RIGHT",value:i.id},r.a.createElement(pe.a,null))))};function Ee(e){var t=e,a=e.textStyle||{};return r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,{component:"img",className:"card-product-img",image:t.imgSrc||"https://diegopq95.github.io/take-orders/img/default.png"}),r.a.createElement(E.a,{style:{display:"flex",flexDirection:"row"}},r.a.createElement(C.a,{style:Object(h.a)({flex:1,height:60,overflow:"hidden"},a),variant:"subtitle1"},t.nombre),e.editablePrice?r.a.createElement(ue.a,{style:{width:100},type:"number",onChange:e.onPriceChange,value:""+t.pvp_final,name:""+t.id,startAdornment:r.a.createElement(b.a,{position:"start"},r.a.createElement(fe.a,null))}):r.a.createElement(C.a,{variant:"h6",style:a},"$ ",t.pvp_final.toFixed(2))))}function ve(e){var t={};return e.visible||(t.display="none"),r.a.createElement(ie.a,{container:!0,alignItems:"center",style:Object(h.a)({flex:1,marginTop:5},t),spacing:3},e.items.map((function(t){return r.a.createElement(ie.a,{item:!0,sm:6,md:4,xs:12,key:t.id},r.a.createElement(ge,Object.assign({},t,{editablePrice:e.editablePrices,onPriceChange:e.onPriceChange,onActionClick:e.onActionClick,onCardClick:e.onCardClick,controls:e.controls,textStyle:t.habilitado?null:{textDecoration:"line-through"}})))})),e.showNewItem&&r.a.createElement(ie.a,{item:!0,sm:6,md:4,xs:12},r.a.createElement(ge,{id:"NUEVO",imgSrc:"./add.svg",pvp_final:0,nombre:"AGREGA UN NUEVO ITEM",onCardClick:e.onCardClick})))}var be=a(464),ye=a(467),Ce=a(468),Oe=a(469),Ae=a(437),Se=r.a.forwardRef((function(e,t){return r.a.createElement(Ae.a,Object.assign({direction:"up",ref:t},e))}));function we(e){var t=e.show,a=e.onClose,n=e.fullScreen,o=e.title,i=e.closeButtonText||"ICON";return r.a.createElement(be.a,{maxWidth:!n&&"sm",fullWidth:!0,open:t,onClose:a,fullScreen:n,TransitionComponent:Se},n?r.a.createElement(G.a,{position:"relative"},r.a.createElement(V.a,null,r.a.createElement(C.a,{color:"inherit",variant:"h4",style:{flexGrow:1}},o),"ICON"===i?r.a.createElement(y.a,{onClick:a,type:"button",color:"inherit"},r.a.createElement($.a,null)):r.a.createElement(O.a,{type:"button",onClick:a,color:"inherit"},i||"SALIR"))):r.a.createElement(ye.a,{title:o}),r.a.createElement(Ce.a,null,e.children),e.footer&&r.a.createElement(Oe.a,null,e.footer))}function De(e){var t=e.selected?{border:"3px solid #333"}:null;return r.a.createElement(g.a,null,r.a.createElement(le.a,{onClick:e.onClick,value:e.id,style:t,component:"button"},r.a.createElement(se.a,{style:{minHeight:150,height:"25vh"},image:e.imgSrc,title:e.nombre}),r.a.createElement(E.a,null,r.a.createElement(C.a,null,e.nombre))))}var ke=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selections:[]},e.handleClose=function(){var t=e._Item().maxItems||0;return e.state.selections.length?t<e.state.selections.length?alert("No se puede continuar selecciona "+t+" items"):void e.props.onDone({selections:e.state.selections,id:e.props.showingID}):e.props.onDone()},e.toggleSelect=function(t){var a=t.currentTarget.value,n=e._Item().maxItems||0;e.setState((function(e){var t=Object(h.a)({},e);t.selections=Object(X.a)(t.selections);var r=t.selections.indexOf(+a);return r>=0?t.selections.splice(r,1):(t.selections.push(+a),t.selections.length>n&&t.selections.splice(0,1)),t}))},e}return Object(c.a)(a,[{key:"componentWillReceiveProps",value:function(e){null!==e.showingID&&void 0!==e.showingID||this.setState({selections:[]})}},{key:"shouldComponentUpdate",value:function(e){var t=!(null===this.props.showingID||void 0===this.props.showingID);return t!==!(null===e.showingID||void 0===e.showingID)||!1!==t}},{key:"_Item",value:function(){var e=this;return this.props.productList.find((function(t){return t.id===e.props.showingID}))||{}}},{key:"render",value:function(){var e=this,t=!(void 0===this.props.showingID||null===this.props.showingID),a=this.state.selections,n=this._Item(),o=(n.opciones||[]).map((function(e){return e.idOpcion})),i=this.props.productList.filter((function(e){return o.indexOf(e.id)>=0}));return r.a.createElement(we,{title:"Crea tu combinaci\xf3n",onClose:this.handleClose,show:t,fullScreen:!0,closeButtonText:a.length?"GUARDAR":"SALIR"},r.a.createElement("div",{style:{textAlign:"center",marginTop:10,marginBottom:10}},r.a.createElement(C.a,{variant:"h6"},n.nombre)),r.a.createElement("div",{style:{paddingLeft:10,paddingRight:10,margin:"auto",width:"calc(100% - 20px)"}},r.a.createElement(ie.a,{container:!0,spacing:3},i.map((function(t){return r.a.createElement(ie.a,{key:t.id,item:!0,xs:12,sm:4},r.a.createElement(De,Object.assign({},t,{onClick:e.toggleSelect,selected:a.indexOf(t.id)>=0})))})))))}}]),a}(r.a.Component);function Te(e){var t=e.items,a=e.show_next_discount,n=e.descuento,o=e.total,i=e.subtotal;n||(n={porcentaje:0,valor:0});var l=a&&n.sgte_descuento_porcentaje;return r.a.createElement(_.a,null,t.map((function(t){return r.a.createElement(xe,{key:t.id,col1:t.nombre,col2:t.cantidad,col3:"$ "+(t.pvp_final*t.cantidad).toFixed(2),componentes:e.showComponentes?t.componentes:null})})),r.a.createElement(xe,{col1:"SUBTOTAL",col3:"$ ".concat(i.toFixed(2))}),r.a.createElement(xe,{col1:e.LabelDescuentoComponent||"TU GANANCIA (".concat(n.porcentaje,"%) EN ESTE PEDIDO"),col3:"$ ".concat(n.valor.toFixed(2)),color:"primary"}),r.a.createElement(xe,{col1:"TOTAL",variant:"subtitle2",col3:"$ ".concat(o.toFixed(2))}),l&&r.a.createElement(P.a,null,r.a.createElement(C.a,{variant:"subtitle1",color:"secondary"},"Obt\xe9n el ".concat(n.sgte_descuento_porcentaje,"% de descuento agregando ").concat(n.sgte_descuento_falta.toFixed(2)," USD m\xe1s a tu pedido"))))}function xe(e){var t=e.col1,a=e.col2,n=e.col3,o=e.color,i=e.variant,l=e.componentes;return r.a.createElement(P.a,null,r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",null,r.a.createElement("div",{style:{width:"100%",display:"table"}},r.a.createElement(C.a,{color:o||"initial",style:{display:"table-cell"},variant:i||"body1"},t),a&&r.a.createElement(C.a,{color:o||"initial",style:{display:"table-cell",width:"15%",maxWidth:100,textAlign:"right"},variant:i||"body1"},a),r.a.createElement(C.a,{color:o||"initial",style:{display:"table-cell",width:"25%",maxWidth:100,textAlign:"right"},variant:i||"body1"},n))),l&&l.length?r.a.createElement("div",null,l.map((function(e){return r.a.createElement(xe,{key:e.id,col1:e.nombre,col2:e.cantidad,col3:"",variant:"body2",componentes:e.componentes})}))):null))}function je(e){for(var t={total:0,cantidad:0},a=0;a<e.length;a++){var n=e[a];t.cantidad+=n.cantidad,t.total+=n.pvp_final*n.cantidad}return t}function Re(e){return e||(e=""),"1"===e.toString()?"RUC":"2"===e.toString()?"Cedula":"3"===e.toString()?"Pasaporte":""}function Ie(e){return["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sept","Oct","Nov","Dic"][e]}var Ne=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"tel",value:function(e){if(e){if(e.length<7)return"El n\xfamero de telefono debe tener al menos 7 digitos";for(var t=0;t<e.length;t++)if("+"!==e[t]&&!Pe(e[t])&&""!==e[t].trim())return"El n\xfamero debe tener uno de estos formatos: '09123456789' o '+5931234567890'"}}},{key:"email",value:function(e){if(e){if(e.length<5)return"El email no est\xe1 escrito correctamente";var t=e.split("@");return 2!==t.length?"El email no est\xe1 escrito correctamente":t[1].indexOf(".")>=0?e.trim().indexOf(" ")>=0||e.trim().indexOf("\t")>=0||e.trim().indexOf("\r")>=0?"El email no est\xe1 escrito correctamente":void 0:"El email no est\xe1 escrito correctamente"}}}]),e}();function _e(e,t){if(e||(e=""),3!==(t=+t)){if(1===t){if(13!==e.length)return"N\xfamero de RUC debe tener 13 digitos";if(13===e.length&&"9999999999999"===e)return}return 2===t&&10!==e.length?"N\xfamero de Cedula debe tener 10 digitos":function(e,t,a,n){var r="",o=!1;if(t&&(_=e,""===_||void 0==_||null==_||"undefined"==_))r="",o=!0;else if(function(e){return!isNaN(parseFloat(e))}(e)){e.length<10?r="El numero de Cedula debe tener 10 d\xedgitos":e.length>10&&e.length<13?r="El numero de RUC debe tener 13 d\xedgitos":e.length>13&&(r="El numero tiene m\xe1s de 13 d\xedgitos");var i,l,c,s,u,d,m,h,p,f,g=!1,E=!1,v=!1,b=11,y=e.substr(0,1),C=e.substr(1,1),O=e.substr(2,1),A=e.substr(3,1),S=e.substr(4,1),w=e.substr(5,1),D=e.substr(6,1),k=e.substr(7,1),T=e.substr(8,1),x=e.substr(9,1);if(Pe(y)||(r="El digito 1 no es un n\xfamero"),Pe(C)||(r="El digito 2 no es un n\xfamero"),Pe(O)||(r="El digito 3 no es un n\xfamero"),Pe(A)||(r="El digito 4 no es un n\xfamero"),Pe(S)||(r="El digito 5 no es un n\xfamero"),Pe(w)||(r="El digito 6 no es un n\xfamero"),Pe(D)||(r="El digito 7 no es un n\xfamero"),Pe(k)||(r="El digito 8 no es un n\xfamero"),Pe(T)||(r="El digito 9 no es un n\xfamero"),Pe(x)||(r="El digito 10 no es un n\xfamero"),e.length>10){var j=e.substr(10,1),R=e.substr(10,1),I=e.substr(10,1);j&&!Pe(j)&&(r="El digito 11 no es un n\xfamero"),R&&!Pe(R)&&(r="El digito 12 no es un n\xfamero"),I&&!Pe(I)&&(r="El digito 13 no es un n\xfamero")}7!=O&&8!=O||(r="El tercer d\xedgito ingresado es inv\xe1lido",o=!1),O<6?(v=!0,(l=2*y)>=10&&(l-=9),(c=1*C)>=10&&(c-=9),(s=2*O)>=10&&(s-=9),(u=1*A)>=10&&(u-=9),(d=2*S)>=10&&(d-=9),(m=1*w)>=10&&(m-=9),(h=2*D)>=10&&(h-=9),(p=1*k)>=10&&(p-=9),(f=2*T)>=10&&(f-=9),b=10):6==O?(E=!0,l=3*y,c=2*C,s=7*O,u=6*A,d=5*S,m=4*w,h=3*D,p=2*k,f=0):9==O&&(g=!0,l=4*y,c=3*C,s=2*O,u=7*A,d=6*S,m=5*w,h=4*D,p=3*k,f=2*T);var N=0==(i=(l+c+s+u+d+m+h+p+f)%b)?0:b-i;1==E?(N!=T&&(r="El ruc de la empresa del sector p\xfablico es incorrecto.",o=!1),"0001"!=e.substr(9,4)&&(r="El ruc de la empresa del sector p\xfablico debe terminar con 0001",o=!1)):1==g?(N!=x&&(r="El ruc de la empresa del sector privado es incorrecto.",o=!1),"001"!=e.substr(10,3)&&(r="El ruc de la empresa del sector privado debe terminar con 001",o=!1)):1==v&&(N!=x&&(r="El n\xfamero de c\xe9dula de la persona natural es incorrecto.",o=!1),e.length>10&&"001"!=e.substr(10,3)&&(r="El ruc de la persona natural debe terminar con 001",o=!1)),o=!0}else r="Este campo solo admite numeros";var _;return o&&""==r?(a&&a(),""):(""==r&&(r="La cantidad de digitos no corresponde a Cedula o RUC"),n&&n(r),r)}(e,!1)}}function Pe(e){return e>="0"&&e<="9"}function Me(e){var t=e.error,a=e.maxLength,n=Object(ee.a)(e,["error","maxLength"]),o={};return t&&(o.error=!0,o.helperText=t),n.inputProps||(n.inputProps={}),n.inputProps.id=n.name,a&&(n.inputProps.maxLength=a),n.style||(n.style={margin:10,width:"calc(100% - 20px)"}),r.a.createElement(v.a,Object.assign({},o,n),e.children)}var Le=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){var a=t.currentTarget,n=a.name,r=a.value;e.props.onValueChange(n,r)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.direccion,a=e.ciudad,n=e.referencia,o=e.sector,i=e.visible,l=e.documento,c=e.identificacion,s=e.razonSocial,u=e.direccion_factura,d=e.telefono_factura,m=e.email_factura,h=e.nombre_contacto,p=e.telefono_contacto,f=e.identificacion_contacto,g=e.documento_contacto,E=c?_e(c,l):"",b=Ne.tel(d),y=Ne.email(m),O=f?_e(f,g):"",A=Ne.tel(p);return r.a.createElement(re.a,{style:{margin:"auto",height:"100%",width:"100%",padding:10,marginTop:10,display:i?"block":"none"}},r.a.createElement(ie.a,{container:!0},r.a.createElement(ie.a,{item:!0,sm:6},r.a.createElement(C.a,{variant:"subtitle1",style:{marginLeft:10}},"Datos de Env\xedo"),r.a.createElement(v.a,{variant:"outlined",name:"nombre_contacto",inputProps:{id:"nombre_contacto"},value:h,onChange:this.handleChange,label:"Nombre *",multiline:!0,rows:2,style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(v.a,{name:"documento_contacto",value:g,inputProps:{id:"documento_contacto"},variant:"outlined",select:!0,SelectProps:{native:!0},onChange:this.handleChange,label:"Documento *",style:{margin:10,width:"calc(100% - 20px)"}},r.a.createElement("option",{value:"1"},Re("1")),r.a.createElement("option",{value:"2"},Re("2")),r.a.createElement("option",{value:"3"},Re("3"))),r.a.createElement(Me,{variant:"outlined",name:"identificacion_contacto",value:f,error:O,onChange:this.handleChange,type:"phone",maxLength:20,label:"Numero de "+Re(g)+" *"}),r.a.createElement(Me,{variant:"outlined",name:"telefono_contacto",value:p,error:A,maxLength:20,onChange:this.handleChange,label:"Telefono *",type:"phone"}),r.a.createElement(v.a,{variant:"outlined",name:"ciudad",inputProps:{id:"ciudad"},value:a,onChange:this.handleChange,label:"Ciudad *",style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(v.a,{variant:"outlined",name:"sector",inputProps:{id:"sector"},value:o,onChange:this.handleChange,label:"Sector *",style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(v.a,{variant:"outlined",name:"direccion",inputProps:{id:"direccion"},value:t,onChange:this.handleChange,label:"Direccion Exacta* ",multiline:!0,rows:3,style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(v.a,{variant:"outlined",name:"referencia",inputProps:{id:"referencia"},value:n,onChange:this.handleChange,label:"Referencia",multiline:!0,rows:2,style:{margin:10,width:"calc(100% - 20px)"}})),r.a.createElement(ie.a,{item:!0,sm:6},r.a.createElement(C.a,{style:{marginLeft:10},variant:"subtitle1"},"Datos de Facturaci\xf3n"),r.a.createElement(v.a,{name:"documento",value:l,inputProps:{id:"documento"},variant:"outlined",select:!0,SelectProps:{native:!0},onChange:this.handleChange,label:"Documento *",style:{margin:10,width:"calc(100% - 20px)"}},r.a.createElement("option",{value:"1"},Re("1")),r.a.createElement("option",{value:"2"},Re("2")),r.a.createElement("option",{value:"3"},Re("3"))),r.a.createElement(Me,{variant:"outlined",name:"identificacion",value:c,error:E,onChange:this.handleChange,type:"phone",maxLength:20,label:"Numero de "+Re(l)+" *"}),r.a.createElement(v.a,{variant:"outlined",name:"razonSocial",value:s,onChange:this.handleChange,label:"Nombre / Empresa *",inputProps:{maxLength:200,id:"razonSocial"},style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(v.a,{variant:"outlined",name:"direccion_factura",value:u,onChange:this.handleChange,label:"Direccion *",inputProps:{maxLength:300,id:"direccion_factura"},multiline:!0,rows:2,style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(Me,{variant:"outlined",name:"telefono_factura",value:d,error:b,maxLength:20,onChange:this.handleChange,label:"Telefono *",type:"phone"}),r.a.createElement(Me,{variant:"outlined",name:"email_factura",value:m,error:y,maxLength:50,onChange:this.handleChange,label:"Email *",type:"email"}))))}}]),a}(r.a.PureComponent),Fe=a(264),Ue=a(471),Be=a(470),Ge=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).COMPONENT_ID="IMAGE_INPUT_"+(new Date).valueOf(),e.handleClick=function(t){document.getElementById(e.COMPONENT_ID).click()},e.handleChange=function(t){var a=t.currentTarget.files;e.props.onChange(a&&a.length&&a[0]||null)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.src,a=e.title,n=e.className;return r.a.createElement(le.a,{onClick:this.handleClick,style:{textAlign:"center"},type:"button"},r.a.createElement("input",{hidden:!0,type:"file",onChange:this.handleChange,accept:"image/*",id:this.COMPONENT_ID}),t?r.a.createElement(se.a,{component:"img",className:n,title:a||"Imagen",image:t}):r.a.createElement("div",{className:n,style:{display:"table",textAlign:"center",margin:"auto"}},r.a.createElement("div",{style:{display:"table-cell",verticalAlign:"middle"}},r.a.createElement(Be.a,null),r.a.createElement(C.a,null,"Agrega una imagen"))))}}]),a}(r.a.PureComponent),Ve=function(e){return r.a.createElement(re.a,{style:{maxWidth:400,padding:10,marginTop:10,height:"100%",marginLeft:"auto",marginRight:"auto",display:e.visible?"block":"none"}},r.a.createElement("form",{onSubmit:e.onDone,style:{textAlign:"center"}},r.a.createElement(C.a,{style:{marginTop:10,marginBottom:10,textAlign:"center"},variant:"h6"},"Total a Pagar: $",e.total.toFixed(2)),r.a.createElement(A.a,null),r.a.createElement("div",{style:{padding:20}},r.a.createElement(C.a,null,"Realiza tu pago mediante Transferencia o Deposito Bancario a la cuenta:"),r.a.createElement(C.a,null,"BANCO PICHINCHA Cta. Ahorros #2205511631"),r.a.createElement(C.a,null,"RUC. 1792627192001"),r.a.createElement(C.a,null,"COSMETICOSNATU CIA LTDA")),r.a.createElement(Fe.a,{label:"Subir una Imagen",control:r.a.createElement(Ue.a,{checked:Boolean(e.usarImagen),onChange:function(t){return e.onValueChange("usarImagen",t.currentTarget.checked)}})}),!e.usarImagen&&r.a.createElement(v.a,{style:{width:"calc(100% - 20px)",margin:10},variant:"outlined",inputMode:"numeric",inputProps:{id:"numeroTransaccion"},onChange:function(t){return e.onValueChange("numeroTransaccion",t.currentTarget.value)},value:e.numeroTransaccion,label:"Numero de Comprobante *"}),e.usarImagen&&r.a.createElement(Ge,{className:"transaction-img",onChange:e.onImgChange,src:e.imgTransaccion}),r.a.createElement(O.a,{type:"submit",disabled:e.loading,variant:"outlined",color:"primary",style:{margin:10,width:"calc(100% - 20px)"}},e.loading?r.a.createElement(te.a,{size:25}):"ENVIAR")))},ze=Object(d.g)(function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={txt1:"",txt2:"",loading:!1,id:""},n.handleClose=n.handleClose.bind(Object(f.a)(n)),n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n.state.id=e.match.params.id,n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"unblock",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.unblock=this.props.history.block=function(){return e.state.loading?"Espera un momento, tu informaci\xf3n se est\xe1 guardando":null}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.txt1,r=a.txt2,o=a.loading,i=a.id;if(!o){if(!n&&!r)return this.props.history.goBack();this.setState({loading:!0}),w.ActionOrder(i,{action:"SURVEY",value:[n,r]}).then((function(e){t.setState({loading:!1}),t.props.history.goBack()})).catch((function(e){t.setState({loading:!1}),alert(e.message)}))}}},{key:"handleClose",value:function(){this.state.loading||this.props.history.goBack()}},{key:"render",value:function(){var e=this.props,t=this.state,a=t.txt1,n=t.txt2,o=t.loading;return r.a.createElement(be.a,{open:!0,onClose:this.handleClose},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(Ce.a,null,r.a.createElement(C.a,{style:{textAlign:"center"},variant:"h6"},e.title),r.a.createElement(C.a,{style:{marginTop:10},variant:"subtitle1"},"C\xf3mo podemos ayudarte a mejorar tus ventas?"),r.a.createElement(v.a,{autoFocus:!0,name:"txt1",multiline:!0,rows:2,label:"Escribe tu respuesta",value:a,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(C.a,{style:{marginTop:10},variant:"subtitle1"},"Comp\xe1rtenos alguna experiencia que hayan tenido tus clientes usando nuestros productos"),r.a.createElement(v.a,{name:"txt2",multiline:!0,rows:3,label:"Escribe tu respuesta",value:n,onChange:this.handleChange,fullWidth:!0})),r.a.createElement(Oe.a,null,r.a.createElement(O.a,{type:"submit",variant:"outlined"},o?r.a.createElement(te.a,{size:25}):"GUARDAR"))))}}]),a}(r.a.Component));function We(e){var t=e.title,a=e.message,n=e.info,o=e.onClose;return r.a.createElement(be.a,{open:Boolean(a)||Boolean(e.children),onClose:o},r.a.createElement(ye.a,null,t),r.a.createElement(Ce.a,{style:{textAlign:"center"}},e.children||r.a.createElement("div",null,r.a.createElement(C.a,{variant:"subtitle1"},a),r.a.createElement(C.a,{variant:"body1"},n))),r.a.createElement(Oe.a,null,r.a.createElement(O.a,{type:"button",onClick:e.onClose},"SALIR")))}var qe=Object(d.g)(function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).unblock=function(){return null},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search).get("focusafter");e&&(this.unblock=this.props.history.block((function(t){setTimeout((function(){window.requestAnimationFrame((function(){try{document.getElementById(e).focus()}catch(t){}}))}),100)})))}},{key:"componentWillUnmount",value:function(){this.unblock&&this.unblock()}},{key:"render",value:function(){var e=this,t=new URLSearchParams(this.props.location.search);return r.a.createElement(We,{title:t.get("a"),message:t.get("b"),onClose:function(t){return e.props.history.goBack()}})}}]),a}(r.a.PureComponent));function He(e){return!(e&&e.length&&e.trim().length)}var Ye=a(478),Je=function(e){return new Promise((function(t,a){if(e.size>15728640){var n=(e.size/1024/1024).toFixed(2);return a({message:"Tu imagen (".concat(n," Mb) es muy pesada, selecciona otra m\xe1ximo de 15 Mb")})}setTimeout((function(n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=a,r.readAsDataURL(e)}),100)}))};function Ke(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(a){t({base64:Ze(a.target.result),ext:e.type.split("/")[1]})},n.onerror=a,n.readAsArrayBuffer(e)}))}function Ze(e){for(var t,a="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(e),o=r.byteLength,i=o%3,l=o-i,c=0;c<l;c+=3)a+=n[(16515072&(t=r[c]<<16|r[c+1]<<8|r[c+2]))>>18]+n[(258048&t)>>12]+n[(4032&t)>>6]+n[63&t];return 1===i?a+=n[(252&(t=r[l]))>>2]+n[(3&t)<<4]+"==":2===i&&(a+=n[(64512&(t=r[l]<<8|r[l+1]))>>10]+n[(1008&t)>>4]+n[(15&t)<<2]+"="),a}var $e=a(473),Qe=a(474);function Xe(e){var t=e.id,a=e.productList,n=e.selections,o=!(void 0===t||null===t),i=a.find((function(e){return e.id===+t}))||{},l=(n||{})[t]||[];function c(a){var n=+a.currentTarget.value;null===n||void 0===n||isNaN(n)||e.onDeleteSelection({id:t,index:n})}return r.a.createElement(we,{title:"Elimina una combinaci\xf3n",onClose:e.onDeleteSelection,show:o,fullScreen:!0},r.a.createElement("div",{style:{textAlign:"center",marginTop:10,marginBottom:10}},r.a.createElement(C.a,{variant:"h6"},i.nombre)),r.a.createElement("div",{style:{paddingLeft:10,paddingRight:10,margin:"auto",width:"calc(100% - 20px)"}},r.a.createElement(_.a,null,l.map((function(e,t){return r.a.createElement(P.a,null,r.a.createElement(L.a,null,e.map((function(e){return r.a.createElement(C.a,null,(a.find((function(t){return t.id===e}))||{nombre:"id ".concat(e," - Not Found")}).nombre)}))),r.a.createElement($e.a,null,r.a.createElement(y.a,{onClick:c,value:t},r.a.createElement(Qe.a,null))))})))))}var et=Object(d.g)(function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).PEDIDO_TIMESTAMP=(new Date).valueOf(),n.state=new tt,n.handleTab=n.handleTab.bind(Object(f.a)(n)),n.handleProductAction=n.handleProductAction.bind(Object(f.a)(n)),n.handleValueChange=n.handleValueChange.bind(Object(f.a)(n)),n.handleDone=n.handleDone.bind(Object(f.a)(n)),n.handleDescuentoChanged=n.handleDescuentoChanged.bind(Object(f.a)(n)),n.imageChange=n.imageChange.bind(Object(f.a)(n)),n.handleAddSelection=n.handleAddSelection.bind(Object(f.a)(n)),n.handleDeleteSelection=n.handleDeleteSelection.bind(Object(f.a)(n)),n.handlePriceChange=n.handlePriceChange.bind(Object(f.a)(n)),n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.guardarBorrador=n.guardarBorrador.bind(Object(f.a)(n)),e.onMounted&&e.onMounted(e.match.path),n.state.tablaDescuentos=(e.descuentos||[]).map((function(e,t){return e.id=e.id||t,e})),n}return Object(c.a)(a,[{key:"unblockNavigation",value:function(){}}]),Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.onbeforeunload=function(t){return e.state.isDirty?"Tu pedido a\xfan est\xe1 incompleto, deseas salir sin guardarlo?":null},this.unblockNavigation=this.props.history.block(this.routerWillLeave.bind(this)),w.GetProducts().then((function(t){e.setState({productList:t.map((function(e){return 0===(e.cantidad=0)&&e})),loading:null});try{var a={},n=j.Get("direccion")||{};for(var r in n)e.state.hasOwnProperty(r)&&n[r]&&(a[r]=n[r]);var o=j.Get("factura")||{};for(var i in o)e.state.hasOwnProperty(i)&&o[i]&&(a[i]=o[i]);var l=j.Get("current_order")||{};for(var c in l)e.state.hasOwnProperty(c)&&(a[c]=l[c]);if(!(Object.keys(a).length||l.choosen&&l.choosen.length))return;if(e.normalizeProductoSelecciones(a,t),e.setState(a),!l.choosen)return;for(var s=0;s<l.choosen.length;s++)for(var u=l.choosen[s],d=0;d<u.cantidad;d++){var m=e.state.productList.find((function(e){return e.id===+e.id}));m.opciones&&m.opciones.length||e.handleProductAction({currentTarget:{name:"+",value:u.id},avoidIsDirty:!0})}}catch(h){}})).catch((function(e){return alert(e.message)}))}},{key:"normalizeProductoSelecciones",value:function(e,t){if(e.productoSelecciones&&Object.keys(e.productoSelecciones).length){var a=function(a){if(!(r=t.find((function(e){return e.id===+a})))||!r.opciones||!r.opciones.length)return delete e.productoSelecciones[a],"continue";o=(o=e.productoSelecciones[a]).filter((function(e){return e.filter((function(e){return t.find((function(t){return t.id===+e}))})).length===e.length})),e.productoSelecciones[a]=o,e.productoSelecciones[a].length||delete e.productoSelecciones[a]};for(var n in e.productoSelecciones){var r,o;a(n)}}}},{key:"componentWillUnmount",value:function(){this.unblockNavigation&&this.unblockNavigation(),window.onbeforeunload&&(window.onbeforeunload=void 0)}},{key:"handleTab",value:function(e,t){this.setState({currentTab:t})}},{key:"routerWillLeave",value:function(e){e&&0===e.pathname.indexOf(this.props.match.path)||this.state.isDirty&&(window.confirm("Tu pedido est\xe1 incompleto, quieres guardarlo para completarlo despu\xe9s?")?this.guardarBorrador():j.Set("current_order"))}},{key:"guardarBorrador",value:function(e){if(!e||this.state.isDirty)try{!function(e){var t=e.productList.filter((function(e){return e.cantidad})).map((function(e){return{id:e.id,cantidad:e.cantidad}})),a=e.numeroTransaccion,n=e.observacion,r=e.direccion,o=e.ciudad,i=e.sector,l=e.referencia,c=e.position,s=e.documento,u=e.identificacion,d=e.razonSocial,m=e.telefono_factura,h=e.direccion_factura,p=e.email_factura,f=e.documento_contacto,g=e.identificacion_contacto,E=e.nombre_contacto,v=e.telefono_contacto,b=e.productoSelecciones;j.Set("current_order",{numeroTransaccion:a,direccion:r,ciudad:o,choosen:t,sector:i,observacion:n,referencia:l,position:c,documento:s,identificacion:u,razonSocial:d,telefono_factura:m,direccion_factura:h,email_factura:p,documento_contacto:f,identificacion_contacto:g,nombre_contacto:E,telefono_contacto:v,productoSelecciones:b})}(this.state),e&&(this.props.history.push(this.props.match.path+"/msg?"+new URLSearchParams({a:"Listo",b:"Tu pedido fue guardado como borrador."}).toString()),this.setState({isDirty:!1}))}catch(t){}}},{key:"handleDone",value:function(e){var t=this;if(e.preventDefault(),!this.state.loading){this.setState({loading:"guardar"});var a=function(e){var t=e.numeroTransaccion,a=e.ciudad,n=e.sector,r=e.direccion,o=e.documento,i=e.identificacion,l=e.razonSocial,c=e.telefono_factura,s=e.direccion_factura,u=e.documento_contacto,d=e.identificacion_contacto,m=e.nombre_contacto,h=e.telefono_contacto,p=e.email_factura,f=e.loading,g=e.usarImagen,E=e.imgTransaccion;if(f)return{loading:!0};var v={};if(!e.productList.filter((function(t){return t.cantidad||(e.productoSelecciones[t.id]||[]).length})).length)return{productList:"Debes elegir por lo menos un producto"};if(He(a)&&(v.ciudad="Digita la ciudad"),He(n)&&(v.sector="Digita el sector"),He(r)&&(v.direccion="Digita la direccion"),He(u)&&(v.documento_contacto="Selecciona el documento de identificaci\xf3n de la persona que recibe"),He(d))v.identificacion_contacto="Digita el n\xfamero de "+Re(u)+" de la persona que recibe";else{var b=_e(d,u);b&&(v.identificacion_contacto="La identificaci\xf3n de la persona que recibe es incorrecta: "+b)}if(He(m)&&(v.nombre_contacto="Digita el nombre de la persona que recibe"),He(h))v.telefono_contacto="Digita el numero de Telefono de la persona que recibe";else{var y=Ne.tel(h);y&&(v.telefono_contacto="Telefono de persona que recibe inv\xe1lido: "+y)}if(He(o)&&(v.documento="Selecciona un documento de identificaci\xf3n"),He(i))v.identificacion="Digita el n\xfamero de "+Re(o)+" de facturaci\xf3n";else{var C=_e(i,o);C&&(v.identificacion="La identificaci\xf3n de facturaci\xf3n est\xe1 incorrecta: "+C)}if(He(l)&&(v.razonSocial="Digita la Razon Social de la factura"),He(c))v.telefono_factura="Digita el n\xfamero de Telefono de facturaci\xf3n";else{var O=Ne.tel(c);O&&(v.telefono_factura="Telefono de facturaci\xf3n inv\xe1lido: "+O)}if(He(s)&&(v.direccion_factura="Digita la direcci\xf3n de facturaci\xf3n"),He(p)&&(v.email_factura="Digita el email de facturaci\xf3n"),He(p))v.email_factura="Digita el email de facturaci\xf3n";else{var A=Ne.email(p);A&&(v.email_factura=A)}return g?He(E)&&(v.imgTransaccion="Agrega la imagen del comprobante de pago"):He(t)&&(v.numeroTransaccion="Digita el numero de comprobante de pago"),Object.keys(v).length?v:null}(this.state);if(a){if(a.loading)return;if(a.productList)return this.failed_msg(a.productList),this.setState({loading:null});var n=Object.keys(a);if(n.length){this.failed_msg(a[n[0]],void 0,n[0]);var r=this.state.currentTab;return["ciudad","referencia","direccion","sector","identificacion","documento","razonSocial","direccion_factura","telefono_factura","email_factura","identificacion_contacto","nombre_contacto","telefono_contacto"].indexOf(n[0])>=0&&(r=2),this.setState({loading:null,currentTab:r})}}if(this.state.imageFile)return Ke(this.state.imageFile).then((function(e){return t._s(e)}));this._s()}}},{key:"_s",value:function(e){var t=this;return function(e,t){var a=e.ciudad,n=e.sector,r=e.direccion,o=e.observacion,i=e.referencia,l=e.documento_contacto,c=e.identificacion_contacto,s=e.nombre_contacto,u=e.telefono_contacto,d=e.documento,m=e.identificacion,h=e.razonSocial,p=e.telefono_factura,f=e.direccion_factura,g=e.email_factura,E=e.descuentoAplica,v=e.position,b=e.subtotal,y=e.usarImagen,C=e.productoSelecciones,O=e.productList.filter((function(e){return e.cantidad||(C[e.id]||[]).length}));if(y)var A=t;else var S=e.numeroTransaccion;return w.SaveOrder({ciudad:a,sector:n,direccion:r,observacion:o,referencia:i,documento_contacto:l,identificacion_contacto:c,nombre_contacto:s,telefono_contacto:u,documento:d,identificacion:m,razonSocial:h,telefono_factura:p,direccion_factura:f,email_factura:g,detalle:O,descuentoPorcentaje:E&&E.porcentaje,descuentoTotal:E&&E.valor,total:b-(E&&E.valor||0),position:v,numeroTransaccion:S,fileTransaccion:A,productoSelecciones:C}).then((function(t){return j.Set("current_order"),j.Set("direccion",{direccion:r,ciudad:a,sector:n,referencia:i,documento_contacto:l,identificacion_contacto:c,nombre_contacto:s,telefono_contacto:u}),j.Set("factura",{identificacion:m,documento:d,razonSocial:h,telefono_factura:p,direccion_factura:f,email_factura:g}),{currentTab:0,descuentoAplica:null,subtotal:0,numeroTransaccion:"",observacion:"",position:null,loading:null,productList:e.productList.map((function(e){return e.cantidad=0,e})),productoSelecciones:{},isDirty:!1,id:t.id}}))}(this.state,e).then((function(e){e.id;var a=Object(ee.a)(e,["id"]);t.setState(Object(h.a)(Object(h.a)({},a),{},{imgTransaccion:null,imageFile:null})),t.PEDIDO_TIMESTAMP=(new Date).valueOf(),t.props.history.push(t.props.match.path+"/survey/"+e.id)})).catch((function(e){t.failed_msg(e.message+" "+(e.status||""),"Ocurri\xf3 un error"),t.setState({loading:null})}))}},{key:"_CalcProductList",value:function(e){return e.productList.sort((function(e,t){return e.orden-t.orden})).map((function(t){if(t.opciones&&t.opciones.length){t=Object(h.a)(Object(h.a)({},t),{},{cantidad:0});var a=e.productoSelecciones[t.id];a&&(t.cantidad=a.length)}return t}))}},{key:"CalcularTotalesEstado",value:function(e){return e.subtotal=je(this._CalcProductList(e).filter((function(e){return e.cantidad}))).total,3===this.props.rol?e.descuentoAplica&&(e.descuentoAplica.valor=e.subtotal*e.descuentoAplica.porcentaje/100):e.descuentoAplica=function(e,t){for(var a=t.sort((function(e,t){return t.montoDesde-e.montoDesde})),n=-1,r={porcentaje:0,valor:0,sgte_descuento_porcentaje:0,sgte_descuento_falta:0},o=0;o<a.length;o++){if(e>=a[o].montoDesde){n=o;break}}if(n>=0){var i=a[n];r.porcentaje=i.porcentaje,r.valor=e*i.porcentaje/100}if(-1===n&&(n=a.length),n-1>=0){var l=a[n-1];l&&(r.sgte_descuento_falta=l.montoDesde-e,r.sgte_descuento_porcentaje=l.porcentaje)}return r}(e.subtotal,e.tablaDescuentos),e}},{key:"failed_msg",value:function(e,t,a){var n=new URLSearchParams({a:t||"No se puede guardar",b:e,focusafter:a});this.props.history.push(this.props.match.path+"/msg?"+n.toString())}},{key:"handleProductAction",value:function(e){var t=this,a=e.currentTarget,n=a.name,r=a.value,o=e.avoidIsDirty;this.setState((function(e){var a=Object(h.a)({},e);a.productList=JSON.parse(JSON.stringify(a.productList));var i=a.productList.find((function(e){return e.id===+r})),l=i.cantidad&&!isNaN(+i.cantidad)&&i.cantidad||0,c=i.cantidad_desde;if("+"===n){if(i.opciones&&i.opciones.length&&!o)return t.props.history.push(t.props.match.path+"/select-product-options/"+i.id),a;l<=0&&c?l=c:l++}else if("-"===n){if(i.opciones&&i.opciones.length)return t.props.history.push(t.props.match.path+"/view-product-options/"+i.id),a;l<=10&&c?l=0:l--}return i.cantidad=l,t.CalcularTotalesEstado(a),o||(a.isDirty=!0),a}))}},{key:"handleValueChange",value:function(e,t){var a;this.setState((a={},Object(p.a)(a,e,t),Object(p.a)(a,"isDirty",!0),a))}},{key:"handleChange",value:function(e){var t,a=e.currentTarget,n=a.value,r=a.name;this.setState((t={},Object(p.a)(t,r,n),Object(p.a)(t,"isDirty",!0),t))}},{key:"handleDescuentoChanged",value:function(e){var t=e.currentTarget.value,a=this.state.tablaDescuentos.find((function(e){return e.id===+t}));if(a){var n=je(this._CalcProductList(this.state)).total;this.setState({descuentoAplica:{porcentaje:a.porcentaje,valor:n*a.porcentaje/100,id:a.id}})}}},{key:"imageChange",value:function(e){var t=this;e&&(document.getElementById("loading-full-message").style.display="block",window.requestAnimationFrame?window.requestAnimationFrame((function(){return t._renderImage(e)})):this._renderImage(e))}},{key:"_renderImage",value:function(e){var t=this;Je(e).then((function(a){t.setState({imgTransaccion:a,imageFile:e},(function(){document.getElementById("loading-full-message").style.display="none"}))})).catch((function(e){document.getElementById("loading-full-message").style.display="none",t.failed_msg("No se pudo cargar tu imagen. "+e.message)}))}},{key:"handleAddSelection",value:function(e){var t=this;if(e){var a=e.id,n=e.selections;this.setState((function(e){var r=Object(h.a)({},e);return r.productoSelecciones=JSON.parse(JSON.stringify(r.productoSelecciones)),r.productoSelecciones.hasOwnProperty(a)?r.productoSelecciones[a].push(n):r.productoSelecciones[a]=[n],t.CalcularTotalesEstado(r),r.isDirty=!0,r}))}this.props.history.push(this.props.match.path)}},{key:"handleDeleteSelection",value:function(e){var t=this;if(e){var a=e.id,n=e.index;this.setState((function(e){var r=Object(h.a)({},e);(r.productoSelecciones=JSON.parse(JSON.stringify(r.productoSelecciones)),r.productoSelecciones.hasOwnProperty(a))&&(r.productoSelecciones[a][n]&&r.productoSelecciones[a].splice(n,1));return t.CalcularTotalesEstado(r),r.isDirty=!0,r}))}this.props.history.push(this.props.match.path)}},{key:"handlePriceChange",value:function(e){var t=this,a=+e.currentTarget.name,n=e.currentTarget.value;this.setState((function(e){var r=Object(h.a)({},e);r.productList=Object(X.a)(r.productList);var o=r.productList.find((function(e){return e.id===a}));return o&&(o.pvp_final=n,t.CalcularTotalesEstado(r),r.isDirty=!0),r}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentTab,n=t.productoSelecciones,o=t.numeroTransaccion,i=t.descuentoAplica,l=t.subtotal,c=t.loading,s=t.observacion,u=t.imgTransaccion,m=t.usarImagen,h=t.tablaDescuentos,p=Object(ee.a)(t,["currentTab","productoSelecciones","numeroTransaccion","descuentoAplica","subtotal","loading","observacion","imgTransaccion","usarImagen","tablaDescuentos"]),f=this._CalcProductList(this.state),g=f.filter((function(e){return e.cantidad}));console.info("Order render");var E=l-(i&&i.valor||0);return"articulos"===c?r.a.createElement("div",{style:{width:"100%",textAlign:"center",paddingTop:100}},r.a.createElement(te.a,{size:100}),r.a.createElement(C.a,{variant:"h6"},"CARGANDO...")):r.a.createElement("div",{style:{width:"100%",height:"calc(100% - 1px)",display:"flex",flexDirection:"column",padding:10,overflow:"hidden"}},r.a.createElement(ae.a,{variant:"fullWidth",onChange:this.handleTab,value:a},r.a.createElement(ne.a,{label:"Productos"}),r.a.createElement(ne.a,{label:"Pedido"}),r.a.createElement(ne.a,{label:"Datos"}),r.a.createElement(ne.a,{label:"Pago"})),0===a&&r.a.createElement(ve,{visible:!0,onActionClick:this.handleProductAction,items:f,editablePrices:this.props.editablePrices,onPriceChange:this.handlePriceChange,controls:"ADD-REMOVE"}),1===a&&r.a.createElement(re.a,{style:{display:1===a?"block":"none",textAlign:"center",padding:10,margin:"auto",marginTop:10,width:"100%",maxWidth:500,height:"100%"}},r.a.createElement(C.a,{variant:"h5"},"TU PEDIDO"),r.a.createElement(Te,{show_next_discount:!0,items:g,descuento:i,subtotal:l,total:E,LabelDescuentoComponent:3===this.props.rol?r.a.createElement(v.a,{onChange:this.handleDescuentoChanged,value:i&&i.id||"",SelectProps:{native:!0},select:!0},r.a.createElement("option",null,"- SELECCIONA UN DESCUENTO -"),h.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},"DESCUENTO ",e.porcentaje,"%")}))):null}),r.a.createElement(v.a,{variant:"outlined",value:s,name:"observacion",onChange:this.handleChange,style:{width:"calc(100% - 20px)",margin:10},label:"Observacion",multiline:!0,rows:"2",inputProps:{maxLength:300,id:"observacion"}})),2===a&&r.a.createElement(Le,Object.assign({visible:!0},p,{onValueChange:this.handleValueChange})),3===a&&r.a.createElement(Ve,{visible:!0,loading:"guardar"===c,total:E,onDone:this.handleDone,items:g,numeroTransaccion:o,imgTransaccion:u,onImgChange:this.imageChange,usarImagen:m,onValueChange:this.handleValueChange}),r.a.createElement(d.b,{path:this.props.match.path+"/msg",component:qe}),r.a.createElement(d.b,{path:this.props.match.path+"/survey/:id",component:ze}),r.a.createElement(d.b,{path:this.props.match.path+"/select-product-options/:id",children:function(t){var a=t.match;return r.a.createElement(ke,{showingID:a&&+a.params.id,onDone:e.handleAddSelection,productList:f})}}),r.a.createElement(d.b,{path:this.props.match.path+"/view-product-options/:id",children:function(t){var a=t.match;return r.a.createElement(Xe,{id:a&&a.params.id,onDeleteSelection:e.handleDeleteSelection,productList:f,selections:n})}}),r.a.createElement(oe.a,{title:"Guardar Borrador",onClick:this.guardarBorrador,variant:"extended",style:{position:"fixed",bottom:20,right:20},color:"primary"},r.a.createElement(Ye.a,null)))}}]),a}(r.a.PureComponent)),tt=function e(){Object(l.a)(this,e),this.currentTab=0,this.productList=[],this.productoSelecciones={},this.tablaDescuentos=[],this.descuentoAplica=null,this.subtotal=0,this.position=null,this.direccion="",this.sector="",this.ciudad="",this.referencia="",this.documento="1",this.razonSocial="",this.identificacion="",this.telefono_factura="",this.direccion_factura="",this.email_factura="",this.documento_contacto="2",this.identificacion_contacto="",this.nombre_contacto="",this.telefono_contacto="",this.observacion="",this.numeroTransaccion="",this.imgTransaccion="",this.usarImagen=!1,this.loading=null,this.isDirty=!1,this.imageFile=void 0},at=a(290),nt=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,null,[{key:"Aprobar",value:function(e){if(window.confirm("Esta seguro de APROBAR este pedido?"))return w.ActionOrder(e.id,{action:"APROBAR"})}},{key:"Rechazar",value:function(e){if(window.confirm("Esta seguro de RECHAZAR este pedido?")){var t=window.prompt("Digita el Motivo de Rechazo");if(t)return w.ActionOrder(e.id,{action:"RECHAZAR",value:t})}}},{key:"Enviar",value:function(e){var t=e._fechaEnvio;if(!t||!t.toString().trim().length||isNaN(+new Date(t)))return alert("Agregue una fecha de env\xedo v\xe1lida"),void window.requestAnimationFrame((function(){document.getElementById("_fechaEnvio").focus()}));if(window.confirm("Esta seguro de seleccionar este pedido como ENVIADO?")){var a=new Date(+t.split("-")[0],+t.split("-")[1]-1,+t.split("-")[2]);return w.ActionOrder(e.id,{action:"ENVIAR",value:a})}}},{key:"Recibir",value:function(e){var t=e._fechaRecepcion,a=e.bienRecibido,n=e.observacionRecepcion;if(!t||!t.toString().trim().length||isNaN(+new Date(t)))return alert("Agregue una fecha de recepci\xf3n v\xe1lida"),void window.requestAnimationFrame((function(){document.getElementById("_fechaRecepcion").focus()}));if(!a&&(!n||!n.toString().trim().length))return alert("Agregue la observaci\xf3n de la Recepci\xf3n"),void window.requestAnimationFrame((function(){document.getElementById("observacionRecepcion").focus()}));var r=new Date(+t.split("-")[0],+t.split("-")[1]-1,+t.split("-")[2]);return r.valueOf()<new Date(e.fechaEnvio).valueOf()&&(alert("La fecha de Recepci\xf3n no puede ser menor a la fecha de env\xedo"),window.requestAnimationFrame((function(){document.getElementById("_fechaRecepcion").focus()}))),window.confirm("Esta seguro de seleccionar este pedido como RECIBIDO?")?w.ActionOrder(e.id,{action:"RECIBIR",value:r,bienRecibido:a,observacionRecepcion:n}):void 0}},{key:"Facturar",value:function(e){return e.numeroFactura&&e.numeroFactura.toString().trim().length?window.confirm("Esta seguro de FACTURAR este pedido?")?w.ActionOrder(e.id,{action:"FACTURAR",value:e.numeroFactura}):void 0:(alert("Agregue el n\xfamero de factura"),void window.requestAnimationFrame((function(){document.getElementById("numeroFactura").focus()})))}}]),e}(),rt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:"data",_fechaEnvio:"",_fechaRecepcion:""},e.handleClose=function(t){e.props.onClose(e.state.shouldRefresh)},e.handleButton=function(t){var a=t.currentTarget.name;if(!e.state.loading){if("APROBAR"===a){var n=nt.Aprobar(e.state);if(!n)return;n.then((function(t){return e.props.onClose(!0)})).catch((function(t){alert(t.message),e.setState({loading:null})}))}if("RECHAZAR"===a){var r=nt.Rechazar(e.state);if(!r)return;r.then((function(t){return e.props.onClose(!0)})).catch((function(t){alert(t.message),e.setState({loading:null})}))}if("ENVIAR"===a){var o=nt.Enviar(e.state);if(!o)return;o.then((function(t){return e.props.onClose(!0)})).catch((function(t){alert(t.message),e.setState({loading:null})}))}if("RECIBIR"===a){var i=nt.Recibir(e.state);if(!i)return;i.then((function(t){return e.props.onClose(!0)})).catch((function(t){alert(t.message),e.setState({loading:null})}))}if("FACTURAR"===a){var l=nt.Facturar(e.state);if(!l)return;l.then((function(t){return e.props.onClose(!0)})).catch((function(t){alert(t.message),e.setState({loading:null})}))}e.setState({loading:a})}},e.handleChange=function(t){var a=t.currentTarget,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.handleCheck=function(t){var a=t.currentTarget,n=a.name,r=a.checked;e.setState(Object(p.a)({},n,r))},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;w.GetOrder(this.props.id).then((function(t){return e.setState(Object(h.a)(Object(h.a)({},t),{},{loading:null}))}))}},{key:"render",value:function(){var e=this.state,t=e.numero,a=e.fechaCreacion,n=e.fechaEnvio,o=e.fechaRecepcion,i=e.detalle,l=e.descuentoPorcentaje,c=e.descuentoTotal,s=e.observacion,u=e.direccion,d=e.sector,m=e.ciudad,h=e.referencia,p=e.numeroTransaccion,f=e.imgTransaccion,g=e.estado,E=e.total,b=e.username,y=e.survey1,A=e.survey2,S=e.loading,w=e.documento,D=e.identificacion,k=e.razonSocial,T=e.telefono_factura,x=e.direccion_factura,j=e.email_factura,R=e.nombre_contacto,I=e.identificacion_contacto,N=e.documento_contacto,_=e.telefono_contacto,P=e.numeroFactura,M=e._fechaEnvio,L=e._fechaRecepcion,F=e.bienRecibido,U=e.observacionRecepcion,B=!0===this.props.editable;return"data"===S?r.a.createElement(be.a,{open:!0,onClose:this.handleClose,maxWidth:"md"},r.a.createElement(Ce.a,{style:{textAlign:"center",paddingTop:100,width:400,height:400}},r.a.createElement(te.a,{size:100}),r.a.createElement(C.a,{variant:"h6"},"CARGANDO..."))):r.a.createElement(be.a,{open:!0,onClose:this.handleClose,maxWidth:"md"},r.a.createElement(ye.a,null,"PEDIDO #",t),r.a.createElement(Ce.a,null,r.a.createElement(ot,{value:new Date(a).toLocaleString(),label:"Fecha"}),r.a.createElement(ot,{value:b,label:"Usuario"}),r.a.createElement(ot,{value:g,label:"Estado"}),P&&r.a.createElement(ot,{value:P,label:"Factura #"}),n&&r.a.createElement(ot,{value:new Date(n).toLocaleDateString(),label:"Enviado"}),o&&r.a.createElement(ot,{value:new Date(o).toLocaleDateString(),label:"Recibido"}),"RECIBIDO"===g&&r.a.createElement(ot,{value:F?"NO":"SI",label:"Incompleto"}),"RECIBIDO"===g&&r.a.createElement(ot,{label:"Comentarios",value:U}),r.a.createElement(it,null,"PRODUCTOS"),r.a.createElement(Te,{items:i,descuento:{porcentaje:l,valor:c},total:E,subtotal:E+c,showComponentes:!0}),r.a.createElement(ot,{value:s,label:"Observaci\xf3n"}),r.a.createElement(it,null,"DATOS DE ENTREGA"),r.a.createElement(ot,{value:R,label:"Nombre"}),r.a.createElement(ot,{value:I,label:Re(N)}),r.a.createElement(ot,{value:_,label:"Telefono"}),r.a.createElement(ot,{value:m,label:"Ciudad"}),r.a.createElement(ot,{value:d,label:"Sector"}),r.a.createElement(ot,{value:u,label:"Direccion"}),r.a.createElement(ot,{value:h,label:"Referencia"}),r.a.createElement(it,null,"DATOS DE FACTURACI\xd3N"),r.a.createElement(ot,{value:D,label:Re(w)}),r.a.createElement(ot,{value:k,label:"Nombre"}),r.a.createElement(ot,{value:x,label:"Direcci\xf3n"}),r.a.createElement(ot,{value:T,label:"Tel\xe9fono"}),r.a.createElement(ot,{value:j,label:"Email"}),r.a.createElement(it,null,"PAGO"),p&&r.a.createElement(ot,{value:p,label:"Comprobante"}),f&&r.a.createElement(se.a,{style:{height:400},image:f,title:"Comprobante"}),r.a.createElement(it,null,"ENCUESTA"),r.a.createElement(C.a,{style:{marginTop:10},variant:"caption"},"C\xf3mo podemos ayudarte a mejorar tus ventas?"),r.a.createElement(C.a,null,y||""),r.a.createElement(C.a,{style:{marginTop:10},variant:"caption"},"Comp\xe1rtenos alguna experiencia que hayan tenido tus clientes usando nuestros productos"),r.a.createElement(C.a,null,A||""),"PENDIENTE"===g&&B&&r.a.createElement(lt,{loadingAction:this.state.loading,label:"APROBAR",showReject:!0,onClick:this.handleButton}),"APROBADO"===g&&B&&r.a.createElement(r.a.Fragment,null,r.a.createElement(it,null,"ENVIAR"),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:15,marginBottom:10}},r.a.createElement(C.a,{variant:"button",style:{marginRight:10,paddingTop:5}},"Fecha de Env\xedo"),r.a.createElement(v.a,{type:"date",fullWidth:!0,inputProps:{id:"_fechaEnvio"},name:"_fechaEnvio",value:M||"",style:{flex:1},onChange:this.handleChange})),r.a.createElement(lt,{loadingAction:this.state.loading,label:"ENVIAR",onClick:this.handleButton})),"ENVIADO"===g&&B&&r.a.createElement(r.a.Fragment,null,r.a.createElement(it,null,"RECIBIR"),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",margin:10}},r.a.createElement(C.a,{variant:"button",style:{marginRight:10,paddingTop:5}},"Fecha Recepci\xf3n"),r.a.createElement(v.a,{type:"date",fullWidth:!0,name:"_fechaRecepcion",value:L||"",inputProps:{id:"_fechaRecepcion"},style:{flex:1},onChange:this.handleChange})),r.a.createElement(Fe.a,{label:"El pedido se envi\xf3 completo?",control:r.a.createElement(at.a,{checked:F,onChange:this.handleCheck,name:"bienRecibido"})}),r.a.createElement(v.a,{name:"observacionRecepcion",value:U||"",onChange:this.handleChange,rows:2,required:!F,label:"Comentarios",fullWidth:!0,multiline:!0,inputProps:{id:"observacionRecepcion",maxLength:300}}),r.a.createElement(lt,{loadingAction:this.state.loading,name:"RECIBIR",label:"COMPLETAR",onClick:this.handleButton})),"RECIBIDO"===g&&B&&r.a.createElement(r.a.Fragment,null,r.a.createElement(it,null,"REGISTRAR FACTURA"),r.a.createElement(v.a,{label:"Numero de Factura",placeholder:"###-###-#####",value:P,inputProps:{id:"numeroFactura",maxLength:20},fullWidth:!0,onChange:this.handleChange,name:"numeroFactura"}),r.a.createElement(lt,{loadingAction:this.state.loading,label:"FACTURAR",onClick:this.handleButton}))),r.a.createElement(Oe.a,null,r.a.createElement(O.a,{onClick:this.handleClose},"SALIR")))}}]),a}(r.a.Component);function ot(e){var t=e.value,a=e.label;return r.a.createElement("div",{style:{width:"100%",textAlign:"left"}},r.a.createElement("div",{style:{width:120,display:"inline-block"}},r.a.createElement(C.a,{variant:"body1"},a)),r.a.createElement(C.a,{variant:"body2",style:{width:"auto",display:"inline"}},t))}function it(e){var t={marginTop:12,marginBottom:5};return e.center&&(t.textAlign="center"),r.a.createElement("div",{style:t},r.a.createElement(C.a,{variant:"h6"},e.children),r.a.createElement(A.a,null))}function lt(e){return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(O.a,{style:{margin:10,flex:1},onClick:e.onClick,variant:"outlined",color:"primary",disabled:Boolean(e.loadingAction),name:e.name||e.label},e.loadingAction===(e.name||e.label)?"CARGANDO...":e.label),e.showReject&&r.a.createElement(O.a,{style:{margin:10,flex:1},onClick:e.onClick,variant:"outlined",color:"secondary",disabled:Boolean(e.loadingAction),name:"RECHAZAR"},"RECHAZAR"===e.loadingAction?"CARGANDO...":"RECHAZAR"))}var ct=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:[],msg:null,loading:!0},e.onMounted(e.match.path),n.handleClick=n.handleClick.bind(Object(f.a)(n)),n.handleClose=n.handleClose.bind(Object(f.a)(n)),n.handleMessage=n.handleMessage.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this;w.GetOrders().then((function(t){return e.setState({data:t,loading:null})})).catch((function(t){return e.setState({loading:null,msg:{title:"Ocurri\xf3 un error",message:t.message,info:t.code}})}))}},{key:"handleMessage",value:function(){this.setState({msg:null})}},{key:"handleClick",value:function(e){var t=e.currentTarget.id;this.props.history.push(this.props.match.path+"/"+t)}},{key:"handleClose",value:function(e){var t=this;e&&(this.setState({loading:!0}),w.GetOrders().then((function(e){return t.setState({data:e,loading:null})})).catch((function(e){return t.setState({msg:{title:"No se pudo actualizar el listado",message:e.message,info:e.code},loading:null})}))),this.props.history.push(this.props.match.path)}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.msg,o=t.loading,i=this.props.rol;return o?r.a.createElement("div",{style:{width:"100%",textAlign:"center",paddingTop:100}},r.a.createElement(te.a,{size:100}),r.a.createElement(C.a,{variant:"h6"},"CARGANDO...")):r.a.createElement(re.a,{style:{width:"calc(100%-20px)",height:"calc(100% - 30px)",display:"flex",flexDirection:"column",margin:10,padding:10,paddingBottom:0,overflowX:"hidden"}},r.a.createElement(_.a,null,r.a.createElement(U.a,{xsDown:!0,implementation:"css"},r.a.createElement(P.a,null,r.a.createElement(ie.a,{container:!0,spacing:1,style:{borderBottom:"1px solid #ebebeb"}},r.a.createElement(ie.a,{sm:2,item:!0},r.a.createElement(C.a,{variant:"overline"},"Numero")),r.a.createElement(ie.a,{sm:2,item:!0},r.a.createElement(C.a,{variant:"overline"},"Creado")),3===i&&r.a.createElement(ie.a,{sm:3,item:!0},r.a.createElement(C.a,{variant:"overline"},"Usuario")),r.a.createElement(ie.a,{sm:1,item:!0},r.a.createElement(C.a,{variant:"overline"},"Total")),1===i&&r.a.createElement(ie.a,{sm:1,item:!0},r.a.createElement(C.a,{variant:"overline"},"Ganancia")),r.a.createElement(ie.a,{sm:2,item:!0},r.a.createElement(C.a,{variant:"overline"},"Estado")),r.a.createElement(ie.a,{sm:2,item:!0},r.a.createElement(C.a,{variant:"overline"},"Fecha de Env\xedo"))))),a.map((function(t){return r.a.createElement(P.a,{key:t.id,id:""+t.id,button:!0,onClick:e.handleClick},r.a.createElement(ie.a,{container:!0,spacing:1,style:{paddingTop:5,paddingBottom:5,borderBottom:"1px solid #fafafa"}},r.a.createElement(ie.a,{xs:12,sm:2,item:!0},r.a.createElement(U.a,{smUp:!0},"PEDIDO #"),t.id),r.a.createElement(ie.a,{xs:12,sm:2,item:!0},new Date(t.fechaCreacion).toLocaleDateString()),3===i&&r.a.createElement(ie.a,{xs:12,sm:3,item:!0},t.username),r.a.createElement(ie.a,{xs:12,sm:1,item:!0},"$ ",t.total.toFixed(2)),1===i&&r.a.createElement(ie.a,{xs:12,sm:1,item:!0},"$ ",(t.descuentoTotal||0).toFixed(2)),r.a.createElement(ie.a,{xs:12,sm:2,item:!0},r.a.createElement(C.a,{color:st(t.estado)},t.estado)),r.a.createElement(ie.a,{xs:12,sm:2,item:!0},t.fechaEnvio&&new Date(t.fechaEnvio).toDateString())))}))),n&&r.a.createElement(We,Object.assign({},n,{onClose:this.handleMessage})),r.a.createElement(d.b,{path:this.props.match.path+"/:id",render:function(t){return r.a.createElement(rt,{id:+t.match.params.id,onClose:e.handleClose})}}))}}]),a}(r.a.Component);function st(e){return"APROBADO"===e?"primary":"RECHAZADO"===e?"secondary":"initial"}var ut=a(479),dt=a(480);function mt(e){var t=e.data,a=e.title,n=e.col1,o=e.col2,i=e.secondColType,l=e.colType,c=e.subtitle,s=e.onBackClick,u=e.onNextClick,d=e.loading;return r.a.createElement(g.a,{className:"dashboard-card",style:{display:"flex",flexDirection:"column"}},r.a.createElement(ut.a,{title:r.a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"row"}},s&&r.a.createElement("div",null,r.a.createElement(y.a,{onClick:s,disabled:d},d?r.a.createElement(dt.a,null):r.a.createElement(he.a,null))),r.a.createElement("div",{style:{flex:1}},r.a.createElement(C.a,{variant:"h5"},a),r.a.createElement(C.a,{variant:"body1"},c)),u&&r.a.createElement("div",null,r.a.createElement(y.a,{onClick:u,disabled:d},d?r.a.createElement(dt.a,null):r.a.createElement(pe.a,null)))),disableTypography:!0,style:{textAlign:"center"}}),r.a.createElement(E.a,{style:{flex:1,overflow:"auto"}},r.a.createElement(_.a,null,t.sort((function(e,t){return t[n]-e[n]})).map((function(e,t){var a=e[n];if(o){var c=e[o];c=i&&"DATE"===i?function(e){if(!e)return"Nunca";var t=new Date(e);if(isNaN(+t))return e;var a=new Date;if(t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear())return t.toLocaleTimeString();for(var n=1;n<30;n++){var r=new Date(a.getFullYear(),a.getMonth(),a.getDate()-n);if(t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear())return 1===n?"Ayer":"Hace "+n+" d\xedas"}return t.toLocaleDateString()}(e[o]):c.toFixed(2)}return r.a.createElement(P.a,{key:t,id:"ranking-listitem-"+t},r.a.createElement("div",{style:{display:"table",width:"100%"}},r.a.createElement(C.a,{style:{display:"table-cell",width:50},variant:e.me?"body1":"caption"},"# ",t+1),r.a.createElement(C.a,{style:{display:"table-cell"},variant:e.me?"body1":"caption"},e.username),"PERFOMANCE"===l&&r.a.createElement(ht,{value:a,me:e.me}),"MONEY"===l&&r.a.createElement(C.a,{style:{display:"table-cell",textAlign:"right",width:100},variant:e.me?"body1":"caption"},"$ ",a.toFixed(2)),"NUMBER"===l&&r.a.createElement(C.a,{style:{display:"table-cell",textAlign:"right",width:100},variant:e.me?"body1":"caption"},a),o?"PERFOMANCE"===i?r.a.createElement(ht,{value:+c,me:e.me}):r.a.createElement(C.a,{style:{display:"table-cell",textAlign:"right",width:100,paddingLeft:10},variant:e.me?"body1":"caption"},"MONEY"===i?"$":null," ",c):null))})))))}function ht(e){return r.a.createElement(C.a,{color:e.value?e.value>0?"primary":"secondary":"inherit",style:{display:"table-cell",textAlign:"right",width:100},variant:e.me?"body1":"caption"},"% ",e.value.toFixed(2)," ",e.value?e.value>0?"\u2191":"\u2193":null)}var pt=a(98),ft=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={options:{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,bezierCurve:!1,scales:{yAxes:[{ticks:{maxTicksLimit:10,padding:5}}],xAxes:[{ticks:{padding:5}}]}}},e}return Object(c.a)(a,[{key:"render",value:function(){for(var e=[],t=[],a=0;a<this.props.data.length;a++){var n=this.props.data[a];if(n.we){var o=new Date(n.we);e.push("".concat(o.getDate()," ").concat(Ie(o.getMonth())))}else e.push(n.label);t.push(n.value)}var i={labels:e,datasets:[{backgroundColor:"#3f51b5",borderColor:"#3f51b5",data:t,lineTension:0,fill:!1}]};return r.a.createElement(g.a,{className:"dashboard-card",style:{display:"flex",flexDirection:"column"}},r.a.createElement(ut.a,{style:{textAlign:"center"},title:this.props.title}),r.a.createElement(E.a,{style:{width:"100%",flex:1,padding:5}},r.a.createElement(pt.b,{options:this.state.options,data:i})))}}]),a}(r.a.PureComponent);function gt(e){var t=e.month,a=e.year,n=0,o=0;return t&&(n=5*t/100,o=14*t/100),r.a.createElement(g.a,{className:"dashboard-card"},r.a.createElement(ut.a,{title:"GANANCIAS",style:{textAlign:"center"}}),r.a.createElement(E.a,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("div",{style:{textAlign:"center",flex:1}},r.a.createElement(C.a,{color:"primary",variant:"h5",style:{flex:1}},"$ ",Et(t)),r.a.createElement(C.a,{color:"primary"},"ESTE MES")),r.a.createElement("div",{style:{borderLeft:"1px solid black",textAlign:"center",flex:1}},r.a.createElement(C.a,{variant:"h5",style:{flex:1}},"$ ",Et(a)),r.a.createElement(C.a,null,"ESTE A\xd1O"))),r.a.createElement(C.a,{variant:"subtitle1",style:{marginTop:20,paddingLeft:15,textAlign:"left"}},"Te aconsejamos apartar lo siguiente:"),r.a.createElement(_.a,null,r.a.createElement(P.a,{dense:!0},r.a.createElement(L.a,{primary:"RESERVAS 5%"}),r.a.createElement($e.a,null,"$ ",n.toFixed(2))),r.a.createElement(P.a,{dense:!0},r.a.createElement(L.a,{primary:"PROMOCION 14%"}),r.a.createElement($e.a,null,"$ ",o.toFixed(2))))))}function Et(e){return e?e>1e3?+(e/1e3).toFixed(1)+" K":e>1e6?+(e/1e3).toFixed(1)+" M":+e.toFixed(2):0}var vt,bt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={options:{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1}},e}return Object(c.a)(a,[{key:"render",value:function(){for(var e=[],t=[],a=[],n=this.props.data.sort((function(e,t){return t.value-e.value})),o=0;o<n.length;o++){var i=n[o];e.push(i.label),t.push(i.value),a.push(i.color)}var l={labels:e,datasets:[{backgroundColor:a,data:t}]};return r.a.createElement(g.a,{className:"dashboard-card",style:{display:"flex",flexDirection:"column"}},r.a.createElement(ut.a,{style:{textAlign:"center"},title:this.props.title}),r.a.createElement(E.a,{style:{width:"100%",flex:1,padding:5}},r.a.createElement(pt.c,{options:this.state.options,data:l})))}}]),a}(r.a.PureComponent),yt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={options:{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,scaleBeginAtZero:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}},e}return Object(c.a)(a,[{key:"render",value:function(){for(var e=[],t=[],a=0;a<this.props.data.length;a++){var n=this.props.data[a];e.push(n.label),n.we?t.push(new Date(n.we).toLocaleDateString()):t.push(n.value)}var o={labels:e,datasets:[{backgroundColor:"#3f51b5",borderColor:"#3f51b5",data:t,fill:!1}]};return r.a.createElement(g.a,{className:"dashboard-card",style:{display:"flex",flexDirection:"column"}},r.a.createElement(ut.a,{style:{textAlign:"center"},title:this.props.title}),r.a.createElement(E.a,{style:{width:"100%",flex:1,padding:5}},r.a.createElement(pt.a,{options:this.state.options,data:o})))}}]),a}(r.a.PureComponent);!function(e){e[e.ASESOR=1]="ASESOR",e[e.GUIA=2]="GUIA",e[e.ADMINISTRADOR=3]="ADMINISTRADOR"}(vt||(vt={}));var Ct,Ot=(Ct=mt,function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:[],current_week:null,statName:null,reduceFn:null,loading:!1},n.handleBack=function(){if(!n.state.loading){n.setState({loading:!0});var e=n.state.current_week.id-1;w.Stats([n.state.statName,"current_week"],e).then(n.updateData).catch(n.showError)}},n.handleNext=function(){if(!n.state.loading){n.setState({loading:!0});var e=n.state.current_week.id+1;w.Stats([n.state.statName,"current_week"],e).then(n.updateData).catch(n.showError)}},n.updateData=function(e){var t=e.current_week,a=Object(ee.a)(e,["current_week"]);n.setState({data:a[n.state.statName]||[],current_week:t,loading:!1})},n.showError=function(e){n.setState({loading:!1}),alert(e.message)},n.state=Object(h.a)({},e),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.current_week,a=e.data,n=e.reduceFn,o=e.loading,i="";if(t){var l=new Date(t.start),c=new Date(t.end);i="".concat(l.getDate()," ").concat(Ie(l.getMonth())," - ")+"".concat(c.getDate()," ").concat(Ie(c.getMonth()))}return n&&(a=n(a)),r.a.createElement(Ct,Object.assign({},this.state,{data:a,subtitle:i,loading:o,onBackClick:this.handleBack,onNextClick:this.handleNext}))}}]),a}(r.a.Component)),At=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).unmounted=!1,n.state={loading:!0,error:null,week_ranking:[],group_graph:[],personal_graph:[],year_sales:[],product_resume:[],group_ranking:[],current_week:null},n.componentWillUnmount=function(){return n.unmounted=!0},n.productResumeReducer=function(e){return e.map((function(e){return e.username=e.label,e}))},e.onMounted(e.match.path),n}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=["week_ranking","personal_graph","year_sales","product_resume","current_week"];this.props.rol!==vt.ADMINISTRADOR&&t.push("group_graph"),this.props.rol===vt.ADMINISTRADOR&&t.push("group_ranking"),w.Stats(t).then((function(t){e.unmounted||e.setState(Object(h.a)(Object(h.a)({},t),{},{loading:null}))})).catch((function(t){e.unmounted||e.setState({error:t,loading:null})}))}},{key:"render",value:function(){for(var e=this.state,t=e.loading,a=e.error,n=e.week_ranking,o=e.personal_graph,i=e.group_graph,l=e.year_sales,c=e.product_resume,s=e.group_ranking,u=e.current_week,d=this.props,m=d.rol,h=d.grupo,p=d.username,f={month:0,year:0},g=new Date,E=m===vt.ADMINISTRADOR,v=0;v<l.length;v++){var b=l[v];b.createdAt=new Date(b.createdAt),b.createdAt.getMonth()===g.getMonth()&&b.createdAt.getFullYear()===g.getFullYear()&&(f.month+=b.profit),f.year+=b.profit}return t?r.a.createElement("div",{style:{width:"100%",paddingTop:100,textAlign:"center"}},r.a.createElement(te.a,{size:100}),r.a.createElement(C.a,{variant:"h6"},"CARGANDO...")):a?r.a.createElement("div",{style:{width:"100%",paddingTop:100,textAlign:"center"}},r.a.createElement(C.a,{variant:"h5"},"OCURRI\xd3 UN PROBLEMA"),r.a.createElement(C.a,{variant:"subtitle1"},a.message),r.a.createElement(C.a,{variant:"body1"},a.status," ",a.code)):r.a.createElement(ie.a,{container:!0,spacing:2,style:{margin:"auto",width:"calc(100% - 10px)",textAlign:"center"}},r.a.createElement(ie.a,{item:!0,xs:12},r.a.createElement(C.a,{color:"primary",variant:"h6"},"Hola ",p,", Esta es tu cuenta personal de Nat\xfa."),r.a.createElement(C.a,{variant:"subtitle1"},"Estamos aqu\xed para prosperar juntos. Estos son los indicadores de tu trabajo.")),s&&s.length?r.a.createElement(ie.a,{item:!0,sm:6,xs:12},r.a.createElement(Ot,{statName:"group_ranking",data:s,current_week:u,title:"RANKING DE GRUPOS",colType:"MONEY",secondColType:"MONEY",col1:"stat",col2:"ventas_lider"})):null,r.a.createElement(ie.a,{item:!0,sm:6,xs:12},r.a.createElement(ft,{data:o,title:"ESTADISTICA SEMANAL"})),i&&i.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{item:!0,sm:6,xs:12},r.a.createElement(yt,{data:i,title:h||"ESTADISTICA MENSUAL"})),r.a.createElement(ie.a,{item:!0,sm:6,xs:12},r.a.createElement(bt,{data:c,title:"PRODUCTOS VENDIDOS"})),r.a.createElement(ie.a,{item:!0,sm:6,xs:12},r.a.createElement(gt,{month:f.month,year:f.year}))):null,r.a.createElement(U.a,{smUp:!0},r.a.createElement(ie.a,{item:!0,xs:12},r.a.createElement(A.a,null))),E&&r.a.createElement(ie.a,{item:!0,sm:6,xs:12},r.a.createElement(Ot,{current_week:u,statName:"product_resume",reduceFn:this.productResumeReducer,data:c,title:"PRODUCTOS VENDIDOS",colType:"NUMBER",col1:"value"})),r.a.createElement(ie.a,{item:!0,sm:6,xs:12},r.a.createElement(Ot,{statName:"week_ranking",current_week:u,data:n,reduceFn:function(e){return E?e.filter((function(e){return e.rol===vt.ADMINISTRADOR})):n},title:"RANKING DE LA SEMANA",colType:"MONEY",secondColType:"DATE",col1:"stat",col2:"ultimoPedido"})),!E&&r.a.createElement(ie.a,{item:!0,sm:6,xs:12},r.a.createElement(Ot,{statName:"week_ranking",data:n,title:"PROGRESO DE LA SEMANA",colType:"PERFOMANCE",col1:"perfomance"})),m!==vt.ASESOR&&r.a.createElement(ie.a,{item:!0,sm:6,xs:12},r.a.createElement(mt,{data:n,title:"RANKING ACUMULATIVO",colType:"MONEY",col1:"monto_acumulativo"})))}}]),a}(r.a.Component),St=a(281),wt=a(282),Dt=a(283),kt=a(284),Tt=a(285),xt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:null,error:null,data:[]},e.handleClick=function(){if(!e.state.loading){var t=e.valueOf("desde"),a=e.valueOf("hasta"),n=e.valueOf("estado");if(!t||isNaN(+new Date(t)))return alert("Selecciona la fecha desde");if(!a||isNaN(+new Date(a)))return alert("Selecciona la fecha hasta");if(!n)return alert("Selecciona el estado");e.setState({loading:!0}),t=new Date(t).toJSON(),a=new Date(a).toJSON(),w.ProductSalesReport({desde:t,hasta:a,estado:n}).then((function(t){return e.setState({data:t,loading:null,error:null})})).catch((function(t){return e.setState({error:t,loading:null})}))}},e}return Object(c.a)(a,[{key:"valueOf",value:function(e){var t=document.getElementById(e);return t&&t.value}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.error,n=e.loading;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",null,r.a.createElement(v.a,{style:{marginLeft:10,marginRight:10},type:"datetime-local",inputProps:{id:"desde"}}),r.a.createElement(v.a,{style:{marginLeft:10,marginRight:10},type:"datetime-local",inputProps:{id:"hasta"}}),r.a.createElement(v.a,{style:{marginLeft:10,marginRight:10},select:!0,SelectProps:{native:!0},inputProps:{id:"estado"}},r.a.createElement("option",{value:1},"PENDIENTE"),r.a.createElement("option",{value:0},"APROBADO"),r.a.createElement("option",{value:2},"RECHAZADO"),r.a.createElement("option",{value:3},"ENTREGADO")),r.a.createElement(O.a,{disabled:n,style:{marginLeft:10,marginRight:10},variant:"outlined",onClick:this.handleClick},"GENERAR")),n?r.a.createElement("div",{style:{width:"100%",marginTop:100,textAlign:"center"}},r.a.createElement(te.a,{size:100}),r.a.createElement(C.a,{variant:"h6"},"CARGANDO...")):a?r.a.createElement("div",{style:{width:"100%",marginTop:100,textAlign:"center"}},r.a.createElement(C.a,{variant:"h4"},"OCURRI\xd3 UN ERROR"),r.a.createElement(C.a,{variant:"subtitle1"},a.message),r.a.createElement(C.a,{variant:"subtitle2"},a.code," ",a.status)):r.a.createElement("div",null,r.a.createElement(St.a,null,r.a.createElement(wt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(kt.a,{component:"th"},"Fecha"),r.a.createElement(kt.a,{component:"th"},"#"),r.a.createElement(kt.a,{component:"th"},"Usuario"),r.a.createElement(kt.a,{component:"th"},"Estado"),r.a.createElement(kt.a,{component:"th"},"Observacion"),r.a.createElement(kt.a,{component:"th"},"Fecha Env\xedo"),r.a.createElement(kt.a,{component:"th"},"Entregado"),r.a.createElement(kt.a,{component:"th"},"Motivo Anulacion"),r.a.createElement(kt.a,{component:"th"},"Producto"),r.a.createElement(kt.a,{component:"th"},"Cant"))),r.a.createElement(Tt.a,null,t.map((function(e){return r.a.createElement(Dt.a,{key:e.id},r.a.createElement(kt.a,null,new Date(e.createdAt).toLocaleDateString()),r.a.createElement(kt.a,null,e.idPedido),r.a.createElement(kt.a,null,e.username),r.a.createElement(kt.a,null,e.estado),r.a.createElement(kt.a,null,e.observacion),r.a.createElement(kt.a,null,e.fechaEntrega&&new Date(e.fechaEntrega).toLocaleDateString()),r.a.createElement(kt.a,null,e.fechaEntrega&&new Date(e.fechaEntrega).toLocaleDateString()),r.a.createElement(kt.a,null,e.motivoAnulacion),r.a.createElement(kt.a,null,e.descripcion),r.a.createElement(kt.a,null,e.cantidad))}))))))}}]),a}(r.a.Component),jt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={currentTab:0},n.handleChange=function(e,t){n.setState({currentTab:t})},e.onMounted(e.match.path),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.currentTab;return r.a.createElement(re.a,{style:{margin:10}},r.a.createElement(ae.a,{style:{marginBottom:10},value:e,onChange:this.handleChange},r.a.createElement(ne.a,{label:"Detalle de Productos"})),0===e&&r.a.createElement(xt,null))}}]),a}(r.a.Component),Rt=a(163),It=a.n(Rt),Nt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t,a){e.props.onClick(t[0])},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.columns,o=a.filter((function(t){return t.estado===e.props.estado})).sort((function(e,t){return e.changedAt-t.changedAt}));return r.a.createElement(It.a,{data:o,columns:n,options:{selectableRows:"none",onRowClick:this.handleClick}})}}]),a}(r.a.PureComponent),_t=[{name:"id",label:"#",options:{filter:!0,sort:!0}},{name:"fechaCreacion",label:"Fecha",options:{filter:!0,sort:!0}},{name:"username",label:"Usuario",options:{filter:!0,sort:!0}},{name:"razonSocial",label:"Cliente",options:{filter:!0,sort:!0}},{name:"total",label:"Total",options:{filter:!1,sort:!0}},{name:"numeroTransaccion",label:"# Comprobante",options:{filter:!1,sort:!0}}],Pt=[{name:"id",label:"#",options:{filter:!0,sort:!0}},{name:"fechaCreacion",label:"Fecha",options:{filter:!0,sort:!0}},{name:"username",label:"Usuario",options:{filter:!0,sort:!0}},{name:"razonSocial",label:"Cliente",options:{filter:!0,sort:!0}},{name:"total",label:"Total",options:{filter:!0}}],Mt=[{name:"id",label:"#",options:{filter:!0,sort:!0}},{name:"fechaCreacion",label:"Fecha",options:{filter:!0,sort:!0}},{name:"fechaEnvio",label:"Enviado",options:{filter:!0,sort:!0}},{name:"username",label:"Usuario",options:{filter:!0,sort:!0}},{name:"razonSocial",label:"Cliente",options:{filter:!0,sort:!0}},{name:"total",label:"Total",options:{filter:!0}}],Lt=[{name:"id",label:"#",options:{filter:!0,sort:!0}},{name:"fechaCreacion",label:"Fecha",options:{filter:!0,sort:!0}},{name:"fechaRecepcion",label:"Recepcion",options:{filter:!0,sort:!0}},{name:"username",label:"Usuario",options:{filter:!0,sort:!0}},{name:"razonSocial",label:"Cliente",options:{filter:!0,sort:!0}},{name:"total",label:"Total",options:{filter:!1,sort:!0}},{name:"bienRecibido",label:"Incompleto",options:{filter:!0,sort:!0}},{name:"observacionRecepcion",label:"Observaciones",options:{sort:!1,filter:!1}}],Ft=[{name:"id",label:"#",options:{filter:!0,sort:!0}},{name:"fechaCreacion",label:"Fecha",options:{filter:!0,sort:!0}},{name:"fechaRecepcion",label:"Recepcion",options:{filter:!0,sort:!0}},{name:"username",label:"Usuario",options:{filter:!0,sort:!0}},{name:"razonSocial",label:"Cliente",options:{filter:!0,sort:!0}},{name:"total",label:"Total",options:{filter:!1,sort:!0}},{name:"bienRecibido",label:"Incompleto",options:{filter:!0,sort:!0}},{name:"observacionRecepcion",label:"Observaciones",options:{sort:!1,filter:!1}},{name:"numeroFactura",label:"Factura",options:{filter:!1,sort:!0}}],Ut=[{name:"id",label:"#",options:{filter:!0,sort:!0}},{name:"fechaCreacion",label:"Fecha",options:{filter:!0,sort:!0}},{name:"fechaAnulacion",label:"Rechazado",options:{filter:!0,sort:!0}},{name:"username",label:"Usuario",options:{filter:!0,sort:!0}},{name:"razonSocial",label:"Cliente",options:{filter:!0,sort:!0}},{name:"total",label:"Total",options:{filter:!1,sort:!0}},{name:"motivoAnulacion",label:"Motivo",options:{filter:!1,sort:!1}}],Bt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={data:[],loading:!0,error:null,id:null},e.handleTab=function(t,a){e.props.history.push(e.props.match.path+a)},e.openOrder=function(t){e.props.history.push(e.props.match.path+e.currentTab()+"/"+t)},e.closeOrder=function(t){t&&e.loadData(),e.props.history.push(e.props.match.path+e.currentTab())},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.onMounted&&this.props.onMounted(this.props.match.path),this.loadData()}},{key:"loadData",value:function(){var e=this;w.GetOrders().then((function(t){var a=t.map((function(e){var t=new Date(e.fechaCreacion);return e.fechaCreacion=t.toLocaleDateString(),e.fechaEnvio=e.fechaEnvio&&new Date(e.fechaEnvio).toLocaleDateString(),e.fechaRecepcion=e.fechaRecepcion&&new Date(e.fechaRecepcion).toLocaleDateString(),e.fechaAnulacion=e.fechaAnulacion&&new Date(e.fechaAnulacion).toLocaleDateString(),e.fechaAnulacion&&console.info(e),e.total=e.total.toFixed(2),e.bienRecibido=e.bienRecibido?"":"SI",e.changedAt=e.changedAt?new Date(e.changedAt).valueOf():0,e.numeroTransaccion=e.imgTransaccion?"IMAGEN":e.numeroTransaccion,e}));e.setState({data:a,loading:null})})).catch((function(t){return e.setState({error:t})}))}},{key:"currentTab",value:function(){return"/"+(this.props.location.pathname.split("/")[2]||"inbox")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(G.a,{position:"relative",color:"primary"},r.a.createElement(ae.a,{onChange:this.handleTab,value:this.currentTab(),variant:"fullWidth"},r.a.createElement(ne.a,{label:"Entrada",value:"/inbox"}),r.a.createElement(ne.a,{label:"Aprobado",value:"/ok"}),r.a.createElement(ne.a,{label:"Enviado",value:"/sent"}),r.a.createElement(ne.a,{label:"Recibido",value:"/ack"}),r.a.createElement(ne.a,{label:"Facturado",value:"/invoice"}),r.a.createElement(ne.a,{label:"Rechazado",value:"/denied"}))),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:this.props.match.path+"/inbox",render:function(t){return r.a.createElement(Nt,{columns:_t,data:e.state.data,onClick:e.openOrder,estado:"PENDIENTE"})}}),r.a.createElement(d.b,{path:this.props.match.path+"/ok",render:function(t){return r.a.createElement(Nt,{columns:Pt,data:e.state.data,onClick:e.openOrder,estado:"APROBADO"})}}),r.a.createElement(d.b,{path:this.props.match.path+"/sent",render:function(t){return r.a.createElement(Nt,{columns:Mt,data:e.state.data,onClick:e.openOrder,estado:"ENVIADO"})}}),r.a.createElement(d.b,{path:this.props.match.path+"/ack",render:function(t){return r.a.createElement(Nt,{columns:Lt,data:e.state.data,onClick:e.openOrder,estado:"RECIBIDO"})}}),r.a.createElement(d.b,{path:this.props.match.path+"/invoice",render:function(t){return r.a.createElement(Nt,{columns:Ft,data:e.state.data,onClick:e.openOrder,estado:"FACTURADO"})}}),r.a.createElement(d.b,{path:this.props.match.path+"/denied",render:function(t){return r.a.createElement(Nt,{columns:Ut,data:e.state.data,onClick:e.openOrder,estado:"RECHAZADO"})}}),r.a.createElement(d.b,{path:this.props.match.path+"/",exact:!0},r.a.createElement(d.a,{to:this.props.match.path+"/inbox"}))),r.a.createElement(d.b,{path:this.props.match.path+"/:group/:id",render:function(t){return r.a.createElement(rt,{id:+t.match.params.id,onClose:e.closeOrder,editable:!0})}}))}}]),a}(r.a.Component),Gt=0,Vt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={inputValue:"",selectValue:"",showErrors:!1},n.INPUT_ID="CUSTOM_INPUT_ID_NO_",n.SELECT_ID="CUSTOM_SELECT_ID_NO_",n.handleDelete=function(e){var t=e.currentTarget.value,a=n.props.items[t];n.props.onRemove({name:n.props.name,item:a})},n.handleAdd=function(){var e=n.props,t=e.InputConfig,a=e.IdProp,r=e.dataSource,o=e.onAdd,i=e.name,l=n.state,c=l.inputValue,s=l.selectValue;if(t&&zt(c,t))return window.requestAnimationFrame((function(){try{document.getElementById(n.INPUT_ID).focus()}catch(e){}})),n.setState({showErrors:!0});if(!s)return window.requestAnimationFrame((function(){try{document.getElementById(n.SELECT_ID).focus()}catch(e){}})),n.setState({showErrors:!0});var u=r.find((function(e){return e[a].toString()===s.toString()}));o({name:i,item:Object(h.a)({},u),inputValue:c}),n.setState({selectValue:"",inputValue:"",showErrors:!1})},n.handleChange=function(e){var t=e.currentTarget,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n.INPUT_ID+=Gt,n.SELECT_ID+=Gt,Gt++,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.InputConfig,n=t.DisplayProp,o=t.IdProp,i=t.SecondaryDisplayProp,l=t.items,c=this.props.dataSource,s=this.state,u=s.inputValue,d=s.selectValue,m=s.showErrors,h=m&&a?zt(u,a):"",p=m?d?"":"Selecciona un item":"",f=this.props.items.map((function(e){return e[o]}));return c=c.filter((function(e){return f.indexOf(e[o])<0})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row",width:"calc(100% - 20px)",margin:"auto"}},r.a.createElement(v.a,{style:{flex:1,marginTop:8,marginBottom:8},inputProps:{id:this.SELECT_ID},SelectProps:{native:!0},error:!!p,helperText:p,select:!0,name:"selectValue",value:d,onChange:this.handleChange},r.a.createElement("option",{value:""}," - SELECCIONA UNA OPCI\xd3N - "),c.map((function(e){return r.a.createElement("option",{key:e[o],value:e[o]},e[n])}))),a&&r.a.createElement(v.a,{error:!!h,helperText:h,style:{margin:10},margin:"dense",type:a.type||"text",value:u,name:"inputValue",onChange:this.handleChange,placeholder:a.label||"",inputProps:{id:this.INPUT_ID}}),r.a.createElement("div",null,r.a.createElement(y.a,{onClick:this.handleAdd},r.a.createElement(de.a,null)))),l&&l.length?r.a.createElement(_.a,null,l.map((function(t,a){return r.a.createElement(P.a,{key:t[o],dense:!0},i&&r.a.createElement(M.a,null,t[i]),r.a.createElement(L.a,null,t[n]),r.a.createElement($e.a,null,r.a.createElement(y.a,{value:a,name:"delete",onClick:e.handleDelete},r.a.createElement(Qe.a,null))))}))):null)}}]),a}(r.a.PureComponent);function zt(e,t){var a=(e||"").trim();return a?"number"===t.type&&isNaN(+a)?"Digite un n\xfamero":void 0:"Digite un valor"}var Wt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleChange=function(t){var a=t.currentTarget,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.handleChecked=function(t){var a=t.currentTarget,n=a.name,r=a.checked;e.setState(Object(p.a)({},n,r))},e.handleDelete=function(){e.state.id&&(window.confirm("Deseas continuar con esta acci\xf3n?")&&(e.setState({loading:"ELIMINAR"}),w.DeleteProduct(e.state.id).then(e._updated).catch(e._failed)))},e.handleSave=function(){var t=e._validar(e.state);if(t){var a=Object.keys(t)[0];window.requestAnimationFrame((function(){try{document.getElementById(a).focus()}catch(e){}}))}else{if(e.setState({loading:"GUARDAR"}),e.state.rawFile){var n=e.state,r=(n.rawFile,Object(ee.a)(n,["rawFile"]));return Ke(e.state.rawFile).then((function(e){return w.SaveProduct(Object(h.a)({imageFile:e},r))})).then(e._updated).catch(e._failed)}w.SaveProduct(e.state).then(e._updated).catch(e._failed)}},e._updated=function(){e.setState({loading:null,error:null}),e.props.onDone(!0)},e._failed=function(t){e.setState({loading:null,error:t}),window.requestAnimationFrame((function(){try{document.getElementById("ERROR_MESSAGE").focus()}catch(e){}}))},e.handleClose=function(){e.state.loading||e.props.onDone()},e.handleFile=function(t){Je(t).then((function(a){return e.setState({imgSrc:a,rawFile:t})})).catch(e._failed)},e.handleAdd=function(t){var a=t.name,n=t.item,r=t.inputValue;e.setState((function(e){var t=Object(h.a)({},e);return"OPCIONES"===a?(t.opciones=t.opciones?Object(X.a)(t.opciones):[],t.opciones.push({idOpcion:+n.id}),t):"COMPONENTES"===a?(t.componentes=t.componentes?Object(X.a)(t.componentes):[],t.componentes.push({idComponente:+n.id,cantidad:+(r||1)}),t):void 0}))},e.handleRemove=function(t){var a=t.name,n=t.index;e.setState((function(e){var t=Object(h.a)({},e);return"OPCIONES"===a&&(t.opciones=Object(X.a)(t.opciones),t.opciones.splice(n,1)),"COMPONENTES"===a&&(t.componentes=Object(X.a)(t.componentes),t.componentes.splice(n,1)),t}))},e}return Object(c.a)(a,[{key:"_validar",value:function(e){var t={};if((e.nombre||"").trim()||(t.nombre="Digita el nombre"),(e.pvp_final||"").toString().trim()?isNaN(+e.pvp_final)&&(t.pvp_final="Precio final debe ser un n\xfamero"):t.pvp_final="Digita el Precio Final",e.opciones&&e.opciones.length&&!e.maxItems&&(t.maxItems="Digita la cantidad m\xe1xima a escoger"),Object.keys(t).length)return t}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props.showingID,n=e.showingID;!!(null===a||void 0===a)&&!(null===n||void 0===n)&&this.setState((function(e){var a=t.props.productList.find((function(e){return e.id===+n}))||{},r=a.habilitado,o=Object(ee.a)(a,["habilitado"]),i=Object.keys(t.state);return void 0!==r&&null!==r||(r=!0),Object(h.a)(Object(h.a)(Object(h.a)({},i.reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),{},Object(p.a)({},t,void 0))}),{})),o),{},{habilitado:r})}))}},{key:"shouldComponentUpdate",value:function(e){var t=!(null===this.props.showingID||void 0===this.props.showingID);return t!==!(null===e.showingID||void 0===e.showingID)||!1!==t}},{key:"render",value:function(){var e=this,t=this.state.loading,a=this.props.showingID,n=this._validar(this.state)||{},o=!(null===a||void 0===a),i=(this.state.opciones||[]).map((function(t){return{id:t.idOpcion,nombre:(e.props.productList.find((function(e){return e.id===t.idOpcion}))||{}).nombre}})),l=(this.state.componentes||[]).map((function(t){return{id:t.idComponente,nombre:(e.props.productList.find((function(e){return e.id===t.idComponente}))||{}).nombre,cantidad:t.cantidad}})),c=this.props.productList.filter((function(e){return!e.combo&&e.id!==+a})),s=r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{label:"Habilitado",style:{flexGrow:1},control:r.a.createElement(Ue.a,{checked:!!this.state.habilitado,name:"habilitado",onChange:this.handleChecked})}),"NUEVO"!==a&&r.a.createElement(O.a,{disabled:!!t,onClick:this.handleDelete,color:"secondary",variant:"outlined"},"ELIMINAR"===t?"ELIMINANDO...":"ELIMINAR"),r.a.createElement(O.a,{disabled:!!t,onClick:this.handleSave,color:"primary",variant:"outlined"},"GUARDAR"===t?"GUARDANDO...":"GUARDAR"),r.a.createElement(O.a,{color:"inherit",disabled:!!t,onClick:this.handleClose},"SALIR"));return r.a.createElement(we,{title:"Edita el Producto",onClose:this.handleClose,show:o,footer:s},r.a.createElement(Me,{value:this.state.nombre||"",onChange:this.handleChange,name:"nombre",required:!0,label:"Nombre",maxLength:100,error:n.nombre}),r.a.createElement(Ge,{className:"card-product-img",onChange:this.handleFile,src:this.state.imgSrc,title:this.state.nombre}),r.a.createElement("div",{style:{textAlign:"center",marginBottom:10}},r.a.createElement(C.a,{variant:"caption"},"El peso recomendado para la imagen es entre 100 y 200 Kbs.")),r.a.createElement("div",{style:{marginLeft:"auto",marginRight:"auto",textAlign:"center"}},r.a.createElement(Me,{type:"phone",value:this.state.pvp_final||"",onChange:this.handleChange,name:"pvp_final",required:!0,label:"Precio Final",maxLength:10,error:n.pvp_final,style:{marginRight:10}}),r.a.createElement(Me,{type:"phone",value:this.state.cantidad_desde||"",onChange:this.handleChange,name:"cantidad_desde",label:"Cantidad m\xednima",maxLength:2,error:n.cantidad_desde,style:{}})),r.a.createElement("div",{style:{marginTop:20,textAlign:"center",marginLeft:"auto",marginRight:"auto"}},r.a.createElement(Fe.a,{label:"El producto es un combo",control:r.a.createElement(Ue.a,{checked:!!this.state.combo,name:"combo",onChange:this.handleChecked})})),this.state.combo&&r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{style:{marginTop:20},variant:"h6"},"COMPONENTES"),r.a.createElement(Vt,{dataSource:c,items:l,onAdd:this.handleAdd,onRemove:this.handleRemove,IdProp:"id",DisplayProp:"nombre",SecondaryDisplayProp:"cantidad",InputConfig:{type:"number",label:"Cantidad"},name:"COMPONENTES"}),r.a.createElement(C.a,{style:{marginTop:20},variant:"h6"},"OPCIONES"),r.a.createElement(Vt,{dataSource:c,items:i,onAdd:this.handleAdd,onRemove:this.handleRemove,IdProp:"id",DisplayProp:"nombre",name:"OPCIONES"}),r.a.createElement(Me,{type:"phone",value:this.state.maxItems||"",onChange:this.handleChange,name:"maxItems",label:"M\xe1ximo",maxLength:2,error:n.maxItems,style:{}}),r.a.createElement(C.a,{variant:"body2",color:"secondary",id:"ERROR_MESSAGE",tabIndex:0,style:{marginTop:10}},this.state.error&&this.state.error.message)))}}]),a}(r.a.Component),qt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={data:[],loading:!0,error:null},e._Update=function(){w.GetProducts(!0).then((function(t){return e.setState({data:t,loading:!1})})).catch((function(t){return e.setState({loading:!1,error:t})}))},e.handleClick=function(t){e.props.history.push(e.props.match.path+"/"+t.currentTarget.value)},e.handleDone=function(t){t&&e._Update(),e.props.history.push(e.props.match.path)},e.handleAction=function(t){var a=t.currentTarget,n=a.name,r=a.value,o=e.productSorted(),i=o.find((function(e){return e.id===+r}));i&&("LEFT"===n&&0===o.indexOf(i)||"RIGHT"===n&&o.length===o.indexOf(i)+1||w.SendProductAction(r,n).then(e._Update).catch((function(t){return e.setState({error:t})})))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.onMounted&&this.props.onMounted(this.props.match.path),this._Update()}},{key:"productSorted",value:function(){return this.state.data.sort((function(e,t){return e.orden-t.orden}))}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("div",{style:{width:"100%",textAlign:"center",paddingTop:100}},r.a.createElement(te.a,{size:100}),r.a.createElement(C.a,{variant:"h6"},"CARGANDO...")):r.a.createElement("div",{style:{width:"calc(100% - 25px)",margin:"auto",marginTop:10}},r.a.createElement(ve,{items:this.productSorted(),showNewItem:!0,visible:!0,controls:"LEFT-RIGHT",onActionClick:this.handleAction,onCardClick:this.handleClick}),r.a.createElement(d.b,{path:this.props.match.path+"/:id",children:function(t){var a=t.match;return r.a.createElement(Wt,{productList:e.state.data,showingID:a&&a.params.id,onDone:e.handleDone})}}))}}]),a}(r.a.Component),Ht=a(164),Yt=[{name:"id",label:"ID"},{name:"grupo",label:"Grupo"},{name:"nombre",label:"Nombre"},{name:"username",label:"Usuario"},{name:"Rol",label:"Rol"},{name:"ultimoPedido",options:{display:""}},{name:"UltimoPedido",label:"Ultimo Pedido"},{name:"Estado",label:"Estado"}],Jt=a(288),Kt=a(432),Zt=function(e){var t=e.loading,a=e.id,n=e.error,o=e.grupos,i=e.onSubmit,l=e.onChange,c=e.formType,s=Object(ee.a)(e,["loading","id","error","grupos","onSubmit","onChange","formType"]);return r.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),i()}},r.a.createElement(C.a,{variant:"h6"},"Informaci\xf3n Personal"),r.a.createElement($t,{disabled:t,error:n&&n.nombre,onChange:l,value:s.nombre||"",name:"nombre",label:"Nombres Completos"}),r.a.createElement($t,{disabled:t,error:n&&n.identificacion,onChange:l,value:s.identificacion||"",name:"identificacion",label:"Identificacion (CI o Pasaporte)",type:"phone"}),r.a.createElement($t,{disabled:t,error:n&&n.telefono,onChange:l,value:s.telefono||"",name:"telefono",label:"Telefono",type:"phone"}),r.a.createElement($t,{disabled:t,error:n&&n.email,onChange:l,value:s.email||"",name:"email",label:"Correo Electronico",type:"email"}),r.a.createElement($t,{disabled:t,error:n&&n.nacionalidad,onChange:l,value:s.nacionalidad||"",name:"nacionalidad",label:"Nacionalidad"}),r.a.createElement($t,{disabled:t,error:n&&n.fechaNacimiento,onChange:l,value:s.fechaNacimiento||"",name:"fechaNacimiento",label:"Fecha Nacimiento",type:"date"}),r.a.createElement(C.a,{variant:"h6",style:{marginTop:30}},"SIGN-IN"===c?"Agrega tu direcci\xf3n":"Direcci\xf3n"),r.a.createElement($t,{disabled:t,error:n&&n.ciudad,onChange:l,value:s.ciudad||"",name:"ciudad",label:"Ciudad"}),r.a.createElement($t,{disabled:t,error:n&&n.direccion,onChange:l,value:s.direccion||"",name:"direccion",label:"Direccion"}),r.a.createElement(C.a,{variant:"h6",style:{marginTop:30}},"SIGN-IN"===c?"Crea tu Usuario":"Usuario"),r.a.createElement($t,{disabled:t,error:n&&n.username,onChange:l,value:s.username||"",name:"username",label:"Usuario"}),r.a.createElement(Qt,{disabled:t,error:n&&n.password,onChange:l,value:s.password||"",name:"password",label:"Contrase\xf1a"}),r.a.createElement(Qt,{disabled:t,error:n&&n.confirm_password,onChange:l,value:s.confirm_password||"",name:"confirm_password",label:"Confirma tu contrase\xf1a"}),r.a.createElement(C.a,{variant:"h6",style:{marginTop:30}},"SIGN-IN"===c?"A qu\xe9 grupo quieres pertenecer?":"Configuraci\xf3n del Usuario"),"EDIT"===c&&a?r.a.createElement("div",{style:{marginTop:10,marginBottom:10}},r.a.createElement(C.a,{style:{display:"inline"}},"Rol: "),r.a.createElement(C.a,{style:{display:"inline"},variant:"button"},Xt(s.rol))):"EDIT"===c&&r.a.createElement($t,{select:!0,disabled:t,value:s.rol||"",name:"rol",label:"Rol",SelectProps:{native:!0},onChange:l},r.a.createElement("option",{value:"1"},Xt(1)),r.a.createElement("option",{value:"2"},Xt(2)),r.a.createElement("option",{value:"3"},Xt(3))),(1===+s.rol||void 0===s.rol||null===s.rol)&&r.a.createElement($t,{select:!0,disabled:t,error:n&&n.grupo,onChange:l,value:s.grupo||"",name:"grupo",label:"",SelectProps:{native:!0}},r.a.createElement("option",{value:""},"- SELECCIONA UN GRUPO -"),o.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.id," - ",e.nombre)}))),2===+s.rol&&r.a.createElement($t,{name:"grupo",label:"Grupo",value:s.grupo||"",onChange:l,error:n&&n.grupo,diabled:t,inputProps:{maxLength:50}}),"EDIT"===c&&r.a.createElement($t,{select:!0,disabled:t,value:void 0===s.estado||null===s.estado?"":s.estado.toString(),name:"estado",label:"Estado",SelectProps:{native:!0},onChange:l},r.a.createElement("option",{value:"1"},"PENDIENTE"),r.a.createElement("option",{value:"0"},"APROBADO (Habilitado)"),r.a.createElement("option",{value:"2"},"RECHAZADO (Deshabilitado)")),"EDIT"===c&&3===+s.rol&&r.a.createElement(Fe.a,{label:"Puede modificar precios durante toma de pedido",control:r.a.createElement(Ue.a,{checked:Boolean(s.editarPVPsdurantePedido),name:"editarPVPsdurantePedido",onChange:l})}),"EDIT"===c&&r.a.createElement("div",{style:{margin:"auto",textAlign:"center",paddingTop:20,paddingBottom:20}},r.a.createElement(Fe.a,{control:r.a.createElement("input",{type:"checkbox",onChange:l,name:"mustAcceptTermsAndConds",checked:s.mustAcceptTermsAndConds||!1}),label:"Mostrar Aceptar Terminos y Condiciones al iniciar"}),s.termsAndCondsAcceptedAt&&r.a.createElement("div",{style:{marginTop:10}},r.a.createElement(C.a,{variant:"button"},"Este usuario ha aceptado los T\xe9rminos y Condiciones el:",new Date(s.termsAndCondsAcceptedAt).toLocaleString()))),n&&n.guardar?r.a.createElement(C.a,{tabIndex:0,id:"guardar",color:"secondary"},n.guardar):null,"SIGN-IN"===c&&r.a.createElement(O.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,style:{marginTop:20}},t?r.a.createElement(te.a,{size:20,color:"inherit"}):"ENVIAR"))};function $t(e){var t=e.error,a=e.type,n=e.label,o=Object(ee.a)(e,["error","type","label"]),i={type:a,inputProps:{id:e.name}};return t&&(i.error=!0,i.helperText=t),"date"===a?r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",marginBottom:5,marginTop:15}},r.a.createElement(Kt.a,{style:{paddingTop:8,marginRight:5}},n),r.a.createElement(v.a,Object.assign({required:!0},i,{style:{flex:1}},o),e.children," ")):(i.label=n,r.a.createElement(v.a,Object.assign({fullWidth:!0,required:!0},i,{style:{marginTop:5,marginBottom:5}},o)))}function Qt(e){var t=e.error,a=Object(ee.a)(e,["error"]),n=r.a.useState(!1),o=Object(Ht.a)(n,2),i=o[0],l=o[1],c={inputProps:{id:e.name}};return t&&(c.error=!0,c.helperText=t),r.a.createElement(v.a,Object.assign({type:i?"text":"password"},a,c,{fullWidth:!0,required:!0,style:{marginTop:5,marginBottom:5},InputProps:{endAdornment:r.a.createElement(b.a,{position:"end"},r.a.createElement(y.a,{onClick:function(e){return l(!i)}},i?r.a.createElement(k.a,null):r.a.createElement(D.a,null)))}}))}function Xt(e){return 1===+e?"ASESOR/A":2===+e?"GU\xcdA":3===+e?"ADMINISTRADOR/A":""}function ea(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.nombre,n=e.telefono,r=e.identificacion,o=e.email,i=e.fechaNacimiento,l=e.nacionalidad,c=e.ciudad,s=e.direccion,u=e.username,d=e.password,m=e.grupo,h=e.confirm_password,p=e.rol,f={};if(aa(a)&&(f.nombre="Digita tu nombre"),aa(n)?f.telefono="Digita tu telefono":(isNaN(parseInt(n))&&(f.telefono="El telefono solo puede contener numeros"),n.length<=5&&(f.telefono="El telefono debe tener m\xednimo 6 digitos")),aa(r)&&(f.identificacion="Digita tu identificacion"),aa(o)?f.email="Digita tu email":(-1===o.indexOf("@")&&(f.email="El correo es incorrecto"),-1===o.indexOf(".")&&(f.email="El correo es incorrecto")),aa(i)?f.fechaNacimiento="Digita tu fecha de nacimiento":isNaN(+new Date(i))&&(f.fechaNacimiento="La fecha no es v\xe1lida"),aa(l)&&(f.nacionalidad="Digita tu nacionalidad"),aa(c)&&(f.ciudad="Digita tu ciudad"),aa(s)&&(f.direccion="Digita tu direccion"),aa(u)&&(f.username="Digita tu Usuario"),aa(d)?t.passwordOpcional||(f.password="Digita la contrase\xf1a"):(d.length<5&&(f.password="La contrase\xf1a debe tener m\xe1s de 6 caracteres"),d.trim()!==(h||"").trim()&&(f.confirm_password="Las contrase\xf1as no concuerdan entre si")),aa(m)&&(2===+p&&(f.grupo="Digita el nombre de tu grupo"),1!==+p&&void 0!==p||(f.grupo="Selecciona tu grupo")),Object.keys(f).length){var g=Object.keys(f)[0];return ta(g),f}return null}function ta(e){window.requestAnimationFrame((function(){try{document.getElementById(e).focus()}catch(t){}}))}function aa(e){return!(e&&e.length)}var na=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleClose=function(){e.state.loading||e.props.onClose()},e.handleChange=function(t){var a=t.currentTarget,n=a.name,r=a.value,o=a.type,i=a.checked;r="checkbox"===o?i:r,e.setState(Object(p.a)({},n,r))},e.handleSubmit=function(){var t=e.state,a=t.loading,n=(t.error,t.validarPassword),r=Object(ee.a)(t,["loading","error","validarPassword"]);if(!a){var o=ea(r,{passwordOpcional:!n});if(o)return e.setState({error:o});e.setState({loading:!0}),w.SaveUser(r).then((function(t){return e.props.onClose(!0)})).catch((function(t){return e.setState({error:t,loading:!1},(function(){return Object.keys(t).forEach(ta)}))}))}},e.handleDelete=function(t){e.state.id&&(e.state.loading||window.confirm("Deseas eliminar este usuario?")&&(e.setState({loading:!0}),w.DeleteUser(e.state.id).then((function(t){return e.props.onClose(!0)})).catch((function(t){return e.setState({error:{guardar:t.message},loading:!1},(function(){return window.requestAnimationFrame((function(){return document.getElementById("guardar").focus()}))}))}))))},e}return Object(c.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.show,a=e.show;!t&&a&&this.setState((function(t){var a=Object.keys(t),n=Object(h.a)(Object(h.a)({},a.reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),{},Object(p.a)({},t,void 0))}),{})),e.initialData||{});return void 0===n.estado&&(n.estado=1),void 0===n.rol&&(n.rol=1),n.validarPassword=!n.id,n}))}},{key:"shouldComponentUpdate",value:function(e){var t=this.props.show;return t!==e.show||!1!==t}},{key:"render",value:function(){var e=this.props.grupos,t=this.state,a=t.loading,n=t.error,o=Object(ee.a)(t,["loading","error"]),i=r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{disabled:a,variant:"outlined",onClick:this.handleDelete,color:"secondary"},"ELIMINAR"),r.a.createElement(O.a,{disabled:a,variant:"outlined",onClick:this.handleSubmit,color:"primary"},"GUARDAR"),r.a.createElement(O.a,{disabled:a,onClick:this.handleClose,color:"primary"},"SALIR"));return r.a.createElement(we,{show:this.props.show,title:"Usuario",footer:i,onClose:this.handleClose},r.a.createElement(Zt,Object.assign({formType:"EDIT",grupos:e},o,{loading:a,error:n,onSubmit:this.handleSubmit,onChange:this.handleChange})))}}]),a}(r.a.Component),ra=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).unmounted=!1,e.state={data:[],grupos:[],loading:!0,error:null},e.FetchData=function(){e.setState({loading:!0}),Promise.all([w.GetUsers(),w.GetGroups()]).then((function(t){var a=Object(Ht.a)(t,2),n=a[0],r=a[1];e.unmounted||e.setState({grupos:r,data:(n||[]).map((function(e){return e.ultimoPedido&&(e.UltimoPedido=new Date(e.ultimoPedido).toLocaleDateString()),e})),loading:!1})})).catch((function(t){e.setState({loading:!1}),e.unmounted||e.reportError(t.message)}))},e.handleNew=function(){e.props.history.push(e.props.match.path+"/view/NUEVO")},e.handleClose=function(t){t&&e.FetchData(),e.props.history.push(e.props.match.path)},e.handleClick=function(t){var a=t[0];e.props.history.push(e.props.match.path+"/view/"+a)},e.handleTermsAndConds=function(){window.confirm("Esta seguro de Mostrar en TODOS los usuarios ACEPTAR TERMINOS Y CONDICIONES al entrar")&&w.SendUserAction("ACCEPT_TERMS_AND_CONDS","all").then(e.FetchData).catch((function(t){return e.reportError(t.message)}))},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){this.props.onMounted&&this.props.onMounted(this.props.match.path),this.FetchData()}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"reportError",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!this.unmounted){var n=new URLSearchParams({a:t||"Ocurri\xf3 un problema",b:e,focusafter:a});this.props.history.push(this.props.match.path+"/msg?"+n.toString())}}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.loading,o=t.grupos;return n?r.a.createElement("div",{style:{paddingTop:10,textAlign:"center"}},r.a.createElement(C.a,{variant:"h6"},"CARGANDO..."),r.a.createElement(te.a,{size:50,color:"primary"})):r.a.createElement("div",null,r.a.createElement(It.a,{data:a,columns:Yt,options:{selectableRows:"none",onRowClick:this.handleClick,customToolbar:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt.a,{title:"Agregar Usuario"},r.a.createElement(y.a,{color:"primary",onClick:e.handleNew},r.a.createElement(de.a,null))),r.a.createElement("div",{style:{width:100,minWidth:100}}),r.a.createElement(Jt.a,{title:"Mostrar en TODOS los usuarios ACEPTAR TERMINOS Y CONDICIONES al entrar"},r.a.createElement(y.a,{color:"secondary",onClick:e.handleTermsAndConds},r.a.createElement(H.a,null))))},customSort:function(e,t,a){var n=Yt[t];return e.sort((function(e,r){var o=e.data[t],i=r.data[t];return"UltimoPedido"===n.name?(o=e.data[t-1]&&new Date(e.data[t-1]).valueOf()||0,i=r.data[t-1]&&new Date(r.data[t-1]).valueOf()||0):("string"===typeof o&&(o=o.toLowerCase().trim()),"string"===typeof i&&(i=i.toLowerCase().trim())),"desc"===a?o>i?-1:i>o?1:0:o<i?-1:i<o?1:0}))}}}),r.a.createElement(d.b,{path:this.props.match.path+"/msg",component:qe}),r.a.createElement(d.b,{path:this.props.match.path+"/view/:id",children:function(t){var n=t.match;return r.a.createElement(na,{show:!(!n||!n.params.id),grupos:o,initialData:n&&a.find((function(e){return e.id===+n.params.id})),onClose:e.handleClose})}}))}}]),a}(r.a.Component),oa=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentWillMount",value:function(){this.props.onMounted&&this.props.onMounted(this.props.path)}},{key:"render",value:function(){return r.a.createElement("div",{id:"Iframe-Liason-Sheet",className:"iframe-border center-block-horiz "+(this.props.className||"")},r.a.createElement("div",{className:"responsive-wrapper responsive-wrapper-wxh-760x1200"},r.a.createElement("iframe",{title:"Politicas de Nat\xfa",src:this.props.TextSrc},"Cargando...")))}}]),a}(r.a.PureComponent),ia=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={checked:!1,loading:!1},n.handleCheck=n.handleCheck.bind(Object(f.a)(n)),n.handleClick=n.handleClick.bind(Object(f.a)(n)),n}return Object(c.a)(a,[{key:"handleCheck",value:function(e){var t=e.currentTarget.checked;this.setState({checked:t})}},{key:"handleClick",value:function(e){var t=this;this.state.loading||this.state.checked&&(this.setState({loading:!0}),w.SendUserAction("ACCEPT_TERMS_AND_CONDS").then(this.props.onDone).catch((function(e){alert(e.message),t.setState({loading:!1})})))}},{key:"render",value:function(){var e=this.state,t=e.checked,a=e.loading;return r.a.createElement("div",{className:"full-height",style:{display:"flex",flexDirection:"column"}},r.a.createElement(oa,{className:"iframe-wrapper-with-max-height",TextSrc:"https://docs.google.com/document/d/e/2PACX-1vQM7gflRmudx9mnIJpfZMu5gM3WUl3u_h8RRuyVbb6yErxWTnU_jeu8kcKUJhht3VadenapB4nINf7h/pub?embedded=true"}),r.a.createElement("div",{style:{margin:"auto",textAlign:"center",paddingTop:10,paddingBottom:10,width:"100%"}},r.a.createElement(Fe.a,{control:r.a.createElement("input",{disabled:a,checked:t,type:"checkbox",onChange:this.handleCheck}),label:"Acepto los t\xe9rminos y condiciones"}),r.a.createElement(O.a,{disabled:a||!t,color:"primary",variant:"contained",onClick:this.handleClick},"CONTINUAR")))}}]),a}(r.a.Component),la=[{label:"Inicio",Icon:z.a,path:"/feed"},{label:"Nuevo Pedido",Icon:W.a,path:"/order"},{label:"Pedidos",Icon:q.a,path:"/my-orders",roles:[1,2]},{label:"Pedidos",Icon:q.a,path:"/queue",roles:[3]},{label:"Politicas",Icon:H.a,path:"/policy"},{label:"Cat\xe1logo",Icon:Y.a,path:"/products",roles:[3]},{label:"Usuarios",Icon:J.a,path:"/users",roles:[3]},{label:"Reportes",Icon:K.a,path:"/reports",roles:[3]}],ca=Object(N.a)((function(e){return{drawer:Object(p.a)({},e.breakpoints.up("sm"),{width:200,flexShrink:0}),toolbar:e.mixins.toolbar,drawerPaper:{width:200},content:Object(p.a)({flexGrow:1},e.breakpoints.up("sm"),{marginLeft:200}),appBar:{display:"block"}}}))(function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={selected:"",editarPVPsdurantePedido:!1,isMenuOpen:!1,username:"",grupo:"",token:"",rol:0,accesos:[],descuentos:[],mustAcceptTermsAndConds:!1},n.onMounted=n.onMounted.bind(Object(f.a)(n)),n.handleMenu=n.handleMenu.bind(Object(f.a)(n)),n.closeMenu=n.closeMenu.bind(Object(f.a)(n)),n.TermsAndCondsAccepted=n.TermsAndCondsAccepted.bind(Object(f.a)(n)),n.state.username=e.username,n.state.grupo=e.grupo,n.state.rol=e.rol,n.state.descuentos=e.descuentos||[],n.state.editarPVPsdurantePedido=e.editarPVPsdurantePedido,n.state.mustAcceptTermsAndConds=e.mustAcceptTermsAndConds,n.state.accesos=[].concat(la),n.state.accesos=la.filter((function(e){return!e.roles||e.roles.indexOf(n.state.rol)>=0})),n}return Object(c.a)(a,[{key:"onMounted",value:function(e){this.setState({selected:e})}},{key:"handleMenu",value:function(){this.setState((function(e){var t=Object(h.a)({},e);return t.isMenuOpen=!t.isMenuOpen,t}))}},{key:"TermsAndCondsAccepted",value:function(){this.setState({mustAcceptTermsAndConds:!1})}},{key:"closeMenu",value:function(){this.setState({isMenuOpen:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selected,n=t.isMenuOpen,o=t.username,i=t.grupo,l=t.mustAcceptTermsAndConds,c=this.props,s=c.window,u=c.classes,m=void 0!==s?function(){return s().document.body}:void 0;if(l)return r.a.createElement(ia,{onDone:this.TermsAndCondsAccepted});var h=r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",{style:{textAlign:"center",marginTop:10,marginBottom:10}},r.a.createElement(C.a,{style:{display:"block"},variant:"button"},o),r.a.createElement(C.a,{style:{display:"block"},variant:"caption"},i)),r.a.createElement(_.a,{style:{flex:1}},this.state.accesos.map((function(t){return r.a.createElement(P.a,{onClick:e.closeMenu,selected:a===t.path,component:T.b,to:t.path,button:!0,key:t.label},r.a.createElement(M.a,null,r.a.createElement(t.Icon,null)),r.a.createElement(L.a,{style:{flex:1},primary:t.label}))}))),r.a.createElement(P.a,{component:"a",target:"_a",href:"https://wa.me/"},r.a.createElement(M.a,null," ",r.a.createElement(Z.a,null)," "),r.a.createElement(L.a,{primary:"AYUDA"})));return r.a.createElement(T.a,{basename:"/app"},r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"}},r.a.createElement(F.a,null),r.a.createElement("nav",{className:u.drawer},r.a.createElement(U.a,{smUp:!0,implementation:"css"},r.a.createElement(B.a,{container:m,variant:"temporary",anchor:"left",open:n,onClose:this.closeMenu,classes:{paper:u.drawerPaper},ModalProps:{keepMounted:!0}},r.a.createElement("div",{className:u.toolbar,style:{textAlign:"right"}},r.a.createElement(y.a,{onClick:this.handleMenu},r.a.createElement($.a,null))),h)),r.a.createElement(U.a,{xsDown:!0,implementation:"css"},r.a.createElement(B.a,{classes:{paper:u.drawerPaper},variant:"permanent",open:!0},h))),r.a.createElement(U.a,{smUp:!0,implementation:"css"},r.a.createElement(G.a,{position:"fixed",className:u.x},r.a.createElement(V.a,null,r.a.createElement(y.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:this.handleMenu},r.a.createElement(Q.a,null)),r.a.createElement(C.a,{style:{flexGrow:1}},(la.find((function(e){return e.path===a}))||{}).label)))),r.a.createElement("main",{className:u.content},r.a.createElement(U.a,{smUp:!0,implementation:"css"},r.a.createElement("div",{className:u.toolbar})),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/feed",render:function(t){return r.a.createElement(At,Object.assign({},t,{onMounted:e.onMounted,grupo:e.state.grupo,username:e.state.username,rol:e.state.rol}))}}),r.a.createElement(d.b,{path:"/order",render:function(t){return r.a.createElement(et,{onMounted:e.onMounted,rol:e.state.rol,descuentos:e.state.descuentos,editablePrices:e.state.editarPVPsdurantePedido})}}),r.a.createElement(d.b,{path:"/my-orders",render:function(t){return r.a.createElement(ct,Object.assign({},t,{rol:e.state.rol,onMounted:e.onMounted}))}}),r.a.createElement(d.b,{path:"/queue",render:function(t){return r.a.createElement(Bt,Object.assign({},t,{onMounted:e.onMounted}))}}),r.a.createElement(d.b,{path:"/policy",render:function(t){return r.a.createElement(oa,{onMounted:e.onMounted,path:t.match&&t.match.path,TextSrc:"https://docs.google.com/document/d/e/2PACX-1vSC-0iC8dbpYgrNhlDyRWAQdwdFM4esg40JLZQS-zg6Koix_w1B86KoGI3YPpq-TdNjoJV0eenbcRKv/pub?embedded=true"})}}),r.a.createElement(d.b,{path:"/users",render:function(t){return r.a.createElement(ra,Object.assign({},t,{onMounted:e.onMounted}))}}),r.a.createElement(d.b,{path:"/products",render:function(t){return r.a.createElement(qt,Object.assign({},t,{onMounted:e.onMounted}))}}),r.a.createElement(d.b,{path:"/reports",render:function(t){return r.a.createElement(jt,Object.assign({},t,{rol:e.state.rol,onMounted:e.onMounted}))}}),r.a.createElement(d.b,{path:"/",exact:!0},r.a.createElement(d.a,{to:"/feed"}))))))}}]),a}(r.a.Component)),sa=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={nombre:"",identificacion:"",telefono:"",email:"",fechaNacimiento:"",nacionalidad:"",ciudad:"",direccion:"",username:"",password:"",confirm_password:"",error:null,grupo:"",grupos:[],loading:!1,fin_registro:null},e.handleChange=function(t){var a=t.currentTarget,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.handleSubmit=function(){if(!e.state.loading){var t=ea(e.state);if(t)return e.setState({error:t});e.setState({loading:!0,error:null}),setTimeout((function(){w.SignIn(Object(h.a)(Object(h.a)({},e.state),{},{rol:vt.ASESOR})).then((function(t){e.setState({loading:!1,fin_registro:t.email}),j.Set("user",e.state.username)})).catch((function(t){return e.setState({error:t,loading:!1},(function(){Object.keys(t).forEach((function(e){ta(e)}))}))}))}),2e3)}},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;w.GetGroups().then((function(t){return e.setState({grupos:t})})).catch((function(t){return e.setState({error:{grupo:"No se pudieron cargar los grupos: "+t.message}})}))}},{key:"render",value:function(){var e=this.state,t=e.fin_registro,a=Object(ee.a)(e,["fin_registro"]);return t?r.a.createElement("div",{style:{width:"100%",padding:30,textAlign:"center"}},r.a.createElement(C.a,{variant:"h4"},"Registro completado!"),r.a.createElement(C.a,{variant:"subtitle1"},"Para habilitar tu cuenta entra a tu correo (",t,") y abre el enlace que te enviamos."),r.a.createElement(C.a,{variant:"body1"},"Si no encuentras nuestro correo en tu Bandeja de Entreda, es posible que encuentre en SPAM o NO DESEADOS.")):r.a.createElement("main",{style:{width:"100%",padding:10,textAlign:"center",backgroundColor:"#fafafa"}},r.a.createElement(re.a,{style:{padding:20,margin:"auto",maxWidth:600}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("img",{style:{height:100},src:"./logo.png",alt:"Natu - Logo"}),r.a.createElement("div",{style:{flexGrow:1,margin:20,textAlign:"left"}},r.a.createElement(C.a,{variant:"h4"},"REGISTRATE"),r.a.createElement(C.a,{component:T.b,to:"/login"},"Ya tienes una cuenta? Inicia sesi\xf3n aqu\xed"))),r.a.createElement(A.a,null),r.a.createElement(Zt,Object.assign({},a,{onChange:this.handleChange,onSubmit:this.handleSubmit,formType:"SIGN-IN"}))))}}]),a}(r.a.Component),ua=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={user:null},n.history=Object(m.b)(),n.handleLoggedIn=function(e){if(n.setState({user:e}),"PENDIENTE"===e.estado)return n.history.push("/classroom");n.history.push("/app"),w.KEY=e.token;try{j.setPrefix(e.id&&e.id+"_")}catch(t){console.info("Ocurrio un error en Preferences.setPrefix",t)}},e.user&&(n.state.user=e.user,w.KEY=e.user.token),n}return Object(c.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state.user;if(a)switch(a.estado){case"PENDIENTE":e=r.a.createElement(d.b,null,"BIENVENIDO A CLASSROOM");break;case"RECHAZADO":e=r.a.createElement(d.b,null,"USUARIO EST\xc1 DESHABILITADO");break;default:e=r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/classroom"},"BIENVENIDO A CLASSROOM"),r.a.createElement(d.b,{path:"/app",render:function(){return r.a.createElement(ca,a)}}),r.a.createElement(d.b,null,r.a.createElement(d.a,{to:"/app"})))}return r.a.createElement(d.c,{history:this.history},a?e:r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/signin",component:sa}),r.a.createElement(d.b,{path:"/recover-password"},"AQUI PUEDE RECUPERAR TU CONTRAE\xd1A"),r.a.createElement(d.b,{path:"/login",render:function(e){return r.a.createElement(R,{onLoggedIn:t.handleLoggedIn})}}),r.a.createElement(d.b,null,r.a.createElement(d.a,{to:"/login"}))))}}]),a}(r.a.Component);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ua,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[309,1,2]]]);
//# sourceMappingURL=main.dbe08d68.chunk.js.map