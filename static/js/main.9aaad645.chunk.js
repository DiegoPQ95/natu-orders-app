(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{125:function(e,t,a){e.exports=a(225)},225:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),l=a(13),i=a.n(l),c=a(18),s=a(7),u=a(8),d=a(12),m=a(15),h=a(14),p=a(24),g=a(5),E=a(36),f=a(268),v=a(269),b=a(292),y=a(281),O=a(294),C=a(304),A=a(305),w=a(265),x=a(296),j=a(297),S=a(288),k=a(289),D=a(290),T=a(291),R=a(293),P=a(295),N=a(298),M=a(44),_=a(19),L=a(117),I=a(116),B=a(272),G=a(303),F=a(277),U=a(91),W=a(302),V=a(278),z="https://natuapp.ue.r.appspot.com",Y=new(function(){function e(){Object(s.a)(this,e),this.KEY=""}return Object(u.a)(e,[{key:"Login",value:function(e){return this.Fetch("user/login",{body:e,method:"POST"})}},{key:"GetProducts",value:function(){return this.Fetch("product")}},{key:"getDiscounts",value:function(e){return 3===e?Promise.resolve([]):Promise.resolve([{montoDesde:60,porcentaje:20},{montoDesde:250,porcentaje:25},{montoDesde:500,porcentaje:30}])}},{key:"GetOrders",value:function(){return this.Fetch("order")}},{key:"GetOrder",value:function(e){return this.Fetch("order/"+e)}},{key:"SaveOrder",value:function(e){return this.Fetch("order",{method:"POST",body:e})}},{key:"ActionOrder",value:function(e,t){return this.Fetch("order/"+e,{method:"PUT",body:t})}},{key:"Stats",value:function(e){return this.Fetch("dashboard?data="+e.join(","))}},{key:"ProductSalesReport",value:function(e){var t="";return e&&Object.keys(e).length&&(t="?"+new URLSearchParams(e).toString()),this.Fetch("reports/product-sales"+t)}},{key:"Fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={method:"GET",cache:"reload",mode:"cors"},n=Object(c.a)(Object(c.a)({},a),t);return n.headers||(n.headers={}),n.headers["Content-Type"]="application/json",n.headers["Access-Control-Allow-Origin"]="*",this.KEY&&(n.headers||(n.headers={}),n.headers.Authorization="Basic "+this.KEY),n.body&&"string"!==typeof n.body&&(n.body=JSON.stringify(n.body)),fetch(z+"/"+e,n).then((function(e){return e.ok?e.json():e.clone().json().catch((function(){return e.text().then((function(t){throw{message:t,status:e.status,statusText:e.statusText}}))})).then((function(t){throw Object(c.a)(Object(c.a)({},t),{},{status:e.status,statusText:e.statusText})}))})).catch((function(e){if("Failed to fetch"===e.message)throw{message:"Este servicio no se encuentra disponible por el momento. Intentelo m\xe1s tarde.",status:0};throw e.message||(e.message=e.statusText),e}))}}]),e}()),H=a(257),$=a(261),K=a(262),J=a(263),Z=a(264),q=a(266),Q=a(267);function X(e){var t={};return e.visible||(t.display="none"),o.a.createElement(H.a,{container:!0,alignItems:"center",style:Object(c.a)({flex:1,overflow:"auto",marginTop:5},t),spacing:3},e.items.map((function(t){return o.a.createElement(H.a,{key:t.id,item:!0,sm:6,md:4,xs:12},o.a.createElement($.a,null,o.a.createElement(K.a,{component:"img",style:{height:180,objectFit:"contain"},image:t.imgSrc||"https://diegopq95.github.io/take-orders/img/default.png"}),o.a.createElement(J.a,{style:{display:"flex",flexDirection:"row"}},o.a.createElement(E.a,{style:{flex:1,height:60,overflow:"hidden"},variant:"subtitle1"},t.nombre),o.a.createElement(E.a,{variant:"h6"},"$ ",t.pvp_final.toFixed(2))),o.a.createElement(Z.a,null,o.a.createElement(w.a,{onClick:e.onActionChanged,name:"+",value:t.id},o.a.createElement(q.a,null)),o.a.createElement(E.a,{variant:"body1"},t.cantidad),o.a.createElement(w.a,{disabled:!(t.cantidad>0),onClick:e.onActionChanged,name:"-",value:t.id},o.a.createElement(Q.a,null)))))})))}function ee(e){var t=e.items,a=e.show_next_discount,n=e.descuento,r=e.total,l=e.subtotal;return n||(n={porcentaje:0,valor:0}),o.a.createElement(f.a,null,t.map((function(e){return o.a.createElement(te,{key:e.id,col1:e.nombre,col2:e.cantidad,col3:"$ "+(e.pvp_final*e.cantidad).toFixed(2)})})),o.a.createElement(te,{col1:"SUBTOTAL",col3:"$ ".concat(l.toFixed(2))}),o.a.createElement(te,{col1:"TU GANANCIA (".concat(n.porcentaje,"%) EN ESTE PEDIDO"),col3:"$ ".concat(n.valor.toFixed(2)),color:"primary"}),o.a.createElement(te,{col1:"TOTAL",variant:"subtitle2",col3:"$ ".concat(r.toFixed(2))}),a&&n.sgte_descuento_porcentaje?o.a.createElement(v.a,null,o.a.createElement(E.a,{variant:"subtitle1",color:"secondary"},"Obt\xe9n el ".concat(n.sgte_descuento_porcentaje,"% de descuento agregando ").concat(n.sgte_descuento_falta.toFixed(2)," USD m\xe1s a tu pedido"))):null)}function te(e){var t=e.col1,a=e.col2,n=e.col3,r=e.color,l=e.variant;return o.a.createElement(v.a,null,o.a.createElement("div",{style:{width:"100%",display:"table"}},o.a.createElement(E.a,{color:r||"initial",style:{display:"table-cell"},variant:l||"body1"},t),a&&o.a.createElement(E.a,{color:r||"initial",style:{display:"table-cell",width:"15%",maxWidth:100,textAlign:"right"},variant:l||"body1"},a),o.a.createElement(E.a,{color:r||"initial",style:{display:"table-cell",width:"25%",maxWidth:100,textAlign:"right"},variant:l||"body1"},n)))}var ae=new(function(){function e(){Object(s.a)(this,e),this.QUITO_BOUNDS={west:-78.853,north:-.04875,east:-78.17184,south:-.39207},this.QUITO={lat:-.189515,lng:-78.488167}}return Object(u.a)(e,[{key:"currentPosition",value:function(){return new Promise((function(e,t){if(console.info("obteniendo posicion actual con navigator.geolocation.getCurrentPosition"),!navigator.geolocation)return console.info("navigator.geolocation.getCurrentPosition no existe en este navegador, intentando con PositionByIP()"),ne().then(e).catch(t);navigator.geolocation.getCurrentPosition((function(t){console.info("navigator.geolocation.getCurrentPosition ha obtenido la posicion"),e({lat:t.coords.latitude,lng:t.coords.longitude,fromGPS:!0})}),(function(){console.info("navigator.geolocation.getCurrentPosition fall\xf3, intentando con PositionByIP()"),ne().then(e).catch(t)}))}))}},{key:"CanUseGPS",value:function(){return new Promise((function(e,t){if(!navigator.geolocation)return t();navigator.geolocation.getCurrentPosition(e,t)}))}},{key:"PlaceFromCoords",value:function(e,t){var a=this,r=window.google;return n||(n=new r.maps.Geocoder),new Promise((function(r,o){n.geocode({location:e,bounds:t||a.QUITO_BOUNDS},(function(e,t){if("ZERO_RESULTS"===t)return o({status:t,message:"No se encontraron resultados"});var a=e.length&&e[0];if(!a)return o({message:"No se encontraron resultados"});a.inputText=function(e){for(var t,a,n=0;n<e.address_components.length;n++)for(var r=e.address_components[n],o=0;o<r.types.length;o++){var l=r.types[o];if("street_address"===l)return r.short_name||r.long_name;if(r.types.find((function(e){return"street_number"===e}))&&r.types.find((function(e){return"route"===e})))return r.short_name||r.long_name;"route"!==l||t||(t=r.short_name||r.long_name),"street_number"!==l||a||(a=r.short_name||r.long_name)}return t&&a?t+" "+a:e.formatted_address}(a),r(a)}))}))}},{key:"CoordsFromPlace",value:function(e,t){var a=this,r=window.google;return n||(n=new r.maps.Geocoder),new Promise((function(r,o){n.geocode({address:e,bounds:t||a.QUITO_BOUNDS},(function(e,t){if("ZERO_RESULTS"===t)return o({status:t,message:"No se encontraron resultados"});var a=e.length&&e[0];if(!a)return o({message:"No se encontraron resultados"});r(a)}))}))}}]),e}());function ne(){return fetch("https://ipapi.co/json/").then((function(e){return e.json()})).then((function(e){return{lat:e.latitude,lng:e.longitude}}))}var re=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={defaultCenter:null},n.mapRef=void 0,n.virtualMarker=void 0,n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleMapMounted=n.handleMapMounted.bind(Object(d.a)(n)),n.handleDragStart=n.handleDragStart.bind(Object(d.a)(n)),n.handleDragEnd=n.handleDragEnd.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"componentWillMount",value:function(){var e=this;ae.currentPosition().then((function(t){return e.setState({defaultCenter:t})}))}},{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.props.onValueChange(a,n)}},{key:"handleDragStart",value:function(){this.virtualMarker.classList.add("on-move")}},{key:"handleDragEnd",value:function(){var e=this;ae.PlaceFromCoords(this.mapRef.getCenter()).then((function(t){return e.props.onValueChange("direccion",t.inputText)})).catch((function(e){return console.warn("PlaceFromCoords ERROR",e)})),this.virtualMarker.classList.remove("on-move")}},{key:"handleMapMounted",value:function(e){this.mapRef=e,this.mapRef&&(this.virtualMarker=document.createElement("div"),this.virtualMarker.className="centerMarker",e.getDiv().appendChild(this.virtualMarker))}},{key:"render",value:function(){var e=this.props,t=e.direccion,a=e.ciudad,n=e.referencia,r=e.sector,l=e.visible;return o.a.createElement(U.a,{style:{margin:"auto",height:"100%",width:"100%",maxWidth:500,padding:10,marginTop:10,display:l?"block":"none"}},o.a.createElement(W.a,{variant:"outlined",name:"ciudad",value:a,onChange:this.handleChange,label:"Ciudad*",style:{margin:10,width:"calc(100% - 20px)"}}),o.a.createElement(W.a,{variant:"outlined",name:"sector",value:r,onChange:this.handleChange,label:"Sector*",style:{margin:10,width:"calc(100% - 20px)"}}),o.a.createElement(W.a,{variant:"outlined",name:"direccion",value:t,onChange:this.handleChange,label:"Direccion Exacta*",multiline:!0,rows:3,style:{margin:10,width:"calc(100% - 20px)"}}),o.a.createElement(W.a,{variant:"outlined",name:"referencia",value:n,onChange:this.handleChange,label:"Referencia",multiline:!0,rows:2,style:{margin:10,width:"calc(100% - 20px)"}}))}}]),a}(o.a.PureComponent),oe=a(270),le=a(271),ie=function(e){return o.a.createElement(U.a,{style:{maxWidth:400,padding:10,height:"100%",marginLeft:"auto",marginRight:"auto",display:e.visible?"block":"none"}},o.a.createElement(E.a,{style:{marginTop:10,marginBottom:10,textAlign:"center"},variant:"h6"},"Total a Pagar: $",e.total.toFixed(2)),o.a.createElement(oe.a,null),o.a.createElement("div",{style:{padding:20}},o.a.createElement(E.a,null,"Realiza tu pago mediante Transferencia o Deposito Bancario a la cuenta:"),o.a.createElement(E.a,null,"BANCO DE PICHINCHA. Cta. Cte. #123123123 "),o.a.createElement(E.a,null,"C.I. 0932050222"),o.a.createElement(E.a,null,"Natu Cosmetics S.A")),o.a.createElement(W.a,{style:{width:"calc(100% - 20px)",margin:10},variant:"outlined",inputMode:"numeric",onChange:function(t){return e.onValueChange("numeroTransaccion",t.currentTarget.value)},value:e.numeroTransaccion,label:"Numero de Comprobante"}),o.a.createElement(le.a,{disabled:e.loading,onClick:e.onDone,variant:"outlined",color:"primary",style:{margin:10,width:"calc(100% - 20px)"}},e.loading?o.a.createElement(B.a,{size:25}):"ENVIAR"))};var ce=a(273),se=a(274),ue=a(275),de=Object(_.g)(function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={txt1:"",txt2:"",loading:!1,id:""},n.handleClose=n.handleClose.bind(Object(d.a)(n)),n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.state.id=e.id,n}return Object(u.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"unblock",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.unblock=this.props.history.block=function(){return e.state.loading?"Espera un momento, tu informaci\xf3n se est\xe1 guardando":null}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.txt1,r=a.txt2,o=a.loading,l=a.id;if(!o){if(!n&&!r)return this.props.onClose();this.setState({loading:!0}),Y.ActionOrder(l,{action:"SURVEY",value:[n,r]}).then((function(e){t.setState({loading:!1}),t.props.history.goBack()})).catch((function(e){t.setState({loading:!1}),alert(e.message)}))}}},{key:"handleClose",value:function(){this.state.loading||this.props.history.goBack()}},{key:"render",value:function(){var e=this.props,t=this.state,a=t.txt1,n=t.txt2,r=t.loading;return o.a.createElement(ce.a,{open:!0,onClose:this.handleClose},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement(se.a,null,o.a.createElement(E.a,{style:{textAlign:"center"},variant:"h6"},e.title),o.a.createElement(E.a,{style:{marginTop:10},variant:"subtitle1"},"C\xf3mo podemos ayudarte a mejorar tus ventas?"),o.a.createElement(W.a,{autoFocus:!0,name:"txt1",multiline:!0,rows:2,label:"Escribe tu respuesta",value:a,onChange:this.handleChange,fullWidth:!0}),o.a.createElement(E.a,{style:{marginTop:10},variant:"subtitle1"},"Compartenos alguna expendiencia que hayan tenido tus clientes usando nuestros productos"),o.a.createElement(W.a,{name:"txt2",multiline:!0,rows:3,label:"Escribe tu respuesta",value:n,onChange:this.handleChange,fullWidth:!0})),o.a.createElement(ue.a,null,o.a.createElement(le.a,{type:"submit",variant:"outlined"},r?o.a.createElement(B.a,{size:25}):"GUARDAR"))))}}]),a}(o.a.Component)),me=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"Get",value:function(e){console.info("Getting Preference");var t=window.localStorage.getItem(e);try{return JSON.parse(t)}catch(a){}return t}},{key:"Set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(console.info("Setting Preference"),void 0!==t)if(null!==t){var a=t;typeof t===typeof{}&&(a=JSON.stringify(t)),window.localStorage.setItem(e,a)}else window.localStorage.removeItem(e);else window.localStorage.removeItem(e)}}]),e}(),he=a(276);function pe(e){var t=e.title,a=e.message,n=e.info,r=e.onClose;return o.a.createElement(ce.a,{open:Boolean(a)||Boolean(e.children),onClose:r},o.a.createElement(he.a,null,t),o.a.createElement(se.a,{style:{textAlign:"center"}},e.children||o.a.createElement("div",null,o.a.createElement(E.a,{variant:"subtitle1"},a),o.a.createElement(E.a,{variant:"body1"},n))),o.a.createElement(ue.a,null,o.a.createElement(le.a,{type:"button",onClick:e.onClose},"SALIR")))}var ge=Object(_.g)((function(e){var t=new URLSearchParams(e.location.search);return o.a.createElement(pe,{title:t.get("a"),message:t.get("b"),onClose:function(t){return e.history.goBack()}})})),Ee=a(279),fe=Object(_.g)(function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).guardarBorrador=function(e){if(!e||n.state.isDirty)try{var t=n.state.productList.filter((function(e){return e.cantidad})).map((function(e){return{id:e.id,cantidad:e.cantidad}})),a=n.state,r=a.numeroTransaccion,o=a.direccion,l=a.ciudad,i=a.sector,c=a.observacion,s=a.referencia,u=a.position;me.Set("current_order",{numeroTransaccion:r,direccion:o,ciudad:l,choosen:t,sector:i,observacion:c,referencia:s,position:u}),e&&(n.props.history.push(n.props.match.path+"/msg?"+new URLSearchParams({a:"Listo",b:"Tu pedido fue guardado como borrador."}).toString()),n.setState({isDirty:!1}))}catch(d){}},n.handleTab=n.handleTab.bind(Object(d.a)(n)),n.handleAction=n.handleAction.bind(Object(d.a)(n)),n.handleValueChange=n.handleValueChange.bind(Object(d.a)(n)),n.handleDone=n.handleDone.bind(Object(d.a)(n)),n.handleChange=n.handleChange.bind(Object(d.a)(n)),e.onMounted&&e.onMounted(e.match.path),n.state={currentTab:0,productList:[],tablaDescuentos:[],descuentoAplica:null,subtotal:0,numeroTransaccion:"",direccion:"",ciudad:"",sector:"",observacion:"",referencia:"",position:null,loading:"articulos",isDirty:!1},n}return Object(u.a)(a,[{key:"unblockNavigation",value:function(){}}]),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.onbeforeunload=function(t){return e.state.isDirty?"Tu pedido a\xfan est\xe1 incompleto, deseas salir sin guardarlo?":null},this.unblockNavigation=this.props.history.block(this.routerWillLeave.bind(this)),Promise.all([Y.GetProducts(),Y.getDiscounts(this.props.rol)]).then((function(t){var a=Object(I.a)(t,2),n=a[0],r=a[1];e.setState({productList:n.map((function(e){return e.cantidad=0,e})),tablaDescuentos:r,loading:null});try{var o=me.Get("direccion")||{},l={};for(var i in o)e.state.hasOwnProperty(i)&&(l[i]=o[i]);var c=me.Get("current_order")||{};for(var s in c)e.state.hasOwnProperty(s)&&(l[s]=c[s]);if(!(Object.keys(l).length||c.choosen&&c.choosen.length))return;if(e.setState(l),!c.choosen)return;for(var u=0;u<c.choosen.length;u++)for(var d=c.choosen[u],m=0;m<d.cantidad;m++)e.handleAction({currentTarget:{name:"+",value:d.id},avoidIsDirty:!0})}catch(h){}})).catch((function(e){alert(e.message)}))}},{key:"componentWillUnmount",value:function(){this.unblockNavigation(),window.onbeforeunload=void 0}},{key:"handleTab",value:function(e,t){this.setState({currentTab:t})}},{key:"routerWillLeave",value:function(e){e&&0===e.pathname.indexOf(this.props.match.path)||this.state.isDirty&&(window.confirm("Tu pedido est\xe1 incompleto, quieres guardarlo para completarlo despu\xe9s?")?this.guardarBorrador():me.Set("current_order"))}},{key:"handleDone",value:function(){var e=this,t=this.state,a=t.subtotal,n=t.numeroTransaccion,r=t.ciudad,o=t.sector,l=t.observacion,i=t.referencia,c=t.direccion,s=t.position,u=t.descuentoAplica;if(!t.loading){var d=this.state.productList.filter((function(e){return e.cantidad}));if(!d.length)return this.failed_msg("Debes elegir por lo menos un producto");if(!r||!r.trim().length)return this.failed_msg("Digita la ciudad");if(!o||!o.trim().length)return this.failed_msg("Digita el sector");if(!c||!c.trim().length)return this.failed_msg("Digita la direccion");if(!n||!n.trim().length)return this.failed_msg("Digita el numero de comprobante de pago");this.setState({loading:"guardar"}),Y.SaveOrder({ciudad:r,sector:o,direccion:c,observacion:l,referencia:i,detalle:d,descuentoPorcentaje:u&&u.porcentaje,descuentoTotal:u&&u.valor,total:a-(u&&u.valor||0),position:s,numeroTransaccion:n}).then((function(t){e.setState({currentTab:0,descuentoAplica:null,subtotal:0,numeroTransaccion:"",observacion:"",position:null,loading:null,productList:e.state.productList.map((function(e){return e.cantidad=0,e})),isDirty:!1}),e.props.history.push(e.props.match.path+"/survey/"+t.id),me.Set("direccion",{direccion:e.state.direccion||"",ciudad:e.state.ciudad||"",sector:e.state.sector||"",referencia:e.state.referencia||""})})).catch((function(t){e.failed_msg(t.message+" "+(t.status||""),"Ocurri\xf3 un error"),e.setState({loading:null})}))}}},{key:"failed_msg",value:function(e,t){var a=new URLSearchParams({a:t||"No se puede guardar",b:e});this.props.history.push(this.props.match.path+"/msg?"+a.toString())}},{key:"handleAction",value:function(e){var t=e.currentTarget,a=t.name,n=t.value,r=e.avoidIsDirty;this.setState((function(e){var t=Object(c.a)({},e);t.productList=JSON.parse(JSON.stringify(t.productList));var o=t.productList.find((function(e){return e.id===+n})),l=o.cantidad&&!isNaN(+o.cantidad)&&o.cantidad||0,i=o.cantidad_desde;return"+"===a?l<=0&&i?l=i:l++:"-"===a&&(l<=10&&i?l=0:l--),o.cantidad=l,t.subtotal=function(e){for(var t={total:0,cantidad:0},a=0;a<e.length;a++){var n=e[a];t.cantidad+=n.cantidad,t.total+=n.pvp_final*n.cantidad}return t}(t.productList.filter((function(e){return e.cantidad}))).total,t.descuentoAplica=function(e,t){for(var a=t.sort((function(e,t){return t.montoDesde-e.montoDesde})),n=-1,r={porcentaje:0,valor:0,sgte_descuento_porcentaje:0,sgte_descuento_falta:0},o=0;o<a.length;o++){if(e>=a[o].montoDesde){n=o;break}}if(n>=0){var l=a[n];r.porcentaje=l.porcentaje,r.valor=e*l.porcentaje/100}if(-1===n&&(n=a.length),n-1>=0){var i=a[n-1];i&&(r.sgte_descuento_falta=i.montoDesde-e,r.sgte_descuento_porcentaje=i.porcentaje)}return r}(t.subtotal,t.tablaDescuentos),r||(t.isDirty=!0),t}))}},{key:"handleValueChange",value:function(e,t){var a;this.setState((a={},Object(p.a)(a,e,t),Object(p.a)(a,"isDirty",!0),a))}},{key:"handleChange",value:function(e){var t,a=e.currentTarget,n=a.value,r=a.name;this.setState((t={},Object(p.a)(t,r,n),Object(p.a)(t,"isDirty",!0),t))}},{key:"render",value:function(){var e=this.state,t=e.currentTab,a=e.productList,n=e.numeroTransaccion,r=e.descuentoAplica,l=e.subtotal,i=e.loading,c=e.observacion,s=Object(L.a)(e,["currentTab","productList","numeroTransaccion","descuentoAplica","subtotal","loading","observacion"]),u=a.filter((function(e){return e.cantidad}));console.info("Order render");var d=l-(r&&r.valor||0);return"articulos"===i?o.a.createElement("div",{style:{width:"100%",textAlign:"center",paddingTop:100}},o.a.createElement(B.a,{size:100}),o.a.createElement(E.a,{variant:"h6"},"CARGANDO...")):o.a.createElement("div",{style:{width:"100%",height:"calc(100% - 1px)",display:"flex",flexDirection:"column",padding:10,overflow:"hidden"}},o.a.createElement(G.a,{variant:"fullWidth",onChange:this.handleTab,value:t},o.a.createElement(F.a,{label:"Productos"}),o.a.createElement(F.a,{label:"Pedido"}),o.a.createElement(F.a,{label:"Direcci\xf3n"}),o.a.createElement(F.a,{label:"Pago"})),0===t&&o.a.createElement(X,{visible:!0,onActionChanged:this.handleAction,items:a}),1===t&&o.a.createElement(U.a,{style:{display:1===t?"block":"none",textAlign:"center",padding:10,margin:"auto",marginTop:10,width:"100%",maxWidth:500,height:"100%"}},o.a.createElement(E.a,{variant:"h5"},"TU PEDIDO"),o.a.createElement(ee,{show_next_discount:!0,items:u,descuento:r,subtotal:l,total:d}),o.a.createElement(W.a,{variant:"outlined",value:c,name:"observacion",onChange:this.handleChange,style:{width:"calc(100% - 20px)",margin:10},label:"Observacion",multiline:!0,rows:"2"})),o.a.createElement(re,Object.assign({visible:2===t},s,{onValueChange:this.handleValueChange})),3===t&&o.a.createElement(ie,{visible:!0,loading:"guardar"===i,total:d,onDone:this.handleDone,items:u,numeroTransaccion:n,onValueChange:this.handleValueChange}),o.a.createElement(_.b,{path:this.props.match.path+"/msg",component:ge}),o.a.createElement(_.b,{path:this.props.match.path+"/survey/:id",component:de}),o.a.createElement(V.a,{title:"Guardar Borrador",onClick:this.guardarBorrador,variant:"extended",style:{position:"fixed",bottom:20,right:20},color:"primary"},o.a.createElement(Ee.a,null)))}}]),a}(o.a.PureComponent)),ve=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:"data",_fechaEntrega:""},e.handleClose=function(t){e.props.onClose(e.state.shouldRefresh)},e.handleButton=function(t){var a=t.currentTarget.name;if("APROBAR"===a){if(!e.state._fechaEntrega)return alert("Agregue la fecha de Entrega");Y.ActionOrder(e.state.id,{action:a,value:e.state._fechaEntrega}).then((function(t){return e.setState({estado:"APROBADO",fechaEntrega:e.state._fechaEntrega,loading:null,shouldRefresh:!0})})).catch((function(t){alert(t.message),e.setState({loading:null})}))}if("RECHAZAR"===a){if(!window.confirm("Esta seguro de rechazar este pedido?"))return;var n=window.prompt("Digita el Motivo de Rechazo");if(!n)return;Y.ActionOrder(e.state.id,{action:a,value:n}).then((function(t){return e.setState({estado:"RECHAZADO",loading:null,shouldRefresh:!0})})).catch((function(t){alert(t.message),e.setState({loading:null})}))}if("ENTREGAR"===a){if(!window.confirm("Esta seguro de seleccionar este pedido como ENTREGADO?"))return;Y.ActionOrder(e.state.id,{action:a,value:null}).then((function(t){return e.setState({estado:"ENTREGADO",loading:null,shouldRefresh:!0})})).catch((function(t){alert(t.message),e.setState({loading:null})}))}e.setState({loading:a})},e.handleChange=function(t){var a=t.currentTarget,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e}return Object(u.a)(a,[{key:"componentWillMount",value:function(){var e=this;Y.GetOrder(+this.props.match.params.id).then((function(t){return e.setState(Object(c.a)(Object(c.a)({},t),{},{loading:null}))}))}},{key:"render",value:function(){var e=this.state,t=e.numero,a=e.fechaCreacion,n=e.fechaEntrega,r=e._fechaEntrega,l=e.detalle,i=e.descuentoPorcentaje,c=e.descuentoTotal,s=e.position,u=e.observacion,d=e.direccion,m=e.sector,h=e.ciudad,p=e.referencia,g=e.numeroTransaccion,f=e.estado,v=e.total,b=e.username,y=e.telefono,O=e.survey1,C=e.survey2,A=e.loading,w=e.motivoAnulacion,x=!0===this.props.editable||null;return"data"===A?o.a.createElement(ce.a,{open:!0,onClose:this.handleClose,maxWidth:"md"},o.a.createElement(se.a,{style:{textAlign:"center",paddingTop:100,width:400,height:400}},o.a.createElement(B.a,{size:100}),o.a.createElement(E.a,{variant:"h6"},"CARGANDO..."))):o.a.createElement(ce.a,{open:!0,onClose:this.handleClose,maxWidth:"md"},o.a.createElement(he.a,{style:{textAlign:"center"}},"ORDEN #",t),o.a.createElement(se.a,null,o.a.createElement(E.a,null,"FECHA: ",new Date(a).toLocaleString()),(!x||"PENDIENTE"!==f)&&o.a.createElement(E.a,null," FECHA DE ENTREGA: ",n&&new Date(n).toLocaleDateString()),o.a.createElement(E.a,null," ESTADO: ",f," ",w&&"| motivo: ".concat(w)),x&&o.a.createElement(E.a,null," USUARIO: ",b," | tel: ",y),o.a.createElement(E.a,{variant:"h6",style:{textAlign:"center",marginTop:10}},"PRODUCTOS:"),o.a.createElement(ee,{items:l,descuento:{porcentaje:i,valor:c},total:v,subtotal:v+c}),o.a.createElement(E.a,{style:{marginTop:10,marginBottom:10}},"COMPROBANTE DE PAGO: ",g),o.a.createElement(E.a,null,"DIRECCION: ",d,", ",p," ,",m,", ",h),o.a.createElement(E.a,{style:{marginTop:10}},"OBSERVACIONES: ",u),s&&o.a.createElement(le.a,{variant:"contained",fullWidth:!0,style:{marginTop:10,marginBottom:10},color:"primary",component:"a",href:"https://www.google.com/maps/search/?api=1&query=".concat(s.lat,",").concat(s.lng),target:"_blank"},"VER UBICACION DE ENTREGA"),x&&"PENDIENTE"===f?o.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:10,marginBottom:10}},o.a.createElement(E.a,{variant:"button",style:{marginRight:10,paddingTop:5}},"Fecha de Entrega"),o.a.createElement(W.a,{type:"date",fullWidth:!0,name:"_fechaEntrega",value:r||"",style:{flex:1},onChange:this.handleChange})):null,x&&"PENDIENTE"===f?o.a.createElement("div",{style:{marginTop:10,marginBottom:10,display:"flex",flexDirection:"row"}},o.a.createElement(le.a,{onClick:this.handleButton,name:"RECHAZAR",style:{marginLeft:10,marginRight:10,flex:1},variant:"text",color:"secondary",disabled:Boolean(A)},"RECHAZAR"===A?o.a.createElement(B.a,{size:25,color:"inherit"}):"RECHAZAR"),o.a.createElement(le.a,{onClick:this.handleButton,name:"APROBAR",style:{marginLeft:10,marginRight:10,flex:1},variant:"outlined",color:"primary",disabled:Boolean(A)},"APROBAR"===A?o.a.createElement(B.a,{color:"inherit",size:25}):"APROBAR")):null,o.a.createElement(oe.a,{style:{margin:10}}),o.a.createElement(E.a,{style:{marginTop:10},variant:"caption"},"C\xf3mo podemos ayudarte a mejorar tus ventas?"),o.a.createElement(E.a,null,O||""),o.a.createElement(E.a,{style:{marginTop:10},variant:"caption"},"Compartenos alguna expendiencia que hayan tenido tus clientes usando nuestros productos"),o.a.createElement(E.a,null,C||"")),o.a.createElement(ue.a,null,x&&"APROBADO"===f?o.a.createElement(le.a,{color:"primary",name:"ENTREGAR",onClick:this.handleButton},"ENTREGAR"===A?o.a.createElement(B.a,{color:"inherit",size:25}):"ENTREGAR"):null,o.a.createElement(le.a,{onClick:this.handleClose},"SALIR")))}}]),a}(o.a.Component);var be=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={data:[],msg:null,loading:!0},e.onMounted(e.match.path),n.handleClick=n.handleClick.bind(Object(d.a)(n)),n.handleClose=n.handleClose.bind(Object(d.a)(n)),n.handleMessage=n.handleMessage.bind(Object(d.a)(n)),n}return Object(u.a)(a,[{key:"componentWillMount",value:function(){var e=this;Y.GetOrders().then((function(t){return e.setState({data:t,loading:null})})).catch((function(t){return e.setState({loading:null,msg:{title:"Ocurri\xf3 un error",message:t.message,info:t.code}})}))}},{key:"handleMessage",value:function(){this.setState({msg:null})}},{key:"handleClick",value:function(e){var t=e.currentTarget.id;this.props.history.push(this.props.match.path+"/"+t)}},{key:"handleClose",value:function(e){var t=this;e&&(this.setState({loading:!0}),Y.GetOrders().then((function(e){return t.setState({data:e,loading:null})})).catch((function(e){return t.setState({msg:{title:"No se pudo actualizar el listado",message:e.message,info:e.code},loading:null})}))),this.props.history.push(this.props.match.path)}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.msg,r=t.loading,l=this.props.rol;return r?o.a.createElement("div",{style:{width:"100%",textAlign:"center",paddingTop:100}},o.a.createElement(B.a,{size:100}),o.a.createElement(E.a,{variant:"h6"},"CARGANDO...")):o.a.createElement(U.a,{style:{width:"calc(100%-20px)",height:"calc(100% - 30px)",display:"flex",flexDirection:"column",margin:10,padding:10,paddingBottom:0,overflowX:"hidden"}},o.a.createElement(f.a,null,o.a.createElement(C.a,{xsDown:!0,implementation:"css"},o.a.createElement(v.a,null,o.a.createElement(H.a,{container:!0,spacing:1,style:{borderBottom:"1px solid #ebebeb"}},o.a.createElement(H.a,{sm:2,item:!0},o.a.createElement(E.a,{variant:"overline"},"Numero")),o.a.createElement(H.a,{sm:2,item:!0},o.a.createElement(E.a,{variant:"overline"},"Creado")),3===l&&o.a.createElement(H.a,{sm:3,item:!0},o.a.createElement(E.a,{variant:"overline"},"Usuario")),o.a.createElement(H.a,{sm:1,item:!0},o.a.createElement(E.a,{variant:"overline"},"Total")),1===l&&o.a.createElement(H.a,{sm:1,item:!0},o.a.createElement(E.a,{variant:"overline"},"Ganancia")),o.a.createElement(H.a,{sm:2,item:!0},o.a.createElement(E.a,{variant:"overline"},"Estado")),o.a.createElement(H.a,{sm:2,item:!0},o.a.createElement(E.a,{variant:"overline"},"Fecha de Entrega"))))),a.map((function(t){return o.a.createElement(v.a,{key:t.id,id:""+t.id,button:!0,onClick:e.handleClick},o.a.createElement(H.a,{container:!0,spacing:1,style:{paddingTop:5,paddingBottom:5,borderBottom:"1px solid #fafafa"}},o.a.createElement(H.a,{xs:12,sm:2,item:!0},o.a.createElement(C.a,{smUp:!0},"PEDIDO #"),t.id),o.a.createElement(H.a,{xs:12,sm:2,item:!0},new Date(t.fechaCreacion).toLocaleDateString()),3===l&&o.a.createElement(H.a,{xs:12,sm:3,item:!0},t.username),o.a.createElement(H.a,{xs:12,sm:1,item:!0},"$ ",t.total.toFixed(2)),1===l&&o.a.createElement(H.a,{xs:12,sm:1,item:!0},"$ ",(t.descuentoTotal||0).toFixed(2)),o.a.createElement(H.a,{xs:12,sm:2,item:!0},o.a.createElement(E.a,{color:ye(t.estado)},t.estado)),o.a.createElement(H.a,{xs:12,sm:2,item:!0},t.fechaEntrega&&new Date(t.fechaEntrega).toDateString())))}))),n&&o.a.createElement(pe,Object.assign({},n,{onClose:this.handleMessage})),o.a.createElement(_.b,{path:this.props.match.path+"/:id",render:function(t){return o.a.createElement(ve,Object.assign({},t,{onClose:e.handleClose,editable:3===l}))}}))}}]),a}(o.a.Component);function ye(e){return"APROBADO"===e?"primary":"RECHAZADO"===e?"secondary":"initial"}var Oe=a(280),Ce=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.showLastOrder,n=e.perfomanceStat;return o.a.createElement(f.a,null,t.sort((function(e,t){return t.stat-e.stat})).map((function(e,t){return o.a.createElement(v.a,{key:t,id:"ranking-listitem-"+t},o.a.createElement("div",{style:{display:"table",width:"100%"}},o.a.createElement(E.a,{style:{display:"table-cell",width:50},variant:e.me?"body1":"caption"},"# ",t+1),o.a.createElement(E.a,{style:{display:"table-cell"},variant:e.me?"body1":"caption"},e.username),o.a.createElement(E.a,{color:n&&e.stat?e.stat>0?"primary":"secondary":"inherit",style:{display:"table-cell",textAlign:"right",width:100},variant:e.me?"body1":"caption"},n?"%":"$"," ",e.stat.toFixed(2)," ",n&&e.stat?e.stat>0?"\u2191":"\u2193":null),a&&o.a.createElement(E.a,{style:{display:"table-cell",textAlign:"right",width:100,paddingLeft:10},variant:e.me?"body1":"caption"},function(e){if(!e)return"Nunca";var t=new Date(e);if(isNaN(+t))return e;var a=new Date;if(t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear())return t.toLocaleTimeString();for(var n=1;n<30;n++){var r=new Date(a.getFullYear(),a.getMonth(),a.getDate()-n);if(t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear())return 1===n?"Ayer":"Hace "+n+" d\xedas"}return t.toLocaleDateString()}(e.ultimoPedido))))})))}}]),a}(o.a.PureComponent);function Ae(e){return o.a.createElement($.a,{className:"dashboard-card",style:{display:"flex",flexDirection:"column"}},o.a.createElement(Oe.a,{title:e.title,style:{textAlign:"center"}}),o.a.createElement(J.a,{style:{flex:1,overflow:"auto"}},o.a.createElement(Ce,{data:e.data,showLastOrder:e.showLastOrder,perfomanceStat:e.perfomanceStat})))}var we=a(73),xe=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={options:{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,scales:{yAxes:[{ticks:{maxTicksLimit:10,padding:5}}],xAxes:[{ticks:{padding:5}}]}}},e}return Object(u.a)(a,[{key:"render",value:function(){for(var e=[],t=[],a=0;a<this.props.data.length;a++){var n=this.props.data[a];e.push(n.label),t.push(n.value)}var r={labels:e,datasets:[{backgroundColor:"#3f51b5",borderColor:"#3f51b5",data:t,fill:!1}]};return o.a.createElement($.a,{className:"dashboard-card",style:{display:"flex",flexDirection:"column"}},o.a.createElement(Oe.a,{style:{textAlign:"center"},title:this.props.title}),o.a.createElement(J.a,{style:{width:"100%",flex:1,padding:5}},o.a.createElement(we.a,{options:this.state.options,data:r})))}}]),a}(o.a.PureComponent),je=a(282);function Se(e){var t=e.month,a=e.year,n=0,r=0;return t&&(n=5*t/100,r=14*t/100),o.a.createElement($.a,{className:"dashboard-card"},o.a.createElement(Oe.a,{title:"GANANCIAS",style:{textAlign:"center"}}),o.a.createElement(J.a,null,o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{style:{textAlign:"center",flex:1}},o.a.createElement(E.a,{color:"primary",variant:"h5",style:{flex:1}},"$ ",ke(t)),o.a.createElement(E.a,{color:"primary"},"ESTE MES")),o.a.createElement("div",{style:{borderLeft:"1px solid black",textAlign:"center",flex:1}},o.a.createElement(E.a,{variant:"h5",style:{flex:1}},"$ ",ke(a)),o.a.createElement(E.a,null,"ESTE A\xd1O"))),o.a.createElement(E.a,{variant:"subtitle1",style:{marginTop:20,paddingLeft:15,textAlign:"left"}},"Te aconsejamos apartar lo siguiente:"),o.a.createElement(f.a,null,o.a.createElement(v.a,{dense:!0},o.a.createElement(y.a,{primary:"RESERVAS 5%"}),o.a.createElement(je.a,null,"$ ",n.toFixed(2))),o.a.createElement(v.a,{dense:!0},o.a.createElement(y.a,{primary:"PROMOCION 14%"}),o.a.createElement(je.a,null,"$ ",r.toFixed(2))))))}function ke(e){return e?e>1e3?+(e/1e3).toFixed(1)+" K":e>1e6?+(e/1e3).toFixed(1)+" M":+e.toFixed(2):0}var De=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={options:{title:{display:!1},legend:{display:!0},maintainAspectRatio:!1}},e}return Object(u.a)(a,[{key:"render",value:function(){for(var e=[],t=[],a=[],n=0;n<this.props.data.length;n++){var r=this.props.data[n];e.push(r.label),t.push(r.value),a.push(r.color)}var l={labels:e,datasets:[{backgroundColor:a,data:t}]};return o.a.createElement($.a,{className:"dashboard-card",style:{display:"flex",flexDirection:"column"}},o.a.createElement(Oe.a,{style:{textAlign:"center"},title:this.props.title}),o.a.createElement(J.a,{style:{width:"100%",flex:1,padding:5}},o.a.createElement(we.b,{options:this.state.options,data:l})))}}]),a}(o.a.PureComponent),Te=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={loading:!0,error:null,week_ranking:[],group_graph:[],personal_graph:[],year_sales:[],product_resume:[],group_ranking:[]},e.onMounted(e.match.path),n}return Object(u.a)(a,[{key:"componentWillMount",value:function(){var e=this;Y.Stats(["week_ranking","personal_graph","group_graph","year_sales","product_resume","group_ranking"]).then((function(t){return e.setState(Object(c.a)(Object(c.a)({},t),{},{loading:null}))})).catch((function(t){e.setState({error:t,loading:null})}))}},{key:"render",value:function(){for(var e=this.state,t=e.loading,a=e.error,n=e.week_ranking,r=e.personal_graph,l=e.group_graph,i=e.year_sales,s=e.product_resume,u=e.group_ranking,d=this.props,m=d.rol,h=d.grupo,p=d.username,g=n.map((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{stat:e.perfomance,position:t+1})})),f=n.map((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{stat:e.monto_acumulativo,position:t+1,ultimoPedido:e.fechaNacimiento})})),v={month:0,year:0},b=new Date,y=0;y<i.length;y++){var O=i[y];O.createdAt=new Date(O.createdAt),O.createdAt.getMonth()===b.getMonth()&&O.createdAt.getFullYear()===b.getFullYear()&&(v.month+=O.profit),v.year+=O.profit}return t?o.a.createElement("div",{style:{width:"100%",paddingTop:100,textAlign:"center"}},o.a.createElement(B.a,{size:100}),o.a.createElement(E.a,{variant:"h6"},"CARGANDO...")):a?o.a.createElement("div",{style:{width:"100%",paddingTop:100,textAlign:"center"}},o.a.createElement(E.a,{variant:"h5"},"OCURRI\xd3 UN PROBLEMA"),o.a.createElement(E.a,{variant:"subtitle1"},a.message),o.a.createElement(E.a,{variant:"body1"},a.status," ",a.code)):o.a.createElement(H.a,{container:!0,spacing:2,style:{margin:"auto",width:"calc(100% - 10px)",textAlign:"center"}},o.a.createElement(H.a,{item:!0,xs:12},o.a.createElement(E.a,{color:"primary",variant:"h6"},"Hola ",p,", Esta es tu cuenta personal de Nat\xfa."),o.a.createElement(E.a,{variant:"subtitle1"},"Estamos aqu\xed para prosperar juntos. Estos son los indicadores de tu trabajo.")),o.a.createElement(H.a,{item:!0,sm:6,xs:12},o.a.createElement(Ae,{data:u,title:"RANKING DE GRUPOS"})),o.a.createElement(H.a,{item:!0,sm:6,xs:12},o.a.createElement(xe,{data:r,title:"ESTADISTICA SEMANAL"})),o.a.createElement(H.a,{item:!0,sm:6,xs:12},o.a.createElement(xe,{data:l,title:h||"ESTADISTICA MENSUAL"})),o.a.createElement(H.a,{item:!0,sm:6,xs:12},o.a.createElement(De,{data:s,title:"PRODUCTOS VENDIDOS"})),o.a.createElement(H.a,{item:!0,sm:6,xs:12},o.a.createElement(Se,{month:v.month,year:v.year})),o.a.createElement(C.a,{smUp:!0},o.a.createElement(H.a,{item:!0,xs:12},o.a.createElement(oe.a,null))),o.a.createElement(H.a,{item:!0,sm:6,xs:12},o.a.createElement(Ae,{data:n,title:"RANKING DE LA SEMANA",showLastOrder:1!==m})),o.a.createElement(H.a,{item:!0,sm:6,xs:12},o.a.createElement(Ae,{data:g,title:"PROGRESO DE LA SEMANA",perfomanceStat:!0})),1!==m&&o.a.createElement(H.a,{item:!0,sm:6,xs:12},o.a.createElement(Ae,{data:f,title:"RANKING ACUMULATIVO",showLastOrder:!0})))}}]),a}(o.a.Component),Re=a(283),Pe=a(284),Ne=a(285),Me=a(286),_e=a(287),Le=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:null,error:null,data:[]},e.handleClick=function(){if(!e.state.loading){var t=e.valueOf("desde"),a=e.valueOf("hasta"),n=e.valueOf("estado");if(!t||isNaN(+new Date(t)))return alert("Selecciona la fecha desde");if(!a||isNaN(+new Date(a)))return alert("Selecciona la fecha hasta");if(!n)return alert("Selecciona el estado");e.setState({loading:!0}),t=new Date(t).toJSON(),a=new Date(a).toJSON(),Y.ProductSalesReport({desde:t,hasta:a,estado:n}).then((function(t){return e.setState({data:t,loading:null,error:null})})).catch((function(t){return e.setState({error:t,loading:null})}))}},e}return Object(u.a)(a,[{key:"valueOf",value:function(e){var t=document.getElementById(e);return t&&t.value}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.error,n=e.loading;return o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement("div",null,o.a.createElement(W.a,{style:{marginLeft:10,marginRight:10},type:"datetime-local",inputProps:{id:"desde"}}),o.a.createElement(W.a,{style:{marginLeft:10,marginRight:10},type:"datetime-local",inputProps:{id:"hasta"}}),o.a.createElement(W.a,{style:{marginLeft:10,marginRight:10},select:!0,SelectProps:{native:!0},inputProps:{id:"estado"}},o.a.createElement("option",{value:1},"PENDIENTE"),o.a.createElement("option",{value:0},"APROBADO"),o.a.createElement("option",{value:2},"RECHAZADO"),o.a.createElement("option",{value:3},"ENTREGADO")),o.a.createElement(le.a,{disabled:n,style:{marginLeft:10,marginRight:10},variant:"outlined",onClick:this.handleClick},"GENERAR")),n?o.a.createElement("div",{style:{width:"100%",marginTop:100,textAlign:"center"}},o.a.createElement(B.a,{size:100}),o.a.createElement(E.a,{variant:"h6"},"CARGANDO...")):a?o.a.createElement("div",{style:{width:"100%",marginTop:100,textAlign:"center"}},o.a.createElement(E.a,{variant:"h4"},"OCURRI\xd3 UN ERROR"),o.a.createElement(E.a,{variant:"subtitle1"},a.message),o.a.createElement(E.a,{variant:"subtitle2"},a.code," ",a.status)):o.a.createElement("div",null,o.a.createElement(Re.a,null,o.a.createElement(Pe.a,null,o.a.createElement(Ne.a,null,o.a.createElement(Me.a,{component:"th"},"Fecha"),o.a.createElement(Me.a,{component:"th"},"#"),o.a.createElement(Me.a,{component:"th"},"Usuario"),o.a.createElement(Me.a,{component:"th"},"Estado"),o.a.createElement(Me.a,{component:"th"},"Observacion"),o.a.createElement(Me.a,{component:"th"},"Fecha Env\xedo"),o.a.createElement(Me.a,{component:"th"},"Entregado"),o.a.createElement(Me.a,{component:"th"},"Motivo Anulacion"),o.a.createElement(Me.a,{component:"th"},"Producto"),o.a.createElement(Me.a,{component:"th"},"Cant"))),o.a.createElement(_e.a,null,t.map((function(e){return o.a.createElement(Ne.a,{key:e.id},o.a.createElement(Me.a,null,new Date(e.createdAt).toLocaleDateString()),o.a.createElement(Me.a,null,e.idPedido),o.a.createElement(Me.a,null,e.username),o.a.createElement(Me.a,null,e.estado),o.a.createElement(Me.a,null,e.observacion),o.a.createElement(Me.a,null,e.fechaEntrega&&new Date(e.fechaEntrega).toLocaleDateString()),o.a.createElement(Me.a,null,e.fechaEntrega&&new Date(e.fechaEntrega).toLocaleDateString()),o.a.createElement(Me.a,null,e.motivoAnulacion),o.a.createElement(Me.a,null,e.descripcion),o.a.createElement(Me.a,null,e.cantidad))}))))))}}]),a}(o.a.Component),Ie=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={currentTab:0},n.handleChange=function(e,t){n.setState({currentTab:t})},e.onMounted(e.match.path),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.currentTab;return o.a.createElement(U.a,{style:{margin:10}},o.a.createElement(G.a,{style:{marginBottom:10},value:e,onChange:this.handleChange},o.a.createElement(F.a,{label:"Detalle de Productos"})),0===e&&o.a.createElement(Le,null))}}]),a}(o.a.Component),Be=[{label:"Inicio",Icon:S.a,path:"/feed"},{label:"Nuevo Pedido",Icon:k.a,path:"/order"},{label:"Pedidos",Icon:D.a,path:"/my-orders"},{label:"Reportes",Icon:T.a,path:"/reports"}],Ge=Object(g.a)((function(e){return{drawer:Object(p.a)({},e.breakpoints.up("sm"),{width:200,flexShrink:0}),toolbar:e.mixins.toolbar,drawerPaper:{width:200},content:Object(p.a)({flexGrow:1},e.breakpoints.up("sm"),{marginLeft:200}),appBar:{display:"block"}}}))(function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={selected:"",isMenuOpen:!1,username:"",grupo:"",token:"",rol:0,accesos:[]},n.onMounted=n.onMounted.bind(Object(d.a)(n)),n.handleMenu=n.handleMenu.bind(Object(d.a)(n)),n.closeMenu=n.closeMenu.bind(Object(d.a)(n)),n.state.username=e.username,n.state.grupo=e.grupo,n.state.rol=e.rol,n.state.accesos=[].concat(Be),3!==n.state.rol&&(n.state.accesos=[].concat(Be),n.state.accesos.splice(3,1)),n}return Object(u.a)(a,[{key:"onMounted",value:function(e){this.setState({selected:e})}},{key:"handleMenu",value:function(){this.setState((function(e){var t=Object(c.a)({},e);return t.isMenuOpen=!t.isMenuOpen,t}))}},{key:"closeMenu",value:function(){this.setState({isMenuOpen:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selected,n=t.isMenuOpen,r=t.username,l=t.grupo,i=(t.accesos,this.props),c=i.window,s=i.classes,u=void 0!==c?function(){return c().document.body}:void 0,d=o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement("div",{style:{textAlign:"center",marginTop:10,marginBottom:10}},o.a.createElement(E.a,{style:{display:"block"},variant:"button"},r),o.a.createElement(E.a,{style:{display:"block"},variant:"caption"},l)),o.a.createElement(f.a,{style:{flex:1}},this.state.accesos.map((function(t){return o.a.createElement(v.a,{onClick:e.closeMenu,selected:a===t.path,component:M.b,to:t.path,button:!0,key:t.label},o.a.createElement(b.a,null,o.a.createElement(t.Icon,null)),o.a.createElement(y.a,{style:{flex:1},primary:t.label}))}))),o.a.createElement(v.a,{component:"a",target:"_a",href:"https://wa.me/"},o.a.createElement(b.a,null," ",o.a.createElement(R.a,null)," "),o.a.createElement(y.a,{primary:"AYUDA"})));return o.a.createElement(M.a,null,o.a.createElement("div",{style:{width:"100%",height:"100%"}},o.a.createElement(O.a,null),o.a.createElement("nav",{className:s.drawer},o.a.createElement(C.a,{smUp:!0,implementation:"css"},o.a.createElement(A.a,{container:u,variant:"temporary",anchor:"left",open:n,onClose:this.closeMenu,classes:{paper:s.drawerPaper},ModalProps:{keepMounted:!0}},o.a.createElement("div",{className:s.toolbar,style:{textAlign:"right"}},o.a.createElement(w.a,{onClick:this.handleMenu},o.a.createElement(P.a,null))),d)),o.a.createElement(C.a,{xsDown:!0,implementation:"css"},o.a.createElement(A.a,{classes:{paper:s.drawerPaper},variant:"permanent",open:!0},d))),o.a.createElement(C.a,{smUp:!0,implementation:"css"},o.a.createElement(x.a,{position:"fixed",className:s.x},o.a.createElement(j.a,null,o.a.createElement(w.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:this.handleMenu},o.a.createElement(N.a,null)),o.a.createElement(E.a,{style:{flexGrow:1}},(Be.find((function(e){return e.path===a}))||{}).label)))),o.a.createElement("main",{className:s.content},o.a.createElement(C.a,{smUp:!0,implementation:"css"},o.a.createElement("div",{className:s.toolbar})),o.a.createElement(_.d,null,o.a.createElement(_.b,{path:"/feed",render:function(t){return o.a.createElement(Te,Object.assign({},t,{onMounted:e.onMounted,grupo:e.state.grupo,username:e.state.username,rol:e.state.rol}))}}),o.a.createElement(_.b,{path:"/order",render:function(t){return o.a.createElement(fe,{onMounted:e.onMounted,rol:e.state.rol})}}),o.a.createElement(_.b,{path:"/my-orders",render:function(t){return o.a.createElement(be,Object.assign({},t,{rol:e.state.rol,onMounted:e.onMounted}))}}),o.a.createElement(_.b,{path:"/reports",render:function(t){return o.a.createElement(Ie,Object.assign({},t,{rol:e.state.rol,onMounted:e.onMounted}))}}),o.a.createElement(_.a,{exact:!0,path:"/",to:"/feed"})))))}}]),a}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fe=a(299),Ue=a(300),We=a(301),Ve=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={loading:!1,user:"",pwd:"",error:null,isPasswordVisible:!1},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.handlePassword=n.handlePassword.bind(Object(d.a)(n)),Y.KEY="",n}return Object(u.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"componentDidMount",value:function(){setTimeout((function(){return window.requestAnimationFrame((function(){document.getElementById("user-textfield").focus()}))}),100)}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.loading){var a=this.state.user&&this.state.user.toString().trim(),n=this.state.pwd&&this.state.pwd.toString().trim();if(!a)return alert("Digite su usuario");if(!n)return alert("Digite su contrase\xf1a");this.setState({loading:!0,error:null}),Y.Login({user:a,pwd:n}).then((function(e){t.setState({loading:null}),t.props.onLoggedIn(Object(c.a)({},e))})).catch((function(e){return t.setState({loading:null,error:e})}))}}},{key:"handlePassword",value:function(e){this.setState((function(e){var t=Object(c.a)({},e);return t.isPasswordVisible=!t.isPasswordVisible,t}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.error,n=e.user,r=e.pwd,l=e.isPasswordVisible;return o.a.createElement("div",{style:{paddingTop:20}},o.a.createElement($.a,{style:{width:"100%",maxWidth:300,margin:"auto"}},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement(J.a,null,o.a.createElement("img",{alt:"Logo",src:"http://natucosmetic.com/wp-content/uploads/2020/03/LOGO-NATU-PNG.png",style:{width:"100%",maxHeight:"40vh"}}),o.a.createElement(W.a,{inputProps:{id:"user-textfield"},onChange:this.handleChange,value:n,label:"Usuario",name:"user",fullWidth:!0,disabled:t,style:ze}),o.a.createElement(W.a,{onChange:this.handleChange,value:r,name:"pwd",label:"Contrase\xf1a",type:l?"input":"password",fullWidth:!0,disabled:t,style:ze,InputProps:{endAdornment:o.a.createElement(Fe.a,{position:"end"},o.a.createElement(w.a,{onClick:this.handlePassword},l?o.a.createElement(Ue.a,null):o.a.createElement(We.a,null)))}}),a&&o.a.createElement(E.a,{color:"secondary",variant:"body1",style:{textAlign:"center"}},a.message),o.a.createElement(le.a,{type:"submit",variant:"outlined",style:ze,color:"primary",disabled:t,fullWidth:!0},t?"CARGANDO...":"ENTRAR")))))}}]),a}(o.a.Component),ze={marginTop:10,marginBottom:10};function Ye(e){Y.KEY=e.token,console.info("API.KEY assinged:",e.token),i.a.render(o.a.createElement(Ge,e),document.getElementById("root"))}i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Ve,{onLoggedIn:Ye})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[125,1,2]]]);
//# sourceMappingURL=main.9aaad645.chunk.js.map