{"version":3,"sources":["Services/Geo.ts","Services/API.ts","Components/Order/ProductGrid.tsx","Components/Order/ConfirmOrder.tsx","Components/Order/Location.tsx","Components/Order/Payment.tsx","Components/Order/Survey.tsx","Services/Preferences.ts","Components/Message.tsx","Components/RouteMessage.tsx","Components/Order/index.tsx","Services/Calcs.ts","Components/OrderList/OrderDetails.tsx","Components/OrderList/index.tsx","Components/Ranking.tsx","Components/Feed/RankingCard.tsx","Components/Feed/GroupCard.tsx","Components/Feed/ProfitCard.tsx","Components/Feed/PieCard.tsx","Components/Feed/index.tsx","Components/Reports/ProductSales.tsx","Components/Reports/index.tsx","App.tsx","serviceWorker.ts","Components/Login.tsx","index.tsx"],"names":["GeoCoder","DOMAIN","KEY","body","this","Fetch","method","idRol","Promise","resolve","montoDesde","porcentaje","id","array_items","join","params","param_str","Object","keys","length","URLSearchParams","toString","URI","options","DEFAULTS","cache","mode","ops","headers","JSON","stringify","fetch","then","response","ok","json","clone","catch","text","x","message","status","statusText","obj","ex","ProductGrid","props","visible_style","visible","display","Grid","container","alignItems","style","flex","overflow","marginTop","spacing","items","map","item","key","sm","md","xs","Card","CardMedia","component","height","objectFit","image","imgSrc","CardContent","flexDirection","Typography","variant","nombre","pvp_final","toFixed","CardActions","IconButton","onClick","onActionChanged","name","value","Add","cantidad","disabled","Remove","ConfirmOrder","show_next_discount","descuento","total","subtotal","valor","List","Row","col1","col2","col3","color","sgte_descuento_porcentaje","ListItem","sgte_descuento_falta","width","maxWidth","textAlign","QUITO_BOUNDS","west","north","east","south","QUITO","lat","lng","reject","console","info","navigator","geolocation","PositionByIP","getCurrentPosition","geoLocation","coords","latitude","longitude","fromGPS","location","bounds","google","window","maps","Geocoder","geocode","results","first","inputText","place","route","street_number","i","address_components","ii","types","type","short_name","long_name","find","formatted_address","AddressText","address","Location","state","defaultCenter","mapRef","virtualMarker","handleChange","bind","handleMapMounted","handleDragStart","handleDragEnd","Geo","currentPosition","setState","event","currentTarget","onValueChange","classList","add","PlaceFromCoords","getCenter","d","warn","remove","document","createElement","className","getDiv","appendChild","direccion","ciudad","referencia","sector","Paper","margin","padding","TextField","onChange","label","multiline","rows","React","PureComponent","marginLeft","marginRight","marginBottom","Divider","inputMode","numeroTransaccion","Button","loading","onDone","CircularProgress","size","withRouter","txt1","txt2","handleClose","handleSubmit","unblock","history","block","preventDefault","onClose","API","ActionOrder","action","goBack","alert","Dialog","open","onSubmit","DialogContent","title","autoFocus","fullWidth","DialogActions","Component","Preferences","localStorage","getItem","parse","undefined","value_txt","setItem","removeItem","Message","Boolean","children","DialogTitle","search","get","guardarBorrador","isDirty","choosen","productList","filter","observacion","position","Set","push","match","path","a","b","handleTab","handleAction","handleValueChange","handleDone","onMounted","currentTab","tablaDescuentos","descuentoAplica","onbeforeunload","_","unblockNavigation","routerWillLeave","all","GetProducts","getDiscounts","rol","stored_direccion","Get","updates","hasOwnProperty","before","times","avoidIsDirty","nextLocation","pathname","indexOf","confirm","failed_msg","trim","SaveOrder","detalle","descuentoPorcentaje","descuentoTotal","prev","cant","isNaN","cantidad_desde","result","Totals","sorted","sort","founded","desc","next","EstimarDescuento","remain_state","choosenItems","paddingTop","Tabs","Tab","Payment","RouteMessage","Survey","Fab","bottom","right","Save","OrderDetails","_fechaEntrega","shouldRefresh","handleButton","estado","fechaEntrega","prompt","GetOrder","order","numero","fechaCreacion","username","telefono","survey1","survey2","motivoAnulacion","editable","Date","toLocaleString","toLocaleDateString","href","target","data","msg","handleClick","handleMessage","GetOrders","err","code","refresh","paddingBottom","overflowX","Hidden","xsDown","implementation","borderBottom","button","smUp","EstadoToVariant","toDateString","render","Ranking","showLastOrder","perfomanceStat","stat","r","index","me","paddingLeft","date","ahora","getDate","getMonth","getFullYear","toLocaleTimeString","este_dia","DateToString","ultimoPedido","RankingCard","CardHeader","GroupCard","legend","maintainAspectRatio","scales","yAxes","ticks","maxTicksLimit","xAxes","labels","values","el","datasets","backgroundColor","borderColor","fill","ProfitCard","month","year","reservas","promo","reduceMoney","borderLeft","dense","ListItemText","primary","ListItemSecondaryAction","PieCard","Feed","error","week_ranking","group_graph","personal_graph","year_sales","product_resume","group_ranking","Stats","grupo","week_progress","perfomance","cumulative_ranking","monto_acumulativo","fechaNacimiento","resume","createdAt","profit","ProductSales","desde","valueOf","hasta","toJSON","ProductSalesReport","ID","getElementById","inputProps","select","SelectProps","native","Table","TableHead","TableRow","TableCell","TableBody","idPedido","descripcion","Reports","OPCIONES","Icon","Inbox","ShoppingCart","ListAlt","Report","withStyles","theme","drawer","breakpoints","up","flexShrink","toolbar","mixins","drawerPaper","content","flexGrow","appBar","selected","isMenuOpen","token","accesos","handleMenu","closeMenu","splice","classes","drawerChildren","o","Link","to","ListItemIcon","Help","CssBaseline","Drawer","anchor","paper","ModalProps","keepMounted","Close","AppBar","Toolbar","aria-label","edge","Menu","exact","hostname","Login","user","pwd","isPasswordVisible","handlePassword","setTimeout","requestAnimationFrame","focus","onLoggedIn","alt","src","maxHeight","defaultStyle","InputProps","endAdornment","InputAdornment","VisibilityOff","Visibility","StartApp","ReactDOM","StrictMode","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9aaad645.chunk.js","sourcesContent":["var GeoCoder;\r\nclass GeoLocation {\r\n    currentPosition() {\r\n        return new Promise((resolve, reject) => {\r\n            console.info(\"obteniendo posicion actual con navigator.geolocation.getCurrentPosition\");\r\n            if (!navigator.geolocation) {\r\n                console.info(\"navigator.geolocation.getCurrentPosition no existe en este navegador, intentando con PositionByIP()\");\r\n                return PositionByIP().then(resolve).catch(reject);\r\n            }\r\n            navigator.geolocation.getCurrentPosition(geoLocation => {\r\n                console.info(\"navigator.geolocation.getCurrentPosition ha obtenido la posicion\");\r\n                resolve({\r\n                    lat: geoLocation.coords.latitude,\r\n                    lng: geoLocation.coords.longitude,\r\n                    fromGPS: true\r\n                });\r\n            }, () => {\r\n                console.info(\"navigator.geolocation.getCurrentPosition fallÃ³, intentando con PositionByIP()\");\r\n                PositionByIP().then(resolve).catch(reject);\r\n            }\r\n            );\r\n        });\r\n    }\r\n    CanUseGPS() {\r\n        return new Promise((resolve, reject) => {\r\n            if (!navigator.geolocation) return reject();\r\n            navigator.geolocation.getCurrentPosition(resolve, reject);\r\n        });\r\n    }\r\n    PlaceFromCoords(location, bounds?): Promise<{ inputText: string }> {\r\n        const { google } = window as any;\r\n        if (!GeoCoder) GeoCoder = new google.maps.Geocoder();\r\n        return new Promise((resolve, reject) => {\r\n            GeoCoder.geocode({ location, bounds: bounds || this.QUITO_BOUNDS }, (results, status) => {\r\n                if (status === \"ZERO_RESULTS\") {\r\n                    return reject({ status, message: \"No se encontraron resultados\" });\r\n                }\r\n                const first = results.length && results[0];\r\n                if (!first) return reject({ message: \"No se encontraron resultados\" });\r\n                first.inputText = AddressText(first);\r\n                resolve(first);\r\n            });\r\n        })\r\n    }\r\n    CoordsFromPlace(address, bounds?) {\r\n        const { google } = window as any;\r\n        if (!GeoCoder) GeoCoder = new google.maps.Geocoder();\r\n        return new Promise((resolve, reject) => {\r\n            GeoCoder.geocode({ address, bounds: bounds || this.QUITO_BOUNDS }, (results, status) => {\r\n                if (status === \"ZERO_RESULTS\") {\r\n                    return reject({ status, message: \"No se encontraron resultados\" });\r\n                }\r\n                const first = results.length && results[0];\r\n                if (!first) return reject({ message: \"No se encontraron resultados\" });\r\n                resolve(first);\r\n            });\r\n        })\r\n    }\r\n    QUITO_BOUNDS = {\r\n        west: -78.85300,\r\n        north: -0.04875,\r\n        east: -78.17184,\r\n        south: -0.39207\r\n    }\r\n    QUITO = {\r\n        lat: -0.189515,\r\n        lng: -78.488167\r\n    }\r\n}\r\nexport default new GeoLocation();\r\n\r\n\r\nfunction AddressText(place) {\r\n    var route;\r\n    var street_number;\r\n    for (let i = 0; i < place.address_components.length; i++) {\r\n        const component = place.address_components[i];\r\n        for (let ii = 0; ii < component.types.length; ii++) {\r\n            const type = component.types[ii];\r\n            if (type === \"street_address\") return component.short_name || component.long_name;\r\n            if (component.types.find(x => x === \"street_number\") && component.types.find(x => x === \"route\"))\r\n                return component.short_name || component.long_name;\r\n\r\n            if (type === \"route\" && !route) route = component.short_name || component.long_name;\r\n            if (type === \"street_number\" && !street_number) street_number = component.short_name || component.long_name;\r\n        }\r\n    }\r\n    if (route && street_number) return route + \" \" + street_number;\r\n    return place.formatted_address;\r\n}\r\nfunction PositionByIP() {\r\n    return fetch(\"https://ipapi.co/json/\").then(x => x.json())\r\n        .then(info => ({ lat: info.latitude, lng: info.longitude }));\r\n}","const DOMAIN = \"https://natuapp.ue.r.appspot.com\";\r\n//const DOMAIN = \"http://localhost:9000\";\r\nclass API {\r\n    KEY = \"\";\r\n    Login(body) {\r\n        return this.Fetch(\"user/login\", { body, method: \"POST\" });\r\n    }\r\n\r\n    GetProducts() {\r\n        return this.Fetch(\"product\");\r\n    }\r\n\r\n    getDiscounts(idRol: number): Promise<Descuento[]> {\r\n        if (idRol === 3) return Promise.resolve([]);\r\n\r\n        return Promise.resolve([\r\n            { montoDesde: 60, porcentaje: 20 },\r\n            { montoDesde: 250, porcentaje: 25 },\r\n            { montoDesde: 500, porcentaje: 30 }\r\n        ]);\r\n    }\r\n\r\n    GetOrders(): Promise<Order[]> {\r\n        return this.Fetch(\"order\");\r\n    }\r\n    GetOrder(id: number): Promise<Order> {\r\n        return this.Fetch(\"order/\" + id);\r\n    }\r\n    SaveOrder(body: Order): Promise<any> {\r\n        return this.Fetch(\"order\", {\r\n            method: \"POST\",\r\n            body\r\n        });\r\n    }\r\n    ActionOrder(id: number | string, body: { action: \"SURVEY\" | \"APROBAR\" | \"RECHAZAR\" | \"ENTREGAR\", value: any }): Promise<any> {\r\n        return this.Fetch(\"order/\" + id, {\r\n            method: \"PUT\",\r\n            body\r\n        });\r\n    }\r\n\r\n    Stats(array_items) {\r\n        return this.Fetch(\"dashboard?data=\" + array_items.join(\",\"));\r\n    }\r\n    ProductSalesReport(params: { desde: string, hasta: string, estado: any }) {\r\n        var param_str = \"\";\r\n        if (params && Object.keys(params).length)\r\n            param_str = \"?\" + new URLSearchParams(params).toString();\r\n\r\n        return this.Fetch(\"reports/product-sales\" + param_str);\r\n    }\r\n\r\n    private Fetch(URI, options: SpecialRequest = {}) {\r\n        const DEFAULTS: any = {\r\n            method: \"GET\",\r\n            cache: \"reload\",\r\n            mode: \"cors\"\r\n        };\r\n        var ops: RequestInit = { ...DEFAULTS, ...options };\r\n        if (!ops.headers) ops.headers = {};\r\n        ops.headers['Content-Type'] = 'application/json';\r\n        ops.headers['Access-Control-Allow-Origin'] = '*';\r\n\r\n        if (this.KEY) {\r\n            if (!ops.headers) ops.headers = {};\r\n            ops.headers[\"Authorization\"] = 'Basic ' + this.KEY;\r\n        }\r\n\r\n        if (ops.body && (typeof ops.body !== typeof \"\"))\r\n            ops.body = JSON.stringify(ops.body);\r\n\r\n        return fetch(DOMAIN + \"/\" + URI, ops).then(response => {\r\n            if (response.ok) return response.json();\r\n            return response.clone().json()\r\n                .catch(() => {\r\n                    return response.text().then(x => {\r\n                        throw {\r\n                            message: x,\r\n                            status: response.status,\r\n                            statusText: response.statusText\r\n                        }\r\n                    })\r\n                }).then(obj => {\r\n                    throw {\r\n                        ...obj,\r\n                        status: response.status,\r\n                        statusText: response.statusText\r\n                    }\r\n                })\r\n        }).catch(ex => {\r\n            if (ex.message === \"Failed to fetch\") {\r\n                throw {\r\n                    message: \"Este servicio no se encuentra disponible por el momento. Intentelo mÃ¡s tarde.\",\r\n                    status: 0\r\n                }\r\n            }\r\n            if (!ex.message) ex.message = ex.statusText;\r\n            throw ex;\r\n        });\r\n    }\r\n}\r\nexport default new API();\r\n\r\ninterface SpecialRequest extends RequestInit {\r\n    body?: any\r\n}","import React from \"react\";\r\nimport { Grid, Card, CardContent, CardActions, CardMedia, Typography, IconButton } from \"@material-ui/core\";\r\nimport { Add, Remove } from \"@material-ui/icons\";\r\n\r\nexport default function\r\n    ProductGrid(props: { onActionChanged: any, items: any[], visible: boolean }) {\r\n    const visible_style: any = {}\r\n    if (!props.visible) visible_style.display = \"none\";\r\n    return (<Grid\r\n        container\r\n        alignItems=\"center\"\r\n        style={{ flex: 1, overflow: \"auto\", marginTop: 5, ...visible_style }}\r\n        spacing={3}>\r\n        {props.items.map((item: any) => (<Grid key={item.id} item sm={6} md={4} xs={12}>\r\n            <Card>\r\n                <CardMedia component=\"img\" style={{ height: 180, objectFit: \"contain\" }} image={item.imgSrc || \"https://diegopq95.github.io/take-orders/img/default.png\"} />\r\n                <CardContent style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <Typography style={{ flex: 1, height: 60, overflow: \"hidden\" }} variant=\"subtitle1\">{item.nombre}</Typography>\r\n                    <Typography variant=\"h6\">$ {item.pvp_final.toFixed(2)}</Typography>\r\n                </CardContent>\r\n                <CardActions>\r\n                    <IconButton onClick={props.onActionChanged} name=\"+\" value={item.id}>\r\n                        <Add />\r\n                    </IconButton>\r\n                    <Typography variant=\"body1\">{item.cantidad}</Typography>\r\n                    <IconButton disabled={!(item.cantidad > 0)} onClick={props.onActionChanged} name=\"-\" value={item.id}>\r\n                        <Remove />\r\n                    </IconButton>\r\n                </CardActions>\r\n            </Card>\r\n        </Grid>))}\r\n    </Grid>)\r\n}","import React from \"react\";\r\nimport { List, ListItem, Typography } from \"@material-ui/core\";\r\nexport default function ConfirmOrder(props: {\r\n    items: any[],\r\n    subtotal: number,\r\n    total: number,\r\n    show_next_discount?: boolean,\r\n    descuento?: DescuentoCalc\r\n}) {\r\n    var { items, show_next_discount, descuento, total, subtotal } = props;\r\n    if (!descuento) descuento = { porcentaje: 0, valor: 0 };\r\n    return (<List>\r\n        {items.map(item => <Row key={item.id} col1={item.nombre} col2={item.cantidad} col3={\"$ \" + (item.pvp_final * item.cantidad).toFixed(2)} />)}\r\n        <Row col1={\"SUBTOTAL\"} col3={`$ ${subtotal.toFixed(2)}`} />\r\n        <Row col1={`TU GANANCIA (${descuento.porcentaje}%) EN ESTE PEDIDO`} col3={`$ ${descuento.valor.toFixed(2)}`} color=\"primary\" />\r\n        <Row col1={\"TOTAL\"} variant={\"subtitle2\"} col3={`$ ${total.toFixed(2)}`} />\r\n        {(show_next_discount && descuento.sgte_descuento_porcentaje)\r\n            ? <ListItem>\r\n                <Typography variant=\"subtitle1\" color=\"secondary\">{`ObtÃ©n el ${descuento.sgte_descuento_porcentaje}% de descuento agregando ${descuento.sgte_descuento_falta.toFixed(2)} USD mÃ¡s a tu pedido`}</Typography>\r\n            </ListItem>\r\n            : null}\r\n    </List>);\r\n}\r\n\r\n\r\nfunction Row(props: { col1: string, col2?: string | number, col3: string, color?: any, variant?: any }) {\r\n    const { col1, col2, col3, color, variant } = props;\r\n    return (<ListItem>\r\n        <div style={{ width: \"100%\", display: \"table\" }}>\r\n            <Typography color={color || \"initial\"} style={{ display: \"table-cell\" }} variant={variant || \"body1\"}>{col1}</Typography>\r\n            {col2 && <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"15%\", maxWidth: 100, textAlign: \"right\" }} variant={variant || \"body1\"}>{col2}</Typography>}\r\n            <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"25%\", maxWidth: 100, textAlign: \"right\" }} variant={variant || \"body1\"}>{col3}</Typography>\r\n        </div>\r\n    </ListItem>)\r\n}","import React from \"react\";\r\nimport { TextField, Paper } from \"@material-ui/core\";\r\nimport Geo from \"../../Services/Geo\";\r\nexport default class Location extends React.PureComponent<{\r\n    direccion: string,\r\n    ciudad: string,\r\n    sector: string,\r\n    referencia: string,\r\n    position: { lat: number, lng: number },\r\n    visible: boolean,\r\n    onValueChange: (prop: string, value: string) => void\r\n}, {}> {\r\n    state = {\r\n        defaultCenter: null\r\n    }\r\n    mapRef;\r\n    virtualMarker;\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleMapMounted = this.handleMapMounted.bind(this);\r\n        this.handleDragStart = this.handleDragStart.bind(this);\r\n        this.handleDragEnd = this.handleDragEnd.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        Geo.currentPosition()\r\n            .then(x => this.setState({ defaultCenter: x }))\r\n    }\r\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const { name, value } = event.currentTarget;\r\n        this.props.onValueChange(name, value);\r\n    }\r\n    handleDragStart() {\r\n        this.virtualMarker.classList.add(\"on-move\");\r\n    }\r\n    handleDragEnd() {\r\n        Geo.PlaceFromCoords(this.mapRef.getCenter())\r\n            .then(d => this.props.onValueChange(\"direccion\", d.inputText))\r\n            .catch(ex => console.warn(\"PlaceFromCoords ERROR\", ex));\r\n        this.virtualMarker.classList.remove(\"on-move\");\r\n    }\r\n    handleMapMounted(map) {\r\n        this.mapRef = map;\r\n        if (!this.mapRef) return;\r\n        this.virtualMarker = document.createElement(\"div\");\r\n        this.virtualMarker.className = \"centerMarker\";\r\n        map.getDiv().appendChild(this.virtualMarker);\r\n    }\r\n    render() {\r\n        const { direccion, ciudad, referencia, sector, visible } = this.props;\r\n        return (<Paper style={{ margin: \"auto\", height: \"100%\", width: \"100%\", maxWidth: 500, padding: 10, marginTop: 10, display: visible ? \"block\" : \"none\" }}>\r\n\r\n            <TextField\r\n                variant=\"outlined\"\r\n                name=\"ciudad\"\r\n                value={ciudad}\r\n                onChange={this.handleChange}\r\n                label=\"Ciudad*\"\r\n                style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n            />\r\n\r\n            <TextField\r\n                variant=\"outlined\"\r\n                name=\"sector\"\r\n                value={sector}\r\n                onChange={this.handleChange}\r\n                label=\"Sector*\"\r\n                style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n            />\r\n\r\n            <TextField\r\n                variant=\"outlined\"\r\n                name=\"direccion\"\r\n                value={direccion}\r\n                onChange={this.handleChange}\r\n                label=\"Direccion Exacta*\"\r\n                multiline\r\n                rows={3}\r\n                style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n            />\r\n\r\n            <TextField\r\n                variant=\"outlined\"\r\n                name=\"referencia\"\r\n                value={referencia}\r\n                onChange={this.handleChange}\r\n                label=\"Referencia\"\r\n                multiline\r\n                rows={2}\r\n                style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n            />\r\n\r\n        </Paper>)\r\n    }\r\n}\r\n/*\r\nconst Map = withScriptjs(withGoogleMap(function (props: any) {\r\n    const { onMounted, ...google_maps_props } = props;\r\n    return (<GoogleMap\r\n        ref={onMounted}\r\n        {...google_maps_props}\r\n        options={{\r\n            disableDefaultUI: true,\r\n            zoomControl: true,\r\n            clickableIcons: false\r\n        }}\r\n    >\r\n\r\n    </GoogleMap>)\r\n}));\r\n\r\n            {defaultCenter && <Map\r\n                googleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyDxc5H1-I6rNF0PZH4Kiw2YsW0kMCWC9_Q&v=3.exp&libraries=geometry,drawing,places\"\r\n                loadingElement={<div style={{ height: `100%` }} />}\r\n                containerElement={<div id=\"location-map-container\" />}\r\n                mapElement={<div style={{ height: `100%` }} />}\r\n                defaultCenter={defaultCenter}\r\n                defaultZoom={15}\r\n                onMounted={this.handleMapMounted}\r\n                onDragStart={this.handleDragStart}\r\n                onDragEnd={this.handleDragEnd}\r\n            />}\r\n */","import React from \"react\";\r\nimport { Paper, Typography, TextField, Button, Divider, CircularProgress } from \"@material-ui/core\";\r\nexport default function (props: {\r\n    onValueChange: Function,\r\n    numeroTransaccion: string,\r\n    items: any[],\r\n    onDone: any,\r\n    total: number,\r\n    loading: boolean,\r\n    visible: boolean\r\n}) {\r\n\r\n    return (<Paper style={{ maxWidth: 400, padding: 10, height: \"100%\", marginLeft: \"auto\", marginRight: \"auto\", display: props.visible ? \"block\" : \"none\" }}>\r\n        <Typography style={{ marginTop: 10, marginBottom: 10, textAlign: \"center\" }} variant=\"h6\">Total a Pagar: ${props.total.toFixed(2)}</Typography>\r\n        <Divider />\r\n        <div style={{ padding: 20 }}>\r\n            <Typography>Realiza tu pago mediante Transferencia o Deposito Bancario a la cuenta:</Typography>\r\n            <Typography>BANCO DE PICHINCHA. Cta. Cte. #123123123 </Typography>\r\n            <Typography>C.I. 0932050222</Typography>\r\n            <Typography>Natu Cosmetics S.A</Typography>\r\n        </div>\r\n\r\n        <TextField\r\n            style={{ width: \"calc(100% - 20px)\", margin: 10 }}\r\n            variant=\"outlined\"\r\n            inputMode=\"numeric\"\r\n            onChange={event => props.onValueChange(\"numeroTransaccion\", event.currentTarget.value)}\r\n            value={props.numeroTransaccion}\r\n            label=\"Numero de Comprobante\"\r\n        />\r\n        <Button disabled={props.loading} onClick={props.onDone} variant=\"outlined\" color=\"primary\" style={{ margin: 10, width: \"calc(100% - 20px)\" }}>\r\n            {props.loading ? <CircularProgress size={25} /> : \"ENVIAR\"}\r\n        </Button>\r\n    </Paper>)\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, TextField, DialogActions, Button, CircularProgress } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(class Survey extends React.Component<any, any> {\r\n    state = { txt1: \"\", txt2: \"\", loading: false, id: \"\" };\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.state.id = props.id;\r\n    }\r\n    handleChange(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    unblock() { }\r\n    componentDidMount() {\r\n        this.unblock = this.props.history.block = () =>\r\n            this.state.loading ? \"Espera un momento, tu informaciÃ³n se estÃ¡ guardando\" : null\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        const { txt1, txt2, loading, id } = this.state;\r\n        if (loading) return;\r\n        if (!txt1 && !txt2) {\r\n            return this.props.onClose();\r\n        }\r\n        this.setState({ loading: true });\r\n        API.ActionOrder(id, {\r\n            action: \"SURVEY\",\r\n            value: [txt1, txt2]\r\n        }).then(x => {\r\n            this.setState({ loading: false });\r\n            this.props.history.goBack();\r\n        }).catch(ex => {\r\n            this.setState({ loading: false });\r\n            alert(ex.message);\r\n        });\r\n    }\r\n    handleClose() {\r\n        if (this.state.loading) return;\r\n        this.props.history.goBack();\r\n    }\r\n    render() {\r\n        const { props } = this;\r\n        const { txt1, txt2, loading } = this.state;\r\n        return (<Dialog open={true} onClose={this.handleClose}>\r\n            <form onSubmit={this.handleSubmit}>\r\n                <DialogContent>\r\n                    <Typography style={{ textAlign: \"center\" }} variant=\"h6\" >{props.title}</Typography>\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">CÃ³mo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                    <TextField autoFocus={true} name=\"txt1\" multiline rows={2} label=\"Escribe tu respuesta\" value={txt1} onChange={this.handleChange} fullWidth />\r\n\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">Compartenos alguna expendiencia que hayan tenido tus clientes usando nuestros productos</Typography>\r\n                    <TextField name=\"txt2\" multiline rows={3} label=\"Escribe tu respuesta\" value={txt2} onChange={this.handleChange} fullWidth />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button type=\"submit\" variant=\"outlined\" >{loading ? <CircularProgress size={25} /> : \"GUARDAR\"}</Button>\r\n                </DialogActions>\r\n            </form>\r\n        </Dialog>)\r\n    }\r\n});","export default class Preferences {\r\n    static Get(key: \"current_order\" | \"direccion\") {\r\n        console.info(\"Getting Preference\");\r\n        var x = window.localStorage.getItem(key);\r\n        try {\r\n            return JSON.parse(x);\r\n        } catch (ex) { }\r\n        return x;\r\n    }\r\n    static Set(key: \"current_order\" | \"direccion\", value: any = undefined) {\r\n        console.info(\"Setting Preference\");\r\n        if (value === undefined) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        } else if (value === null) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        }\r\n        var value_txt = value;\r\n        if (typeof value === typeof {})\r\n            value_txt = JSON.stringify(value);\r\n\r\n        window.localStorage.setItem(key, value_txt);\r\n    }\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, DialogTitle, DialogActions, Button } from \"@material-ui/core\";\r\n\r\nexport default function Message(props: {\r\n    title?: string,\r\n    message?: string,\r\n    info?: string,\r\n    onClose: (ev) => void,\r\n    children?: any\r\n}) {\r\n    const { title, message, info, onClose } = props;\r\n    return (<Dialog open={Boolean(message) || Boolean(props.children)} onClose={onClose}>\r\n        <DialogTitle>{title}</DialogTitle>\r\n        <DialogContent style={{ textAlign: \"center\" }}>\r\n            {props.children || (<div>\r\n                <Typography variant=\"subtitle1\">{message}</Typography>\r\n                <Typography variant=\"body1\">{info}</Typography>\r\n            </div>)}\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button type=\"button\" onClick={props.onClose} >SALIR</Button>\r\n        </DialogActions>\r\n    </Dialog>);\r\n}","import React from \"react\";\r\nimport Message from \"./Message\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(function RouteMessage(props: any) {\r\n    var params: any = new URLSearchParams(props.location.search);\r\n    return (<Message title={params.get(\"a\")} message={params.get(\"b\")} onClose={x => props.history.goBack()} />)\r\n});","import React from \"react\";\r\nimport { Tabs, Tab, Paper, Typography, CircularProgress, TextField, Fab } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport ProductGrid from \"./ProductGrid\";\r\nimport ConfirmOrder from \"./ConfirmOrder\";\r\nimport Location from \"./Location\";\r\nimport Payment from \"./Payment\";\r\nimport { Totals, EstimarDescuento } from \"../../Services/Calcs\";\r\nimport Survey from \"./Survey\";\r\nimport Preferences from \"../../Services/Preferences\";\r\nimport { withRouter, Route } from \"react-router-dom\";\r\nimport RouteMessage from \"../RouteMessage\";\r\nimport { Save } from \"@material-ui/icons\";\r\n\r\nexport default withRouter(class Order extends React.PureComponent<{\r\n    onMounted: (path: string) => void,\r\n    rol: number,\r\n    router: any,\r\n    route: any,\r\n    history: any\r\n    match: any\r\n}, OrderState> {\r\n    unblockNavigation() { }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleTab = this.handleTab.bind(this);\r\n        this.handleAction = this.handleAction.bind(this);\r\n        this.handleValueChange = this.handleValueChange.bind(this);\r\n        this.handleDone = this.handleDone.bind(this);\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n\r\n        if (props.onMounted) props.onMounted(props.match.path);\r\n        this.state = {\r\n            currentTab: 0,\r\n            productList: [],\r\n            tablaDescuentos: [],\r\n            descuentoAplica: null,\r\n            subtotal: 0,\r\n            numeroTransaccion: \"\",\r\n            direccion: \"\",\r\n            ciudad: \"\",\r\n            sector: \"\",\r\n            observacion: \"\",\r\n            referencia: \"\",\r\n            position: null,\r\n            loading: \"articulos\",\r\n            isDirty: false\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        window.onbeforeunload = _ => {\r\n            if (this.state.isDirty)\r\n                return \"Tu pedido aÃºn estÃ¡ incompleto, deseas salir sin guardarlo?\";\r\n            return null;\r\n        };\r\n\r\n        this.unblockNavigation = this.props.history.block(this.routerWillLeave.bind(this));\r\n\r\n        Promise.all([API.GetProducts(), API.getDiscounts(this.props.rol)])\r\n            .then(([productList, tablaDescuentos]) => {\r\n                this.setState({ productList: productList.map(x => { x.cantidad = 0; return x }), tablaDescuentos, loading: null });\r\n                try {\r\n                    const stored_direccion = Preferences.Get(\"direccion\") || {};\r\n                    var updates: any = {};\r\n                    for (const key in stored_direccion) {\r\n                        if (this.state.hasOwnProperty(key)) {\r\n                            updates[key] = stored_direccion[key];\r\n                        }\r\n                    }\r\n                    const before = Preferences.Get(\"current_order\") || {};\r\n                    for (const key in before) {\r\n                        if (this.state.hasOwnProperty(key)) {\r\n                            updates[key] = before[key];\r\n                        }\r\n                    }\r\n                    if (!(Object.keys(updates).length || (before.choosen && before.choosen.length))) return;\r\n                    //updates.isDirty = Boolean(Object.keys(before).length) || Boolean(before.chooen && before.choosen.lengh);\r\n                    this.setState(updates);\r\n                    if (!before.choosen) return;\r\n                    for (let i = 0; i < before.choosen.length; i++) {\r\n                        const x = before.choosen[i];\r\n                        for (let times = 0; times < x.cantidad; times++) {\r\n                            this.handleAction({\r\n                                currentTarget: { name: \"+\", value: x.id }, avoidIsDirty: true\r\n                            } as any)\r\n                        }\r\n                    }\r\n                } catch (ex) { }\r\n            }).catch(ex => {\r\n                alert(ex.message)\r\n            });\r\n    }\r\n    componentWillUnmount() {\r\n        this.unblockNavigation();\r\n        window.onbeforeunload = undefined;\r\n    }\r\n    handleTab(event: any, currentTab: number) {\r\n        this.setState({ currentTab });\r\n    }\r\n    routerWillLeave(nextLocation?) {\r\n        if (nextLocation && nextLocation.pathname.indexOf(this.props.match.path) === 0) return;\r\n        if (!this.state.isDirty) return;\r\n\r\n        var confirm = window.confirm(\"Tu pedido estÃ¡ incompleto, quieres guardarlo para completarlo despuÃ©s?\");\r\n        if (confirm) {\r\n            this.guardarBorrador();\r\n        } else {\r\n            // actualizar todo!\r\n            Preferences.Set(\"current_order\");\r\n        }\r\n    }\r\n    guardarBorrador = (event?) => {\r\n        if (event && !this.state.isDirty) return;\r\n        try {\r\n            // actualizar todo!\r\n            var choosen = this.state.productList.filter(x => x.cantidad).map(x => ({ id: x.id, cantidad: x.cantidad }));\r\n            const { numeroTransaccion, direccion, ciudad, sector, observacion, referencia, position } = this.state;\r\n            Preferences.Set(\"current_order\", {\r\n                numeroTransaccion, direccion, ciudad, choosen,\r\n                sector, observacion, referencia, position\r\n            });\r\n            if (event) {\r\n                this.props.history.push(this.props.match.path + \"/msg?\" + new URLSearchParams({\r\n                    a: \"Listo\",\r\n                    b: \"Tu pedido fue guardado como borrador.\"\r\n                }).toString());\r\n                this.setState({ isDirty: false });\r\n            }\r\n        } catch (ex) { }\r\n    }\r\n\r\n    handleDone() {\r\n        var { subtotal, numeroTransaccion, ciudad, sector, observacion, referencia, direccion, position, descuentoAplica, loading } = this.state\r\n        if (loading) return;\r\n        var choosen = this.state.productList.filter(x => x.cantidad);\r\n        if (!choosen.length) return this.failed_msg(\"Debes elegir por lo menos un producto\");\r\n        if (!(ciudad && ciudad.trim().length)) return this.failed_msg(\"Digita la ciudad\");\r\n        if (!(sector && sector.trim().length)) return this.failed_msg(\"Digita el sector\");\r\n        if (!(direccion && direccion.trim().length)) return this.failed_msg(\"Digita la direccion\");\r\n        if (!(numeroTransaccion && numeroTransaccion.trim().length)) return this.failed_msg(\"Digita el numero de comprobante de pago\");\r\n        this.setState({ loading: \"guardar\" });\r\n        API.SaveOrder({\r\n            ciudad, sector, direccion, observacion, referencia,\r\n            detalle: choosen,\r\n            descuentoPorcentaje: descuentoAplica && descuentoAplica.porcentaje,\r\n            descuentoTotal: descuentoAplica && descuentoAplica.valor,\r\n            total: subtotal - ((descuentoAplica && descuentoAplica.valor) || 0),\r\n            position, numeroTransaccion\r\n        }).then(x => {\r\n            this.setState({\r\n                currentTab: 0,\r\n                descuentoAplica: null,\r\n                subtotal: 0,\r\n                numeroTransaccion: \"\",\r\n                observacion: \"\",\r\n                position: null,\r\n                loading: null,\r\n                productList: this.state.productList.map(x => {\r\n                    x.cantidad = 0;\r\n                    return x;\r\n                }),\r\n                isDirty: false\r\n            });\r\n            this.props.history.push(this.props.match.path + \"/survey/\" + x.id);\r\n            Preferences.Set(\"direccion\", {\r\n                direccion: this.state.direccion || \"\",\r\n                ciudad: this.state.ciudad || \"\",\r\n                sector: this.state.sector || \"\",\r\n                referencia: this.state.referencia || \"\"\r\n            });\r\n        }).catch(ex => {\r\n            this.failed_msg(ex.message + \" \" + (ex.status || \"\"), \"OcurriÃ³ un error\")\r\n            this.setState({\r\n                loading: null\r\n            });\r\n        });\r\n    }\r\n    failed_msg(message, title?) {\r\n        var params = new URLSearchParams({\r\n            a: title || \"No se puede guardar\",\r\n            b: message\r\n        });\r\n        this.props.history.push(this.props.match.path + \"/msg?\" + params.toString());\r\n    }\r\n    handleAction(event: React.MouseEvent<HTMLButtonElement>) {\r\n        const { name, value } = event.currentTarget;\r\n        var avoidIsDirty = (event as any).avoidIsDirty;\r\n        this.setState(prev => {\r\n            const state: any = { ...prev };\r\n            state.productList = JSON.parse(JSON.stringify(state.productList));\r\n            var item: Product = state.productList.find((a: any) => a.id === +value);\r\n            var cant: number = (item.cantidad && !isNaN(+item.cantidad) && item.cantidad) || 0;\r\n            const { cantidad_desde } = item;\r\n            if (name === \"+\") {\r\n                if (cant <= 0 && cantidad_desde) {\r\n                    cant = cantidad_desde;\r\n                } else {\r\n                    cant++;\r\n                }\r\n            } else if (name === \"-\") {\r\n                if (cant <= 10 && cantidad_desde) {\r\n                    cant = 0;\r\n                } else {\r\n                    cant--;\r\n                }\r\n            }\r\n            item.cantidad = cant;\r\n            state.subtotal = Totals(state.productList.filter(x => x.cantidad)).total;\r\n            state.descuentoAplica = EstimarDescuento(state.subtotal, state.tablaDescuentos);\r\n            if (!avoidIsDirty) {\r\n                state.isDirty = true;\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n    handleValueChange(name: string, value: string) {\r\n        this.setState({ [name]: value, isDirty: true } as any);\r\n    }\r\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const { value, name } = event.currentTarget;\r\n        this.setState({ [name]: value, isDirty: true } as any);\r\n    }\r\n    render() {\r\n        const {\r\n            currentTab, productList, numeroTransaccion, descuentoAplica, subtotal,\r\n            loading, observacion,\r\n            ...remain_state\r\n        } = this.state;\r\n        const choosenItems = productList.filter((x: any) => x.cantidad);\r\n        console.info(\"Order render\");\r\n        const total = subtotal - ((descuentoAplica && descuentoAplica.valor) || 0);\r\n        if (loading === \"articulos\") {\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h6\">CARGANDO...</Typography>\r\n            </div >);\r\n        }\r\n\r\n\r\n        return (<div style={{ width: \"100%\", height: \"calc(100% - 1px)\", display: \"flex\", flexDirection: \"column\", padding: 10, overflow: \"hidden\" }} >\r\n            <Tabs variant=\"fullWidth\" onChange={this.handleTab} value={currentTab}>\r\n                <Tab label=\"Productos\" />\r\n                <Tab label=\"Pedido\" />\r\n                <Tab label=\"DirecciÃ³n\" />\r\n                <Tab label=\"Pago\" />\r\n            </Tabs>\r\n            {currentTab === 0 && <ProductGrid visible={true} onActionChanged={this.handleAction} items={productList} />}\r\n            {currentTab === 1 && (<Paper style={{ display: currentTab === 1 ? \"block\" : \"none\", textAlign: \"center\", padding: 10, margin: \"auto\", marginTop: 10, width: \"100%\", maxWidth: 500, height: \"100%\" }}>\r\n                <Typography variant=\"h5\">TU PEDIDO</Typography>\r\n                <ConfirmOrder show_next_discount={true} items={choosenItems} descuento={descuentoAplica} subtotal={subtotal} total={total} />\r\n                <TextField variant=\"outlined\" value={observacion} name=\"observacion\" onChange={this.handleChange} style={{ width: \"calc(100% - 20px)\", margin: 10 }} label=\"Observacion\" multiline rows=\"2\" />\r\n            </Paper>)}\r\n            <Location visible={currentTab === 2} {...remain_state} onValueChange={this.handleValueChange} />\r\n            {currentTab === 3 && <Payment visible={true} loading={loading === \"guardar\"} total={total} onDone={this.handleDone} items={choosenItems} numeroTransaccion={numeroTransaccion} onValueChange={this.handleValueChange} />}\r\n\r\n            <Route path={this.props.match.path + \"/msg\"} component={RouteMessage} />\r\n            <Route path={this.props.match.path + \"/survey/:id\"} component={Survey} />\r\n\r\n            <Fab title=\"Guardar Borrador\" onClick={this.guardarBorrador} variant=\"extended\" style={{ position: \"fixed\", bottom: 20, right: 20 }} color=\"primary\">\r\n                <Save />\r\n            </Fab>\r\n        </div >)\r\n    }\r\n});\r\n\r\n\r\ninterface OrderState {\r\n    currentTab: number,\r\n    productList: Product[],\r\n    tablaDescuentos: Descuento[],\r\n    descuentoAplica: DescuentoCalc;\r\n    subtotal: number;\r\n    position: { lat: number, lng: number };\r\n    direccion: string;\r\n    sector: string;\r\n    ciudad: string;\r\n    referencia: string;\r\n    observacion: string;\r\n    numeroTransaccion: string;\r\n    loading: \"articulos\" | \"guardar\";\r\n    isDirty?: boolean;\r\n}","export function Totals(items: any[]) {\r\n    const result = {\r\n        total: 0,\r\n        cantidad: 0\r\n    }\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n        result.cantidad += item.cantidad;\r\n        result.total += (item.pvp_final * item.cantidad);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function EstimarDescuento(total: number, tablaDescuentos: Descuento[]) {\r\n    // de MAYOR a MENOR\r\n    var sorted = tablaDescuentos.sort((a, b) => b.montoDesde - a.montoDesde);\r\n    var founded = -1;\r\n    var results: DescuentoCalc = {\r\n        porcentaje: 0,\r\n        valor: 0, \r\n        sgte_descuento_porcentaje: 0,\r\n        sgte_descuento_falta: 0\r\n    }\r\n    for (let i = 0; i < sorted.length; i++) {\r\n        const d = sorted[i];\r\n        if (total >= d.montoDesde) {\r\n            founded = i;\r\n            break;\r\n        }\r\n    }\r\n    if (founded >= 0) {\r\n        var desc = sorted[founded];\r\n        results.porcentaje = desc.porcentaje;\r\n        results.valor = (total * desc.porcentaje / 100);\r\n        // si no es el ultimo, busco al siguiente en la tabla\r\n    }\r\n    // si no existe, simulo que es el (MAXIMO+1), es decir esta fuera del rango\r\n    if (founded === -1) founded = sorted.length;\r\n    if ((founded - 1) >= 0) {\r\n        var next = sorted[founded - 1];\r\n        if (next) {\r\n            results.sgte_descuento_falta = next.montoDesde - total;\r\n            results.sgte_descuento_porcentaje = next.porcentaje;\r\n        }\r\n    }\r\n    return results;\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, DialogTitle, Typography, TextField, Button, CircularProgress, DialogActions, Divider } from \"@material-ui/core\";\r\nimport ConfirmOrder from \"../Order/ConfirmOrder\";\r\nimport API from \"../../Services/API\";\r\n\r\nexport default class OrderDetails extends React.Component<{ onClose: (refresh: boolean) => void, match: any, editable: boolean }> {\r\n    state = {\r\n        loading: \"data\",\r\n        _fechaEntrega: \"\"\r\n    } as VisibleOrder\r\n    componentWillMount() {\r\n        API.GetOrder(+this.props.match.params.id)\r\n            .then(order => this.setState({ ...order, loading: null }));\r\n    }\r\n    handleClose = (event: React.MouseEvent<HTMLElement>) => {\r\n        this.props.onClose(this.state.shouldRefresh);\r\n    }\r\n    handleButton = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        const { name } = event.currentTarget;\r\n        if (name === \"APROBAR\") {\r\n            if (!this.state._fechaEntrega)\r\n                return alert(\"Agregue la fecha de Entrega\");\r\n            API.ActionOrder(this.state.id, { action: name, value: this.state._fechaEntrega })\r\n                .then(x => this.setState({\r\n                    estado: \"APROBADO\",\r\n                    fechaEntrega: this.state._fechaEntrega,\r\n                    loading: null,\r\n                    shouldRefresh: true\r\n                })).catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"RECHAZAR\") {\r\n            var cf = window.confirm(\"Esta seguro de rechazar este pedido?\");\r\n            if (!cf) return;\r\n            var value = window.prompt(\"Digita el Motivo de Rechazo\");\r\n            if (!value) return;\r\n            API.ActionOrder(this.state.id, { action: name, value })\r\n                .then(x => this.setState({ estado: \"RECHAZADO\", loading: null, shouldRefresh: true }))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"ENTREGAR\") {\r\n            var cf = window.confirm(\"Esta seguro de seleccionar este pedido como ENTREGADO?\");\r\n            if (!cf) return;\r\n            API.ActionOrder(this.state.id, { action: name, value: null })\r\n                .then(x => this.setState({ estado: \"ENTREGADO\", loading: null, shouldRefresh: true }))\r\n                .catch(ex => { alert(ex.message); this.setState({ loading: null }) });\r\n        }\r\n        this.setState({ loading: name });\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value })\r\n    }\r\n    render() {\r\n        const { numero,\r\n            fechaCreacion, fechaEntrega, _fechaEntrega, detalle,\r\n            descuentoPorcentaje, descuentoTotal, position, observacion,\r\n            direccion, sector, ciudad, referencia, numeroTransaccion,\r\n            estado, total, username, telefono,\r\n            survey1, survey2, loading, motivoAnulacion\r\n        } = this.state;\r\n        const editable = this.props.editable === true ? true : null;\r\n\r\n        if (loading === \"data\")\r\n            return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\" >\r\n                <DialogContent style={{ textAlign: \"center\", paddingTop: 100, width: 400, height: 400 }}>\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </DialogContent>\r\n            </Dialog>);\r\n\r\n\r\n        return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\">\r\n            <DialogTitle style={{ textAlign: \"center\" }}>ORDEN #{numero}</DialogTitle>\r\n            <DialogContent>\r\n                <Typography>FECHA: {new Date(fechaCreacion).toLocaleString()}</Typography>\r\n                {(!editable || estado !== \"PENDIENTE\") && <Typography> FECHA DE ENTREGA: {fechaEntrega && new Date(fechaEntrega).toLocaleDateString()}</Typography>}\r\n                <Typography> ESTADO: {estado} {motivoAnulacion && `| motivo: ${motivoAnulacion}`}</Typography>\r\n                {editable && <Typography> USUARIO: {username} | tel: {telefono}</Typography>}\r\n                <Typography variant=\"h6\" style={{ textAlign: \"center\", marginTop: 10 }}>PRODUCTOS:</Typography>\r\n                <ConfirmOrder items={detalle} descuento={{ porcentaje: descuentoPorcentaje, valor: descuentoTotal }} total={total} subtotal={total + descuentoTotal} />\r\n\r\n                <Typography style={{ marginTop: 10, marginBottom: 10 }}>COMPROBANTE DE PAGO: {numeroTransaccion}</Typography>\r\n\r\n                <Typography>DIRECCION: {direccion}, {referencia} ,{sector}, {ciudad}</Typography>\r\n\r\n                <Typography style={{ marginTop: 10 }}>OBSERVACIONES: {observacion}</Typography>\r\n                {position && <Button\r\n                    variant=\"contained\"\r\n                    fullWidth\r\n                    style={{ marginTop: 10, marginBottom: 10 }}\r\n                    color=\"primary\"\r\n                    component=\"a\"\r\n                    href={`https://www.google.com/maps/search/?api=1&query=${position.lat},${position.lng}`}\r\n                    target=\"_blank\"\r\n                >VER UBICACION DE ENTREGA</Button>}\r\n\r\n                {editable && estado === \"PENDIENTE\"\r\n                    ? (<div style={{ display: \"flex\", flexDirection: \"row\", marginTop: 10, marginBottom: 10 }}>\r\n                        <Typography variant=\"button\" style={{ marginRight: 10, paddingTop: 5 }} >Fecha de Entrega</Typography>\r\n                        <TextField\r\n                            type=\"date\"\r\n                            fullWidth\r\n                            name=\"_fechaEntrega\"\r\n                            value={_fechaEntrega || \"\"}\r\n                            style={{ flex: 1 }}\r\n                            onChange={this.handleChange}\r\n                        /></div>)\r\n                    : null}\r\n\r\n                {(editable && estado === \"PENDIENTE\")\r\n                    ? (<div style={{ marginTop: 10, marginBottom: 10, display: \"flex\", flexDirection: \"row\" }}>\r\n                        <Button onClick={this.handleButton} name=\"RECHAZAR\"\r\n                            style={{ marginLeft: 10, marginRight: 10, flex: 1 }}\r\n                            variant=\"text\" color=\"secondary\"\r\n                            disabled={Boolean(loading)}\r\n                        >{loading === \"RECHAZAR\" ? <CircularProgress size={25} color=\"inherit\" /> : \"RECHAZAR\"}</Button>\r\n                        <Button onClick={this.handleButton} name=\"APROBAR\"\r\n                            style={{ marginLeft: 10, marginRight: 10, flex: 1 }}\r\n                            variant=\"outlined\" color=\"primary\"\r\n                            disabled={Boolean(loading)}\r\n                        >{loading === \"APROBAR\" ? <CircularProgress color=\"inherit\" size={25} /> : \"APROBAR\"}</Button>\r\n                    </div>)\r\n                    : null}\r\n\r\n                <Divider style={{ margin: 10 }} />\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">CÃ³mo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                <Typography>{survey1 || \"\"}</Typography>\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">Compartenos alguna expendiencia que hayan tenido tus clientes usando nuestros productos</Typography>\r\n                <Typography>{survey2 || \"\"}</Typography>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                {editable && estado === \"APROBADO\" ? (<Button color=\"primary\" name=\"ENTREGAR\" onClick={this.handleButton}>\r\n                    {loading === \"ENTREGAR\" ? <CircularProgress color=\"inherit\" size={25} /> : \"ENTREGAR\"}\r\n                </Button>) : null}\r\n                <Button onClick={this.handleClose}>SALIR</Button>\r\n            </DialogActions>\r\n        </Dialog>);\r\n    }\r\n}\r\n\r\ninterface VisibleOrder extends Order {\r\n    loading: string;\r\n    _fechaEntrega: string;\r\n    shouldRefresh: boolean;\r\n}\r\n\r\n\r\nfunction TwoPlaces(number: number) {\r\n    return number.toString().length === 1 ? (\"0\" + number) : number;\r\n}","import React from \"react\";\r\nimport { List, ListItem, Grid, Paper, Typography, Hidden, CircularProgress } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { Route } from \"react-router-dom\";\r\nimport OrderDetails from \"./OrderDetails\";\r\nimport Message from \"../Message\";\r\nexport default class extends React.Component<any> {\r\n    state = {\r\n        data: [] as Order[],\r\n        msg: null,\r\n        loading: true\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleMessage = this.handleMessage.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        API.GetOrders()\r\n            .then(data => this.setState({ data, loading: null }))\r\n            .catch(err => this.setState({\r\n                loading: null,\r\n                msg: { title: \"OcurriÃ³ un error\", message: err.message, info: err.code }\r\n            }));\r\n    }\r\n    handleMessage() {\r\n        this.setState({ msg: null });\r\n    }\r\n    handleClick(event: React.MouseEvent<HTMLElement>) {\r\n        const { id } = event.currentTarget;\r\n        this.props.history.push(this.props.match.path + \"/\" + id);\r\n    }\r\n    handleClose(refresh: boolean) {\r\n        if (refresh) {\r\n            this.setState({ loading: true });\r\n            API.GetOrders()\r\n                .then(data => this.setState({ data, loading: null }))\r\n                .catch(ex => this.setState({\r\n                    msg: { title: \"No se pudo actualizar el listado\", message: ex.message, info: ex.code },\r\n                    loading: null\r\n                }));\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    render() {\r\n        const { data, msg, loading } = this.state;\r\n        const { rol } = this.props;\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        return (<Paper style={{ width: \"calc(100%-20px)\", height: \"calc(100% - 30px)\", display: \"flex\", flexDirection: \"column\", margin: 10, padding: 10, paddingBottom: 0, overflowX: \"hidden\" }}>\r\n            <List>\r\n                <Hidden xsDown implementation=\"css\" >\r\n                    <ListItem>\r\n                        <Grid container spacing={1} style={{ borderBottom: \"1px solid #ebebeb\" }}>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Numero</Typography></Grid>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Creado</Typography></Grid>\r\n\r\n                            {rol === 3 && <Grid sm={3} item><Typography variant=\"overline\">Usuario</Typography></Grid>}\r\n\r\n                            <Grid sm={1} item><Typography variant=\"overline\">Total</Typography></Grid>\r\n\r\n                            {rol === 1 && <Grid sm={1} item><Typography variant=\"overline\">Ganancia</Typography></Grid>}\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Estado</Typography></Grid>\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Fecha de Entrega</Typography></Grid>\r\n                        </Grid>\r\n                    </ListItem>\r\n                </Hidden>\r\n                {data.map(d => <ListItem key={d.id} id={\"\" + d.id} button onClick={this.handleClick}>\r\n                    <Grid container spacing={1} style={{ paddingTop: 5, paddingBottom: 5, borderBottom: \"1px solid #fafafa\" }}>\r\n\r\n                        <Grid xs={12} sm={2} item >\r\n                            <Hidden smUp >PEDIDO #</Hidden>\r\n                            {d.id}\r\n                        </Grid>\r\n                        <Grid xs={12} sm={2} item >\r\n                            {new Date(d.fechaCreacion).toLocaleDateString()}\r\n                        </Grid>\r\n\r\n                        {rol === 3 && <Grid xs={12} sm={3} item >\r\n                            {d.username}\r\n                        </Grid>}\r\n\r\n                        <Grid xs={12} sm={1} item >$ {d.total.toFixed(2)}</Grid>\r\n\r\n                        {rol === 1 && <Grid xs={12} sm={1} item >$ {(d.descuentoTotal || 0).toFixed(2)}</Grid>}\r\n\r\n                        <Grid xs={12} sm={2} item ><Typography color={EstadoToVariant(d.estado)}>{d.estado}</Typography></Grid>\r\n\r\n                        <Grid xs={12} sm={2} item >{d.fechaEntrega && new Date(d.fechaEntrega).toDateString()}</Grid>\r\n                    </Grid>\r\n                </ListItem>)}\r\n            </List>\r\n\r\n            {msg && <Message {...msg} onClose={this.handleMessage} />}\r\n\r\n            <Route\r\n                path={this.props.match.path + \"/:id\"}\r\n                render={props => <OrderDetails {...props} onClose={this.handleClose} editable={rol === 3} />}\r\n            />\r\n        </Paper>);\r\n    }\r\n}\r\n\r\nfunction EstadoToVariant(estado): any {\r\n    if (estado === \"APROBADO\") return \"primary\";\r\n    if (estado === \"RECHAZADO\") return \"secondary\";\r\n    return \"initial\";\r\n}","import React from \"react\";\r\nimport { List, ListItem, Typography } from \"@material-ui/core\";\r\nexport default class Ranking extends React.PureComponent<{ data: Rank[], showLastOrder?: boolean, perfomanceStat?: boolean }> {\r\n    render() {\r\n        const { data, showLastOrder, perfomanceStat } = this.props;\r\n        return (<List>\r\n            {data.sort((a, b) => b.stat - a.stat)\r\n                .map((r, index) => (<ListItem key={index} id={\"ranking-listitem-\" + index} >\r\n                    <div style={{ display: \"table\", width: \"100%\" }} >\r\n                        <Typography style={{ display: \"table-cell\", width: 50 }} variant={r.me ? \"body1\" : \"caption\"}># {index + 1}</Typography>\r\n                        <Typography style={{ display: \"table-cell\" }} variant={r.me ? \"body1\" : \"caption\"} >{r.username}</Typography>\r\n                        <Typography color={perfomanceStat && r.stat ? (r.stat > 0 ? \"primary\" : \"secondary\") : \"inherit\"} style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                            {perfomanceStat ? \"%\" : \"$\"} {r.stat.toFixed(2)} {perfomanceStat && r.stat ? (r.stat > 0 ? \"â\" : \"â\") : null}\r\n                        </Typography>\r\n                        {showLastOrder &&\r\n                            <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100, paddingLeft: 10 }} variant={r.me ? \"body1\" : \"caption\"}>{DateToString(r.ultimoPedido)}</Typography>}\r\n                    </div>\r\n                </ListItem>))}\r\n        </List>)\r\n    }\r\n}\r\nfunction DateToString(x) {\r\n    if (!x) return \"Nunca\";\r\n    var date = new Date(x);\r\n    if (isNaN(+date)) return x;\r\n    var ahora = new Date();\r\n    if (date.getDate() === ahora.getDate() &&\r\n        date.getMonth() === ahora.getMonth() &&\r\n        date.getFullYear() === ahora.getFullYear()) {\r\n        return date.toLocaleTimeString();\r\n    }\r\n\r\n    for (let i = 1; i < 30; i++) {\r\n        var este_dia = new Date(ahora.getFullYear(), ahora.getMonth(), ahora.getDate() - i);\r\n        if (date.getDate() === este_dia.getDate() &&\r\n            date.getMonth() === este_dia.getMonth() &&\r\n            date.getFullYear() === este_dia.getFullYear()) {\r\n            if (i === 1) return \"Ayer\";\r\n            return \"Hace \" + i + \" dÃ­as\";\r\n        }\r\n    }\r\n    return date.toLocaleDateString();\r\n}","import React from \"react\";\r\nimport { CardContent, CardHeader, Card } from \"@material-ui/core\";\r\nimport Ranking from \"../Ranking\";\r\nexport default function RankingCard(props: {\r\n    data: Rank[],\r\n    title?: string,\r\n    showLastOrder?: boolean,\r\n    perfomanceStat?: boolean\r\n}) {\r\n    return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n        <CardHeader title={props.title} style={{ textAlign: \"center\" }} />\r\n        <CardContent style={{ flex: 1, overflow: \"auto\" }}>\r\n            <Ranking data={props.data} showLastOrder={props.showLastOrder} perfomanceStat={props.perfomanceStat} />\r\n        </CardContent>\r\n    </Card>)\r\n}","import React from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default class GroupCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false,\r\n            scales: {\r\n                yAxes: [{\r\n\r\n                    ticks: {\r\n                        maxTicksLimit: 10,\r\n                        padding: 5\r\n                    }\r\n                }],\r\n                xAxes: [{\r\n                    ticks: {\r\n                        padding: 5\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        for (let i = 0; i < this.props.data.length; i++) {\r\n            const el = this.props.data[i];\r\n            labels.push(el.label);\r\n            values.push(el.value);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor: \"#3f51b5\",\r\n                borderColor: \"#3f51b5\",\r\n                data: values,\r\n                fill: false\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Line options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Card, CardContent, Typography, CardHeader, List, ListItem, ListItemText, ListItemSecondaryAction, Divider } from \"@material-ui/core\";\r\n\r\nexport default function ProfitCard(props: { month: number, year: number }) {\r\n    const { month, year } = props;\r\n    var reservas = 0, promo = 0;\r\n    if (month) {\r\n        reservas = (month * 5) / 100;\r\n        promo = (month * 14) / 100;\r\n    }\r\n    return (<Card className=\"dashboard-card\">\r\n        <CardHeader title=\"GANANCIAS\" style={{ textAlign: \"center\" }} />\r\n        <CardContent>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <div style={{ textAlign: \"center\", flex: 1 }}>\r\n                    <Typography color=\"primary\" variant=\"h5\" style={{ flex: 1 }}>$ {reduceMoney(month)}</Typography>\r\n                    <Typography color=\"primary\">ESTE MES</Typography>\r\n                </div>\r\n                <div style={{ borderLeft: \"1px solid black\", textAlign: \"center\", flex: 1 }}>\r\n                    <Typography variant=\"h5\" style={{ flex: 1 }} >$ {reduceMoney(year)}</Typography>\r\n                    <Typography>ESTE AÃO</Typography>\r\n                </div>\r\n            </div>\r\n            <Typography variant=\"subtitle1\" style={{ marginTop: 20, paddingLeft: 15, textAlign: \"left\" }}>Te aconsejamos apartar lo siguiente:</Typography>\r\n            <List>\r\n                <ListItem dense>\r\n                    <ListItemText primary=\"RESERVAS 5%\" />\r\n                    <ListItemSecondaryAction>$ {reservas.toFixed(2)}</ListItemSecondaryAction>\r\n                </ListItem>\r\n                <ListItem dense>\r\n                    <ListItemText primary=\"PROMOCION 14%\" />\r\n                    <ListItemSecondaryAction>$ {promo.toFixed(2)}</ListItemSecondaryAction>\r\n                </ListItem>\r\n            </List>\r\n        </CardContent >\r\n    </Card >)\r\n}\r\nfunction reduceMoney(value) {\r\n    if (!value) return 0;\r\n    if (value > 1000) return (+(value / 1000).toFixed(1)) + \" K\";\r\n    if (value > 1000000) return (+(value / 1000).toFixed(1)) + \" M\";\r\n    return +value.toFixed(2);\r\n}","import React from \"react\";\r\nimport { Pie } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default class PieCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: true },\r\n            maintainAspectRatio: false\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        var backgroundColor = [];\r\n        for (let i = 0; i < this.props.data.length; i++) {\r\n            const el = this.props.data[i];\r\n            labels.push(el.label);\r\n            values.push(el.value);\r\n            backgroundColor.push(el.color);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor,\r\n                data: values\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Pie options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Grid, CircularProgress, Typography, Hidden, Divider } from \"@material-ui/core\";\r\nimport RankingCard from \"./RankingCard\";\r\nimport API from \"../../Services/API\";\r\nimport GroupCard from \"./GroupCard\";\r\nimport ProfitCard from \"./ProfitCard\";\r\nimport PieCard from \"./PieCard\";\r\nexport default class Feed extends React.Component<{ onMounted: Function, grupo: string, username: string, rol: number }> {\r\n    state = {\r\n        loading: true,\r\n        error: null,\r\n        week_ranking: [],\r\n        group_graph: [],\r\n        personal_graph: [],\r\n        year_sales: [],\r\n        product_resume: [],\r\n        group_ranking: []\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    componentWillMount() {\r\n        API.Stats([\"week_ranking\",\r\n            \"personal_graph\",\r\n            \"group_graph\",\r\n            \"year_sales\",\r\n            \"product_resume\",\r\n            \"group_ranking\"])\r\n            .then(x => this.setState({ ...x, loading: null }))\r\n            .catch(error => {\r\n                this.setState({ error, loading: null });\r\n            });\r\n    }\r\n    render() {\r\n        var { loading, error,\r\n            week_ranking,\r\n            personal_graph,\r\n            group_graph,\r\n            year_sales,\r\n            product_resume,\r\n            group_ranking\r\n        } = this.state;\r\n        const { rol, grupo, username } = this.props;\r\n        const week_progress = week_ranking.map((x, index) => ({ ...x, stat: x.perfomance, position: index + 1 }));\r\n        const cumulative_ranking = week_ranking.map((x, index) =>\r\n            ({ ...x, stat: x.monto_acumulativo, position: index + 1, ultimoPedido: x.fechaNacimiento })\r\n        );\r\n\r\n        var resume = { month: 0, year: 0 };\r\n        var ahora = new Date();\r\n        for (let i = 0; i < year_sales.length; i++) {\r\n            const x = year_sales[i];\r\n            x.createdAt = new Date(x.createdAt);\r\n            if (x.createdAt.getMonth() === ahora.getMonth() &&\r\n                x.createdAt.getFullYear() === ahora.getFullYear()) {\r\n                resume.month += x.profit;\r\n            }\r\n            resume.year += x.profit;\r\n        }\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        if (error) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <Typography variant=\"h5\">OCURRIÃ UN PROBLEMA</Typography>\r\n            <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n            <Typography variant=\"body1\">{error.status} {error.code}</Typography>\r\n        </div>);\r\n\r\n        return (<Grid container spacing={2} style={{ margin: \"auto\", width: \"calc(100% - 10px)\", textAlign: \"center\" }} >\r\n            <Grid item xs={12}>\r\n                <Typography color=\"primary\" variant=\"h6\">\r\n                    Hola {username}, Esta es tu cuenta personal de NatÃº.\r\n                </Typography>\r\n                <Typography variant=\"subtitle1\">\r\n                    Estamos aquÃ­ para prosperar juntos. Estos son los indicadores de tu trabajo.\r\n                </Typography>\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <RankingCard data={group_ranking} title=\"RANKING DE GRUPOS\" />\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <GroupCard data={personal_graph} title={\"ESTADISTICA SEMANAL\"} />\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <GroupCard data={group_graph} title={grupo || \"ESTADISTICA MENSUAL\"} />\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <PieCard data={product_resume} title=\"PRODUCTOS VENDIDOS\" />\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <ProfitCard month={resume.month} year={resume.year} />\r\n            </Grid>\r\n\r\n            <Hidden smUp>\r\n                <Grid item xs={12}>\r\n                    <Divider />\r\n                </Grid>\r\n            </Hidden>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <RankingCard data={week_ranking} title=\"RANKING DE LA SEMANA\" showLastOrder={rol !== 1} />\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <RankingCard data={week_progress} title=\"PROGRESO DE LA SEMANA\" perfomanceStat={true} />\r\n            </Grid>\r\n\r\n            {rol !== 1 && <Grid item sm={6} xs={12}>\r\n                <RankingCard data={cumulative_ranking} title=\"RANKING ACUMULATIVO\" showLastOrder={true} />\r\n            </Grid>}\r\n\r\n\r\n        </Grid>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Table, TableHead, TextField, TableCell, TableRow, Button, CircularProgress, Typography, TableBody, Paper } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nexport default class ProductSales extends React.Component {\r\n    state = {\r\n        loading: null,\r\n        error: null,\r\n        data: []\r\n    }\r\n    handleClick = () => {\r\n        if (this.state.loading) return;\r\n        var desde = this.valueOf(\"desde\");\r\n        var hasta = this.valueOf(\"hasta\");\r\n        var estado = this.valueOf(\"estado\");\r\n        if (!(desde && !isNaN(+new Date(desde)))) return alert(\"Selecciona la fecha desde\");\r\n        if (!(hasta && !isNaN(+new Date(hasta)))) return alert(\"Selecciona la fecha hasta\");\r\n        if (!estado) return alert(\"Selecciona el estado\");\r\n\r\n        this.setState({ loading: true });\r\n\r\n        desde = new Date(desde).toJSON();\r\n        hasta = new Date(hasta).toJSON();\r\n\r\n        API.ProductSalesReport({ desde, hasta, estado })\r\n            .then(data => this.setState({ data, loading: null, error: null }))\r\n            .catch(error => this.setState({ error, loading: null }));\r\n    }\r\n    valueOf(ID: string) {\r\n        var el = document.getElementById(ID) as any;\r\n        return el && el.value;\r\n    }\r\n    render() {\r\n        const { data, error, loading } = this.state;\r\n        return (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <div>\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"desde\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"hasta\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} select SelectProps={{ native: true }} inputProps={{ id: \"estado\" }} >\r\n                    <option value={1}>PENDIENTE</option>\r\n                    <option value={0}>APROBADO</option>\r\n                    <option value={2}>RECHAZADO</option>\r\n                    <option value={3}>ENTREGADO</option>\r\n                </TextField>\r\n                <Button disabled={loading} style={{ marginLeft: 10, marginRight: 10 }} variant=\"outlined\" onClick={this.handleClick} >GENERAR</Button>\r\n            </div>\r\n            {loading\r\n                ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </div>)\r\n                : (error\r\n                    ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                        <Typography variant=\"h4\">OCURRIÃ UN ERROR</Typography>\r\n                        <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                        <Typography variant=\"subtitle2\" >{error.code} {error.status}</Typography>\r\n                    </div>)\r\n                    : (<div>\r\n                        <Table>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell component=\"th\" >Fecha</TableCell>\r\n                                    <TableCell component=\"th\" >#</TableCell>\r\n                                    <TableCell component=\"th\" >Usuario</TableCell>\r\n                                    <TableCell component=\"th\" >Estado</TableCell>\r\n                                    <TableCell component=\"th\" >Observacion</TableCell>\r\n                                    <TableCell component=\"th\" >Fecha EnvÃ­o</TableCell>\r\n                                    <TableCell component=\"th\" >Entregado</TableCell>\r\n                                    <TableCell component=\"th\" >Motivo Anulacion</TableCell>\r\n                                    <TableCell component=\"th\" >Producto</TableCell>\r\n                                    <TableCell component=\"th\" >Cant</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {data.map(d => (<TableRow key={d.id}>\r\n                                    <TableCell >{new Date(d.createdAt).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.idPedido}</TableCell>\r\n                                    <TableCell>{d.username}</TableCell>\r\n                                    <TableCell>{d.estado}</TableCell>\r\n                                    <TableCell>{d.observacion}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.motivoAnulacion}</TableCell>\r\n                                    <TableCell>{d.descripcion}</TableCell>\r\n                                    <TableCell>{d.cantidad}</TableCell>\r\n                                </TableRow>))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>)\r\n                )}\r\n        </div >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Tabs, Tab, Paper } from \"@material-ui/core\";\r\nimport ProductSales from \"./ProductSales\";\r\n\r\nexport default class Reports extends React.Component<any> {\r\n    state = {\r\n        currentTab: 0\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    handleChange = (x, currentTab) => {\r\n        this.setState({ currentTab });\r\n    }\r\n    render() {\r\n        const { currentTab } = this.state;\r\n        return (\r\n            <Paper style={{ margin: 10 }}>\r\n                <Tabs style={{ marginBottom: 10 }} value={currentTab} onChange={this.handleChange}>\r\n                    <Tab label=\"Detalle de Productos\" />\r\n                </Tabs>\r\n                {currentTab === 0 && <ProductSales />}\r\n            </Paper>)\r\n    }\r\n}","import React from 'react';\nimport { Drawer, List, ListItem, ListItemIcon, ListItemText, Typography, CssBaseline, withStyles, AppBar, Toolbar, IconButton, Hidden } from '@material-ui/core';\nimport { ShoppingCart, ListAlt, Menu, Close, Help, Inbox, Report } from \"@material-ui/icons\";\nimport { Link, Switch, Route, Redirect, HashRouter } from \"react-router-dom\";\nimport Order from './Components/Order/index';\nimport OrderList from './Components/OrderList';\nimport Feed from './Components/Feed';\nimport Reports from './Components/Reports';\n\nconst OPCIONES = [\n  { label: \"Inicio\", Icon: Inbox, path: \"/feed\" },\n  /** NINGUN PATH puede comenzar por order porque dana algunas partes de la logica */\n  { label: \"Nuevo Pedido\", Icon: ShoppingCart, path: \"/order\" },\n  { label: \"Pedidos\", Icon: ListAlt, path: \"/my-orders\" },\n  { label: \"Reportes\", Icon: Report, path: \"/reports\" }\n];\n\nconst drawerWidth = 200;\n\nexport default withStyles(theme => ({\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    flexGrow: 1,\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: drawerWidth\n    }\n  },\n  appBar: {\n    display: \"block\"\n  }\n}))(class App extends React.Component<{ username: string, rol: string, grupo: string, token: string, window: any, classes: any }, any> {\n\n  state = { selected: \"\", isMenuOpen: false, username: \"\", grupo: \"\", token: \"\", rol: 0, accesos: [] };\n\n  constructor(props: any) {\n    super(props);\n    this.onMounted = this.onMounted.bind(this);\n    this.handleMenu = this.handleMenu.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n    this.state.username = props.username;\n    this.state.grupo = props.grupo;\n    this.state.rol = props.rol;\n    this.state.accesos = [...OPCIONES];\n    if (this.state.rol !== 3) {\n      this.state.accesos = [...OPCIONES];\n      this.state.accesos.splice(3, 1);\n    }\n  }\n  onMounted(selected: string) {\n    this.setState({ selected });\n  }\n  handleMenu() {\n    this.setState(prev => {\n      const state = { ...prev };\n      state.isMenuOpen = !state.isMenuOpen;\n      return state;\n    });\n  }\n  closeMenu() {\n    this.setState({ isMenuOpen: false });\n  }\n  render() {\n    const { selected, isMenuOpen, username, grupo, accesos } = this.state;\n    const { window, classes } = this.props;\n    const container = window !== undefined ? () => window().document.body : undefined;\n\n    const drawerChildren = (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\n        <Typography style={{ display: \"block\" }} variant=\"button\">{username}</Typography>\n        <Typography style={{ display: \"block\" }} variant=\"caption\">{grupo}</Typography>\n      </div>\n      <List style={{ flex: 1 }}>\n        {this.state.accesos.map(o => (<ListItem onClick={this.closeMenu} selected={selected === o.path} component={Link} to={o.path} button key={o.label}>\n          <ListItemIcon >{<o.Icon />}</ListItemIcon>\n          <ListItemText style={{ flex: 1 }} primary={o.label} />\n        </ListItem>))}\n      </List>\n      <ListItem component=\"a\" target=\"_a\" href=\"https://wa.me/\" >\n        <ListItemIcon> <Help /> </ListItemIcon>\n        <ListItemText primary=\"AYUDA\" />\n      </ListItem>\n    </div>);\n\n    return (<HashRouter>\n      <div style={{ width: \"100%\", height: \"100%\" }}>\n        <CssBaseline />\n        <nav className={classes.drawer}>\n          <Hidden smUp implementation=\"css\" >\n            <Drawer\n              container={container}\n              variant=\"temporary\"\n              anchor={'left'}\n              open={isMenuOpen}\n              onClose={this.closeMenu}\n              classes={{ paper: classes.drawerPaper }}\n              ModalProps={{\n                keepMounted: true, // Better open performance on mobile.\n              }}\n            >\n              <div className={classes.toolbar} style={{ textAlign: \"right\" }}>\n                <IconButton onClick={this.handleMenu}>\n                  <Close />\n                </IconButton>\n              </div>\n              {drawerChildren}\n            </Drawer>\n          </Hidden>\n          <Hidden xsDown implementation=\"css\">\n            <Drawer\n              classes={{ paper: classes.drawerPaper }}\n              variant=\"permanent\"\n              open\n            >\n              {drawerChildren}\n            </Drawer>\n          </Hidden>\n        </nav>\n\n        <Hidden smUp implementation=\"css\" >\n          <AppBar position=\"fixed\" className={classes.x}>\n            <Toolbar>\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open drawer\"\n                edge=\"start\"\n                onClick={this.handleMenu}\n              >\n                <Menu />\n              </IconButton>\n              <Typography style={{ flexGrow: 1 }}>{(OPCIONES.find(x => x.path === selected) || {}).label}</Typography>\n            </Toolbar>\n          </AppBar>\n        </Hidden>\n\n        <main className={classes.content}>\n          <Hidden smUp implementation=\"css\" >\n            <div className={classes.toolbar}></div>\n          </Hidden>\n          <Switch>\n            <Route path=\"/feed\" render={props => <Feed {...props} onMounted={this.onMounted} grupo={this.state.grupo} username={this.state.username} rol={this.state.rol} />} />\n            <Route path=\"/order\" render={props => <Order onMounted={this.onMounted} rol={this.state.rol} />} />\n            <Route path=\"/my-orders\" render={props => <OrderList {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\n            <Route path=\"/reports\" render={props => <Reports {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\n            <Redirect exact path=\"/\" to=\"/feed\" />\n          </Switch>\n        </main>\n      </div>\n    </HashRouter>)\n  }\n});","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport { Card, CardContent, TextField, Button, InputAdornment, IconButton, Typography } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\n\r\nexport default class Login extends React.Component<{ onLoggedIn: (params: any) => void }, LoginState> {\r\n    state = {\r\n        loading: false,\r\n        user: \"\",\r\n        pwd: \"\",\r\n        error: null,\r\n        isPasswordVisible: false\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handlePassword = this.handlePassword.bind(this);\r\n        API.KEY = \"\";\r\n    }\r\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({\r\n            [name]: value\r\n        } as any);\r\n    }\r\n    componentDidMount() {\r\n        setTimeout(() =>\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"user-textfield\").focus();\r\n            }), 100);\r\n    }\r\n    handleSubmit(event: any) {\r\n        event.preventDefault();\r\n        if (this.state.loading) return;\r\n        const user = this.state.user && this.state.user.toString().trim();\r\n        const pwd = this.state.pwd && this.state.pwd.toString().trim();\r\n        if (!user) return alert(\"Digite su usuario\");\r\n        if (!pwd) return alert(\"Digite su contraseÃ±a\");\r\n        this.setState({ loading: true, error: null });\r\n        API.Login({ user, pwd })\r\n            .then(r => {\r\n                this.setState({ loading: null });\r\n                this.props.onLoggedIn({ ...r });\r\n            })\r\n            .catch(error => this.setState({ loading: null, error }));\r\n    }\r\n    handlePassword(event) {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.isPasswordVisible = !state.isPasswordVisible;\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const { loading, error, user, pwd, isPasswordVisible } = this.state;\r\n        return (<div style={{ paddingTop: 20 }}>\r\n            <Card style={{ width: \"100%\", maxWidth: 300, margin: \"auto\" }}>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <CardContent>\r\n                        <img alt=\"Logo\" src=\"http://natucosmetic.com/wp-content/uploads/2020/03/LOGO-NATU-PNG.png\" style={{ width: \"100%\", maxHeight: \"40vh\" }} ></img>\r\n                        <TextField\r\n                            inputProps={{ id: \"user-textfield\" }}\r\n                            onChange={this.handleChange}\r\n                            value={user}\r\n                            label=\"Usuario\"\r\n                            name=\"user\"\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                        />\r\n                        <TextField\r\n                            onChange={this.handleChange}\r\n                            value={pwd}\r\n                            name=\"pwd\"\r\n                            label=\"ContraseÃ±a\"\r\n                            type={isPasswordVisible ? \"input\" : \"password\"}\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                            InputProps={{\r\n                                endAdornment: <InputAdornment position=\"end\">\r\n                                    <IconButton onClick={this.handlePassword}>\r\n                                        {isPasswordVisible ? <VisibilityOff /> : <Visibility />}\r\n                                    </IconButton>\r\n                                </InputAdornment>\r\n                            }}\r\n                        />\r\n                        {error && <Typography color=\"secondary\" variant=\"body1\" style={{ textAlign: \"center\" }}>{error.message}</Typography>}\r\n                        <Button type=\"submit\" variant=\"outlined\" style={defaultStyle} color=\"primary\" disabled={loading} fullWidth >\r\n                            {loading ? \"CARGANDO...\" : \"ENTRAR\"}\r\n                        </Button>\r\n                    </CardContent>\r\n                </form>\r\n            </Card>\r\n        </div>)\r\n    }\r\n}\r\nconst defaultStyle = {\r\n    marginTop: 10,\r\n    marginBottom: 10\r\n}\r\n\r\nclass LoginState {\r\n    user = \"\";\r\n    pwd = \"\";\r\n    loading = false;\r\n    isPasswordVisible = false;\r\n    error = null;\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport Login from './Components/Login';\nimport API from \"./Services/API\";\n\n/**\n    <React.StrictMode>\n    </React.StrictMode> */\nfunction StartApp(props) {\n  API.KEY = props.token;\n  console.info(\"API.KEY assinged:\", props.token)\n  ReactDOM.render(\n    <App {...props} />,\n    document.getElementById('root')\n  );\n}\nfunction LogIn() {\n  ReactDOM.render(\n    <React.StrictMode>\n      <Login onLoggedIn={StartApp} />\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n}\nLogIn();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}