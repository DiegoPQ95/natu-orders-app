(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{127:function(e,t,a){e.exports=a(227)},227:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),i=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l,c=a(7),s=a(8),u=a(10),d=a(9),m=a(18),h=a(28),p=a(21),g=a(23),f=a(14),E=a(259),v=a(263),b=a(305),y=a(266),O=a(267),C=a(39),A=a(270),w=a(271),S="https://natuapp.ue.r.appspot.com",x=new(function(){function e(){Object(c.a)(this,e),this.KEY=""}return Object(s.a)(e,[{key:"Login",value:function(e){return this.F("user/login",{body:e,method:"POST"})}},{key:"GetProducts",value:function(){return this.F("product")}},{key:"GetOrders",value:function(){return this.F("order")}},{key:"GetOrder",value:function(e){return this.F("order/"+e)}},{key:"SaveOrder",value:function(e){return this.F("order",{method:"POST",body:e})}},{key:"ActionOrder",value:function(e,t){return this.F("order/"+e,{method:"PUT",body:t})}},{key:"Stats",value:function(e){return this.F("dashboard?data="+e.join(","))}},{key:"ProductSalesReport",value:function(e){var t="";return e&&Object.keys(e).length&&(t="?"+new URLSearchParams(e).toString()),this.F("reports/product-sales"+t)}},{key:"GetGroups",value:function(){return this.F("user/groups")}},{key:"SignIn",value:function(e){return this.F("user",{method:"POST",body:e})}},{key:"F",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={method:"GET",cache:"reload",mode:"cors"},n=Object(p.a)(Object(p.a)({},a),t);return n.headers||(n.headers={}),n.headers["Content-Type"]="application/json",n.headers["Access-Control-Allow-Origin"]="*",this.KEY&&(n.headers||(n.headers={}),n.headers.Authorization="Basic "+this.KEY),n.body&&"string"!==typeof n.body&&(n.body=JSON.stringify(n.body)),fetch(S+"/"+e,n).then((function(e){return e.ok?e.json():e.clone().json().catch((function(){return e.text().then((function(t){throw{message:t,status:e.status,statusText:e.statusText}}))})).then((function(t){throw Object(p.a)(Object(p.a)({},t),{},{status:e.status,statusText:e.statusText})}))})).catch((function(e){if("Failed to fetch"===e.message)throw{message:"Este servicio no se encuentra disponible por el momento. Intentelo m\xe1s tarde.",status:0};throw e.message||(e.message=e.statusText),e}))}}]),e}()),D=a(268),k=a(269),T=a(29),j="",N=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,null,[{key:"setPrefix",value:function(e){j=e||""}},{key:"Get",value:function(e){var t=j+e,a=window.localStorage.getItem(t);try{return JSON.parse(a)}catch(n){}return a}},{key:"Set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=j+e;if(void 0!==t)if(null!==t){var n=t;typeof t===typeof{}&&(n=JSON.stringify(t)),window.localStorage.setItem(a,n)}else window.localStorage.removeItem(a);else window.localStorage.removeItem(a)}}]),e}(),R=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!1,user:"",pwd:"",error:null,isPasswordVisible:!1},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n.handlePassword=n.handlePassword.bind(Object(f.a)(n)),x.KEY="",n.state.user=N.Get("user")||"",n}return Object(s.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(g.a)({},a,n))}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return window.requestAnimationFrame((function(){e.state.user?document.getElementById("password-textfield").focus():document.getElementById("user-textfield").focus()}))}),100)}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.loading){var a=this.state.user&&this.state.user.toString().trim(),n=this.state.pwd&&this.state.pwd.toString().trim();if(!a)return this.setState({error:{message:"Digite su usuario"}});if(!n)return this.setState({error:{message:"Digite su contrase\xf1a"}});this.setState({loading:!0,error:null}),x.Login({user:a,pwd:n}).then((function(e){N.Set("user",a),t.setState({loading:null}),t.props.onLoggedIn(Object(p.a)({},e))})).catch((function(e){return t.setState({loading:null,error:e})}))}}},{key:"handlePassword",value:function(e){this.setState((function(e){var t=Object(p.a)({},e);return t.isPasswordVisible=!t.isPasswordVisible,t}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.error,n=e.user,o=e.pwd,i=e.isPasswordVisible;return r.a.createElement("div",{style:{paddingTop:20}},r.a.createElement(E.a,{style:{width:"100%",maxWidth:300,margin:"auto",textAlign:"center"}},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(v.a,null,r.a.createElement("img",{src:"http://natucosmetic.com/wp-content/uploads/2020/03/LOGO-NATU-PNG.png",alt:"Logo",style:{height:150,minHeight:150,width:"auto"}}),r.a.createElement(b.a,{inputProps:{id:"user-textfield"},onChange:this.handleChange,value:n,label:"Usuario",name:"user",fullWidth:!0,disabled:t,style:P}),r.a.createElement(b.a,{onChange:this.handleChange,value:o,name:"pwd",label:"Contrase\xf1a",type:i?"input":"password",fullWidth:!0,disabled:t,style:P,inputProps:{id:"password-textfield"},InputProps:{endAdornment:r.a.createElement(y.a,{position:"end"},r.a.createElement(O.a,{onClick:this.handlePassword},i?r.a.createElement(D.a,null):r.a.createElement(k.a,null)))}}),a&&r.a.createElement(C.a,{color:"secondary",variant:"body1",style:{textAlign:"center"}},a.message),r.a.createElement(A.a,{type:"submit",variant:"outlined",style:P,color:"primary",disabled:t,fullWidth:!0},t?"CARGANDO...":"ENTRAR"),r.a.createElement(w.a,{style:{margin:20}}),r.a.createElement(C.a,{style:{display:"block",textAlign:"center",margin:5},variant:"body2",component:T.b,to:"/recover-password"},"Olvid\xe9 mi contrase\xf1a"),r.a.createElement(C.a,{style:{display:"block",textAlign:"center",margin:5},variant:"body2",component:T.b,to:"/signin"},"No eres asesor/a nat\xfa? Registrate aqu\xed!")))))}}]),a}(r.a.Component),P={marginTop:10,marginBottom:10},_=a(5),M=a(265),L=a(277),I=a(298),U=a(287),B=a(300),G=a(307),F=a(308),z=a(302),V=a(303),W=a(294),Y=a(295),q=a(296),H=a(297),Z=a(299),$=a(301),J=a(304),K=a(46),Q=a(278),X=a(306),ee=a(283),te=a(94),ae=a(284),ne=a(272),re=a(273),oe=a(274),ie=a(275),le=a(276);function ce(e){var t={};return e.visible||(t.display="none"),r.a.createElement(ne.a,{container:!0,alignItems:"center",style:Object(p.a)({flex:1,overflow:"auto",marginTop:5},t),spacing:3},e.items.map((function(t){return r.a.createElement(ne.a,{key:t.id,item:!0,sm:6,md:4,xs:12},r.a.createElement(E.a,null,r.a.createElement(re.a,{component:"img",style:{height:180,objectFit:"contain"},image:t.imgSrc||"https://diegopq95.github.io/take-orders/img/default.png"}),r.a.createElement(v.a,{style:{display:"flex",flexDirection:"row"}},r.a.createElement(C.a,{style:{flex:1,height:60,overflow:"hidden"},variant:"subtitle1"},t.nombre),r.a.createElement(C.a,{variant:"h6"},"$ ",t.pvp_final.toFixed(2))),r.a.createElement(oe.a,null,r.a.createElement(O.a,{onClick:e.onActionChanged,name:"+",value:t.id},r.a.createElement(ie.a,null)),r.a.createElement(C.a,{variant:"body1"},t.cantidad),r.a.createElement(O.a,{disabled:!(t.cantidad>0),onClick:e.onActionChanged,name:"-",value:t.id},r.a.createElement(le.a,null)))))})))}function se(e){var t=e.items,a=e.show_next_discount,n=e.descuento,o=e.total,i=e.subtotal;return n||(n={porcentaje:0,valor:0}),r.a.createElement(M.a,null,t.map((function(e){return r.a.createElement(ue,{key:e.id,col1:e.nombre,col2:e.cantidad,col3:"$ "+(e.pvp_final*e.cantidad).toFixed(2)})})),r.a.createElement(ue,{col1:"SUBTOTAL",col3:"$ ".concat(i.toFixed(2))}),r.a.createElement(ue,{col1:"TU GANANCIA (".concat(n.porcentaje,"%) EN ESTE PEDIDO"),col3:"$ ".concat(n.valor.toFixed(2)),color:"primary"}),r.a.createElement(ue,{col1:"TOTAL",variant:"subtitle2",col3:"$ ".concat(o.toFixed(2))}),a&&n.sgte_descuento_porcentaje?r.a.createElement(L.a,null,r.a.createElement(C.a,{variant:"subtitle1",color:"secondary"},"Obt\xe9n el ".concat(n.sgte_descuento_porcentaje,"% de descuento agregando ").concat(n.sgte_descuento_falta.toFixed(2)," USD m\xe1s a tu pedido"))):null)}function ue(e){var t=e.col1,a=e.col2,n=e.col3,o=e.color,i=e.variant;return r.a.createElement(L.a,null,r.a.createElement("div",{style:{width:"100%",display:"table"}},r.a.createElement(C.a,{color:o||"initial",style:{display:"table-cell"},variant:i||"body1"},t),a&&r.a.createElement(C.a,{color:o||"initial",style:{display:"table-cell",width:"15%",maxWidth:100,textAlign:"right"},variant:i||"body1"},a),r.a.createElement(C.a,{color:o||"initial",style:{display:"table-cell",width:"25%",maxWidth:100,textAlign:"right"},variant:i||"body1"},n)))}var de=new(function(){function e(){Object(c.a)(this,e),this.QUITO_BOUNDS={west:-78.853,north:-.04875,east:-78.17184,south:-.39207},this.QUITO={lat:-.189515,lng:-78.488167}}return Object(s.a)(e,[{key:"currentPosition",value:function(){return new Promise((function(e,t){if(console.info("obteniendo posicion actual con navigator.geolocation.getCurrentPosition"),!navigator.geolocation)return console.info("navigator.geolocation.getCurrentPosition no existe en este navegador, intentando con PositionByIP()"),me().then(e).catch(t);navigator.geolocation.getCurrentPosition((function(t){console.info("navigator.geolocation.getCurrentPosition ha obtenido la posicion"),e({lat:t.coords.latitude,lng:t.coords.longitude,fromGPS:!0})}),(function(){console.info("navigator.geolocation.getCurrentPosition fall\xf3, intentando con PositionByIP()"),me().then(e).catch(t)}))}))}},{key:"CanUseGPS",value:function(){return new Promise((function(e,t){if(!navigator.geolocation)return t();navigator.geolocation.getCurrentPosition(e,t)}))}},{key:"PlaceFromCoords",value:function(e,t){var a=this,n=window.google;return l||(l=new n.maps.Geocoder),new Promise((function(n,r){l.geocode({location:e,bounds:t||a.QUITO_BOUNDS},(function(e,t){if("ZERO_RESULTS"===t)return r({status:t,message:"No se encontraron resultados"});var a=e.length&&e[0];if(!a)return r({message:"No se encontraron resultados"});a.inputText=function(e){for(var t,a,n=0;n<e.address_components.length;n++)for(var r=e.address_components[n],o=0;o<r.types.length;o++){var i=r.types[o];if("street_address"===i)return r.short_name||r.long_name;if(r.types.find((function(e){return"street_number"===e}))&&r.types.find((function(e){return"route"===e})))return r.short_name||r.long_name;"route"!==i||t||(t=r.short_name||r.long_name),"street_number"!==i||a||(a=r.short_name||r.long_name)}return t&&a?t+" "+a:e.formatted_address}(a),n(a)}))}))}},{key:"CoordsFromPlace",value:function(e,t){var a=this,n=window.google;return l||(l=new n.maps.Geocoder),new Promise((function(n,r){l.geocode({address:e,bounds:t||a.QUITO_BOUNDS},(function(e,t){if("ZERO_RESULTS"===t)return r({status:t,message:"No se encontraron resultados"});var a=e.length&&e[0];if(!a)return r({message:"No se encontraron resultados"});n(a)}))}))}}]),e}());function me(){return fetch("https://ipapi.co/json/").then((function(e){return e.json()})).then((function(e){return{lat:e.latitude,lng:e.longitude}}))}function he(e){return"1"===e?"RUC":"2"===e?"Cedula":"3"===e?"Pasaporte":""}var pe=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,null,[{key:"tel",value:function(e){if(e){if(e.length<7)return"El n\xfamero de telefono debe tener al menos 7 digitos";for(var t=0;t<e.length;t++)if("+"!==e[t]&&!fe(e[t])&&""!==e[t].trim())return"El n\xfamero debe tener uno de estos formatos: '09123456789' o '+5931234567890'"}}},{key:"email",value:function(e){if(e){if(e.length<5)return"El email no est\xe1 escrito correctamente";var t=e.split("@");return 2!==t.length?"El email no est\xe1 escrito correctamente":t[1].indexOf(".")>=0?e.trim().indexOf(" ")>=0||e.trim().indexOf("\t")>=0||e.trim().indexOf("\r")>=0?"El email no est\xe1 escrito correctamente":void 0:"El email no est\xe1 escrito correctamente"}}}]),e}();function ge(e,t){if(e||(e=""),3!==(t=+t)){if(1===t){if(13!==e.length)return"N\xfamero de RUC debe tener 13 digitos";if(13===e.length&&"9999999999999"===e)return}return 2===t&&10!==e.length?"N\xfamero de Cedula debe tener 10 digitos":function(e,t,a,n){var r="",o=!1;if(t&&(_=e,""===_||void 0==_||null==_||"undefined"==_))r="",o=!0;else if(function(e){return!isNaN(parseFloat(e))}(e)){e.length<10?r="El numero de Cedula debe tener 10 d\xedgitos":e.length>10&&e.length<13?r="El numero de RUC debe tener 13 d\xedgitos":e.length>13&&(r="El numero tiene m\xe1s de 13 d\xedgitos");var i,l,c,s,u,d,m,h,p,g,f=!1,E=!1,v=!1,b=11,y=e.substr(0,1),O=e.substr(1,1),C=e.substr(2,1),A=e.substr(3,1),w=e.substr(4,1),S=e.substr(5,1),x=e.substr(6,1),D=e.substr(7,1),k=e.substr(8,1),T=e.substr(9,1);if(fe(y)||(r="El digito 1 no es un n\xfamero"),fe(O)||(r="El digito 2 no es un n\xfamero"),fe(C)||(r="El digito 3 no es un n\xfamero"),fe(A)||(r="El digito 4 no es un n\xfamero"),fe(w)||(r="El digito 5 no es un n\xfamero"),fe(S)||(r="El digito 6 no es un n\xfamero"),fe(x)||(r="El digito 7 no es un n\xfamero"),fe(D)||(r="El digito 8 no es un n\xfamero"),fe(k)||(r="El digito 9 no es un n\xfamero"),fe(T)||(r="El digito 10 no es un n\xfamero"),e.length>10){var j=e.substr(10,1),N=e.substr(10,1),R=e.substr(10,1);j&&!fe(j)&&(r="El digito 11 no es un n\xfamero"),N&&!fe(N)&&(r="El digito 12 no es un n\xfamero"),R&&!fe(R)&&(r="El digito 13 no es un n\xfamero")}7!=C&&8!=C||(r="El tercer d\xedgito ingresado es inv\xe1lido",o=!1),C<6?(v=!0,(l=2*y)>=10&&(l-=9),(c=1*O)>=10&&(c-=9),(s=2*C)>=10&&(s-=9),(u=1*A)>=10&&(u-=9),(d=2*w)>=10&&(d-=9),(m=1*S)>=10&&(m-=9),(h=2*x)>=10&&(h-=9),(p=1*D)>=10&&(p-=9),(g=2*k)>=10&&(g-=9),b=10):6==C?(E=!0,l=3*y,c=2*O,s=7*C,u=6*A,d=5*w,m=4*S,h=3*x,p=2*D,g=0):9==C&&(f=!0,l=4*y,c=3*O,s=2*C,u=7*A,d=6*w,m=5*S,h=4*x,p=3*D,g=2*k);var P=0==(i=(l+c+s+u+d+m+h+p+g)%b)?0:b-i;1==E?(P!=k&&(r="El ruc de la empresa del sector p\xfablico es incorrecto.",o=!1),"0001"!=e.substr(9,4)&&(r="El ruc de la empresa del sector p\xfablico debe terminar con 0001",o=!1)):1==f?(P!=T&&(r="El ruc de la empresa del sector privado es incorrecto.",o=!1),"001"!=e.substr(10,3)&&(r="El ruc de la empresa del sector privado debe terminar con 001",o=!1)):1==v&&(P!=T&&(r="El n\xfamero de c\xe9dula de la persona natural es incorrecto.",o=!1),e.length>10&&"001"!=e.substr(10,3)&&(r="El ruc de la persona natural debe terminar con 001",o=!1)),o=!0}else r="Este campo solo admite numeros";var _;return o&&""==r?(a&&a(),""):(""==r&&(r="La cantidad de digitos no corresponde a Cedula o RUC"),n&&n(r),r)}(e,!1)}}function fe(e){return e>="0"&&e<="9"}function Ee(e){var t=e.error,a=(e.inputProps,Object(K.a)(e,["error","inputProps"])),n={};return t&&(n.error=!0,n.helperText=t),n.inputProps||(n.inputProps={}),n.inputProps.id=a.name,r.a.createElement(b.a,Object.assign({},n,a),e.children)}var ve=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={defaultCenter:null},n.mapRef=void 0,n.virtualMarker=void 0,n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleMapMounted=n.handleMapMounted.bind(Object(f.a)(n)),n.handleDragStart=n.handleDragStart.bind(Object(f.a)(n)),n.handleDragEnd=n.handleDragEnd.bind(Object(f.a)(n)),n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=this;de.currentPosition().then((function(t){return e.setState({defaultCenter:t})}))}},{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.props.onValueChange(a,n)}},{key:"handleDragStart",value:function(){this.virtualMarker.classList.add("on-move")}},{key:"handleDragEnd",value:function(){var e=this;de.PlaceFromCoords(this.mapRef.getCenter()).then((function(t){return e.props.onValueChange("direccion",t.inputText)})).catch((function(e){return console.warn("PlaceFromCoords ERROR",e)})),this.virtualMarker.classList.remove("on-move")}},{key:"handleMapMounted",value:function(e){this.mapRef=e,this.mapRef&&(this.virtualMarker=document.createElement("div"),this.virtualMarker.className="centerMarker",e.getDiv().appendChild(this.virtualMarker))}},{key:"render",value:function(){var e=this.props,t=e.direccion,a=e.ciudad,n=e.referencia,o=e.sector,i=e.visible,l=e.documento,c=e.identificacion,s=e.razonSocial,u=e.direccion_factura,d=e.telefono_factura,m=e.email_factura,h=c?ge(c,l):"",p=pe.tel(d),g=pe.email(m);return r.a.createElement(te.a,{style:{margin:"auto",height:"100%",width:"100%",padding:10,marginTop:10,display:i?"block":"none"}},r.a.createElement(ne.a,{container:!0},r.a.createElement(ne.a,{item:!0,sm:6},r.a.createElement(C.a,{variant:"subtitle1",style:{marginLeft:10}},"Direcci\xf3n de Env\xedo"),r.a.createElement(b.a,{variant:"outlined",name:"ciudad",inputProps:{id:"ciudad"},value:a,onChange:this.handleChange,label:"Ciudad *",style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(b.a,{variant:"outlined",name:"sector",inputProps:{id:"sector"},value:o,onChange:this.handleChange,label:"Sector *",style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(b.a,{variant:"outlined",name:"direccion",inputProps:{id:"direccion"},value:t,onChange:this.handleChange,label:"Direccion Exacta* ",multiline:!0,rows:3,style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(b.a,{variant:"outlined",name:"referencia",inputProps:{id:"referencia"},value:n,onChange:this.handleChange,label:"Referencia",multiline:!0,rows:2,style:{margin:10,width:"calc(100% - 20px)"}})),r.a.createElement(ne.a,{item:!0,sm:6},r.a.createElement(C.a,{style:{marginLeft:10},variant:"subtitle1"},"Datos de Facturaci\xf3n"),r.a.createElement(b.a,{name:"documento",value:l,inputProps:{id:"documento"},variant:"outlined",select:!0,SelectProps:{native:!0},onChange:this.handleChange,label:"Documento *",style:{margin:10,width:"calc(100% - 20px)"}},r.a.createElement("option",{value:"1"},he("1")),r.a.createElement("option",{value:"2"},he("2")),r.a.createElement("option",{value:"3"},he("3"))),r.a.createElement(Ee,{variant:"outlined",name:"identificacion",value:c,error:h,onChange:this.handleChange,type:"phone",inputProps:{maxLength:20},label:"Numero de "+he(l)+" *",style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(b.a,{variant:"outlined",name:"razonSocial",value:s,onChange:this.handleChange,label:"Razon Social *",inputProps:{maxLength:200,id:"razonSocial"},style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(b.a,{variant:"outlined",name:"direccion_factura",value:u,onChange:this.handleChange,label:"Direccion *",inputProps:{maxLength:300,id:"direccion_factura"},multiline:!0,rows:2,style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(Ee,{variant:"outlined",name:"telefono_factura",value:d,error:p,inputProps:{maxLength:20},onChange:this.handleChange,label:"Telefono *",type:"phone",style:{margin:10,width:"calc(100% - 20px)"}}),r.a.createElement(Ee,{variant:"outlined",name:"email_factura",value:m,error:g,inputProps:{maxLength:50},onChange:this.handleChange,label:"Email *",type:"email",style:{margin:10,width:"calc(100% - 20px)"}}))))}}]),a}(r.a.PureComponent),be=function(e){return r.a.createElement(te.a,{style:{maxWidth:400,padding:10,marginTop:10,height:"100%",marginLeft:"auto",marginRight:"auto",display:e.visible?"block":"none"}},r.a.createElement("form",{onSubmit:e.onDone},r.a.createElement(C.a,{style:{marginTop:10,marginBottom:10,textAlign:"center"},variant:"h6"},"Total a Pagar: $",e.total.toFixed(2)),r.a.createElement(w.a,null),r.a.createElement("div",{style:{padding:20}},r.a.createElement(C.a,null,"Realiza tu pago mediante Transferencia o Deposito Bancario a la cuenta:"),r.a.createElement(C.a,null,"PRODUBANCO. Cta. Cte. #2005236823"),r.a.createElement(C.a,null,"RUC. 1792627192001"),r.a.createElement(C.a,null,"COSMETICOSNATU CIA.LTDA.")),r.a.createElement(b.a,{style:{width:"calc(100% - 20px)",margin:10},variant:"outlined",inputMode:"numeric",inputProps:{id:"numeroTransaccion"},onChange:function(t){return e.onValueChange("numeroTransaccion",t.currentTarget.value)},value:e.numeroTransaccion,label:"Numero de Comprobante *"}),r.a.createElement(A.a,{type:"submit",disabled:e.loading,variant:"outlined",color:"primary",style:{margin:10,width:"calc(100% - 20px)"}},e.loading?r.a.createElement(Q.a,{size:25}):"ENVIAR")))},ye=a(279),Oe=a(280),Ce=a(281),Ae=Object(m.g)(function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={txt1:"",txt2:"",loading:!1,id:""},n.handleClose=n.handleClose.bind(Object(f.a)(n)),n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(f.a)(n)),n.state.id=e.match.params.id,n}return Object(s.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(g.a)({},a,n))}},{key:"unblock",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.unblock=this.props.history.block=function(){return e.state.loading?"Espera un momento, tu informaci\xf3n se est\xe1 guardando":null}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.txt1,r=a.txt2,o=a.loading,i=a.id;if(!o){if(!n&&!r)return this.props.history.goBack();this.setState({loading:!0}),x.ActionOrder(i,{action:"SURVEY",value:[n,r]}).then((function(e){t.setState({loading:!1}),t.props.history.goBack()})).catch((function(e){t.setState({loading:!1}),alert(e.message)}))}}},{key:"handleClose",value:function(){this.state.loading||this.props.history.goBack()}},{key:"render",value:function(){var e=this.props,t=this.state,a=t.txt1,n=t.txt2,o=t.loading;return r.a.createElement(ye.a,{open:!0,onClose:this.handleClose},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(Oe.a,null,r.a.createElement(C.a,{style:{textAlign:"center"},variant:"h6"},e.title),r.a.createElement(C.a,{style:{marginTop:10},variant:"subtitle1"},"C\xf3mo podemos ayudarte a mejorar tus ventas?"),r.a.createElement(b.a,{autoFocus:!0,name:"txt1",multiline:!0,rows:2,label:"Escribe tu respuesta",value:a,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(C.a,{style:{marginTop:10},variant:"subtitle1"},"Comp\xe1rtenos alguna experiencia que hayan tenido tus clientes usando nuestros productos"),r.a.createElement(b.a,{name:"txt2",multiline:!0,rows:3,label:"Escribe tu respuesta",value:n,onChange:this.handleChange,fullWidth:!0})),r.a.createElement(Ce.a,null,r.a.createElement(A.a,{type:"submit",variant:"outlined"},o?r.a.createElement(Q.a,{size:25}):"GUARDAR"))))}}]),a}(r.a.Component)),we=a(282);function Se(e){var t=e.title,a=e.message,n=e.info,o=e.onClose;return r.a.createElement(ye.a,{open:Boolean(a)||Boolean(e.children),onClose:o},r.a.createElement(we.a,null,t),r.a.createElement(Oe.a,{style:{textAlign:"center"}},e.children||r.a.createElement("div",null,r.a.createElement(C.a,{variant:"subtitle1"},a),r.a.createElement(C.a,{variant:"body1"},n))),r.a.createElement(Ce.a,null,r.a.createElement(A.a,{type:"button",onClick:e.onClose},"SALIR")))}var xe=Object(m.g)(function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).unblock=function(){return null},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search).get("focusafter");e&&(this.unblock=this.props.history.block((function(t){setTimeout((function(){window.requestAnimationFrame((function(){try{document.getElementById(e).focus()}catch(t){}}))}),100)})))}},{key:"componentWillUnmount",value:function(){this.unblock&&this.unblock()}},{key:"render",value:function(){var e=this,t=new URLSearchParams(this.props.location.search);return r.a.createElement(Se,{title:t.get("a"),message:t.get("b"),onClose:function(t){return e.props.history.goBack()}})}}]),a}(r.a.PureComponent));function De(e){return!(e&&e.length&&e.trim().length)}var ke=a(285),Te=Object(m.g)(function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state=new je,n.guardarBorrador=function(e){if(!e||n.state.isDirty)try{var t=n.state.productList.filter((function(e){return e.cantidad})).map((function(e){return{id:e.id,cantidad:e.cantidad}})),a=n.state,r=a.numeroTransaccion,o=a.observacion,i=a.direccion,l=a.ciudad,c=a.sector,s=a.referencia,u=a.position,d=a.documento,m=a.identificacion,h=a.razonSocial,p=a.telefono_factura,g=a.direccion_factura,f=a.email_factura;N.Set("current_order",{numeroTransaccion:r,direccion:i,ciudad:l,choosen:t,sector:c,observacion:o,referencia:s,position:u,documento:d,identificacion:m,razonSocial:h,telefono_factura:p,direccion_factura:g,email_factura:f}),e&&(n.props.history.push(n.props.match.path+"/msg?"+new URLSearchParams({a:"Listo",b:"Tu pedido fue guardado como borrador."}).toString()),n.setState({isDirty:!1}))}catch(E){}},n.handleTab=n.handleTab.bind(Object(f.a)(n)),n.handleAction=n.handleAction.bind(Object(f.a)(n)),n.handleValueChange=n.handleValueChange.bind(Object(f.a)(n)),n.handleDone=n.handleDone.bind(Object(f.a)(n)),n.handleChange=n.handleChange.bind(Object(f.a)(n)),e.onMounted&&e.onMounted(e.match.path),n.state.tablaDescuentos=e.descuentos||[],n}return Object(s.a)(a,[{key:"unblockNavigation",value:function(){}}]),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.onbeforeunload=function(t){return e.state.isDirty?"Tu pedido a\xfan est\xe1 incompleto, deseas salir sin guardarlo?":null},this.unblockNavigation=this.props.history.block(this.routerWillLeave.bind(this)),x.GetProducts().then((function(t){e.setState({productList:t.map((function(e){return 0===(e.cantidad=0)&&e})),loading:null});try{var a={},n=N.Get("direccion")||{};for(var r in n)e.state.hasOwnProperty(r)&&n[r]&&(a[r]=n[r]);var o=N.Get("factura")||{};for(var i in o)e.state.hasOwnProperty(i)&&o[i]&&(a[i]=o[i]);var l=N.Get("current_order")||{};for(var c in l)e.state.hasOwnProperty(c)&&(a[c]=l[c]);if(!(Object.keys(a).length||l.choosen&&l.choosen.length))return;if(e.setState(a),!l.choosen)return;for(var s=0;s<l.choosen.length;s++)for(var u=l.choosen[s],d=0;d<u.cantidad;d++)e.handleAction({currentTarget:{name:"+",value:u.id},avoidIsDirty:!0})}catch(m){}})).catch((function(e){return alert(e.message)}))}},{key:"componentWillUnmount",value:function(){this.unblockNavigation&&this.unblockNavigation(),window.onbeforeunload&&(window.onbeforeunload=void 0)}},{key:"handleTab",value:function(e,t){this.setState({currentTab:t})}},{key:"routerWillLeave",value:function(e){e&&0===e.pathname.indexOf(this.props.match.path)||this.state.isDirty&&(window.confirm("Tu pedido est\xe1 incompleto, quieres guardarlo para completarlo despu\xe9s?")?this.guardarBorrador():N.Set("current_order"))}},{key:"handleDone",value:function(e){var t=this;if(e.preventDefault(),!this.state.loading){this.setState({loading:"guardar"});var a=function(e){var t=e.numeroTransaccion,a=e.ciudad,n=e.sector,r=e.direccion,o=e.documento,i=e.identificacion,l=e.razonSocial,c=e.telefono_factura,s=e.direccion_factura,u=e.email_factura;if(e.loading)return{loading:!0};var d={};if(!e.productList.filter((function(e){return e.cantidad})).length)return{productList:"Debes elegir por lo menos un producto"};if(De(a)&&(d.ciudad="Digita la ciudad"),De(n)&&(d.sector="Digita el sector"),De(r)&&(d.direccion="Digita la direccion"),De(o)&&(d.documento="Selecciona un documento de identificaci\xf3n"),De(i))d.identificacion="Digita el n\xfamero de "+he(o);else{var m=ge(i,o);m&&(d.identificacion=m)}if(De(l)&&(d.razonSocial="Digita la Razon Social de la factura"),De(c))d.telefono_factura="Digita el numero de Telefono de facturaci\xf3n";else{var h=pe.tel(c);h&&(d.telefono_factura=h)}if(De(s)&&(d.direccion_factura="Digita la direcci\xf3n de facturaci\xf3n"),De(u)&&(d.email_factura="Digita el email de facturaci\xf3n"),De(u))d.email_factura="Digita el email de facturaci\xf3n";else{var p=pe.email(u);p&&(d.email_factura=p)}return De(t)&&(d.numeroTransaccion="Digita el numero de comprobante de pago"),Object.keys(d).length?d:null}(this.state);if(a){if(a.loading)return;if(a.productList)return this.failed_msg(a.productList),this.setState({loading:null});var n=Object.keys(a);if(n.length){this.failed_msg(a[n[0]],void 0,n[0]);var r=this.state.currentTab;return["ciudad","referencia","direccion","sector","identificacion","documento","razonSocial","direccion_factura","telefono_factura","email_factura"].indexOf(n[0])>=0&&(r=2),this.setState({loading:null,currentTab:r})}}(function(e){var t=e.ciudad,a=e.sector,n=e.direccion,r=e.observacion,o=e.referencia,i=e.documento,l=e.identificacion,c=e.razonSocial,s=e.telefono_factura,u=e.direccion_factura,d=e.email_factura,m=e.descuentoAplica,h=e.numeroTransaccion,p=e.position,g=e.subtotal,f=e.productList.filter((function(e){return e.cantidad}));return x.SaveOrder({ciudad:t,sector:a,direccion:n,observacion:r,referencia:o,documento:i,identificacion:l,razonSocial:c,telefono_factura:s,direccion_factura:u,email_factura:d,detalle:f,descuentoPorcentaje:m&&m.porcentaje,descuentoTotal:m&&m.valor,total:g-(m&&m.valor||0),position:p,numeroTransaccion:h}).then((function(r){return N.Set("current_order"),N.Set("direccion",{direccion:n,ciudad:t,sector:a,referencia:o}),N.Set("factura",{identificacion:l,documento:i,razonSocial:c,telefono_factura:s,direccion_factura:u,email_factura:d}),{currentTab:0,descuentoAplica:null,subtotal:0,numeroTransaccion:"",observacion:"",position:null,loading:null,productList:e.productList.map((function(e){return e.cantidad=0,e})),isDirty:!1,id:r.id}}))})(this.state).then((function(e){e.id;var a=Object(K.a)(e,["id"]);t.setState(a),t.props.history.push(t.props.match.path+"/survey/"+e.id)})).catch((function(e){t.failed_msg(e.message+" "+(e.status||""),"Ocurri\xf3 un error"),t.setState({loading:null})}))}}},{key:"failed_msg",value:function(e,t,a){var n=new URLSearchParams({a:t||"No se puede guardar",b:e,focusafter:a});this.props.history.push(this.props.match.path+"/msg?"+n.toString())}},{key:"handleAction",value:function(e){var t=e.currentTarget,a=t.name,n=t.value,r=e.avoidIsDirty;this.setState((function(e){var t=Object(p.a)({},e);t.productList=JSON.parse(JSON.stringify(t.productList));var o=t.productList.find((function(e){return e.id===+n})),i=o.cantidad&&!isNaN(+o.cantidad)&&o.cantidad||0,l=o.cantidad_desde;return"+"===a?i<=0&&l?i=l:i++:"-"===a&&(i<=10&&l?i=0:i--),o.cantidad=i,t.subtotal=function(e){for(var t={total:0,cantidad:0},a=0;a<e.length;a++){var n=e[a];t.cantidad+=n.cantidad,t.total+=n.pvp_final*n.cantidad}return t}(t.productList.filter((function(e){return e.cantidad}))).total,t.descuentoAplica=function(e,t){for(var a=t.sort((function(e,t){return t.montoDesde-e.montoDesde})),n=-1,r={porcentaje:0,valor:0,sgte_descuento_porcentaje:0,sgte_descuento_falta:0},o=0;o<a.length;o++){if(e>=a[o].montoDesde){n=o;break}}if(n>=0){var i=a[n];r.porcentaje=i.porcentaje,r.valor=e*i.porcentaje/100}if(-1===n&&(n=a.length),n-1>=0){var l=a[n-1];l&&(r.sgte_descuento_falta=l.montoDesde-e,r.sgte_descuento_porcentaje=l.porcentaje)}return r}(t.subtotal,t.tablaDescuentos),r||(t.isDirty=!0),t}))}},{key:"handleValueChange",value:function(e,t){var a;this.setState((a={},Object(g.a)(a,e,t),Object(g.a)(a,"isDirty",!0),a))}},{key:"handleChange",value:function(e){var t,a=e.currentTarget,n=a.value,r=a.name;this.setState((t={},Object(g.a)(t,r,n),Object(g.a)(t,"isDirty",!0),t))}},{key:"render",value:function(){var e=this.state,t=e.currentTab,a=e.productList,n=e.numeroTransaccion,o=e.descuentoAplica,i=e.subtotal,l=e.loading,c=e.observacion,s=Object(K.a)(e,["currentTab","productList","numeroTransaccion","descuentoAplica","subtotal","loading","observacion"]),u=a.filter((function(e){return e.cantidad}));console.info("Order render");var d=i-(o&&o.valor||0);return"articulos"===l?r.a.createElement("div",{style:{width:"100%",textAlign:"center",paddingTop:100}},r.a.createElement(Q.a,{size:100}),r.a.createElement(C.a,{variant:"h6"},"CARGANDO...")):r.a.createElement("div",{style:{width:"100%",height:"calc(100% - 1px)",display:"flex",flexDirection:"column",padding:10,overflow:"hidden"}},r.a.createElement(X.a,{variant:"fullWidth",onChange:this.handleTab,value:t},r.a.createElement(ee.a,{label:"Productos"}),r.a.createElement(ee.a,{label:"Pedido"}),r.a.createElement(ee.a,{label:"Datos"}),r.a.createElement(ee.a,{label:"Pago"})),0===t&&r.a.createElement(ce,{visible:!0,onActionChanged:this.handleAction,items:a}),1===t&&r.a.createElement(te.a,{style:{display:1===t?"block":"none",textAlign:"center",padding:10,margin:"auto",marginTop:10,width:"100%",maxWidth:500,height:"100%"}},r.a.createElement(C.a,{variant:"h5"},"TU PEDIDO"),r.a.createElement(se,{show_next_discount:!0,items:u,descuento:o,subtotal:i,total:d}),r.a.createElement(b.a,{variant:"outlined",value:c,name:"observacion",onChange:this.handleChange,style:{width:"calc(100% - 20px)",margin:10},label:"Observacion",multiline:!0,rows:"2"})),r.a.createElement(ve,Object.assign({visible:2===t},s,{onValueChange:this.handleValueChange})),3===t&&r.a.createElement(be,{visible:!0,loading:"guardar"===l,total:d,onDone:this.handleDone,items:u,numeroTransaccion:n,onValueChange:this.handleValueChange}),r.a.createElement(m.b,{path:this.props.match.path+"/msg",component:xe}),r.a.createElement(m.b,{path:this.props.match.path+"/survey/:id",component:Ae}),r.a.createElement(ae.a,{title:"Guardar Borrador",onClick:this.guardarBorrador,variant:"extended",style:{position:"fixed",bottom:20,right:20},color:"primary"},r.a.createElement(ke.a,null)))}}]),a}(r.a.PureComponent)),je=function e(){Object(c.a)(this,e),this.currentTab=0,this.productList=[],this.tablaDescuentos=[],this.descuentoAplica=null,this.subtotal=0,this.position=null,this.direccion="",this.sector="",this.ciudad="",this.referencia="",this.documento="1",this.razonSocial="",this.identificacion="",this.telefono_factura="",this.direccion_factura="",this.email_factura="",this.observacion="",this.numeroTransaccion="",this.loading=null,this.isDirty=!1},Ne=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:"data",_fechaEntrega:""},e.handleClose=function(t){e.props.onClose(e.state.shouldRefresh)},e.handleButton=function(t){var a=t.currentTarget.name;if("APROBAR"===a){if(!e.state._fechaEntrega)return alert("Agregue la fecha de Entrega");x.ActionOrder(e.state.id,{action:a,value:e.state._fechaEntrega}).then((function(t){return e.setState({estado:"APROBADO",fechaEntrega:e.state._fechaEntrega,loading:null,shouldRefresh:!0})})).catch((function(t){alert(t.message),e.setState({loading:null})}))}if("RECHAZAR"===a){if(!window.confirm("Esta seguro de rechazar este pedido?"))return;var n=window.prompt("Digita el Motivo de Rechazo");if(!n)return;x.ActionOrder(e.state.id,{action:a,value:n}).then((function(t){return e.setState({estado:"RECHAZADO",loading:null,shouldRefresh:!0})})).catch((function(t){alert(t.message),e.setState({loading:null})}))}if("ENTREGAR"===a){if(!window.confirm("Esta seguro de seleccionar este pedido como ENTREGADO?"))return;x.ActionOrder(e.state.id,{action:a,value:null}).then((function(t){return e.setState({estado:"ENTREGADO",loading:null,shouldRefresh:!0})})).catch((function(t){alert(t.message),e.setState({loading:null})}))}e.setState({loading:a})},e.handleChange=function(t){var a=t.currentTarget,n=a.name,r=a.value;e.setState(Object(g.a)({},n,r))},e}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=this;x.GetOrder(+this.props.match.params.id).then((function(t){return e.setState(Object(p.a)(Object(p.a)({},t),{},{loading:null}))}))}},{key:"render",value:function(){var e=this.state,t=e.numero,a=e.fechaCreacion,n=e.fechaEntrega,o=e._fechaEntrega,i=e.detalle,l=e.descuentoPorcentaje,c=e.descuentoTotal,s=e.position,u=e.observacion,d=e.direccion,m=e.sector,h=e.ciudad,p=e.referencia,g=e.numeroTransaccion,f=e.estado,E=e.total,v=e.username,y=e.telefono,O=e.survey1,S=e.survey2,x=e.loading,D=e.motivoAnulacion,k=!0===this.props.editable||null;return"data"===x?r.a.createElement(ye.a,{open:!0,onClose:this.handleClose,maxWidth:"md"},r.a.createElement(Oe.a,{style:{textAlign:"center",paddingTop:100,width:400,height:400}},r.a.createElement(Q.a,{size:100}),r.a.createElement(C.a,{variant:"h6"},"CARGANDO..."))):r.a.createElement(ye.a,{open:!0,onClose:this.handleClose,maxWidth:"md"},r.a.createElement(we.a,{style:{textAlign:"center"}},"ORDEN #",t),r.a.createElement(Oe.a,null,r.a.createElement(C.a,null,"FECHA: ",new Date(a).toLocaleString()),(!k||"PENDIENTE"!==f)&&r.a.createElement(C.a,null," FECHA DE ENTREGA: ",n&&new Date(n).toLocaleDateString()),r.a.createElement(C.a,null," ESTADO: ",f," ",D&&"| motivo: ".concat(D)),k&&r.a.createElement(C.a,null," USUARIO: ",v," | tel: ",y),r.a.createElement(C.a,{variant:"h6",style:{textAlign:"center",marginTop:10}},"PRODUCTOS:"),r.a.createElement(se,{items:i,descuento:{porcentaje:l,valor:c},total:E,subtotal:E+c}),r.a.createElement(C.a,{style:{marginTop:10,marginBottom:10}},"COMPROBANTE DE PAGO: ",g),r.a.createElement(C.a,null,"DIRECCION: ",d,", ",p," ,",m,", ",h),r.a.createElement(C.a,{style:{marginTop:10}},"OBSERVACIONES: ",u),s&&r.a.createElement(A.a,{variant:"contained",fullWidth:!0,style:{marginTop:10,marginBottom:10},color:"primary",component:"a",href:"https://www.google.com/maps/search/?api=1&query=".concat(s.lat,",").concat(s.lng),target:"_blank"},"VER UBICACION DE ENTREGA"),k&&"PENDIENTE"===f?r.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginTop:10,marginBottom:10}},r.a.createElement(C.a,{variant:"button",style:{marginRight:10,paddingTop:5}},"Fecha de Entrega"),r.a.createElement(b.a,{type:"date",fullWidth:!0,name:"_fechaEntrega",value:o||"",style:{flex:1},onChange:this.handleChange})):null,k&&"PENDIENTE"===f?r.a.createElement("div",{style:{marginTop:10,marginBottom:10,display:"flex",flexDirection:"row"}},r.a.createElement(A.a,{onClick:this.handleButton,name:"RECHAZAR",style:{marginLeft:10,marginRight:10,flex:1},variant:"text",color:"secondary",disabled:Boolean(x)},"RECHAZAR"===x?r.a.createElement(Q.a,{size:25,color:"inherit"}):"RECHAZAR"),r.a.createElement(A.a,{onClick:this.handleButton,name:"APROBAR",style:{marginLeft:10,marginRight:10,flex:1},variant:"outlined",color:"primary",disabled:Boolean(x)},"APROBAR"===x?r.a.createElement(Q.a,{color:"inherit",size:25}):"APROBAR")):null,r.a.createElement(w.a,{style:{margin:10}}),r.a.createElement(C.a,{style:{marginTop:10},variant:"caption"},"C\xf3mo podemos ayudarte a mejorar tus ventas?"),r.a.createElement(C.a,null,O||""),r.a.createElement(C.a,{style:{marginTop:10},variant:"caption"},"Compartenos alguna expendiencia que hayan tenido tus clientes usando nuestros productos"),r.a.createElement(C.a,null,S||"")),r.a.createElement(Ce.a,null,k&&"APROBADO"===f?r.a.createElement(A.a,{color:"primary",name:"ENTREGAR",onClick:this.handleButton},"ENTREGAR"===x?r.a.createElement(Q.a,{color:"inherit",size:25}):"ENTREGAR"):null,r.a.createElement(A.a,{onClick:this.handleClose},"SALIR")))}}]),a}(r.a.Component);var Re=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={data:[],msg:null,loading:!0},e.onMounted(e.match.path),n.handleClick=n.handleClick.bind(Object(f.a)(n)),n.handleClose=n.handleClose.bind(Object(f.a)(n)),n.handleMessage=n.handleMessage.bind(Object(f.a)(n)),n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=this;x.GetOrders().then((function(t){return e.setState({data:t,loading:null})})).catch((function(t){return e.setState({loading:null,msg:{title:"Ocurri\xf3 un error",message:t.message,info:t.code}})}))}},{key:"handleMessage",value:function(){this.setState({msg:null})}},{key:"handleClick",value:function(e){var t=e.currentTarget.id;this.props.history.push(this.props.match.path+"/"+t)}},{key:"handleClose",value:function(e){var t=this;e&&(this.setState({loading:!0}),x.GetOrders().then((function(e){return t.setState({data:e,loading:null})})).catch((function(e){return t.setState({msg:{title:"No se pudo actualizar el listado",message:e.message,info:e.code},loading:null})}))),this.props.history.push(this.props.match.path)}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.msg,o=t.loading,i=this.props.rol;return o?r.a.createElement("div",{style:{width:"100%",textAlign:"center",paddingTop:100}},r.a.createElement(Q.a,{size:100}),r.a.createElement(C.a,{variant:"h6"},"CARGANDO...")):r.a.createElement(te.a,{style:{width:"calc(100%-20px)",height:"calc(100% - 30px)",display:"flex",flexDirection:"column",margin:10,padding:10,paddingBottom:0,overflowX:"hidden"}},r.a.createElement(M.a,null,r.a.createElement(G.a,{xsDown:!0,implementation:"css"},r.a.createElement(L.a,null,r.a.createElement(ne.a,{container:!0,spacing:1,style:{borderBottom:"1px solid #ebebeb"}},r.a.createElement(ne.a,{sm:2,item:!0},r.a.createElement(C.a,{variant:"overline"},"Numero")),r.a.createElement(ne.a,{sm:2,item:!0},r.a.createElement(C.a,{variant:"overline"},"Creado")),3===i&&r.a.createElement(ne.a,{sm:3,item:!0},r.a.createElement(C.a,{variant:"overline"},"Usuario")),r.a.createElement(ne.a,{sm:1,item:!0},r.a.createElement(C.a,{variant:"overline"},"Total")),1===i&&r.a.createElement(ne.a,{sm:1,item:!0},r.a.createElement(C.a,{variant:"overline"},"Ganancia")),r.a.createElement(ne.a,{sm:2,item:!0},r.a.createElement(C.a,{variant:"overline"},"Estado")),r.a.createElement(ne.a,{sm:2,item:!0},r.a.createElement(C.a,{variant:"overline"},"Fecha de Entrega"))))),a.map((function(t){return r.a.createElement(L.a,{key:t.id,id:""+t.id,button:!0,onClick:e.handleClick},r.a.createElement(ne.a,{container:!0,spacing:1,style:{paddingTop:5,paddingBottom:5,borderBottom:"1px solid #fafafa"}},r.a.createElement(ne.a,{xs:12,sm:2,item:!0},r.a.createElement(G.a,{smUp:!0},"PEDIDO #"),t.id),r.a.createElement(ne.a,{xs:12,sm:2,item:!0},new Date(t.fechaCreacion).toLocaleDateString()),3===i&&r.a.createElement(ne.a,{xs:12,sm:3,item:!0},t.username),r.a.createElement(ne.a,{xs:12,sm:1,item:!0},"$ ",t.total.toFixed(2)),1===i&&r.a.createElement(ne.a,{xs:12,sm:1,item:!0},"$ ",(t.descuentoTotal||0).toFixed(2)),r.a.createElement(ne.a,{xs:12,sm:2,item:!0},r.a.createElement(C.a,{color:Pe(t.estado)},t.estado)),r.a.createElement(ne.a,{xs:12,sm:2,item:!0},t.fechaEntrega&&new Date(t.fechaEntrega).toDateString())))}))),n&&r.a.createElement(Se,Object.assign({},n,{onClose:this.handleMessage})),r.a.createElement(m.b,{path:this.props.match.path+"/:id",render:function(t){return r.a.createElement(Ne,Object.assign({},t,{onClose:e.handleClose,editable:3===i}))}}))}}]),a}(r.a.Component);function Pe(e){return"APROBADO"===e?"primary":"RECHAZADO"===e?"secondary":"initial"}var _e=a(286);function Me(e){var t=e.data,a=e.title,n=e.col1,o=e.col2,i=e.secondColType,l=e.colType;return r.a.createElement(E.a,{className:"dashboard-card",style:{display:"flex",flexDirection:"column"}},r.a.createElement(_e.a,{title:a,style:{textAlign:"center"}}),r.a.createElement(v.a,{style:{flex:1,overflow:"auto"}},r.a.createElement(M.a,null,t.sort((function(e,t){return t[n]-e[n]})).map((function(e,t){var a=e[n];if(o){var c=e[o];i&&"DATE"===i&&(c=function(e){if(!e)return"Nunca";var t=new Date(e);if(isNaN(+t))return e;var a=new Date;if(t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear())return t.toLocaleTimeString();for(var n=1;n<30;n++){var r=new Date(a.getFullYear(),a.getMonth(),a.getDate()-n);if(t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear())return 1===n?"Ayer":"Hace "+n+" d\xedas"}return t.toLocaleDateString()}(e[o]))}return r.a.createElement(L.a,{key:t,id:"ranking-listitem-"+t},r.a.createElement("div",{style:{display:"table",width:"100%"}},r.a.createElement(C.a,{style:{display:"table-cell",width:50},variant:e.me?"body1":"caption"},"# ",t+1),r.a.createElement(C.a,{style:{display:"table-cell"},variant:e.me?"body1":"caption"},e.username),"PERFOMANCE"===l&&r.a.createElement(Le,{value:a,me:e.me}),"MONEY"===l&&r.a.createElement(C.a,{style:{display:"table-cell",textAlign:"right",width:100},variant:e.me?"body1":"caption"},"$ ",a.toFixed(2)),o?"PERFOMANCE"===i?r.a.createElement(Le,{value:c,me:e.me}):r.a.createElement(C.a,{style:{display:"table-cell",textAlign:"right",width:100,paddingLeft:10},variant:e.me?"body1":"caption"},"MONEY"===i?"$":null," ",c):null))})))))}function Le(e){return r.a.createElement(C.a,{color:e.value?e.value>0?"primary":"secondary":"inherit",style:{display:"table-cell",textAlign:"right",width:100},variant:e.me?"body1":"caption"},"% ",e.value.toFixed(2)," ",e.value?e.value>0?"\u2191":"\u2193":null)}var Ie=a(53),Ue=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={options:{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,bezierCurve:!1,scales:{yAxes:[{ticks:{maxTicksLimit:10,padding:5}}],xAxes:[{ticks:{padding:5}}]}}},e}return Object(s.a)(a,[{key:"render",value:function(){for(var e=[],t=[],a=0;a<this.props.data.length;a++){var n=this.props.data[a];if(n.we){var o=new Date(n.we);e.push("".concat(o.getDate()," ").concat(Be[o.getMonth()]))}else e.push(n.label);t.push(n.value)}var i={labels:e,datasets:[{backgroundColor:"#3f51b5",borderColor:"#3f51b5",data:t,lineTension:0,fill:!1}]};return r.a.createElement(E.a,{className:"dashboard-card",style:{display:"flex",flexDirection:"column"}},r.a.createElement(_e.a,{style:{textAlign:"center"},title:this.props.title}),r.a.createElement(v.a,{style:{width:"100%",flex:1,padding:5}},r.a.createElement(Ie.b,{options:this.state.options,data:i})))}}]),a}(r.a.PureComponent),Be=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sept","Oct","Nov","Dic"],Ge=a(288);function Fe(e){var t=e.month,a=e.year,n=0,o=0;return t&&(n=5*t/100,o=14*t/100),r.a.createElement(E.a,{className:"dashboard-card"},r.a.createElement(_e.a,{title:"GANANCIAS",style:{textAlign:"center"}}),r.a.createElement(v.a,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("div",{style:{textAlign:"center",flex:1}},r.a.createElement(C.a,{color:"primary",variant:"h5",style:{flex:1}},"$ ",ze(t)),r.a.createElement(C.a,{color:"primary"},"ESTE MES")),r.a.createElement("div",{style:{borderLeft:"1px solid black",textAlign:"center",flex:1}},r.a.createElement(C.a,{variant:"h5",style:{flex:1}},"$ ",ze(a)),r.a.createElement(C.a,null,"ESTE A\xd1O"))),r.a.createElement(C.a,{variant:"subtitle1",style:{marginTop:20,paddingLeft:15,textAlign:"left"}},"Te aconsejamos apartar lo siguiente:"),r.a.createElement(M.a,null,r.a.createElement(L.a,{dense:!0},r.a.createElement(U.a,{primary:"RESERVAS 5%"}),r.a.createElement(Ge.a,null,"$ ",n.toFixed(2))),r.a.createElement(L.a,{dense:!0},r.a.createElement(U.a,{primary:"PROMOCION 14%"}),r.a.createElement(Ge.a,null,"$ ",o.toFixed(2))))))}function ze(e){return e?e>1e3?+(e/1e3).toFixed(1)+" K":e>1e6?+(e/1e3).toFixed(1)+" M":+e.toFixed(2):0}var Ve=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={options:{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1}},e}return Object(s.a)(a,[{key:"render",value:function(){for(var e=[],t=[],a=[],n=this.props.data.sort((function(e,t){return t.value-e.value})),o=0;o<n.length;o++){var i=n[o];e.push(i.label),t.push(i.value),a.push(i.color)}var l={labels:e,datasets:[{backgroundColor:a,data:t}]};return r.a.createElement(E.a,{className:"dashboard-card",style:{display:"flex",flexDirection:"column"}},r.a.createElement(_e.a,{style:{textAlign:"center"},title:this.props.title}),r.a.createElement(v.a,{style:{width:"100%",flex:1,padding:5}},r.a.createElement(Ie.c,{options:this.state.options,data:l})))}}]),a}(r.a.PureComponent),We=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={options:{title:{display:!1},legend:{display:!1},maintainAspectRatio:!1,scaleBeginAtZero:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}},e}return Object(s.a)(a,[{key:"render",value:function(){for(var e=[],t=[],a=0;a<this.props.data.length;a++){var n=this.props.data[a];e.push(n.label),n.we?t.push(new Date(n.we).toLocaleDateString()):t.push(n.value)}var o={labels:e,datasets:[{backgroundColor:"#3f51b5",borderColor:"#3f51b5",data:t,fill:!1}]};return r.a.createElement(E.a,{className:"dashboard-card",style:{display:"flex",flexDirection:"column"}},r.a.createElement(_e.a,{style:{textAlign:"center"},title:this.props.title}),r.a.createElement(v.a,{style:{width:"100%",flex:1,padding:5}},r.a.createElement(Ie.a,{options:this.state.options,data:o})))}}]),a}(r.a.PureComponent),Ye=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={loading:!0,error:null,week_ranking:[],group_graph:[],personal_graph:[],year_sales:[],product_resume:[],group_ranking:[]},e.onMounted(e.match.path),n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=this;x.Stats(["week_ranking","personal_graph","group_graph","year_sales","product_resume","group_ranking"]).then((function(t){return e.setState(Object(p.a)(Object(p.a)({},t),{},{loading:null}))})).catch((function(t){e.setState({error:t,loading:null})}))}},{key:"render",value:function(){for(var e=this.state,t=e.loading,a=e.error,n=e.week_ranking,o=e.personal_graph,i=e.group_graph,l=e.year_sales,c=e.product_resume,s=e.group_ranking,u=this.props,d=u.rol,m=u.grupo,h=u.username,p={month:0,year:0},g=new Date,f=0;f<l.length;f++){var E=l[f];E.createdAt=new Date(E.createdAt),E.createdAt.getMonth()===g.getMonth()&&E.createdAt.getFullYear()===g.getFullYear()&&(p.month+=E.profit),p.year+=E.profit}return t?r.a.createElement("div",{style:{width:"100%",paddingTop:100,textAlign:"center"}},r.a.createElement(Q.a,{size:100}),r.a.createElement(C.a,{variant:"h6"},"CARGANDO...")):a?r.a.createElement("div",{style:{width:"100%",paddingTop:100,textAlign:"center"}},r.a.createElement(C.a,{variant:"h5"},"OCURRI\xd3 UN PROBLEMA"),r.a.createElement(C.a,{variant:"subtitle1"},a.message),r.a.createElement(C.a,{variant:"body1"},a.status," ",a.code)):r.a.createElement(ne.a,{container:!0,spacing:2,style:{margin:"auto",width:"calc(100% - 10px)",textAlign:"center"}},r.a.createElement(ne.a,{item:!0,xs:12},r.a.createElement(C.a,{color:"primary",variant:"h6"},"Hola ",h,", Esta es tu cuenta personal de Nat\xfa."),r.a.createElement(C.a,{variant:"subtitle1"},"Estamos aqu\xed para prosperar juntos. Estos son los indicadores de tu trabajo.")),r.a.createElement(ne.a,{item:!0,sm:6,xs:12},r.a.createElement(Me,{data:s,title:"RANKING DE GRUPOS",colType:"PERFOMANCE",secondColType:"MONEY",col1:"perfomance",col2:"stat"})),r.a.createElement(ne.a,{item:!0,sm:6,xs:12},r.a.createElement(Ue,{data:o,title:"ESTADISTICA SEMANAL"})),r.a.createElement(ne.a,{item:!0,sm:6,xs:12},r.a.createElement(We,{data:i,title:m||"ESTADISTICA MENSUAL"})),r.a.createElement(ne.a,{item:!0,sm:6,xs:12},r.a.createElement(Ve,{data:c,title:"PRODUCTOS VENDIDOS"})),r.a.createElement(ne.a,{item:!0,sm:6,xs:12},r.a.createElement(Fe,{month:p.month,year:p.year})),r.a.createElement(G.a,{smUp:!0},r.a.createElement(ne.a,{item:!0,xs:12},r.a.createElement(w.a,null))),r.a.createElement(ne.a,{item:!0,sm:6,xs:12},r.a.createElement(Me,{data:n,title:"RANKING DE LA SEMANA",colType:"MONEY",secondColType:"DATE",col1:"stat",col2:"ultimoPedido"})),r.a.createElement(ne.a,{item:!0,sm:6,xs:12},r.a.createElement(Me,{data:n,title:"PROGRESO DE LA SEMANA",colType:"PERFOMANCE",col1:"perfomance"})),1!==d&&r.a.createElement(ne.a,{item:!0,sm:6,xs:12},r.a.createElement(Me,{data:n,title:"RANKING ACUMULATIVO",colType:"MONEY",col1:"monto_acumulativo"})))}}]),a}(r.a.Component),qe=a(289),He=a(290),Ze=a(291),$e=a(292),Je=a(293),Ke=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:null,error:null,data:[]},e.handleClick=function(){if(!e.state.loading){var t=e.valueOf("desde"),a=e.valueOf("hasta"),n=e.valueOf("estado");if(!t||isNaN(+new Date(t)))return alert("Selecciona la fecha desde");if(!a||isNaN(+new Date(a)))return alert("Selecciona la fecha hasta");if(!n)return alert("Selecciona el estado");e.setState({loading:!0}),t=new Date(t).toJSON(),a=new Date(a).toJSON(),x.ProductSalesReport({desde:t,hasta:a,estado:n}).then((function(t){return e.setState({data:t,loading:null,error:null})})).catch((function(t){return e.setState({error:t,loading:null})}))}},e}return Object(s.a)(a,[{key:"valueOf",value:function(e){var t=document.getElementById(e);return t&&t.value}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.error,n=e.loading;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",null,r.a.createElement(b.a,{style:{marginLeft:10,marginRight:10},type:"datetime-local",inputProps:{id:"desde"}}),r.a.createElement(b.a,{style:{marginLeft:10,marginRight:10},type:"datetime-local",inputProps:{id:"hasta"}}),r.a.createElement(b.a,{style:{marginLeft:10,marginRight:10},select:!0,SelectProps:{native:!0},inputProps:{id:"estado"}},r.a.createElement("option",{value:1},"PENDIENTE"),r.a.createElement("option",{value:0},"APROBADO"),r.a.createElement("option",{value:2},"RECHAZADO"),r.a.createElement("option",{value:3},"ENTREGADO")),r.a.createElement(A.a,{disabled:n,style:{marginLeft:10,marginRight:10},variant:"outlined",onClick:this.handleClick},"GENERAR")),n?r.a.createElement("div",{style:{width:"100%",marginTop:100,textAlign:"center"}},r.a.createElement(Q.a,{size:100}),r.a.createElement(C.a,{variant:"h6"},"CARGANDO...")):a?r.a.createElement("div",{style:{width:"100%",marginTop:100,textAlign:"center"}},r.a.createElement(C.a,{variant:"h4"},"OCURRI\xd3 UN ERROR"),r.a.createElement(C.a,{variant:"subtitle1"},a.message),r.a.createElement(C.a,{variant:"subtitle2"},a.code," ",a.status)):r.a.createElement("div",null,r.a.createElement(qe.a,null,r.a.createElement(He.a,null,r.a.createElement(Ze.a,null,r.a.createElement($e.a,{component:"th"},"Fecha"),r.a.createElement($e.a,{component:"th"},"#"),r.a.createElement($e.a,{component:"th"},"Usuario"),r.a.createElement($e.a,{component:"th"},"Estado"),r.a.createElement($e.a,{component:"th"},"Observacion"),r.a.createElement($e.a,{component:"th"},"Fecha Env\xedo"),r.a.createElement($e.a,{component:"th"},"Entregado"),r.a.createElement($e.a,{component:"th"},"Motivo Anulacion"),r.a.createElement($e.a,{component:"th"},"Producto"),r.a.createElement($e.a,{component:"th"},"Cant"))),r.a.createElement(Je.a,null,t.map((function(e){return r.a.createElement(Ze.a,{key:e.id},r.a.createElement($e.a,null,new Date(e.createdAt).toLocaleDateString()),r.a.createElement($e.a,null,e.idPedido),r.a.createElement($e.a,null,e.username),r.a.createElement($e.a,null,e.estado),r.a.createElement($e.a,null,e.observacion),r.a.createElement($e.a,null,e.fechaEntrega&&new Date(e.fechaEntrega).toLocaleDateString()),r.a.createElement($e.a,null,e.fechaEntrega&&new Date(e.fechaEntrega).toLocaleDateString()),r.a.createElement($e.a,null,e.motivoAnulacion),r.a.createElement($e.a,null,e.descripcion),r.a.createElement($e.a,null,e.cantidad))}))))))}}]),a}(r.a.Component),Qe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={currentTab:0},n.handleChange=function(e,t){n.setState({currentTab:t})},e.onMounted(e.match.path),n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.currentTab;return r.a.createElement(te.a,{style:{margin:10}},r.a.createElement(X.a,{style:{marginBottom:10},value:e,onChange:this.handleChange},r.a.createElement(ee.a,{label:"Detalle de Productos"})),0===e&&r.a.createElement(Ke,null))}}]),a}(r.a.Component),Xe=[{label:"Inicio",Icon:W.a,path:"/feed"},{label:"Nuevo Pedido",Icon:Y.a,path:"/order"},{label:"Pedidos",Icon:q.a,path:"/my-orders"},{label:"Reportes",Icon:H.a,path:"/reports"}],et=Object(_.a)((function(e){return{drawer:Object(g.a)({},e.breakpoints.up("sm"),{width:200,flexShrink:0}),toolbar:e.mixins.toolbar,drawerPaper:{width:200},content:Object(g.a)({flexGrow:1},e.breakpoints.up("sm"),{marginLeft:200}),appBar:{display:"block"}}}))(function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={selected:"",isMenuOpen:!1,username:"",grupo:"",token:"",rol:0,accesos:[],descuentos:[]},n.onMounted=n.onMounted.bind(Object(f.a)(n)),n.handleMenu=n.handleMenu.bind(Object(f.a)(n)),n.closeMenu=n.closeMenu.bind(Object(f.a)(n)),n.state.username=e.username,n.state.grupo=e.grupo,n.state.rol=e.rol,n.state.descuentos=e.descuentos||[],n.state.accesos=[].concat(Xe),3!==n.state.rol&&(n.state.accesos=[].concat(Xe),n.state.accesos.splice(3,1)),n}return Object(s.a)(a,[{key:"onMounted",value:function(e){this.setState({selected:e})}},{key:"handleMenu",value:function(){this.setState((function(e){var t=Object(p.a)({},e);return t.isMenuOpen=!t.isMenuOpen,t}))}},{key:"closeMenu",value:function(){this.setState({isMenuOpen:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selected,n=t.isMenuOpen,o=t.username,i=t.grupo,l=this.props,c=l.window,s=l.classes,u=void 0!==c?function(){return c().document.body}:void 0,d=r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",{style:{textAlign:"center",marginTop:10,marginBottom:10}},r.a.createElement(C.a,{style:{display:"block"},variant:"button"},o),r.a.createElement(C.a,{style:{display:"block"},variant:"caption"},i)),r.a.createElement(M.a,{style:{flex:1}},this.state.accesos.map((function(t){return r.a.createElement(L.a,{onClick:e.closeMenu,selected:a===t.path,component:T.b,to:t.path,button:!0,key:t.label},r.a.createElement(I.a,null,r.a.createElement(t.Icon,null)),r.a.createElement(U.a,{style:{flex:1},primary:t.label}))}))),r.a.createElement(L.a,{component:"a",target:"_a",href:"https://wa.me/"},r.a.createElement(I.a,null," ",r.a.createElement(Z.a,null)," "),r.a.createElement(U.a,{primary:"AYUDA"})));return r.a.createElement(T.a,{basename:"/app"},r.a.createElement("div",{style:{width:"100%",height:"100%"}},r.a.createElement(B.a,null),r.a.createElement("nav",{className:s.drawer},r.a.createElement(G.a,{smUp:!0,implementation:"css"},r.a.createElement(F.a,{container:u,variant:"temporary",anchor:"left",open:n,onClose:this.closeMenu,classes:{paper:s.drawerPaper},ModalProps:{keepMounted:!0}},r.a.createElement("div",{className:s.toolbar,style:{textAlign:"right"}},r.a.createElement(O.a,{onClick:this.handleMenu},r.a.createElement($.a,null))),d)),r.a.createElement(G.a,{xsDown:!0,implementation:"css"},r.a.createElement(F.a,{classes:{paper:s.drawerPaper},variant:"permanent",open:!0},d))),r.a.createElement(G.a,{smUp:!0,implementation:"css"},r.a.createElement(z.a,{position:"fixed",className:s.x},r.a.createElement(V.a,null,r.a.createElement(O.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:this.handleMenu},r.a.createElement(J.a,null)),r.a.createElement(C.a,{style:{flexGrow:1}},(Xe.find((function(e){return e.path===a}))||{}).label)))),r.a.createElement("main",{className:s.content},r.a.createElement(G.a,{smUp:!0,implementation:"css"},r.a.createElement("div",{className:s.toolbar})),r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/feed",render:function(t){return r.a.createElement(Ye,Object.assign({},t,{onMounted:e.onMounted,grupo:e.state.grupo,username:e.state.username,rol:e.state.rol}))}}),r.a.createElement(m.b,{path:"/order",render:function(t){return r.a.createElement(Te,{onMounted:e.onMounted,rol:e.state.rol,descuentos:e.state.descuentos})}}),r.a.createElement(m.b,{path:"/my-orders",render:function(t){return r.a.createElement(Re,Object.assign({},t,{rol:e.state.rol,onMounted:e.onMounted}))}}),r.a.createElement(m.b,{path:"/reports",render:function(t){return r.a.createElement(Qe,Object.assign({},t,{rol:e.state.rol,onMounted:e.onMounted}))}}),r.a.createElement(m.b,{path:"/",exact:!0},r.a.createElement(m.a,{to:"/feed"}))))))}}]),a}(r.a.Component)),tt=a(119),at=a(264),nt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={nombre:"",identificacion:"",telefono:"",email:"",fechaNacimiento:"",nacionalidad:"",ciudad:"",direccion:"",username:"",password:"",confirm_password:"",error:null,grupo:"",grupos:[{id:"AGUILAS - FM",nombre:"FAUSTO MI\xd1O"},{id:"FUEGO - PN",nombre:"PAOLA MARULANDA ARIAS"},{id:"ENERGIA - NA",nombre:"NATAHLI ARACELI ALDAZ RODR\xcdGUEZ"},{id:"ESPERANZA - EV",nombre:"EDISON MARCELO VALVERDE GUEVARA"}],loading:!1,fin_registro:null},e.handleChange=function(t){var a=t.currentTarget,n=a.name,r=a.value;e.setState(Object(g.a)({},n,r))},e.handleSubmit=function(t){if(t.preventDefault(),t.stopPropagation(),!e.state.loading){var a=rt(e.state);if(a)return e.setState({error:a});e.setState({loading:!0,error:null}),setTimeout((function(){x.SignIn(e.state).then((function(t){e.setState({loading:!1,fin_registro:t.email}),N.Set("user",e.state.username)})).catch((function(t){return e.setState({error:t,loading:!1})}))}),2e3)}},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;x.GetGroups().then((function(t){return e.setState({grupos:t})})).catch((function(t){return e.setState({error:{grupo:"No se pudieron cargar los grupos: "+t.message}})}))}},{key:"render",value:function(){var e=this.state,t=this.state,a=t.loading,n=t.error,o=t.fin_registro,i=t.grupos;return o?r.a.createElement("div",{style:{width:"100%",padding:30,textAlign:"center"}},r.a.createElement(C.a,{variant:"h4"},"Registro completado!"),r.a.createElement(C.a,{variant:"subtitle1"},"Para habilitar tu cuenta entra a tu correo (",o,") y abre el enlace que te enviamos."),r.a.createElement(C.a,{variant:"body1"},"Si no encuentras nuestro correo en tu Bandeja de Entreda, es posible que encuentre en SPAM o NO DESEADOS.")):r.a.createElement("main",{style:{width:"100%",padding:10,textAlign:"center",backgroundColor:"#fafafa"}},r.a.createElement(te.a,{style:{padding:20,margin:"auto",maxWidth:600}},r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("img",{style:{height:100},src:"http://natucosmetic.com/wp-content/uploads/2020/03/LOGO-NATU-PNG.png"}),r.a.createElement("div",{style:{flexGrow:1,margin:20,textAlign:"left"}},r.a.createElement(C.a,{variant:"h4"},"REGISTRATE"),r.a.createElement(C.a,{component:T.b,to:"/login"},"Ya tienes una cuenta? Inicia sesi\xf3n aqu\xed"))),r.a.createElement(w.a,null),r.a.createElement(C.a,{variant:"h6",style:{marginTop:20}},"Informaci\xf3n personal"),r.a.createElement(it,{disabled:a,error:n&&n.nombre,onChange:this.handleChange,value:e.nombre,name:"nombre",label:"Nombres Completos"}),r.a.createElement(it,{disabled:a,error:n&&n.identificacion,onChange:this.handleChange,value:e.identificacion,name:"identificacion",label:"Identificacion (Cedula, pasaporte, etc.)",type:"phone"}),r.a.createElement(it,{disabled:a,error:n&&n.telefono,onChange:this.handleChange,value:e.telefono,name:"telefono",label:"Telefono",type:"phone"}),r.a.createElement(it,{disabled:a,error:n&&n.email,onChange:this.handleChange,value:e.email,name:"email",label:"Correo Electronico",type:"email"}),r.a.createElement(it,{disabled:a,error:n&&n.nacionalidad,onChange:this.handleChange,value:e.nacionalidad,name:"nacionalidad",label:"Nacionalidad"}),r.a.createElement(it,{disabled:a,error:n&&n.fechaNacimiento,onChange:this.handleChange,value:e.fechaNacimiento,name:"fechaNacimiento",label:"Fecha de Nacimiento",type:"date"}),r.a.createElement(C.a,{variant:"h6",style:{marginTop:30}},"Agrega tu direcci\xf3n"),r.a.createElement(it,{disabled:a,error:n&&n.ciudad,onChange:this.handleChange,value:e.ciudad,name:"ciudad",label:"Ciudad"}),r.a.createElement(it,{disabled:a,error:n&&n.direccion,onChange:this.handleChange,value:e.direccion,name:"direccion",label:"Direccion"}),r.a.createElement(C.a,{variant:"h6",style:{marginTop:30}},"Crea tu Usuario"),r.a.createElement(it,{disabled:a,error:n&&n.username,onChange:this.handleChange,value:e.username,name:"username",label:"Usuario"}),r.a.createElement(lt,{disabled:a,error:n&&n.password,onChange:this.handleChange,value:e.password,name:"password",label:"Contrase\xf1a"}),r.a.createElement(lt,{disabled:a,error:n&&n.confirm_password,onChange:this.handleChange,value:e.confirm_password,name:"confirm_password",label:"Confirma tu contrase\xf1a"}),r.a.createElement(C.a,{variant:"subtitle1",style:{marginTop:10}},"A qu\xe9 grupo quieres pertenecer?"),r.a.createElement(it,{select:!0,disabled:a,error:n&&n.grupo,onChange:this.handleChange,value:e.grupo,name:"grupo",label:"Grupo",SelectProps:{native:!0}},r.a.createElement("option",{value:""},"- SELECCIONA UN GRUPO -"),i.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.id," - ",e.nombre)}))),n&&n.guardar?r.a.createElement(C.a,{color:"secondary"},n.guardar):null,r.a.createElement(A.a,{type:"submit",color:"primary",variant:"outlined",fullWidth:!0,style:{marginTop:20}},a?r.a.createElement(Q.a,{size:20,color:"inherit"}):"ENVIAR"))))}}]),a}(r.a.Component);function rt(e){var t=e.nombre,a=e.telefono,n=e.identificacion,r=e.email,o=e.fechaNacimiento,i=e.nacionalidad,l=e.ciudad,c=e.direccion,s=e.username,u=e.password,d=e.grupo,m=e.confirm_password,h={};if(ot(t)&&(h.nombre="Digita tu nombre"),ot(a)?h.telefono="Digita tu telefono":(isNaN(parseInt(a))&&(h.telefono="El telefono solo puede contener numeros"),a.length<=5&&(h.telefono="El telefono debe tener m\xednimo 6 digitos")),ot(n)&&(h.identificacion="Digita tu identificacion"),ot(r)?h.email="Digita tu email":(-1===r.indexOf("@")&&(h.email="El correo es incorrecto"),-1===r.indexOf(".")&&(h.email="El correo es incorrecto")),ot(o)?h.fechaNacimiento="Digita tu fecha de nacimiento":isNaN(+new Date(o))&&(h.fechaNacimiento="La fecha no es v\xe1lida"),ot(i)&&(h.nacionalidad="Digita tu nacionalidad"),ot(l)&&(h.ciudad="Digita tu ciudad"),ot(c)&&(h.direccion="Digita tu direccion"),ot(s)&&(h.username="Digita tu Usuario"),ot(u)?h.password="Digita la contrase\xf1a":(u.length<5&&(h.password="La contrase\xf1a debe tener m\xe1s de 6 caracteres"),u.trim()!==m.trim()&&(h.confirm_password="Las contrase\xf1as no concuerdan entre si")),ot(d)&&(h.grupo="Selecciona tu grupo"),Object.keys(h).length){var p=Object.keys(h)[0];return window.requestAnimationFrame((function(){return document.getElementById(p).focus()})),h}return null}function ot(e){return!(e&&e.length)}function it(e){var t=e.error,a=e.type,n=e.label,o=Object(K.a)(e,["error","type","label"]),i={type:a,inputProps:{id:e.name}};return t&&(i.error=!0,i.helperText=t),"date"===a?r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",marginBottom:5,marginTop:15}},r.a.createElement(at.a,{style:{paddingTop:8,marginRight:5}},n),r.a.createElement(b.a,Object.assign({required:!0},i,{style:{flex:1}},o),e.children," ")):(i.label=n,r.a.createElement(b.a,Object.assign({fullWidth:!0,required:!0},i,{style:{marginTop:5,marginBottom:5}},o)))}function lt(e){var t=e.error,a=Object(K.a)(e,["error"]),n=r.a.useState(!1),o=Object(tt.a)(n,2),i=o[0],l=o[1],c={inputProps:{id:e.name}};return t&&(c.error=!0,c.helperText=t),r.a.createElement(b.a,Object.assign({type:i?"text":"password"},a,c,{fullWidth:!0,required:!0,style:{marginTop:5,marginBottom:5},InputProps:{endAdornment:r.a.createElement(y.a,{position:"end"},r.a.createElement(O.a,{onClick:function(e){return l(!i)}},i?r.a.createElement(k.a,null):r.a.createElement(D.a,null)))}}))}var ct=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={user:null},n.history=Object(h.b)(),n.handleLoggedIn=function(e){if(n.setState({user:e}),"PENDIENTE"===e.estado)return n.history.push("/classroom");n.history.push("/app"),x.KEY=e.token;try{N.setPrefix(e.id&&e.id+"_")}catch(t){console.info("Ocurrio un error en Preferences.setPrefix",t)}},e.user&&(n.state.user=e.user,x.KEY=e.user.token),n}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state.user;if(a)switch(a.estado){case"PENDIENTE":e=r.a.createElement(m.b,null,"BIENVENIDO A CLASSROOM");break;case"RECHAZADO":e=r.a.createElement(m.b,null,"USUARIO EST\xc1 DESHABILITADO");break;default:e=r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/classroom"},"BIENVENIDO A CLASSROOM"),r.a.createElement(m.b,{path:"/app",render:function(){return r.a.createElement(et,a)}}),r.a.createElement(m.b,null,r.a.createElement(m.a,{to:"/app"})))}return r.a.createElement(m.c,{history:this.history},a?e:r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/signin",component:nt}),r.a.createElement(m.b,{path:"/recover-password"},"AQUI PUEDE RECUPERAR TU CONTRAE\xd1A"),r.a.createElement(m.b,{path:"/login",render:function(e){return r.a.createElement(R,{onLoggedIn:t.handleLoggedIn})}}),r.a.createElement(m.b,null,r.a.createElement(m.a,{to:"/login"}))))}}]),a}(r.a.Component);i.a.render(r.a.createElement(ct,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[127,1,2]]]);
//# sourceMappingURL=main.7b9e843c.chunk.js.map