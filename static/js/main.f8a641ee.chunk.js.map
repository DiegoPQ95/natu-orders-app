{"version":3,"sources":["Services/API.ts","Components/Order/ProductGrid.tsx","Components/Order/ConfirmOrder.tsx","Services/Geo.ts","Components/Order/Location.tsx","Components/Order/Payment.tsx","Components/Message.tsx","Components/Order/Survey.tsx","Services/Preferences.ts","Components/Order/index.tsx","Services/Calcs.ts","Components/OrderList/OrderDetails.tsx","Components/OrderList/index.tsx","Components/Ranking.tsx","Components/Feed/RankingCard.tsx","Components/Feed/GroupCard.tsx","Components/Feed/ProfitCard.tsx","Components/Feed/PieCard.tsx","Components/Feed/index.tsx","Components/Reports/ProductSales.tsx","Components/Reports/index.tsx","App.tsx","serviceWorker.ts","Components/Login.tsx","index.tsx"],"names":["DOMAIN","KEY","body","this","Fetch","method","Promise","resolve","montoDesde","porcentaje","id","array_items","join","params","param_str","Object","keys","length","URLSearchParams","toString","URI","options","DEFAULTS","cache","mode","ops","headers","JSON","stringify","fetch","then","response","ok","json","clone","catch","text","x","message","status","statusText","obj","ex","ProductGrid","props","visible_style","visible","display","Grid","container","alignItems","style","flex","overflow","marginTop","spacing","items","map","item","key","sm","md","xs","Card","CardMedia","component","height","objectFit","image","imgSrc","CardContent","flexDirection","Typography","variant","nombre","pvp_final","toFixed","CardActions","IconButton","onClick","onActionChanged","name","value","Add","cantidad","disabled","Remove","ConfirmOrder","show_next_discount","descuento","total","subtotal","valor","List","Row","col1","col2","col3","color","sgte_descuento_porcentaje","ListItem","sgte_descuento_falta","width","maxWidth","textAlign","GeoCoder","QUITO_BOUNDS","west","north","east","south","QUITO","lat","lng","reject","console","info","navigator","geolocation","PositionByIP","getCurrentPosition","geoLocation","coords","latitude","longitude","fromGPS","location","bounds","google","window","maps","Geocoder","geocode","results","first","inputText","place","route","street_number","i","address_components","ii","types","type","short_name","long_name","find","formatted_address","AddressText","address","Location","state","defaultCenter","mapRef","virtualMarker","handleChange","bind","handleMapMounted","handleDragStart","handleDragEnd","Geo","currentPosition","setState","event","currentTarget","onValueChange","classList","add","PlaceFromCoords","getCenter","d","warn","remove","document","createElement","className","getDiv","appendChild","direccion","ciudad","referencia","sector","Paper","margin","padding","TextField","onChange","label","multiline","rows","React","PureComponent","withScriptjs","withGoogleMap","onMounted","google_maps_props","ref","disableDefaultUI","zoomControl","clickableIcons","marginLeft","marginRight","marginBottom","Divider","inputMode","numeroTransaccion","Button","loading","onDone","CircularProgress","size","Message","title","onClose","Dialog","open","Boolean","children","DialogTitle","DialogContent","DialogActions","Survey","txt1","txt2","handleClose","handleSubmit","preventDefault","API","ActionOrder","action","alert","onSubmit","autoFocus","fullWidth","Component","Preferences","localStorage","getItem","parse","undefined","value_txt","setItem","removeItem","Order","handleTab","handleAction","handleValueChange","handleDone","handleMessage","handleSurveyClose","match","path","currentTab","productList","tablaDescuentos","descuentoAplica","observacion","position","surveyId","msg","all","GetProducts","getDiscounts","before","Get","updates","hasOwnProperty","choosen","times","Set","filter","failed_msg","trim","SaveOrder","detalle","descuentoPorcentaje","descuentoTotal","prev","a","cant","isNaN","cantidad_desde","result","Totals","sorted","sort","b","founded","desc","next","EstimarDescuento","remain_state","choosenItems","paddingTop","Tabs","Tab","Payment","code","OrderDetails","_fechaEntrega","shouldRefresh","handleButton","estado","fechaEntrega","confirm","prompt","GetOrder","order","numero","fechaCreacion","username","telefono","survey1","survey2","motivoAnulacion","editable","Date","toLocaleString","toLocaleDateString","href","target","data","handleClick","GetOrders","err","history","push","refresh","rol","paddingBottom","overflowX","Hidden","xsDown","implementation","borderBottom","button","smUp","EstadoToVariant","toDateString","render","Ranking","showLastOrder","perfomanceStat","stat","r","index","me","paddingLeft","date","ahora","getDate","getMonth","getFullYear","toLocaleTimeString","este_dia","DateToString","ultimoPedido","RankingCard","CardHeader","GroupCard","legend","maintainAspectRatio","scales","yAxes","ticks","maxTicksLimit","xAxes","labels","values","el","datasets","backgroundColor","borderColor","fill","ProfitCard","month","year","reservas","promo","reduceMoney","borderLeft","dense","ListItemText","primary","ListItemSecondaryAction","PieCard","Feed","error","week_ranking","group_graph","personal_graph","year_sales","product_resume","group_ranking","Stats","grupo","week_progress","perfomance","cumulative_ranking","monto_acumulativo","resume","createdAt","profit","ProductSales","desde","valueOf","hasta","toJSON","ProductSalesReport","ID","getElementById","inputProps","select","SelectProps","native","Table","TableHead","TableRow","TableCell","TableBody","idPedido","descripcion","Reports","OPCIONES","Icon","Inbox","ShoppingCart","ListAlt","Report","withStyles","theme","drawer","breakpoints","up","flexShrink","toolbar","mixins","drawerPaper","content","flexGrow","appBar","selected","isMenuOpen","token","accesos","handleMenu","closeMenu","splice","classes","drawerChildren","o","Link","to","ListItemIcon","Help","CssBaseline","Drawer","anchor","paper","ModalProps","keepMounted","Close","AppBar","Toolbar","aria-label","edge","Menu","hostname","Login","user","pwd","isPasswordVisible","handlePassword","setTimeout","requestAnimationFrame","focus","onLoggedIn","src","maxHeight","defaultStyle","InputProps","endAdornment","InputAdornment","VisibilityOff","Visibility","StartApp","ReactDOM","StrictMode","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f8a641ee.chunk.js","sourcesContent":["const DOMAIN = \"https://natuapp.ue.r.appspot.com\";\r\n//const DOMAIN = \"http://localhost:9000\";\r\nclass API {\r\n    KEY = \"\";\r\n    Login(body) {\r\n        return this.Fetch(\"user/login\", { body, method: \"POST\" });\r\n    }\r\n\r\n    GetProducts() {\r\n        return this.Fetch(\"product\");\r\n    }\r\n\r\n    getDiscounts(): Promise<Descuento[]> {\r\n        return Promise.resolve([\r\n            { montoDesde: 60, porcentaje: 20 },\r\n            { montoDesde: 250, porcentaje: 25 },\r\n            { montoDesde: 500, porcentaje: 30 }\r\n        ]);\r\n    }\r\n\r\n    GetOrders(): Promise<Order[]> {\r\n        return this.Fetch(\"order\");\r\n    }\r\n    GetOrder(id: number): Promise<Order> {\r\n        return this.Fetch(\"order/\" + id);\r\n    }\r\n    SaveOrder(body: Order): Promise<any> {\r\n        return this.Fetch(\"order\", {\r\n            method: \"POST\",\r\n            body\r\n        });\r\n    }\r\n    ActionOrder(id: number | string, body: { action: \"SURVEY\" | \"APROBAR\" | \"RECHAZAR\" | \"ENTREGAR\", value: any }): Promise<any> {\r\n        return this.Fetch(\"order/\" + id, {\r\n            method: \"PUT\",\r\n            body\r\n        });\r\n    }\r\n\r\n    Stats(array_items) {\r\n        return this.Fetch(\"dashboard?data=\" + array_items.join(\",\"));\r\n    }\r\n    ProductSalesReport(params: { desde: string, hasta: string, estado: any }) {\r\n        var param_str = \"\";\r\n        if (params && Object.keys(params).length)\r\n            param_str = \"?\" + new URLSearchParams(params).toString();\r\n\r\n        return this.Fetch(\"reports/product-sales\" + param_str);\r\n    }\r\n\r\n    private Fetch(URI, options: SpecialRequest = {}) {\r\n        const DEFAULTS: any = {\r\n            method: \"GET\",\r\n            cache: \"reload\",\r\n            mode: \"cors\"\r\n        };\r\n        var ops: RequestInit = { ...DEFAULTS, ...options };\r\n        if (!ops.headers) ops.headers = {};\r\n        ops.headers['Content-Type'] = 'application/json';\r\n        ops.headers['Access-Control-Allow-Origin'] = '*';\r\n\r\n        if (this.KEY) {\r\n            if (!ops.headers) ops.headers = {};\r\n            ops.headers[\"Authorization\"] = 'Basic ' + this.KEY;\r\n        }\r\n\r\n        if (ops.body && (typeof ops.body !== typeof \"\"))\r\n            ops.body = JSON.stringify(ops.body);\r\n\r\n        return fetch(DOMAIN + \"/\" + URI, ops).then(response => {\r\n            if (response.ok) return response.json();\r\n            return response.clone().json()\r\n                .catch(() => {\r\n                    return response.text().then(x => {\r\n                        throw {\r\n                            message: x,\r\n                            status: response.status,\r\n                            statusText: response.statusText\r\n                        }\r\n                    })\r\n                }).then(obj => {\r\n                    throw {\r\n                        ...obj,\r\n                        status: response.status,\r\n                        statusText: response.statusText\r\n                    }\r\n                })\r\n        }).catch(ex => {\r\n            if (ex.message === \"Failed to fetch\") {\r\n                throw {\r\n                    message: \"Este servicio no se encuentra disponible por el momento. Intentelo más tarde.\",\r\n                    status: 0\r\n                }\r\n            }\r\n            if (!ex.message) ex.message = ex.statusText;\r\n            throw ex;\r\n        });\r\n    }\r\n}\r\nexport default new API();\r\n\r\ninterface SpecialRequest extends RequestInit {\r\n    body?: any\r\n}","import React from \"react\";\r\nimport { Grid, Card, CardContent, CardActions, CardMedia, Typography, IconButton } from \"@material-ui/core\";\r\nimport { Add, Remove } from \"@material-ui/icons\";\r\n\r\nexport default function\r\n    ProductGrid(props: { onActionChanged: any, items: any[], visible: boolean }) {\r\n    const visible_style: any = {}\r\n    if (!props.visible) visible_style.display = \"none\";\r\n    return (<Grid\r\n        container\r\n        alignItems=\"center\"\r\n        style={{ flex: 1, overflow: \"auto\", marginTop: 5, ...visible_style }}\r\n        spacing={3}>\r\n        {props.items.map((item: any) => (<Grid key={item.id} item sm={6} md={4} xs={12}>\r\n            <Card>\r\n                <CardMedia component=\"img\" style={{ height: 180, objectFit: \"contain\" }} image={item.imgSrc || \"https://diegopq95.github.io/take-orders/img/default.png\"} />\r\n                <CardContent style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <Typography style={{ flex: 1, height: 60, overflow: \"hidden\" }} variant=\"subtitle1\">{item.nombre}</Typography>\r\n                    <Typography variant=\"h6\">$ {item.pvp_final.toFixed(2)}</Typography>\r\n                </CardContent>\r\n                <CardActions>\r\n                    <IconButton onClick={props.onActionChanged} name=\"+\" value={item.id}>\r\n                        <Add />\r\n                    </IconButton>\r\n                    <Typography variant=\"body1\">{item.cantidad}</Typography>\r\n                    <IconButton disabled={!(item.cantidad > 0)} onClick={props.onActionChanged} name=\"-\" value={item.id}>\r\n                        <Remove />\r\n                    </IconButton>\r\n                </CardActions>\r\n            </Card>\r\n        </Grid>))}\r\n    </Grid>)\r\n}","import React from \"react\";\r\nimport { List, ListItem, Typography } from \"@material-ui/core\";\r\nexport default function ConfirmOrder(props: {\r\n    items: any[],\r\n    subtotal: number,\r\n    total: number,\r\n    show_next_discount?: boolean,\r\n    descuento?: DescuentoCalc\r\n}) {\r\n    var { items, show_next_discount, descuento, total, subtotal } = props;\r\n    if (!descuento) descuento = { porcentaje: 0, valor: 0 };\r\n    return (<List>\r\n        {items.map(item => <Row key={item.id} col1={item.nombre} col2={item.cantidad} col3={\"$ \" + (item.pvp_final * item.cantidad).toFixed(2)} />)}\r\n        <Row col1={\"SUBTOTAL\"} col3={`$ ${subtotal.toFixed(2)}`} />\r\n        <Row col1={`TU GANANCIA (${descuento.porcentaje}%) EN ESTE PEDIDO`} col3={`$ ${descuento.valor.toFixed(2)}`} color=\"primary\" />\r\n        <Row col1={\"TOTAL\"} variant={\"subtitle2\"} col3={`$ ${total.toFixed(2)}`} />\r\n        {(show_next_discount && descuento.sgte_descuento_porcentaje)\r\n            ? <ListItem>\r\n                <Typography variant=\"subtitle1\" color=\"secondary\">{`Obtén el ${descuento.sgte_descuento_porcentaje}% de descuento agregando ${descuento.sgte_descuento_falta.toFixed(2)} USD más a tu pedido`}</Typography>\r\n            </ListItem>\r\n            : null}\r\n    </List>);\r\n}\r\n\r\n\r\nfunction Row(props: { col1: string, col2?: string | number, col3: string, color?: any, variant?: any }) {\r\n    const { col1, col2, col3, color, variant } = props;\r\n    return (<ListItem>\r\n        <div style={{ width: \"100%\", display: \"table\" }}>\r\n            <Typography color={color || \"initial\"} style={{ display: \"table-cell\" }} variant={variant || \"body1\"}>{col1}</Typography>\r\n            {col2 && <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"15%\", maxWidth: 100, textAlign: \"right\" }} variant={variant || \"body1\"}>{col2}</Typography>}\r\n            <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"25%\", maxWidth: 100, textAlign: \"right\" }} variant={variant || \"body1\"}>{col3}</Typography>\r\n        </div>\r\n    </ListItem>)\r\n}","var GeoCoder;\r\nclass GeoLocation {\r\n    currentPosition() {\r\n        return new Promise((resolve, reject) => {\r\n            console.info(\"obteniendo posicion actual con navigator.geolocation.getCurrentPosition\");\r\n            if (!navigator.geolocation) {\r\n                console.info(\"navigator.geolocation.getCurrentPosition no existe en este navegador, intentando con PositionByIP()\");\r\n                return PositionByIP().then(resolve).catch(reject);\r\n            }\r\n            navigator.geolocation.getCurrentPosition(geoLocation => {\r\n                console.info(\"navigator.geolocation.getCurrentPosition ha obtenido la posicion\");\r\n                resolve({\r\n                    lat: geoLocation.coords.latitude,\r\n                    lng: geoLocation.coords.longitude,\r\n                    fromGPS: true\r\n                });\r\n            }, () => {\r\n                console.info(\"navigator.geolocation.getCurrentPosition falló, intentando con PositionByIP()\");\r\n                PositionByIP().then(resolve).catch(reject);\r\n            }\r\n            );\r\n        });\r\n    }\r\n    CanUseGPS() {\r\n        return new Promise((resolve, reject) => {\r\n            if (!navigator.geolocation) return reject();\r\n            navigator.geolocation.getCurrentPosition(resolve, reject);\r\n        });\r\n    }\r\n    PlaceFromCoords(location, bounds?): Promise<{ inputText: string }> {\r\n        const { google } = window as any;\r\n        if (!GeoCoder) GeoCoder = new google.maps.Geocoder();\r\n        return new Promise((resolve, reject) => {\r\n            GeoCoder.geocode({ location, bounds: bounds || this.QUITO_BOUNDS }, (results, status) => {\r\n                if (status === \"ZERO_RESULTS\") {\r\n                    return reject({ status, message: \"No se encontraron resultados\" });\r\n                }\r\n                const first = results.length && results[0];\r\n                if (!first) return reject({ message: \"No se encontraron resultados\" });\r\n                first.inputText = AddressText(first);\r\n                resolve(first);\r\n            });\r\n        })\r\n    }\r\n    CoordsFromPlace(address, bounds?) {\r\n        const { google } = window as any;\r\n        if (!GeoCoder) GeoCoder = new google.maps.Geocoder();\r\n        return new Promise((resolve, reject) => {\r\n            GeoCoder.geocode({ address, bounds: bounds || this.QUITO_BOUNDS }, (results, status) => {\r\n                if (status === \"ZERO_RESULTS\") {\r\n                    return reject({ status, message: \"No se encontraron resultados\" });\r\n                }\r\n                const first = results.length && results[0];\r\n                if (!first) return reject({ message: \"No se encontraron resultados\" });\r\n                resolve(first);\r\n            });\r\n        })\r\n    }\r\n    QUITO_BOUNDS = {\r\n        west: -78.85300,\r\n        north: -0.04875,\r\n        east: -78.17184,\r\n        south: -0.39207\r\n    }\r\n    QUITO = {\r\n        lat: -0.189515,\r\n        lng: -78.488167\r\n    }\r\n}\r\nexport default new GeoLocation();\r\n\r\n\r\nfunction AddressText(place) {\r\n    var route;\r\n    var street_number;\r\n    for (let i = 0; i < place.address_components.length; i++) {\r\n        const component = place.address_components[i];\r\n        for (let ii = 0; ii < component.types.length; ii++) {\r\n            const type = component.types[ii];\r\n            if (type === \"street_address\") return component.short_name || component.long_name;\r\n            if (component.types.find(x => x === \"street_number\") && component.types.find(x => x === \"route\"))\r\n                return component.short_name || component.long_name;\r\n\r\n            if (type === \"route\" && !route) route = component.short_name || component.long_name;\r\n            if (type === \"street_number\" && !street_number) street_number = component.short_name || component.long_name;\r\n        }\r\n    }\r\n    if (route && street_number) return route + \" \" + street_number;\r\n    return place.formatted_address;\r\n}\r\nfunction PositionByIP() {\r\n    return fetch(\"https://ipapi.co/json/\").then(x => x.json())\r\n        .then(info => ({ lat: info.latitude, lng: info.longitude }));\r\n}","import React from \"react\";\r\nimport { withGoogleMap, withScriptjs, GoogleMap } from \"react-google-maps\";\r\nimport { TextField, Paper } from \"@material-ui/core\";\r\nimport Geo from \"../../Services/Geo\";\r\nexport default class Location extends React.PureComponent<{\r\n    direccion: string,\r\n    ciudad: string,\r\n    sector: string,\r\n    referencia: string,\r\n    position: { lat: number, lng: number },\r\n    visible: boolean,\r\n    onValueChange: (prop: string, value: string) => void\r\n}, {}> {\r\n    state = {\r\n        defaultCenter: null\r\n    }\r\n    mapRef;\r\n    virtualMarker;\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleMapMounted = this.handleMapMounted.bind(this);\r\n        this.handleDragStart = this.handleDragStart.bind(this);\r\n        this.handleDragEnd = this.handleDragEnd.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        Geo.currentPosition()\r\n            .then(x => this.setState({ defaultCenter: x }))\r\n    }\r\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const { name, value } = event.currentTarget;\r\n        this.props.onValueChange(name, value);\r\n    }\r\n    handleDragStart() {\r\n        this.virtualMarker.classList.add(\"on-move\");\r\n    }\r\n    handleDragEnd() {\r\n        Geo.PlaceFromCoords(this.mapRef.getCenter())\r\n            .then(d => this.props.onValueChange(\"direccion\", d.inputText))\r\n            .catch(ex => console.warn(\"PlaceFromCoords ERROR\", ex));\r\n        this.virtualMarker.classList.remove(\"on-move\");\r\n    }\r\n    handleMapMounted(map) {\r\n        this.mapRef = map;\r\n        if (!this.mapRef) return;\r\n        this.virtualMarker = document.createElement(\"div\");\r\n        this.virtualMarker.className = \"centerMarker\";\r\n        map.getDiv().appendChild(this.virtualMarker);\r\n    }\r\n    render() {\r\n        const { direccion, ciudad, referencia, sector, visible } = this.props;\r\n        return (<Paper style={{ margin: \"auto\", height: \"100%\", width: \"100%\", maxWidth: 500, padding: 10, marginTop: 10, display: visible ? \"block\" : \"none\" }}>\r\n\r\n            <TextField\r\n                variant=\"outlined\"\r\n                name=\"ciudad\"\r\n                value={ciudad}\r\n                onChange={this.handleChange}\r\n                label=\"Ciudad*\"\r\n                style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n            />\r\n\r\n            <TextField\r\n                variant=\"outlined\"\r\n                name=\"sector\"\r\n                value={sector}\r\n                onChange={this.handleChange}\r\n                label=\"Sector*\"\r\n                style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n            />\r\n\r\n            <TextField\r\n                variant=\"outlined\"\r\n                name=\"direccion\"\r\n                value={direccion}\r\n                onChange={this.handleChange}\r\n                label=\"Direccion Exacta*\"\r\n                multiline\r\n                rows={3}\r\n                style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n            />\r\n\r\n            <TextField\r\n                variant=\"outlined\"\r\n                name=\"referencia\"\r\n                value={referencia}\r\n                onChange={this.handleChange}\r\n                label=\"Referencia\"\r\n                multiline\r\n                rows={2}\r\n                style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n            />\r\n\r\n        </Paper>)\r\n    }\r\n}\r\nconst Map = withScriptjs(withGoogleMap(function (props: any) {\r\n    const { onMounted, ...google_maps_props } = props;\r\n    return (<GoogleMap\r\n        ref={onMounted}\r\n        {...google_maps_props}\r\n        options={{\r\n            disableDefaultUI: true,\r\n            zoomControl: true,\r\n            clickableIcons: false\r\n        }}\r\n    >\r\n\r\n    </GoogleMap>)\r\n}));\r\n\r\n/***\r\n *\r\n            {defaultCenter && <Map\r\n                googleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyDxc5H1-I6rNF0PZH4Kiw2YsW0kMCWC9_Q&v=3.exp&libraries=geometry,drawing,places\"\r\n                loadingElement={<div style={{ height: `100%` }} />}\r\n                containerElement={<div id=\"location-map-container\" />}\r\n                mapElement={<div style={{ height: `100%` }} />}\r\n                defaultCenter={defaultCenter}\r\n                defaultZoom={15}\r\n                onMounted={this.handleMapMounted}\r\n                onDragStart={this.handleDragStart}\r\n                onDragEnd={this.handleDragEnd}\r\n            />}\r\n */","import React from \"react\";\r\nimport { Paper, Typography, TextField, Button, Divider, CircularProgress } from \"@material-ui/core\";\r\nexport default function (props: {\r\n    onValueChange: Function,\r\n    numeroTransaccion: string,\r\n    items: any[],\r\n    onDone: any,\r\n    total: number,\r\n    loading: boolean,\r\n    visible: boolean\r\n}) {\r\n\r\n    return (<Paper style={{ maxWidth: 400, padding: 10, height: \"100%\", marginLeft: \"auto\", marginRight: \"auto\", display: props.visible ? \"block\" : \"none\" }}>\r\n        <Typography style={{ marginTop: 10, marginBottom: 10, textAlign: \"center\" }} variant=\"h6\">Total a Pagar: ${props.total.toFixed(2)}</Typography>\r\n        <Divider />\r\n        <div style={{ padding: 20 }}>\r\n            <Typography>Realiza tu pago mediante Transferencia o Deposito Bancario a la cuenta:</Typography>\r\n            <Typography>BANCO DE PICHINCHA. Cta. Cte. #123123123 </Typography>\r\n            <Typography>C.I. 0932050222</Typography>\r\n            <Typography>Natu Cosmetics S.A</Typography>\r\n        </div>\r\n\r\n        <TextField\r\n            style={{ width: \"calc(100% - 20px)\", margin: 10 }}\r\n            variant=\"outlined\"\r\n            inputMode=\"numeric\"\r\n            onChange={event => props.onValueChange(\"numeroTransaccion\", event.currentTarget.value)}\r\n            value={props.numeroTransaccion}\r\n            label=\"Numero de Comprobante\"\r\n        />\r\n        <Button disabled={props.loading} onClick={props.onDone} variant=\"outlined\" color=\"primary\" style={{ margin: 10, width: \"calc(100% - 20px)\" }}>\r\n            {props.loading ? <CircularProgress size={25} /> : \"GUARDAR\"}\r\n        </Button>\r\n    </Paper>)\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, DialogTitle, DialogActions, Button } from \"@material-ui/core\";\r\n\r\nexport default function Message(props) {\r\n    const { title, message, info, onClose } = props;\r\n    return (<Dialog open={Boolean(message) || Boolean(props.children)} onClose={onClose}>\r\n        <DialogTitle>{title}</DialogTitle>\r\n        <DialogContent style={{ textAlign: \"center\" }}>\r\n            {props.children || (<div>\r\n                <Typography variant=\"subtitle1\">{message}</Typography>\r\n                <Typography variant=\"body1\">{info}</Typography>\r\n            </div>)}\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button type=\"button\" onClick={props.onClose} >SALIR</Button>\r\n        </DialogActions>\r\n    </Dialog>);\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, TextField, DialogActions, Button, CircularProgress } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\n\r\nexport default class Survey extends React.Component<any, any> {\r\n    state = { txt1: \"\", txt2: \"\", loading: false, id: \"\" };\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.state.id = props.id;\r\n    }\r\n    handleChange(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        const { txt1, txt2, loading, id } = this.state;\r\n        if (loading) return;\r\n        if (!txt1 && !txt2) {\r\n            return this.props.onClose();\r\n        }\r\n        this.setState({ loading: true });\r\n        API.ActionOrder(id, {\r\n            action: \"SURVEY\",\r\n            value: [txt1, txt2]\r\n        }).then(x => {\r\n            this.setState({ loading: false });\r\n            this.props.onClose(true);\r\n        }).catch(ex => {\r\n            this.setState({ loading: false });\r\n            alert(ex.message);\r\n        });\r\n    }\r\n    handleClose() {\r\n        if (this.state.loading) return;\r\n        this.props.onClose();\r\n    }\r\n    render() {\r\n        const { props } = this;\r\n        const { txt1, txt2, loading } = this.state;\r\n        return (<Dialog open={true} onClose={this.handleClose}>\r\n            <form onSubmit={this.handleSubmit}>\r\n                <DialogContent>\r\n                    <Typography style={{ textAlign: \"center\" }} variant=\"h6\" >{props.title}</Typography>\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">Cómo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                    <TextField autoFocus={true} name=\"txt1\" multiline rows={2} label=\"Escribe tu respuesta\" value={txt1} onChange={this.handleChange} fullWidth />\r\n\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">Compartenos alguna expendiencia que hayan tenido tus clientes usando nuestros productos</Typography>\r\n                    <TextField name=\"txt2\" multiline rows={3} label=\"Escribe tu respuesta\" value={txt2} onChange={this.handleChange} fullWidth />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button type=\"submit\" variant=\"outlined\" >{loading ? <CircularProgress size={25} /> : \"GUARDAR\"}</Button>\r\n                </DialogActions>\r\n            </form>\r\n        </Dialog>)\r\n    }\r\n}","export default class Preferences {\r\n    static Get(key: string) {\r\n        console.info(\"Getting Preference\");\r\n        var x = window.localStorage.getItem(key);\r\n        try {\r\n            return JSON.parse(x);\r\n        } catch (ex) { }\r\n        return x;\r\n    }\r\n    static Set(key: \"current_order\", value: any = undefined) {\r\n        console.info(\"Setting Preference\");\r\n        if (value === undefined) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        } else if (value === null) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        }\r\n        var value_txt = value;\r\n        if (typeof value === typeof {})\r\n            value_txt = JSON.stringify(value);\r\n\r\n        window.localStorage.setItem(key, value_txt);\r\n    }\r\n}","import React from \"react\";\r\nimport { Tabs, Tab, Paper, Typography, CircularProgress, TextField } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport ProductGrid from \"./ProductGrid\";\r\nimport ConfirmOrder from \"./ConfirmOrder\";\r\nimport Location from \"./Location\";\r\nimport Payment from \"./Payment\";\r\nimport { Totals, EstimarDescuento } from \"../../Services/Calcs\";\r\nimport Message from \"../Message\";\r\nimport Survey from \"./Survey\";\r\nimport Preferences from \"../../Services/Preferences\";\r\n\r\nexport default class Order extends React.PureComponent<{ onMounted: (path: string) => void }, OrderState> {\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleTab = this.handleTab.bind(this);\r\n        this.handleAction = this.handleAction.bind(this);\r\n        this.handleValueChange = this.handleValueChange.bind(this);\r\n        this.handleDone = this.handleDone.bind(this);\r\n        this.handleMessage = this.handleMessage.bind(this);\r\n        this.handleSurveyClose = this.handleSurveyClose.bind(this);\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n\r\n        if (props.onMounted) props.onMounted(props.match.path);\r\n        this.state = {\r\n            currentTab: 0,\r\n            productList: [],\r\n            tablaDescuentos: [],\r\n            descuentoAplica: null,\r\n            subtotal: 0,\r\n            numeroTransaccion: \"\",\r\n            direccion: \"\",\r\n            ciudad: \"\",\r\n            sector: \"\",\r\n            observacion: \"\",\r\n            referencia: \"\",\r\n            position: null,\r\n            loading: \"articulos\",\r\n            surveyId: null,\r\n            msg: null,\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        Promise.all([API.GetProducts(), API.getDiscounts()])\r\n            .then(([productList, tablaDescuentos]) => {\r\n                this.setState({ productList: productList.map(x => { x.cantidad = 0; return x }), tablaDescuentos, loading: null });\r\n                try {\r\n                    const before = Preferences.Get(\"current_order\");\r\n                    if (!before) return;\r\n                    var updates = {}\r\n                    for (const key in before) {\r\n                        if (this.state.hasOwnProperty(key)) {\r\n                            updates[key] = before[key];\r\n                        }\r\n                    }\r\n                    this.setState(updates);\r\n                    if (!(before.choosen && before.choosen.length)) return;\r\n                    for (let i = 0; i < before.choosen.length; i++) {\r\n                        const x = before.choosen[i];\r\n                        for (let times = 0; times < x.cantidad; times++) {\r\n                            this.handleAction({ currentTarget: { name: \"+\", value: x.id } } as any)\r\n                        }\r\n                    }\r\n                } catch (ex) { }\r\n            }).catch(ex => {\r\n                alert(ex.message)\r\n            });\r\n    }\r\n    handleTab(event: any, currentTab: number) {\r\n        this.setState({ currentTab });\r\n        // actualizar todo!\r\n        try {\r\n            Preferences.Set(\"current_order\", {\r\n                numeroTransaccion: this.state.numeroTransaccion,\r\n                direccion: this.state.direccion,\r\n                ciudad: this.state.ciudad,\r\n                sector: this.state.sector,\r\n                observacion: this.state.observacion,\r\n                referencia: this.state.referencia,\r\n                position: this.state.position,\r\n                choosen: this.state.productList.filter(x => x.cantidad).map(x => ({ id: x.id, cantidad: x.cantidad }))\r\n            });\r\n        } catch (ex) { }\r\n    }\r\n    handleDone() {\r\n        var { subtotal, numeroTransaccion, ciudad, sector, observacion, referencia, direccion, position, descuentoAplica, loading } = this.state\r\n        if (loading) return;\r\n        var choosen = this.state.productList.filter(x => x.cantidad);\r\n        if (!choosen.length) return this.failed_msg(\"Debes elegir por lo menos un producto\");\r\n        if (!(ciudad && ciudad.trim().length)) return this.failed_msg(\"Digita la ciudad\");\r\n        if (!(sector && sector.trim().length)) return this.failed_msg(\"Digita el sector\");\r\n        if (!(direccion && direccion.trim().length)) return this.failed_msg(\"Digita la direccion\");\r\n        if (!(numeroTransaccion && numeroTransaccion.trim().length)) return this.failed_msg(\"Digita el numero de comprobante de pago\");\r\n        this.setState({ loading: \"guardar\" });\r\n        API.SaveOrder({\r\n            ciudad, sector, direccion, observacion, referencia,\r\n            detalle: choosen,\r\n            descuentoPorcentaje: descuentoAplica && descuentoAplica.porcentaje,\r\n            descuentoTotal: descuentoAplica && descuentoAplica.valor,\r\n            total: subtotal - ((descuentoAplica && descuentoAplica.valor) || 0),\r\n            position, numeroTransaccion\r\n        }).then(x => {\r\n            this.setState({\r\n                currentTab: 0,\r\n                descuentoAplica: null,\r\n                subtotal: 0,\r\n                numeroTransaccion: \"\",\r\n                observacion: \"\",\r\n                position: null,\r\n                msg: null,\r\n                loading: null,\r\n                surveyId: x.id,\r\n                productList: this.state.productList.map(x => {\r\n                    x.cantidad = 0;\r\n                    return x;\r\n                })\r\n            });\r\n            Preferences.Set(\"current_order\", {\r\n                direccion: this.state.direccion || \"\",\r\n                ciudad: this.state.ciudad || \"\",\r\n                sector: this.state.sector || \"\",\r\n                referencia: this.state.referencia || \"\"\r\n            });\r\n        }).catch(ex => {\r\n            this.setState({\r\n                msg: { title: \"Ocurrió un error\", message: ex.message, info: ex.status },\r\n                loading: null\r\n            });\r\n        });\r\n    }\r\n    failed_msg(message, info?) {\r\n        this.setState({\r\n            msg: { title: \"No se puede guardar\", message, info }\r\n        });\r\n    }\r\n    handleAction(event: React.MouseEvent<HTMLButtonElement>) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState(prev => {\r\n            const state: any = { ...prev };\r\n            state.productList = JSON.parse(JSON.stringify(state.productList));\r\n            var item: Product = state.productList.find((a: any) => a.id === +value);\r\n            var cant: number = (item.cantidad && !isNaN(+item.cantidad) && item.cantidad) || 0;\r\n            const { cantidad_desde } = item;\r\n            if (name === \"+\") {\r\n                if (cant <= 0 && cantidad_desde) {\r\n                    cant = cantidad_desde;\r\n                } else {\r\n                    cant++;\r\n                }\r\n            } else if (name === \"-\") {\r\n                if (cant <= 10 && cantidad_desde) {\r\n                    cant = 0;\r\n                } else {\r\n                    cant--;\r\n                }\r\n            }\r\n            item.cantidad = cant;\r\n            state.subtotal = Totals(state.productList.filter(x => x.cantidad)).total;\r\n            state.descuentoAplica = EstimarDescuento(state.subtotal, state.tablaDescuentos);\r\n            return state;\r\n        });\r\n    }\r\n    handleValueChange(name: string, value: string) {\r\n        this.setState({ [name]: value } as any);\r\n    }\r\n    handleMessage() {\r\n        this.setState({ msg: null });\r\n    }\r\n    handleSurveyClose() {\r\n        this.setState({ surveyId: null });\r\n    }\r\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const { value, name } = event.currentTarget;\r\n        this.setState({ [name]: value } as any);\r\n    }\r\n    render() {\r\n        const {\r\n            currentTab, productList, numeroTransaccion, descuentoAplica, subtotal,\r\n            msg, surveyId, loading, observacion,\r\n            ...remain_state\r\n        } = this.state;\r\n        const choosenItems = productList.filter((x: any) => x.cantidad);\r\n        console.info(\"Order render\");\r\n        const total = subtotal - ((descuentoAplica && descuentoAplica.valor) || 0);\r\n        if (loading === \"articulos\") {\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }}>\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h6\">CARGANDO...</Typography>\r\n            </div>);\r\n        }\r\n\r\n        return (<div style={{ width: \"100%\", height: \"calc(100% - 1px)\", display: \"flex\", flexDirection: \"column\", padding: 10, overflow: \"hidden\" }} >\r\n            <Tabs variant=\"fullWidth\" onChange={this.handleTab} value={currentTab}>\r\n                <Tab label=\"Productos\" />\r\n                <Tab label=\"Pedido\" />\r\n                <Tab label=\"Dirección\" />\r\n                <Tab label=\"Pago\" />\r\n            </Tabs>\r\n            {currentTab === 0 && <ProductGrid visible={true} onActionChanged={this.handleAction} items={productList} />}\r\n            {currentTab === 1 && (<Paper style={{ display: currentTab === 1 ? \"block\" : \"none\", textAlign: \"center\", padding: 10, margin: \"auto\", marginTop: 10, width: \"100%\", maxWidth: 500, height: \"100%\" }}>\r\n                <Typography variant=\"h5\">TU PEDIDO</Typography>\r\n                <ConfirmOrder show_next_discount={true} items={choosenItems} descuento={descuentoAplica} subtotal={subtotal} total={total} />\r\n                <TextField variant=\"outlined\" value={observacion} name=\"observacion\" onChange={this.handleChange} style={{ width: \"calc(100% - 20px)\", margin: 10 }} label=\"Observacion\" multiline rows=\"2\" />\r\n            </Paper>)}\r\n            <Location visible={currentTab === 2} {...remain_state} onValueChange={this.handleValueChange} />\r\n            {currentTab === 3 && <Payment visible={true} loading={loading === \"guardar\"} total={total} onDone={this.handleDone} items={choosenItems} numeroTransaccion={numeroTransaccion} onValueChange={this.handleValueChange} />}\r\n\r\n\r\n            {msg && <Message message={msg.message} info={(msg.status || \"\") + (msg.code || \"\")} onClose={this.handleMessage} title={msg.title} />}\r\n            {surveyId && <Survey title=\"Tu pedido fue guardado con exito\" id={surveyId} onClose={this.handleSurveyClose} />}\r\n        </div >)\r\n    }\r\n}\r\n\r\n\r\ninterface OrderState {\r\n    currentTab: number,\r\n    productList: Product[],\r\n    tablaDescuentos: Descuento[],\r\n    descuentoAplica: DescuentoCalc;\r\n    subtotal: number;\r\n    position: { lat: number, lng: number };\r\n    direccion: string;\r\n    sector: string;\r\n    ciudad: string;\r\n    referencia: string;\r\n    observacion: string;\r\n    numeroTransaccion: string;\r\n    loading: \"articulos\" | \"guardar\";\r\n    msg: any;\r\n    surveyId?: number;\r\n}","export function Totals(items: any[]) {\r\n    const result = {\r\n        total: 0,\r\n        cantidad: 0\r\n    }\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n        result.cantidad += item.cantidad;\r\n        result.total += (item.pvp_final * item.cantidad);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function EstimarDescuento(total: number, tablaDescuentos: Descuento[]) {\r\n    // de MAYOR a MENOR\r\n    var sorted = tablaDescuentos.sort((a, b) => b.montoDesde - a.montoDesde);\r\n    var founded = -1;\r\n    var results: DescuentoCalc = {\r\n        porcentaje: 0,\r\n        valor: 0, \r\n        sgte_descuento_porcentaje: 0,\r\n        sgte_descuento_falta: 0\r\n    }\r\n    for (let i = 0; i < sorted.length; i++) {\r\n        const d = sorted[i];\r\n        if (total >= d.montoDesde) {\r\n            founded = i;\r\n            break;\r\n        }\r\n    }\r\n    if (founded >= 0) {\r\n        var desc = sorted[founded];\r\n        results.porcentaje = desc.porcentaje;\r\n        results.valor = (total * desc.porcentaje / 100);\r\n        // si no es el ultimo, busco al siguiente en la tabla\r\n    }\r\n    // si no existe, simulo que es el (MAXIMO+1), es decir esta fuera del rango\r\n    if (founded === -1) founded = sorted.length;\r\n    if ((founded - 1) >= 0) {\r\n        var next = sorted[founded - 1];\r\n        if (next) {\r\n            results.sgte_descuento_falta = next.montoDesde - total;\r\n            results.sgte_descuento_porcentaje = next.porcentaje;\r\n        }\r\n    }\r\n    return results;\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, DialogTitle, Typography, TextField, Button, CircularProgress, DialogActions, Divider } from \"@material-ui/core\";\r\nimport ConfirmOrder from \"../Order/ConfirmOrder\";\r\nimport API from \"../../Services/API\";\r\n\r\nexport default class OrderDetails extends React.Component<{ onClose: (refresh: boolean) => void, match: any, editable: boolean }> {\r\n    state = {\r\n        loading: \"data\",\r\n        _fechaEntrega: \"\"\r\n    } as VisibleOrder\r\n    componentWillMount() {\r\n        API.GetOrder(+this.props.match.params.id)\r\n            .then(order => this.setState({ ...order, loading: null }));\r\n    }\r\n    handleClose = (event: React.MouseEvent<HTMLElement>) => {\r\n        this.props.onClose(this.state.shouldRefresh);\r\n    }\r\n    handleButton = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        const { name } = event.currentTarget;\r\n        if (name === \"APROBAR\") {\r\n            if (!this.state._fechaEntrega)\r\n                return alert(\"Agregue la fecha de Entrega\");\r\n            API.ActionOrder(this.state.id, { action: name, value: this.state._fechaEntrega })\r\n                .then(x => this.setState({\r\n                    estado: \"APROBADO\",\r\n                    fechaEntrega: this.state._fechaEntrega,\r\n                    loading: null,\r\n                    shouldRefresh: true\r\n                })).catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"RECHAZAR\") {\r\n            var cf = window.confirm(\"Esta seguro de rechazar este pedido?\");\r\n            if (!cf) return;\r\n            var value = window.prompt(\"Digita el Motivo de Rechazo\");\r\n            if (!value) return;\r\n            API.ActionOrder(this.state.id, { action: name, value })\r\n                .then(x => this.setState({ estado: \"RECHAZADO\", loading: null, shouldRefresh: true }))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"ENTREGAR\") {\r\n            var cf = window.confirm(\"Esta seguro de seleccionar este pedido como ENTREGADO?\");\r\n            if (!cf) return;\r\n            API.ActionOrder(this.state.id, { action: name, value: null })\r\n                .then(x => this.setState({ estado: \"ENTREGADO\", loading: null, shouldRefresh: true }))\r\n                .catch(ex => { alert(ex.message); this.setState({ loading: null }) });\r\n        }\r\n        this.setState({ loading: name });\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value })\r\n    }\r\n    render() {\r\n        const { numero,\r\n            fechaCreacion, fechaEntrega, _fechaEntrega, detalle,\r\n            descuentoPorcentaje, descuentoTotal, position, observacion,\r\n            direccion, sector, ciudad, referencia, numeroTransaccion,\r\n            estado, total, username, telefono,\r\n            survey1, survey2, loading, motivoAnulacion\r\n        } = this.state;\r\n        const editable = this.props.editable === true ? true : null;\r\n\r\n        if (loading === \"data\")\r\n            return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\" >\r\n                <DialogContent style={{ textAlign: \"center\", paddingTop: 100, width: 400, height: 400 }}>\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </DialogContent>\r\n            </Dialog>);\r\n\r\n\r\n        return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\">\r\n            <DialogTitle style={{ textAlign: \"center\" }}>ORDEN #{numero}</DialogTitle>\r\n            <DialogContent>\r\n                <Typography>FECHA: {new Date(fechaCreacion).toLocaleString()}</Typography>\r\n                {(!editable || estado !== \"PENDIENTE\") && <Typography> FECHA DE ENTREGA: {fechaEntrega && new Date(fechaEntrega).toLocaleDateString()}</Typography>}\r\n                <Typography> ESTADO: {estado} {motivoAnulacion && `| motivo: ${motivoAnulacion}`}</Typography>\r\n                {editable && <Typography> USUARIO: {username} | tel: {telefono}</Typography>}\r\n                <Typography variant=\"h6\" style={{ textAlign: \"center\", marginTop: 10 }}>PRODUCTOS:</Typography>\r\n                <ConfirmOrder items={detalle} descuento={{ porcentaje: descuentoPorcentaje, valor: descuentoTotal }} total={total} subtotal={total + descuentoTotal} />\r\n\r\n                <Typography style={{ marginTop: 10, marginBottom: 10 }}>COMPROBANTE DE PAGO: {numeroTransaccion}</Typography>\r\n\r\n                <Typography>DIRECCION: {direccion}, {referencia} ,{sector}, {ciudad}</Typography>\r\n\r\n                <Typography style={{ marginTop: 10 }}>OBSERVACIONES: {observacion}</Typography>\r\n                {position && <Button\r\n                    variant=\"contained\"\r\n                    fullWidth\r\n                    style={{ marginTop: 10, marginBottom: 10 }}\r\n                    color=\"primary\"\r\n                    component=\"a\"\r\n                    href={`https://www.google.com/maps/search/?api=1&query=${position.lat},${position.lng}`}\r\n                    target=\"_blank\"\r\n                >VER UBICACION DE ENTREGA</Button>}\r\n\r\n                {editable && estado === \"PENDIENTE\"\r\n                    ? (<div style={{ display: \"flex\", flexDirection: \"row\", marginTop: 10, marginBottom: 10 }}>\r\n                        <Typography variant=\"button\" style={{ marginRight: 10, paddingTop: 5 }} >Fecha de Entrega</Typography>\r\n                        <TextField\r\n                            type=\"date\"\r\n                            fullWidth\r\n                            name=\"_fechaEntrega\"\r\n                            value={_fechaEntrega || \"\"}\r\n                            style={{ flex: 1 }}\r\n                            onChange={this.handleChange}\r\n                        /></div>)\r\n                    : null}\r\n\r\n                {(editable && estado === \"PENDIENTE\")\r\n                    ? (<div style={{ marginTop: 10, marginBottom: 10, display: \"flex\", flexDirection: \"row\" }}>\r\n                        <Button onClick={this.handleButton} name=\"RECHAZAR\"\r\n                            style={{ marginLeft: 10, marginRight: 10, flex: 1 }}\r\n                            variant=\"text\" color=\"secondary\"\r\n                            disabled={Boolean(loading)}\r\n                        >{loading === \"RECHAZAR\" ? <CircularProgress size={25} color=\"inherit\" /> : \"RECHAZAR\"}</Button>\r\n                        <Button onClick={this.handleButton} name=\"APROBAR\"\r\n                            style={{ marginLeft: 10, marginRight: 10, flex: 1 }}\r\n                            variant=\"outlined\" color=\"primary\"\r\n                            disabled={Boolean(loading)}\r\n                        >{loading === \"APROBAR\" ? <CircularProgress color=\"inherit\" size={25} /> : \"APROBAR\"}</Button>\r\n                    </div>)\r\n                    : null}\r\n\r\n                <Divider style={{ margin: 10 }} />\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">Cómo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                <Typography>{survey1 || \"\"}</Typography>\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">Compartenos alguna expendiencia que hayan tenido tus clientes usando nuestros productos</Typography>\r\n                <Typography>{survey2 || \"\"}</Typography>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                {editable && estado === \"APROBADO\" ? (<Button color=\"primary\" name=\"ENTREGAR\" onClick={this.handleButton}>\r\n                    {loading === \"ENTREGAR\" ? <CircularProgress color=\"inherit\" size={25} /> : \"ENTREGAR\"}\r\n                </Button>) : null}\r\n                <Button onClick={this.handleClose}>SALIR</Button>\r\n            </DialogActions>\r\n        </Dialog>);\r\n    }\r\n}\r\n\r\ninterface VisibleOrder extends Order {\r\n    loading: string;\r\n    _fechaEntrega: string;\r\n    shouldRefresh: boolean;\r\n}\r\n\r\n\r\nfunction TwoPlaces(number: number) {\r\n    return number.toString().length === 1 ? (\"0\" + number) : number;\r\n}","import React from \"react\";\r\nimport { List, ListItem, Grid, Paper, Typography, Hidden, CircularProgress } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { Route } from \"react-router-dom\";\r\nimport OrderDetails from \"./OrderDetails\";\r\nimport Message from \"../Message\";\r\nexport default class extends React.Component<any> {\r\n    state = {\r\n        data: [] as Order[],\r\n        msg: null,\r\n        loading: true\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleMessage = this.handleMessage.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        API.GetOrders()\r\n            .then(data => this.setState({ data, loading: null }))\r\n            .catch(err => this.setState({\r\n                loading: null,\r\n                msg: { title: \"Ocurrió un error\", message: err.message, info: err.code }\r\n            }));\r\n    }\r\n    handleMessage() {\r\n        this.setState({ msg: null });\r\n    }\r\n    handleClick(event: React.MouseEvent<HTMLElement>) {\r\n        const { id } = event.currentTarget;\r\n        this.props.history.push(this.props.match.path + \"/\" + id);\r\n    }\r\n    handleClose(refresh: boolean) {\r\n        if (refresh) {\r\n            this.setState({ loading: true });\r\n            API.GetOrders()\r\n                .then(data => this.setState({ data, loading: null }))\r\n                .catch(ex => this.setState({\r\n                    msg: { title: \"No se pudo actualizar el listado\", message: ex.message, info: ex.code },\r\n                    loading: null\r\n                }));\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    render() {\r\n        const { data, msg, loading } = this.state;\r\n        const { rol } = this.props;\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        return (<Paper style={{ width: \"calc(100%-20px)\", height: \"calc(100% - 30px)\", display: \"flex\", flexDirection: \"column\", margin: 10, padding: 10, paddingBottom: 0, overflowX: \"hidden\" }}>\r\n            <List>\r\n                <Hidden xsDown implementation=\"css\" >\r\n                    <ListItem>\r\n                        <Grid container spacing={1} style={{ borderBottom: \"1px solid #ebebeb\" }}>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Numero</Typography></Grid>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Creado</Typography></Grid>\r\n\r\n                            {rol === 3 && <Grid sm={3} item><Typography variant=\"overline\">Usuario</Typography></Grid>}\r\n\r\n                            <Grid sm={1} item><Typography variant=\"overline\">Total</Typography></Grid>\r\n\r\n                            {rol === 1 && <Grid sm={1} item><Typography variant=\"overline\">Ganancia</Typography></Grid>}\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Estado</Typography></Grid>\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Fecha de Entrega</Typography></Grid>\r\n                        </Grid>\r\n                    </ListItem>\r\n                </Hidden>\r\n                {data.map(d => <ListItem key={d.id} id={\"\" + d.id} button onClick={this.handleClick}>\r\n                    <Grid container spacing={1} style={{ paddingTop: 5, paddingBottom: 5, borderBottom: \"1px solid #fafafa\" }}>\r\n\r\n                        <Grid xs={12} sm={2} item >\r\n                            <Hidden smUp >PEDIDO #</Hidden>\r\n                            {d.id}\r\n                        </Grid>\r\n                        <Grid xs={12} sm={2} item >\r\n                            {new Date(d.fechaCreacion).toLocaleDateString()}\r\n                        </Grid>\r\n\r\n                        {rol === 3 && <Grid xs={12} sm={3} item >\r\n                            {d.username}\r\n                        </Grid>}\r\n\r\n                        <Grid xs={12} sm={1} item >$ {d.total.toFixed(2)}</Grid>\r\n\r\n                        {rol === 1 && <Grid xs={12} sm={1} item >$ {(d.descuentoTotal || 0).toFixed(2)}</Grid>}\r\n\r\n                        <Grid xs={12} sm={2} item ><Typography color={EstadoToVariant(d.estado)}>{d.estado}</Typography></Grid>\r\n\r\n                        <Grid xs={12} sm={2} item >{d.fechaEntrega && new Date(d.fechaEntrega).toDateString()}</Grid>\r\n                    </Grid>\r\n                </ListItem>)}\r\n            </List>\r\n\r\n            {msg && <Message {...msg} onClose={this.handleMessage} />}\r\n\r\n            <Route\r\n                path={this.props.match.path + \"/:id\"}\r\n                render={props => <OrderDetails {...props} onClose={this.handleClose} editable={rol === 3} />}\r\n            />\r\n        </Paper>);\r\n    }\r\n}\r\n\r\nfunction EstadoToVariant(estado): any {\r\n    if (estado === \"APROBADO\") return \"primary\";\r\n    if (estado === \"RECHAZADO\") return \"secondary\";\r\n    return \"initial\";\r\n}","import React from \"react\";\r\nimport { List, ListItem, Typography } from \"@material-ui/core\";\r\nexport default class Ranking extends React.PureComponent<{ data: Rank[], showLastOrder?: boolean, perfomanceStat?: boolean }> {\r\n    render() {\r\n        const { data, showLastOrder, perfomanceStat } = this.props;\r\n        return (<List>\r\n            {data.sort((a, b) => b.stat - a.stat)\r\n                .map((r, index) => (<ListItem key={index} id={\"ranking-listitem-\" + index} >\r\n                    <div style={{ display: \"table\", width: \"100%\" }} >\r\n                        <Typography style={{ display: \"table-cell\", width: 50 }} variant={r.me ? \"body1\" : \"caption\"}># {index + 1}</Typography>\r\n                        <Typography style={{ display: \"table-cell\" }} variant={r.me ? \"body1\" : \"caption\"} >{r.username}</Typography>\r\n                        <Typography color={perfomanceStat && r.stat ? (r.stat > 0 ? \"primary\" : \"secondary\") : \"inherit\"} style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                            {perfomanceStat ? \"%\" : \"$\"} {r.stat.toFixed(2)} {perfomanceStat && r.stat ? (r.stat > 0 ? \"↑\" : \"↓\") : null}\r\n                        </Typography>\r\n                        {showLastOrder &&\r\n                            <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100, paddingLeft: 10 }} variant={r.me ? \"body1\" : \"caption\"}>{DateToString(r.ultimoPedido)}</Typography>}\r\n                    </div>\r\n                </ListItem>))}\r\n        </List>)\r\n    }\r\n}\r\nfunction DateToString(x) {\r\n    if (!x) return \"Nunca\";\r\n    var date = new Date(x);\r\n    var ahora = new Date();\r\n    if (date.getDate() === ahora.getDate() &&\r\n        date.getMonth() === ahora.getMonth() &&\r\n        date.getFullYear() === ahora.getFullYear()) {\r\n        return date.toLocaleTimeString();\r\n    }\r\n\r\n    for (let i = 1; i < 30; i++) {\r\n        var este_dia = new Date(ahora.getFullYear(), ahora.getMonth(), ahora.getDate() - i);\r\n        if (date.getDate() === este_dia.getDate() &&\r\n            date.getMonth() === este_dia.getMonth() &&\r\n            date.getFullYear() === este_dia.getFullYear()) {\r\n            if (i === 1) return \"Ayer\";\r\n            return \"Hace \" + i + \" días\";\r\n        }\r\n    }\r\n    return date.toLocaleDateString();\r\n}","import React from \"react\";\r\nimport { CardContent, CardHeader, Card } from \"@material-ui/core\";\r\nimport Ranking from \"../Ranking\";\r\nexport default function RankingCard(props: {\r\n    data: Rank[],\r\n    title?: string,\r\n    showLastOrder?: boolean,\r\n    perfomanceStat?: boolean\r\n}) {\r\n    return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n        <CardHeader title={props.title} style={{ textAlign: \"center\" }} />\r\n        <CardContent style={{ flex: 1, overflow: \"auto\" }}>\r\n            <Ranking data={props.data} showLastOrder={props.showLastOrder} perfomanceStat={props.perfomanceStat} />\r\n        </CardContent>\r\n    </Card>)\r\n}","import React from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default class GroupCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false,\r\n            scales: {\r\n                yAxes: [{\r\n\r\n                    ticks: {\r\n                        maxTicksLimit: 10,\r\n                        padding: 5\r\n                    }\r\n                }],\r\n                xAxes: [{\r\n                    ticks: {\r\n                        padding: 5\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        for (let i = 0; i < this.props.data.length; i++) {\r\n            const el = this.props.data[i];\r\n            labels.push(el.label);\r\n            values.push(el.value);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor: \"#3f51b5\",\r\n                borderColor: \"#3f51b5\",\r\n                data: values,\r\n                fill: false\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Line options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Card, CardContent, Typography, CardHeader, List, ListItem, ListItemText, ListItemSecondaryAction, Divider } from \"@material-ui/core\";\r\n\r\nexport default function ProfitCard(props: { month: number, year: number }) {\r\n    const { month, year } = props;\r\n    var reservas = 0, promo = 0;\r\n    if (month) {\r\n        reservas = (month * 5) / 100;\r\n        promo = (month * 14) / 100;\r\n    }\r\n    return (<Card className=\"dashboard-card\">\r\n        <CardHeader title=\"GANANCIAS\" style={{ textAlign: \"center\" }} />\r\n        <CardContent>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <div style={{ textAlign: \"center\", flex: 1 }}>\r\n                    <Typography color=\"primary\" variant=\"h5\" style={{ flex: 1 }}>$ {reduceMoney(month)}</Typography>\r\n                    <Typography color=\"primary\">ESTE MES</Typography>\r\n                </div>\r\n                <div style={{ borderLeft: \"1px solid black\", textAlign: \"center\", flex: 1 }}>\r\n                    <Typography variant=\"h5\" style={{ flex: 1 }} >$ {reduceMoney(year)}</Typography>\r\n                    <Typography>ESTE AÑO</Typography>\r\n                </div>\r\n            </div>\r\n            <Typography variant=\"subtitle1\" style={{ marginTop: 20, paddingLeft: 15, textAlign: \"left\" }}>Te aconsejamos apartar lo siguiente:</Typography>\r\n            <List>\r\n                <ListItem dense>\r\n                    <ListItemText primary=\"RESERVAS 5%\" />\r\n                    <ListItemSecondaryAction>$ {reservas.toFixed(2)}</ListItemSecondaryAction>\r\n                </ListItem>\r\n                <ListItem dense>\r\n                    <ListItemText primary=\"PROMOCION 14%\" />\r\n                    <ListItemSecondaryAction>$ {promo.toFixed(2)}</ListItemSecondaryAction>\r\n                </ListItem>\r\n            </List>\r\n        </CardContent >\r\n    </Card >)\r\n}\r\nfunction reduceMoney(value) {\r\n    if (!value) return 0;\r\n    if (value > 1000) return (+(value / 1000).toFixed(1)) + \" K\";\r\n    if (value > 1000000) return (+(value / 1000).toFixed(1)) + \" M\";\r\n    return +value.toFixed(2);\r\n}","import React from \"react\";\r\nimport { Pie } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default class PieCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: true },\r\n            maintainAspectRatio: false\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        var backgroundColor = [];\r\n        for (let i = 0; i < this.props.data.length; i++) {\r\n            const el = this.props.data[i];\r\n            labels.push(el.label);\r\n            values.push(el.value);\r\n            backgroundColor.push(el.color);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor,\r\n                data: values\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Pie options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Grid, CircularProgress, Typography, Hidden, Divider } from \"@material-ui/core\";\r\nimport RankingCard from \"./RankingCard\";\r\nimport API from \"../../Services/API\";\r\nimport GroupCard from \"./GroupCard\";\r\nimport ProfitCard from \"./ProfitCard\";\r\nimport PieCard from \"./PieCard\";\r\nexport default class Feed extends React.Component<{ onMounted: Function, grupo: string, username: string, rol: number }> {\r\n    state = {\r\n        loading: true,\r\n        error: null,\r\n        week_ranking: [],\r\n        group_graph: [],\r\n        personal_graph: [],\r\n        year_sales: [],\r\n        product_resume: [],\r\n        group_ranking: []\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    componentWillMount() {\r\n        API.Stats([\"week_ranking\",\r\n            \"personal_graph\",\r\n            \"group_graph\",\r\n            \"year_sales\",\r\n            \"product_resume\",\r\n            \"group_ranking\"])\r\n            .then(x => this.setState({ ...x, loading: null }))\r\n            .catch(error => {\r\n                this.setState({ error, loading: null });\r\n            });\r\n    }\r\n    render() {\r\n        var { loading, error,\r\n            week_ranking,\r\n            personal_graph,\r\n            group_graph,\r\n            year_sales,\r\n            product_resume,\r\n            group_ranking\r\n        } = this.state;\r\n        const { rol, grupo, username } = this.props;\r\n        const week_progress = week_ranking.map((x, index) => ({ ...x, stat: x.perfomance, position: index + 1 }));\r\n        const cumulative_ranking = week_ranking.map((x, index) => ({ ...x, stat: x.monto_acumulativo, position: index + 1 }));\r\n\r\n        var resume = { month: 0, year: 0 };\r\n        var ahora = new Date();\r\n        for (let i = 0; i < year_sales.length; i++) {\r\n            const x = year_sales[i];\r\n            x.createdAt = new Date(x.createdAt);\r\n            if (x.createdAt.getMonth() === ahora.getMonth() &&\r\n                x.createdAt.getFullYear() === ahora.getFullYear()) {\r\n                resume.month += x.profit;\r\n            }\r\n            resume.year += x.profit;\r\n        }\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        if (error) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <Typography variant=\"h5\">OCURRIÓ UN PROBLEMA</Typography>\r\n            <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n            <Typography variant=\"body1\">{error.status} {error.code}</Typography>\r\n        </div>);\r\n\r\n        return (<Grid container spacing={2} style={{ margin: \"auto\", width: \"calc(100% - 10px)\", textAlign: \"center\" }} >\r\n            <Grid item xs={12}>\r\n                <Typography color=\"primary\" variant=\"h6\">\r\n                    Hola {username}, Esta es tu cuenta personal de Natú.\r\n                </Typography>\r\n                <Typography variant=\"subtitle1\">\r\n                    Estamos aquí para prosperar juntos. Estos son los indicadores de tu trabajo.\r\n                </Typography>\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <RankingCard data={group_ranking} title=\"RANKING DE GRUPOS\" />\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <GroupCard data={personal_graph} title={\"ESTADISTICA SEMANAL\"} />\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <GroupCard data={group_graph} title={grupo || \"ESTADISTICA MENSUAL\"} />\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <PieCard data={product_resume} title=\"PRODUCTOS VENDIDOS\" />\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <ProfitCard month={resume.month} year={resume.year} />\r\n            </Grid>\r\n\r\n            <Hidden smUp>\r\n                <Grid item xs={12}>\r\n                    <Divider />\r\n                </Grid>\r\n            </Hidden>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <RankingCard data={week_ranking} title=\"RANKING DE LA SEMANA\" showLastOrder={rol !== 1} />\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <RankingCard data={week_progress} title=\"PROGRESO DE LA SEMANA\" perfomanceStat={true} />\r\n            </Grid>\r\n\r\n            {rol !== 1 && <Grid item sm={6} xs={12}>\r\n                <RankingCard data={cumulative_ranking} title=\"RANKING ACUMULATIVO\" />\r\n            </Grid>}\r\n\r\n\r\n        </Grid>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Table, TableHead, TextField, TableCell, TableRow, Button, CircularProgress, Typography, TableBody, Paper } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nexport default class ProductSales extends React.Component {\r\n    state = {\r\n        loading: null,\r\n        error: null,\r\n        data: []\r\n    }\r\n    handleClick = () => {\r\n        if (this.state.loading) return;\r\n        var desde = this.valueOf(\"desde\");\r\n        var hasta = this.valueOf(\"hasta\");\r\n        var estado = this.valueOf(\"estado\");\r\n        if (!(desde && !isNaN(+new Date(desde)))) return alert(\"Selecciona la fecha desde\");\r\n        if (!(hasta && !isNaN(+new Date(hasta)))) return alert(\"Selecciona la fecha hasta\");\r\n        if (!estado) return alert(\"Selecciona el estado\");\r\n\r\n        this.setState({ loading: true });\r\n\r\n        desde = new Date(desde).toJSON();\r\n        hasta = new Date(hasta).toJSON();\r\n\r\n        API.ProductSalesReport({ desde, hasta, estado })\r\n            .then(data => this.setState({ data, loading: null, error: null }))\r\n            .catch(error => this.setState({ error, loading: null }));\r\n    }\r\n    valueOf(ID: string) {\r\n        var el = document.getElementById(ID) as any;\r\n        return el && el.value;\r\n    }\r\n    render() {\r\n        const { data, error, loading } = this.state;\r\n        return (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <div>\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"desde\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"hasta\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} select SelectProps={{ native: true }} inputProps={{ id: \"estado\" }} >\r\n                    <option value={1}>PENDIENTE</option>\r\n                    <option value={0}>APROBADO</option>\r\n                    <option value={2}>RECHAZADO</option>\r\n                    <option value={3}>ENTREGADO</option>\r\n                </TextField>\r\n                <Button disabled={loading} style={{ marginLeft: 10, marginRight: 10 }} variant=\"outlined\" onClick={this.handleClick} >GENERAR</Button>\r\n            </div>\r\n            {loading\r\n                ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </div>)\r\n                : (error\r\n                    ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                        <Typography variant=\"h4\">OCURRIÓ UN ERROR</Typography>\r\n                        <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                        <Typography variant=\"subtitle2\" >{error.code} {error.status}</Typography>\r\n                    </div>)\r\n                    : (<div>\r\n                        <Table>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell component=\"th\" >Fecha</TableCell>\r\n                                    <TableCell component=\"th\" >#</TableCell>\r\n                                    <TableCell component=\"th\" >Usuario</TableCell>\r\n                                    <TableCell component=\"th\" >Estado</TableCell>\r\n                                    <TableCell component=\"th\" >Observacion</TableCell>\r\n                                    <TableCell component=\"th\" >Fecha Envío</TableCell>\r\n                                    <TableCell component=\"th\" >Entregado</TableCell>\r\n                                    <TableCell component=\"th\" >Motivo Anulacion</TableCell>\r\n                                    <TableCell component=\"th\" >Producto</TableCell>\r\n                                    <TableCell component=\"th\" >Cant</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {data.map(d => (<TableRow key={d.id}>\r\n                                    <TableCell >{new Date(d.createdAt).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.idPedido}</TableCell>\r\n                                    <TableCell>{d.username}</TableCell>\r\n                                    <TableCell>{d.estado}</TableCell>\r\n                                    <TableCell>{d.observacion}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.motivoAnulacion}</TableCell>\r\n                                    <TableCell>{d.descripcion}</TableCell>\r\n                                    <TableCell>{d.cantidad}</TableCell>\r\n                                </TableRow>))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>)\r\n                )}\r\n        </div >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Tabs, Tab, Paper } from \"@material-ui/core\";\r\nimport ProductSales from \"./ProductSales\";\r\n\r\nexport default class Reports extends React.Component<any> {\r\n    state = {\r\n        currentTab: 0\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    handleChange = (x, currentTab) => {\r\n        this.setState({ currentTab });\r\n    }\r\n    render() {\r\n        const { currentTab } = this.state;\r\n        return (\r\n            <Paper style={{ margin: 10 }}>\r\n                <Tabs style={{ marginBottom: 10 }} value={currentTab} onChange={this.handleChange}>\r\n                    <Tab label=\"Detalle de Productos\" />\r\n                </Tabs>\r\n                {currentTab === 0 && <ProductSales />}\r\n            </Paper>)\r\n    }\r\n}","import React from 'react';\nimport { Drawer, List, ListItem, ListItemIcon, ListItemText, Typography, CssBaseline, withStyles, AppBar, Toolbar, IconButton, Hidden } from '@material-ui/core';\nimport { ShoppingCart, ListAlt, Menu, Close, Help, Inbox, Report } from \"@material-ui/icons\";\nimport { Link, Switch, Route, Redirect, HashRouter } from \"react-router-dom\";\nimport Order from './Components/Order/index';\nimport OrderList from './Components/OrderList';\nimport Feed from './Components/Feed';\nimport Reports from './Components/Reports';\n\nconst OPCIONES = [\n  { label: \"Inicio\", Icon: Inbox, path: \"/feed\" },\n  { label: \"Nuevo Pedido\", Icon: ShoppingCart, path: \"/order\" },\n  { label: \"Pedidos\", Icon: ListAlt, path: \"/order-list\" },\n  { label: \"Reportes\", Icon: Report, path: \"/reports\" }\n];\n\nconst drawerWidth = 200;\n\nexport default withStyles(theme => ({\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    flexGrow: 1,\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: drawerWidth\n    }\n  },\n  appBar: {\n    display: \"block\"\n  }\n}))(class App extends React.Component<{ username: string, rol: string, grupo: string, token: string, window: any, classes: any }, any> {\n\n  state = { selected: \"\", isMenuOpen: false, username: \"\", grupo: \"\", token: \"\", rol: 0, accesos: [] };\n\n  constructor(props: any) {\n    super(props);\n    this.onMounted = this.onMounted.bind(this);\n    this.handleMenu = this.handleMenu.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n    this.state.username = props.username;\n    this.state.grupo = props.grupo;\n    this.state.rol = props.rol;\n    this.state.accesos = [...OPCIONES];\n    if (this.state.rol === 3) {\n      this.state.accesos = [...OPCIONES];\n      this.state.accesos.splice(1, 1);\n    }\n    if (this.state.rol !== 3) {\n      this.state.accesos = [...OPCIONES];\n      this.state.accesos.splice(3, 1);\n    }\n  }\n  onMounted(selected: string) {\n    this.setState({ selected });\n  }\n  handleMenu() {\n    this.setState(prev => {\n      const state = { ...prev };\n      state.isMenuOpen = !state.isMenuOpen;\n      return state;\n    });\n  }\n  closeMenu() {\n    this.setState({ isMenuOpen: false });\n  }\n  render() {\n    const { selected, isMenuOpen, username, grupo, accesos } = this.state;\n    const { window, classes } = this.props;\n    const container = window !== undefined ? () => window().document.body : undefined;\n\n    const drawerChildren = (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\n        <Typography style={{ display: \"block\" }} variant=\"button\">{username}</Typography>\n        <Typography style={{ display: \"block\" }} variant=\"caption\">{grupo}</Typography>\n      </div>\n      <List style={{ flex: 1 }}>\n        {this.state.accesos.map(o => (<ListItem onClick={this.closeMenu} selected={selected === o.path} component={Link} to={o.path} button key={o.label}>\n          <ListItemIcon >{<o.Icon />}</ListItemIcon>\n          <ListItemText style={{ flex: 1 }} primary={o.label} />\n        </ListItem>))}\n      </List>\n      <ListItem component=\"a\" target=\"_a\" href=\"https://wa.me/\" >\n        <ListItemIcon> <Help /> </ListItemIcon>\n        <ListItemText primary=\"AYUDA\" />\n      </ListItem>\n    </div>);\n\n    return (<HashRouter>\n      <div style={{ width: \"100%\", height: \"100%\" }}>\n        <CssBaseline />\n        <nav className={classes.drawer}>\n          <Hidden smUp implementation=\"css\" >\n            <Drawer\n              container={container}\n              variant=\"temporary\"\n              anchor={'left'}\n              open={isMenuOpen}\n              onClose={this.closeMenu}\n              classes={{ paper: classes.drawerPaper }}\n              ModalProps={{\n                keepMounted: true, // Better open performance on mobile.\n              }}\n            >\n              <div className={classes.toolbar} style={{ textAlign: \"right\" }}>\n                <IconButton onClick={this.handleMenu}>\n                  <Close />\n                </IconButton>\n              </div>\n              {drawerChildren}\n            </Drawer>\n          </Hidden>\n          <Hidden xsDown implementation=\"css\">\n            <Drawer\n              classes={{ paper: classes.drawerPaper }}\n              variant=\"permanent\"\n              open\n            >\n              {drawerChildren}\n            </Drawer>\n          </Hidden>\n        </nav>\n\n        <Hidden smUp implementation=\"css\" >\n          <AppBar position=\"fixed\" className={classes.x}>\n            <Toolbar>\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open drawer\"\n                edge=\"start\"\n                onClick={this.handleMenu}\n              >\n                <Menu />\n              </IconButton>\n              <Typography style={{ flexGrow: 1 }}>{(OPCIONES.find(x => x.path === selected) || {}).label}</Typography>\n            </Toolbar>\n          </AppBar>\n        </Hidden>\n\n        <main className={classes.content}>\n          <Hidden smUp implementation=\"css\" >\n            <div className={classes.toolbar}></div>\n          </Hidden>\n          <Switch>\n            <Route path=\"/feed\" render={props => <Feed {...props} onMounted={this.onMounted} grupo={this.state.grupo} username={this.state.username} rol={this.state.rol} />} />\n            <Route path=\"/order\" render={props => <Order {...props} onMounted={this.onMounted} />} />\n            <Route path=\"/order-list\" render={props => <OrderList {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\n            <Route path=\"/reports\" render={props => <Reports {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\n          </Switch>\n        </main>\n      </div>\n    </HashRouter>)\n  }\n});","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\r\nimport { Card, CardContent, TextField, Button, InputAdornment, IconButton, Typography } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\n\r\nexport default class Login extends React.Component<{ onLoggedIn: (params: any) => void }, LoginState> {\r\n    state = {\r\n        loading: false,\r\n        user: \"\",\r\n        pwd: \"\",\r\n        error: null,\r\n        isPasswordVisible: false\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handlePassword = this.handlePassword.bind(this);\r\n        API.KEY = \"\";\r\n    }\r\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({\r\n            [name]: value\r\n        } as any);\r\n    }\r\n    componentDidMount() {\r\n        setTimeout(() =>\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"user-textfield\").focus();\r\n            }), 100);\r\n    }\r\n    handleSubmit(event: any) {\r\n        event.preventDefault();\r\n        if (this.state.loading) return;\r\n        const user = this.state.user && this.state.user.toString().trim();\r\n        const pwd = this.state.pwd && this.state.pwd.toString().trim();\r\n        if (!user) return alert(\"Digite su usuario\");\r\n        if (!pwd) return alert(\"Digite su contraseña\");\r\n        this.setState({ loading: true, error: null });\r\n        API.Login({ user, pwd })\r\n            .then(r => {\r\n                this.setState({ loading: null });\r\n                this.props.onLoggedIn({ ...r });\r\n            })\r\n            .catch(error => this.setState({ loading: null, error }));\r\n    }\r\n    handlePassword(event) {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.isPasswordVisible = !state.isPasswordVisible;\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const { loading, error, user, pwd, isPasswordVisible } = this.state;\r\n        return (<div style={{ paddingTop: 20 }}>\r\n            <Card style={{ width: \"100%\", maxWidth: 300, margin: \"auto\" }}>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <CardContent>\r\n                        <img src=\"http://natucosmetic.com/wp-content/uploads/2020/03/LOGO-NATU-PNG.png\" style={{ width: \"100%\", maxHeight: \"40vh\" }} ></img>\r\n                        <TextField\r\n                            inputProps={{ id: \"user-textfield\" }}\r\n                            onChange={this.handleChange}\r\n                            value={user}\r\n                            label=\"Usuario\"\r\n                            name=\"user\"\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                        />\r\n                        <TextField\r\n                            onChange={this.handleChange}\r\n                            value={pwd}\r\n                            name=\"pwd\"\r\n                            label=\"Contraseña\"\r\n                            type={isPasswordVisible ? \"input\" : \"password\"}\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                            InputProps={{\r\n                                endAdornment: <InputAdornment position=\"end\">\r\n                                    <IconButton onClick={this.handlePassword}>\r\n                                        {isPasswordVisible ? <VisibilityOff /> : <Visibility />}\r\n                                    </IconButton>\r\n                                </InputAdornment>\r\n                            }}\r\n                        />\r\n                        {error && <Typography color=\"secondary\" variant=\"body1\" style={{ textAlign: \"center\" }}>{error.message}</Typography>}\r\n                        <Button type=\"submit\" variant=\"outlined\" style={defaultStyle} color=\"primary\" disabled={loading} fullWidth >\r\n                            {loading ? \"CARGANDO...\" : \"ENTRAR\"}\r\n                        </Button>\r\n                    </CardContent>\r\n                </form>\r\n            </Card>\r\n        </div>)\r\n    }\r\n}\r\nconst defaultStyle = {\r\n    marginTop: 10,\r\n    marginBottom: 10\r\n}\r\n\r\nclass LoginState {\r\n    user = \"\";\r\n    pwd = \"\";\r\n    loading = false;\r\n    isPasswordVisible = false;\r\n    error = null;\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport Login from './Components/Login';\nimport API from \"./Services/API\";\n\n/**\n    <React.StrictMode>\n    </React.StrictMode> */\nfunction StartApp(props) {\n  API.KEY = props.token;\n  console.info(\"API.KEY assinged:\", props.token)\n  ReactDOM.render(\n    <App {...props} />,\n    document.getElementById('root')\n  );\n}\nfunction LogIn() {\n  ReactDOM.render(\n    <React.StrictMode>\n      <Login onLoggedIn={StartApp} />\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n}\nLogIn();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}