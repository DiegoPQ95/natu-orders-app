{"version":3,"sources":["lib/ExtendNumber.ts","serviceWorker.ts","Services/API.ts","Utils/Preferences.ts","Components/Login.tsx","Components/Products/ProductCard.tsx","Components/Products/ProductGrid.tsx","Components/Modal.tsx","Components/Order/ProductOptions.tsx","Components/ConfirmOrder/index.tsx","Utils/Calcs.ts","Utils/Validation.ts","Components/Input.tsx","Components/Order/Data.tsx","Components/ImageInput.tsx","Components/Order/Payment.tsx","Components/Order/Survey.tsx","Components/Message.tsx","Components/RouteMessage.tsx","Components/Order/ProductSelections.tsx","Components/Order/Redux/GetProductsThunk.ts","Components/Order/lib/OrderState.ts","Components/Order/lib/RecoverStoredOrder.ts","Utils/ImageReader.ts","Components/Order/Redux/LoadImageThunk.ts","Components/Order/Redux/LocalStorePedido.ts","Components/Order/Redux/OrderSaveThunk.ts","Components/Order/Redux/OrderReducer.ts","Components/Order/index.tsx","Components/Order/mapOrderState.ts","Services/OrderActions.ts","Components/OrderList/OrderDetails.tsx","Components/OrderList/index.tsx","Components/Feed/LeftRightHeader.tsx","Components/Feed/RankingCard.tsx","Components/Feed/LineCard.tsx","Components/Feed/ProfitCard.tsx","Globals.ts","Components/Feed/PieCard.tsx","Components/Feed/WithTimeTravel.tsx","Components/Feed/BarCard.tsx","Components/Feed/index.tsx","Components/Reports/ProductSales.tsx","Components/Reports/index.tsx","Components/OrderQueue/Queue.tsx","Components/OrderQueue/Columns.ts","Components/OrderQueue/index.tsx","Components/ItemList.tsx","Components/Products/Edit.tsx","Components/Products/index.tsx","Components/Users/Columns.ts","Components/Users/UserDataForm.tsx","Components/Users/ValidateUserForm.ts","Components/Users/Edit.tsx","Components/Users/index.tsx","Components/PolicyPage/index.tsx","Layouts/TermsAndConds.tsx","Components/UserProfile.tsx","Components/Order/Redux/Store.ts","Layouts/Main.tsx","Layouts/SignIn.tsx","App.tsx","index.tsx"],"names":["Number","prototype","toCurrency","Intl","NumberFormat","style","currency","minimumFractionDigits","format","this","moneyRound","decimal_digits","negative","n","digits","undefined","multiplicator","Math","pow","parseFloat","toFixed","round","Boolean","window","location","hostname","match","DOMAIN","PROJECT_ENVIROMENT","KEY","body","F","method","todos","id","action","array_items","semana","year","join","params","param_str","Object","keys","length","URLSearchParams","toString","userId","user","item","URI","options","DEFAULTS","cache","mode","ops","headers","JSON","stringify","fetch","then","response","ok","json","clone","catch","text","x","message","status","statusText","obj","ex","prefix","Preferences","_prefix","_key_","key","localStorage","getItem","parse","value","value_txt","setItem","removeItem","productoSelecciones","productList","product","find","opciones","list","filter","combo","ID","Login","props","state","LoginState","handleChange","event","currentTarget","name","setState","handleSubmit","preventDefault","loading","trim","pwd","error","API","r","Set","onLoggedIn","handlePassword","prev","isPasswordVisible","Get","setTimeout","requestAnimationFrame","document","getElementById","focus","paddingTop","Card","width","maxWidth","margin","textAlign","onSubmit","CardContent","src","alt","height","minHeight","TextField","inputProps","onChange","label","fullWidth","disabled","defaultStyle","type","InputProps","endAdornment","InputAdornment","position","IconButton","onClick","VisibilityOff","Visibility","Typography","color","variant","Button","Divider","display","component","Link","to","React","Component","marginTop","marginBottom","onCardClick","onActionClick","controls","remainProps","textStyle","CardActionArea","Content","CardActions","Add","cantidad","Remove","ArrowLeft","ArrowRight","CardMedia","className","image","imgSrc","flexDirection","flex","overflow","nombre","editablePrice","Input","onPriceChange","pvp_final","startAdornment","AttachMoney","ProductGrid","visible_style","visible","useState","search","set_search","Products","items","toUpperCase","indexOf","async_status","CircularProgress","size","async_error","placeholder","padding","target","Search","Grid","container","alignItems","spacing","map","sm","md","xs","ProductCard","editablePrices","habilitado","textDecoration","showNewItem","Transition","forwardRef","ref","Slide","direction","Modal","show","onClose","fullScreen","title","closeButtonText","Dialog","open","TransitionComponent","AppBar","Toolbar","flexGrow","Close","DialogTitle","DialogContent","children","footer","DialogActions","ItemCard","selectedStyle","selected","border","ProductOptions","selections","handleClose","maxItems","_Item","alert","onDone","showingID","toggleSelect","existsIndex","splice","push","nextProps","isOpen","Item","opcionIDs","idOpcion","paddingLeft","paddingRight","ConfirmOrder","show_next_discount","descuento","valor_envio","gran_total","total_pedido","subtotal","porcentaje","valor","mostrarDescuentos","sgte_descuento_porcentaje","List","Row","col1","col2","col3","componentes","showComponentes","LabelDescuentoComponent","ListItem","sgte_descuento_falta","c","DocToString","doc","MonthToString","index","ValidateInput","i","char","twoParts","split","ValidarIdentificacion","documento","maxLength","_props","error_props","helperText","Location","onValueChange","direccion","tipo_envio","ciudad","referencia","sector","identificacion","razonSocial","direccion_factura","telefono_factura","email_factura","nombre_contacto","telefono_contacto","identificacion_contacto","documento_contacto","identificacion_e","telefono_e","tel","email_e","email","identificacion_contacto_e","telefono_contacto_e","mostrar_ciudad","mostrar_datos_envio","Paper","marginLeft","multiline","rows","select","SelectProps","native","PureComponent","ImageInput","COMPONENT_ID","Date","valueOf","handleClick","_","click","files","hidden","accept","verticalAlign","Image","marginRight","total_pagar","FormControlLabel","control","Switch","checked","usarImagen","e","inputMode","numeroTransaccion","onImgChange","imgTransaccion","withRouter","txt1","txt2","bind","unblock","history","block","goBack","ActionOrder","autoFocus","Message","info","focusafter","get","ProductSelections","Rows","deletionClick","isNaN","onDeleteSelection","ListItemText","ListItemSecondaryAction","Delete","GetProductsThunk","createAsyncThunk","GetProducts","OrderState","descuentoAplica","observacion","imageFile","new_state","updates","choosen","stored_direccion","hasOwnProperty","stored_factura","before","file","Promise","resolve","reject","mb","reader","FileReader","onload","result","onerror","readAsDataURL","ImgFileToObject","base64","base64ArrayBuffer","ext","readAsArrayBuffer","arrayBuffer","chunk","encodings","bytes","Uint8Array","byteLength","byteRemainder","mainLength","LoadingMessageWindow","LoadImageThunk","reportError","imgFile","ImageReader","imgUrl","LocalStoreOrder","ThunkAPI","clean","reportCompleted","getState","Order","data","isEmpty","val","ValidateSave","order","results","OrderSaveThunk","a","propertyName","envio","total","fileTransaccion","SaveOrder","detalle","idProducto","descuentoPorcentaje","descuentoTotal","regaloTotal","baseIva","iva","OrderReducer","createSlice","reducers","updateCurrentTab","currentTab","payload","changeProductQuantity","change_cantidad_item","Id","isDirty","changeDataValue","changeProductPrice","found","addProductSelection","removeProductSelection","extraReducers","builder","addCase","pending","rejected","fulfilled","RecoverStoredOrder","assign","initialState","previous_cant","cantidad_desde","actions","OrderComponent","guardarBorrador","setStoredOrder","handleDone","saveOrder","path","exception","set","handleProductAction","handleValueChange","imageChange","loadTransaccionImg","handleAddSelection","handleDeleteSelection","handlePriceChange","onMounted","onbeforeunload","unblockNavigation","routerWillLeave","getProducts","nextLocation","pathname","confirm","tablaDescuentos","choosenItems","isLoading","Tabs","ev","Tab","rol","d","Payment","RouteMessage","Survey","Fab","bottom","right","Save","connect","rootState","descuentos","normalizedProductList","sort","b","orden","exists","Totals","sorted","montoDesde","founded","desc","next","EstimarDescuento","getValorEnvio","OrderActions","prompt","_fechaEnvio","_fechaRecepcion","bienRecibido","observacionRecepcion","fechaEnvio","detaOrderDetails","shouldRefresh","handleButton","promise","Aprobar","Rechazar","Enviar","Recibir","handleCheck","GetOrder","img","createElement","appendChild","numero","fechaCreacion","fechaRecepcion","username","survey1","survey2","editable","TextRow","toLocaleString","toLocaleDateString","SectionHeader","ActionButtons","loadingAction","showReject","Fragment","Checkbox","required","center","msg","handleMessage","GetOrders","err","code","refresh","paddingBottom","overflowX","Hidden","xsDown","implementation","borderBottom","button","smUp","EstadoToVariant","toDateString","render","estado","LeftRigthHeader","onBackClick","onNextClick","subtitle","CardHeader","HourglassEmpty","disableTypography","PerfomanceCell","me","LineCard","legend","maintainAspectRatio","bezierCurve","scales","yAxes","ticks","maxTicksLimit","beginAtZero","xAxes","RawData","remain","labels","values","el","we","getDate","getMonth","datasets","backgroundColor","borderColor","lineTension","fill","ProfitCard","month","reservas","promo","reduceMoney","borderLeft","dense","primary","ROLES","PieCard","current_week","statName","reduceFn","handleBack","new_week","Stats","updateData","showError","handleNext","desde","start","hasta","end","remainState","TimeTravelRank","WithTimeTravel","secondColType","colType","value1","value2","date","ahora","getFullYear","toLocaleTimeString","este_dia","DateToString","PersonalGraph","Feed","unmounted","week_ranking","group_graph","personal_graph","year_sales","product_resume","group_ranking","componentWillUnmount","productResumeReducer","stats","ADMINISTRADOR","resume","esAdmin","createdAt","profit","ProductSales","toJSON","ProductSalesReport","Table","TableHead","TableRow","TableCell","TableBody","idPedido","fechaEntrega","motivoAnulacion","descripcion","Reports","Queue","columns","changedAt","selectableRows","onRowClick","entrada_columns","aprobado_columns","enviado_columns","recibido_columns","facturado_columns","rechazado_columns","OrderQueue","handleTab","openOrder","closeOrder","shouldUpdate","loadData","rawData","fechaAnulacion","console","exact","routeProps","COUNT","ItemList","inputValue","selectValue","showErrors","INPUT_ID","SELECT_ID","handleDelete","onRemove","handleAdd","InputConfig","IdProp","dataSource","onAdd","validateInput","DisplayProp","SecondaryDisplayProp","inputError","selectError","IDs","ListItemIcon","input","Edit","handleChecked","DeleteProduct","_updated","_failed","handleSave","errors","_validar","focusOn","rawFile","SaveProduct","handleFile","idComponente","handleRemove","errorSet","nextId","p","reduce","acc","v","o","tabIndex","_Update","handleAction","productSorted","SendProductAction","UserColumns","formType","editionType","grupos","editarEstado","editarModificarPVPs","editarTermsAndConds","noValidate","stopPropagation","telefono","nacionalidad","fechaNacimiento","Password","password","confirm_password","RolToString","editarPVPsdurantePedido","mustAcceptTermsAndConds","termsAndCondsAcceptedAt","guardar","other_props","input_props","FormLabel","show_password","switchShowPassword","ValidateUserForm","grupo","parseInt","passwordOpcional","FocusOn","EditUserData","validarPassword","userData","validationErrors","SaveUser","forEach","DeleteUser","nextShow","initialData","UserDataForm","Users","FetchData","all","GetUsers","GetGroups","ultimoPedido","UltimoPedido","handleNew","update","arr_data","handleTermsAndConds","SendUserAction","customToolbar","Tooltip","minWidth","Policy","customSort","colIndex","col","toLowerCase","TextSrc","set_user","set_status","errores","set_errores","useEffect","GetUser","store","configureStore","reducer","OPCIONES","Icon","Inbox","ShoppingCart","ListAlt","roles","Category","PeopleAlt","Report","Person","withStyles","theme","drawer","breakpoints","up","flexShrink","toolbar","mixins","drawerPaper","content","appBar","isMenuOpen","ParentName","token","accesos","solicitarDatosAlIniciar","handleMenu","closeMenu","TermsAndCondsAccepted","classes","UserProfile","drawerChildren","href","Help","basename","CssBaseline","Drawer","anchor","paper","ModalProps","keepMounted","aria-label","edge","Menu","SignIn","fin_registro","ASESOR","App","createHashHistory","handleLoggedIn","setPrefix","user_routes","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.946253b5.chunk.js","sourcesContent":["Number.prototype.toCurrency = function () {\r\n    // Create our number formatter.\r\n    var formatter = new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: 'USD',\r\n        minimumFractionDigits: 2,\r\n        // These options are needed to round to whole numbers if that's what you want.\r\n        //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\r\n        //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\r\n    });\r\n    return formatter.format(this); /* $2,500.00 */\r\n}\r\n\r\nNumber.prototype.moneyRound = function (decimal_digits: number = 2) {\r\n    var negative = false;\r\n    var n = this;\r\n    var digits = decimal_digits;\r\n    if (digits === undefined) {\r\n        digits = 0;\r\n    }\r\n    if (n < 0) {\r\n        negative = true;\r\n        n = n * -1;\r\n    }\r\n    var multiplicator = Math.pow(10, digits);\r\n    n = parseFloat((n * multiplicator).toFixed(11));\r\n    n = (Math.round(n) / multiplicator).toFixed(digits);\r\n    if (negative) {\r\n        n = (n * -1).toFixed(digits);\r\n    }\r\n    return +n;\r\n}\r\nexport { };","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const DOMAIN = (window as any).PROJECT_ENVIROMENT === \"development\" ? \"http://localhost:9000\" : \"https://natuapp.ue.r.appspot.com\";\r\n\r\nclass API {\r\n    KEY = \"\";\r\n    Login(body) { return this.F(\"user/login\", { body, method: \"POST\" }); }\r\n    GetProducts(todos?: boolean) { return this.F(\"product\" + (todos ? \"?todos=1\" : \"\")); }\r\n    SendProductAction(id: number, action: string) { return this.F(\"product/\" + id, { body: { action }, method: \"PATCH\" }); }\r\n    GetOrders(): Promise<GetOrder[]> { return this.F(\"order\"); }\r\n    GetOrder(id: number): Promise<GetOrder> { return this.F(\"order/\" + id); }\r\n    SaveOrder(body: CreateOrder) { return this.F(\"order\", { method: \"POST\", body }); }\r\n    ActionOrder(id: number | string, body: ActionBody) { return this.F(\"order/\" + id, { method: \"PUT\", body }); }\r\n    Stats(array_items, semana?, year?) { return this.F(\"dashboard?data=\" + array_items.join(\",\") + (semana ? (\"&semana=\" + semana) : \"\") + (year ? (\"&year=\" + year) : \"\")); }\r\n    ProductSalesReport(params: { desde: string, hasta: string, estado: any }) {\r\n        var param_str = \"\";\r\n        if (params && Object.keys(params).length)\r\n            param_str = \"?\" + new URLSearchParams(params).toString();\r\n\r\n        return this.F(\"reports/product-sales\" + param_str);\r\n    }\r\n    GetGroups() { return this.F(\"user/groups\"); }\r\n    SignIn(body: any) { return this.F(\"user\", { method: \"POST\", body }); }\r\n\r\n    GetUsers(): Promise<VisibleUser[]> { return this.F(\"user\") }\r\n    GetUser(userId: number): Promise<VisibleUser> { return this.F(\"user/\" + userId) }\r\n    SaveUser(user: VisibleUser) {\r\n        return this.F(\"user\" + (user.id ? `/${user.id}` : \"\"), {\r\n            method: user.id ? \"PUT\" : \"POST\",\r\n            body: user\r\n        });\r\n    }\r\n    DeleteUser(id: number) {\r\n        return this.F(\"user/\" + id, {\r\n            method: \"DELETE\"\r\n        });\r\n    }\r\n    SendUserAction(action: \"ACCEPT_TERMS_AND_CONDS\", id: any = null) {\r\n        return this.F(\"user\" + (id === null ? \"\" : `/${id}`), { method: \"PATCH\", body: { action } });\r\n    }\r\n\r\n    SaveProduct(item: FullProduct) {\r\n        return this.F(\"product\" + (item.id ? (\"/\" + item.id) : \"\"), {\r\n            method: item.id ? \"PUT\" : \"POST\",\r\n            body: item\r\n        });\r\n    }\r\n    DeleteProduct(id: number) {\r\n        return this.F(\"product/\" + id, { method: \"DELETE\" });\r\n    }\r\n\r\n    private F(URI, options: SpecialRequest = {}) {\r\n        const DEFAULTS: any = {\r\n            method: \"GET\",\r\n            cache: \"reload\",\r\n            mode: \"cors\"\r\n        };\r\n        var ops: RequestInit = { ...DEFAULTS, ...options };\r\n        if (!ops.headers) ops.headers = {};\r\n        ops.headers['Content-Type'] = 'application/json';\r\n        ops.headers['Access-Control-Allow-Origin'] = '*';\r\n\r\n        if (this.KEY) {\r\n            if (!ops.headers) ops.headers = {};\r\n            ops.headers[\"Authorization\"] = 'Basic ' + this.KEY;\r\n        }\r\n\r\n        if (ops.body && (typeof ops.body !== typeof \"\"))\r\n            ops.body = JSON.stringify(ops.body);\r\n\r\n        return fetch(DOMAIN + \"/\" + URI, ops).then(response => {\r\n            if (response.ok) return response.json();\r\n            return response.clone().json()\r\n                .catch(() => {\r\n                    return response.text().then(x => {\r\n                        throw {\r\n                            message: x,\r\n                            status: response.status,\r\n                            statusText: response.statusText\r\n                        }\r\n                    })\r\n                }).then(obj => {\r\n                    throw {\r\n                        ...obj,\r\n                        status: response.status,\r\n                        statusText: response.statusText\r\n                    }\r\n                })\r\n        }).catch(ex => {\r\n            if (ex.message === \"Failed to fetch\") {\r\n                throw {\r\n                    message: \"Este servicio no se encuentra disponible por el momento. Intentelo más tarde.\",\r\n                    status: 0\r\n                }\r\n            }\r\n            if (!ex.message) ex.message = ex.statusText;\r\n            throw ex;\r\n        });\r\n    }\r\n}\r\nexport default new API();\r\n\r\ninterface SpecialRequest extends RequestInit {\r\n    body?: any\r\n}\r\n\r\ninterface ActionBody {\r\n    action: \"SURVEY\" | \"APROBAR\" | \"RECHAZAR\" | \"ENVIAR\" | \"RECIBIR\" | \"FACTURAR\",\r\n    value?: any,\r\n    bienRecibido?: boolean,\r\n    observacionRecepcion?: string\r\n}","import  OrderState  from \"../Components/Order/lib/OrderState\";\r\n\r\nvar prefix = \"\";\r\nexport default class Preferences {\r\n    static setPrefix(_prefix: string) {\r\n        prefix = _prefix || \"\";\r\n    }\r\n    static Get(_key_: \"current_order\" | \"direccion\" | \"user\" | \"factura\") {\r\n        var key = prefix + _key_;\r\n        var x = window.localStorage.getItem(key);\r\n        try {\r\n            return JSON.parse(x);\r\n        } catch (ex) { }\r\n        return x;\r\n    }\r\n    static Set(_key_: \"current_order\" | \"direccion\" | \"user\" | \"factura\", value: any = undefined) {\r\n        var key = prefix + _key_;\r\n        if (value === undefined) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        } else if (value === null) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        }\r\n        var value_txt = value;\r\n        if (typeof value === typeof {})\r\n            value_txt = JSON.stringify(value);\r\n\r\n        window.localStorage.setItem(key, value_txt);\r\n    }\r\n    static NormalizeProductoSelecciones(productoSelecciones: OrderState[\"productoSelecciones\"], productList: Product[]) {\r\n        if (!(productoSelecciones && Object.keys(productoSelecciones).length)) return false;\r\n        for (const key in productoSelecciones) {\r\n            var product = productList.find(x => x.id === +key);\r\n            // el producto no está en la lista, se borra\r\n            if (!product || !(product.opciones && product.opciones.length)) {\r\n                delete productoSelecciones[key];\r\n                continue;\r\n            }\r\n            var list = productoSelecciones[key];\r\n            // algun item no está en la lista, se borra el conjunto\r\n            list = list.filter(combo => {\r\n                var existingItems = combo.filter(ID => productList.find(x => x.id === +ID));\r\n                return existingItems.length === combo.length;\r\n            });\r\n            productoSelecciones[key] = list;\r\n            // la lista no tiene items, se borra\r\n            if (!productoSelecciones[key].length) delete productoSelecciones[key];\r\n        }\r\n        return Object.keys(productoSelecciones).length > 0;\r\n    }\r\n}","import React from \"react\";\r\nimport { Card, CardContent, TextField, Button, InputAdornment, IconButton, Typography, Divider } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Preferences from \"../Utils/Preferences\";\r\n\r\nexport default class Login extends React.Component<{ onLoggedIn: (params: LoggedIn) => void }, LoginState> {\r\n    state = new LoginState();\r\n    constructor(props: any) {\r\n        super(props);\r\n        API.KEY = \"\";\r\n        this.state.user = Preferences.Get(\"user\") || \"\";\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({\r\n            [name]: value\r\n        } as any);\r\n    }\r\n    componentDidMount() {\r\n        setTimeout(() =>\r\n            window.requestAnimationFrame(() => {\r\n                if (this.state.user) {\r\n                    document.getElementById(\"password-textfield\").focus();\r\n                } else {\r\n                    document.getElementById(\"user-textfield\").focus();\r\n                }\r\n            }), 100);\r\n    }\r\n    handleSubmit = (event: any) => {\r\n        event.preventDefault();\r\n        if (this.state.loading) return;\r\n        const user = this.state.user && this.state.user.toString().trim();\r\n        const pwd = this.state.pwd && this.state.pwd.toString().trim();\r\n        if (!user) return this.setState({ error: { message: \"Digite su usuario\" } });\r\n        if (!pwd) return this.setState({ error: { message: \"Digite su contraseña\" } });\r\n        this.setState({ loading: true, error: null });\r\n        API.Login({ user, pwd })\r\n            .then(r => {\r\n                // importante, se debe ejecutar ANTES de onLoggedIn\r\n                Preferences.Set(\"user\", user);\r\n                this.setState({ loading: null });\r\n                this.props.onLoggedIn({ ...r });\r\n            })\r\n            .catch(error => this.setState({ loading: null, error }));\r\n    }\r\n    handlePassword = (event) => {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.isPasswordVisible = !state.isPasswordVisible;\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const { loading, error, user, pwd, isPasswordVisible } = this.state;\r\n        return (<div style={{ paddingTop: 20 }}>\r\n            <Card style={{ width: \"100%\", maxWidth: 300, margin: \"auto\", textAlign: \"center\" }}>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <CardContent>\r\n                        <img src=\"./logo.png\" alt=\"Logo\"\r\n                            style={{ height: 150, minHeight: 150, width: \"auto\" }} />\r\n                        <TextField\r\n                            inputProps={{ id: \"user-textfield\" }}\r\n                            onChange={this.handleChange}\r\n                            value={user}\r\n                            label=\"Usuario\"\r\n                            name=\"user\"\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                        />\r\n                        <TextField\r\n                            onChange={this.handleChange}\r\n                            value={pwd}\r\n                            name=\"pwd\"\r\n                            label=\"Contraseña\"\r\n                            type={isPasswordVisible ? \"input\" : \"password\"}\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                            inputProps={{ id: \"password-textfield\" }}\r\n                            InputProps={{\r\n                                endAdornment: <InputAdornment position=\"end\">\r\n                                    <IconButton onClick={this.handlePassword}>\r\n                                        {isPasswordVisible ? <VisibilityOff /> : <Visibility />}\r\n                                    </IconButton>\r\n                                </InputAdornment>\r\n                            }}\r\n                        />\r\n                        {error && <Typography color=\"secondary\" variant=\"body1\" style={{ textAlign: \"center\" }}>{error.message}</Typography>}\r\n                        <Button type=\"submit\" variant=\"outlined\" style={defaultStyle} color=\"primary\" disabled={loading} fullWidth >\r\n                            {loading ? \"CARGANDO...\" : \"ENTRAR\"}\r\n                        </Button>\r\n                        <Divider style={{ margin: 20 }} />\r\n                        <Typography style={{ display: \"block\", textAlign: \"center\", margin: 5 }} variant=\"body2\" component={Link} to=\"/signin\">No eres asesor/a natú? Registrate aquí!</Typography>\r\n                    </CardContent>\r\n                </form>\r\n            </Card>\r\n        </div>)\r\n    }\r\n}\r\nconst defaultStyle = {\r\n    marginTop: 10,\r\n    marginBottom: 10\r\n}\r\n\r\nclass LoginState {\r\n    user = \"\";\r\n    pwd = \"\";\r\n    loading = false;\r\n    isPasswordVisible = false;\r\n    error = null;\r\n}","import React from \"react\";\r\nimport { CardMedia, Card, CardContent, Typography, Input, CardActions, InputAdornment, IconButton, CardActionArea } from \"@material-ui/core\";\r\nimport { AttachMoney, Add, Remove, ArrowLeft, ArrowRight } from \"@material-ui/icons\";\r\n\r\ninterface Props extends Product {\r\n    id: any;\r\n    pvp_final: any;\r\n\r\n    editablePrice?: boolean;\r\n    onActionClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n    onPriceChange?: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\r\n    controls?: \"ADD-REMOVE\" | \"LEFT-RIGHT\";\r\n    onCardClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n\r\n    textStyle?: any;\r\n}\r\n\r\nexport default function (props: Props) {\r\n    const { onCardClick, onActionClick, controls, ...remainProps } = props;\r\n\r\n    const item = props;\r\n    const textStyle = props.textStyle || {};\r\n\r\n    return (<Card>\r\n        {onCardClick\r\n            ? (<CardActionArea name=\"card\" value={props.id} onClick={onCardClick}>\r\n                <Content {...remainProps} />\r\n            </CardActionArea>)\r\n            : <Content {...remainProps} />}\r\n\r\n        {controls === \"ADD-REMOVE\"\r\n            && (<CardActions>\r\n                <IconButton onClick={onActionClick} name=\"+\" value={item.id}>\r\n                    <Add />\r\n                </IconButton>\r\n                <Typography variant=\"body1\" style={textStyle}>{item.cantidad}</Typography>\r\n                <IconButton disabled={!(item.cantidad > 0)} onClick={onActionClick} name=\"-\" value={item.id}>\r\n                    <Remove />\r\n                </IconButton>\r\n            </CardActions>)}\r\n\r\n        {controls === \"LEFT-RIGHT\"\r\n            && (<CardActions>\r\n                <IconButton onClick={onActionClick} name=\"LEFT\" value={item.id}>\r\n                    <ArrowLeft />\r\n                </IconButton>\r\n                <IconButton onClick={onActionClick} name=\"RIGHT\" value={item.id}>\r\n                    <ArrowRight />\r\n                </IconButton>\r\n            </CardActions>)}\r\n    </Card>);\r\n}\r\n\r\nfunction Content(props: Props) {\r\n    const item = props;\r\n    const textStyle = props.textStyle || {};\r\n    return (<>\r\n        <CardMedia component=\"img\" className=\"card-product-img\" image={item.imgSrc || \"https://diegopq95.github.io/take-orders/img/default.png\"} />\r\n        <CardContent style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n            <Typography style={{ flex: 1, height: 60, overflow: \"hidden\", ...textStyle }} variant=\"subtitle1\">{item.nombre}</Typography>\r\n\r\n            {props.editablePrice\r\n                ? <Input\r\n                    style={{ width: 100 }}\r\n                    type=\"number\"\r\n                    onChange={props.onPriceChange}\r\n                    value={\"\" + item.pvp_final}\r\n                    name={\"\" + item.id}\r\n                    startAdornment={<InputAdornment position=\"start\" >\r\n                        <AttachMoney />\r\n                    </InputAdornment>}\r\n                />\r\n                : <Typography variant=\"h6\" style={textStyle}>$ {item.pvp_final.toFixed(2)}</Typography>}\r\n\r\n        </CardContent>\r\n    </>);\r\n}","import React from \"react\";\r\nimport { Grid, TextField, InputAdornment, Typography, CircularProgress } from \"@material-ui/core\";\r\nimport ProductCard from \"./ProductCard\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { OrderReduceState } from \"../Order/Redux/OrderReducer\";\r\n\r\nexport default function ProductGrid(props: {\r\n    items: FullProduct[];\r\n    visible: boolean;\r\n\r\n    onActionClick?: any;\r\n    editablePrices?: boolean;\r\n    onPriceChange?: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\r\n\r\n    controls?: \"ADD-REMOVE\" | \"LEFT-RIGHT\";\r\n    onCardClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n    showNewItem?: boolean;\r\n    async_status?: OrderReduceState[\"status\"]\r\n    async_error?: string;\r\n}) {\r\n    const visible_style: any = {};\r\n    if (!props.visible) visible_style.display = \"none\";\r\n\r\n    const [search, set_search] = React.useState(\"\");\r\n\r\n    const Products = props.items.filter(\r\n        x => search ? x.nombre.toUpperCase().trim().indexOf((search || \"\").toUpperCase().trim()) >= 0 : true\r\n    );\r\n\r\n    if (props.async_status === \"products:loading\") {\r\n        return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div >);;\r\n    }\r\n    if (props.async_status === \"products:completed\" && !Products.length) {\r\n        return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n            <Typography variant=\"h6\">No hay productos</Typography>\r\n        </div >);\r\n    }\r\n    if (props.async_status === \"products:error\") {\r\n        return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n            <Typography variant=\"h4\">Ocurrió un error</Typography>\r\n            {props.async_error && <Typography variant=\"h4\">Ocurrió un error{props.async_error}</Typography>}\r\n        </div>)\r\n    }\r\n\r\n    return (<>\r\n        <TextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            placeholder=\"Buscar...\"\r\n            style={{\r\n                padding: 10\r\n            }}\r\n            value={search}\r\n            type=\"search\"\r\n            onChange={event => set_search(event.target.value)}\r\n            InputProps={{\r\n                startAdornment: <InputAdornment position=\"start\"> <Search /></InputAdornment>\r\n            }} />\r\n        <Grid\r\n            container\r\n            alignItems=\"center\"\r\n            style={{ flex: 1, /*overflow: \"auto\",*/ marginTop: 5, ...visible_style }}\r\n            spacing={3}>\r\n            {Products.map(item => (\r\n                <Grid item sm={6} md={4} xs={12} key={item.id}>\r\n                    <ProductCard\r\n                        {...item}\r\n                        editablePrice={props.editablePrices}\r\n                        onPriceChange={props.onPriceChange}\r\n                        onActionClick={props.onActionClick}\r\n                        onCardClick={props.onCardClick}\r\n                        controls={props.controls}\r\n                        textStyle={item.habilitado ? null : { textDecoration: \"line-through\" }}\r\n                    />\r\n                </Grid>\r\n            ))}\r\n            {props.showNewItem && <Grid item sm={6} md={4} xs={12}>\r\n                <ProductCard\r\n                    id=\"NUEVO\"\r\n                    imgSrc=\"./add.svg\"\r\n                    pvp_final={0}\r\n                    nombre=\"AGREGA UN NUEVO ITEM\"\r\n                    onCardClick={props.onCardClick}\r\n                />\r\n            </Grid>}\r\n        </Grid>\r\n    </>)\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, AppBar, Toolbar, Button, Typography, IconButton, DialogActions, DialogTitle } from \"@material-ui/core\";\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Close } from \"@material-ui/icons\";\r\n\r\nconst Transition: any = React.forwardRef(function (props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n} as any);\r\n\r\ninterface ModalProps {\r\n    show: boolean;\r\n    title: string;\r\n    onClose?: (event: {}, reason?: \"backdropClick\" | \"escapeKeyDown\") => void;\r\n    fullScreen?: boolean;\r\n    closeButtonText?: string | \"ICON\";\r\n    children?: any;\r\n    footer?: any;\r\n}\r\n\r\nexport default function Modal(props: ModalProps) {\r\n    const { show, onClose, fullScreen, title } = props;\r\n    var closeButtonText = props.closeButtonText || \"ICON\";\r\n\r\n    return (<Dialog\r\n        maxWidth={fullScreen ? false : \"sm\"}\r\n        fullWidth={true}\r\n        open={show}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        TransitionComponent={Transition}\r\n    >\r\n        {fullScreen\r\n            ? (<AppBar position=\"relative\">\r\n                <Toolbar>\r\n                    <Typography color=\"inherit\" variant=\"h4\" style={{ flexGrow: 1 }}>{title}</Typography>\r\n                    {closeButtonText === \"ICON\"\r\n                        ? (<IconButton onClick={onClose} type=\"button\" color=\"inherit\">\r\n                            <Close />\r\n                        </IconButton>)\r\n                        : (<Button type=\"button\" onClick={onClose} color=\"inherit\">\r\n                            {closeButtonText || \"SALIR\"}\r\n                        </Button>)\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>)\r\n            : (<DialogTitle\r\n                title={title}\r\n            />)}\r\n\r\n        <DialogContent>\r\n            {props.children}\r\n        </DialogContent>\r\n\r\n        {props.footer\r\n            && <DialogActions>\r\n                {props.footer}\r\n            </DialogActions>}\r\n    </Dialog>)\r\n}","import React from \"react\";\r\nimport { Grid, Card, CardMedia, CardActionArea, CardContent, Typography } from \"@material-ui/core\";\r\nimport Modal from \"../Modal\";\r\n\r\ninterface DoneObject {\r\n    id: number,\r\n    selections: number[]\r\n}\r\ninterface Props {\r\n    productList: Product[],\r\n    onDone: (DoneObject?) => void,\r\n    showingID: number,\r\n    match?: any\r\n}\r\n\r\nfunction ItemCard(props) {\r\n    const selectedStyle = props.selected ? { border: \"3px solid #333\" } : null;\r\n    return (<Card>\r\n        <CardActionArea onClick={props.onClick} value={props.id} style={selectedStyle} component=\"button\">\r\n            <CardMedia style={{ minHeight: 150, height: \"25vh\" }}\r\n                image={props.imgSrc}\r\n                title={props.nombre}\r\n            />\r\n            <CardContent>\r\n                <Typography>{props.nombre}</Typography>\r\n            </CardContent>\r\n        </CardActionArea>\r\n    </Card>);\r\n}\r\nexport default class ProductOptions extends React.Component<Props> {\r\n    state = { selections: [] }\r\n    handleClose = () => {\r\n        const Item = this._Item();\r\n        const maxItems = Item.maxItems || 0;\r\n\r\n        if (!this.state.selections.length)\r\n            return this.props.onDone();\r\n\r\n        if (maxItems < this.state.selections.length)\r\n            return alert(\"No se puede continuar selecciona \" + maxItems + \" items\");\r\n\r\n        this.props.onDone({\r\n            selections: this.state.selections,\r\n            id: this.props.showingID\r\n        });\r\n    }\r\n    componentWillReceiveProps(nextProps: Props) {\r\n        if (nextProps.showingID === null || nextProps.showingID === undefined) {\r\n            this.setState({ selections: [] });\r\n        }\r\n    }\r\n    // MIENTRAS ESTÉ CERRADO, EL COMPONENTE NO SE ACTUALIZARÁ\r\n    shouldComponentUpdate(nextProps) {\r\n        var isOpen = !(this.props.showingID === null || this.props.showingID === undefined);\r\n        var NextisOpen = !(nextProps.showingID === null || nextProps.showingID === undefined);\r\n        return (isOpen === NextisOpen && isOpen === false) ? false : true;\r\n    }\r\n    toggleSelect = event => {\r\n        const { value } = event.currentTarget;\r\n        const Item = this._Item();\r\n        const maxItems = Item.maxItems || 0;\r\n        this.setState(prev => {\r\n            const state: any = { ...prev };\r\n            state.selections = [...state.selections];\r\n            var existsIndex = state.selections.indexOf(+value);\r\n            if (existsIndex >= 0) {\r\n                state.selections.splice(existsIndex, 1);\r\n            } else {\r\n                state.selections.push(+value);\r\n                // quito el primero de la lista para agregar este!\r\n                if (state.selections.length > maxItems) {\r\n                    state.selections.splice(0, 1);\r\n                }\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n    _Item(): Product {\r\n        return this.props.productList.find(x => x.id === this.props.showingID) || {} as any;\r\n    }\r\n    render() {\r\n        const show = !(this.props.showingID === undefined || this.props.showingID === null);\r\n        const { selections } = this.state;\r\n        const Item = this._Item();\r\n        const opcionIDs = (Item.opciones || []).map(x => x.idOpcion);\r\n        const productList = this.props.productList.filter(x => opcionIDs.indexOf(x.id) >= 0);\r\n        return (<Modal\r\n            title=\"Crea tu combinación\"\r\n            onClose={this.handleClose}\r\n            show={show}\r\n            fullScreen={true}\r\n            closeButtonText={selections.length ? \"GUARDAR\" : \"SALIR\"}\r\n        >\r\n            <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\r\n                <Typography variant=\"h6\">{Item.nombre}</Typography>\r\n            </div>\r\n            <div style={{ paddingLeft: 10, paddingRight: 10, margin: \"auto\", width: \"calc(100% - 20px)\" }}>\r\n                <Grid container spacing={3}>\r\n                    {productList.map(x =>\r\n                        (<Grid key={x.id} item xs={12} sm={4}>\r\n                            <ItemCard\r\n                                {...x}\r\n                                onClick={this.toggleSelect}\r\n                                selected={selections.indexOf(x.id) >= 0}\r\n                            />\r\n                        </Grid>))}\r\n                </Grid>\r\n            </div>\r\n        </Modal>);\r\n    }\r\n}","import React from \"react\";\r\nimport { List, ListItem, Typography } from \"@material-ui/core\";\r\n\r\ninterface Props {\r\n    items: any[];\r\n    subtotal: number;\r\n    total_pedido: number;\r\n    valor_envio: number;\r\n    gran_total: number;\r\n    show_next_discount?: boolean;\r\n    showComponentes?: boolean;\r\n    descuento?: DescuentoCalc;\r\n    LabelDescuentoComponent?: React.ReactElement;\r\n}\r\n\r\nexport default function ConfirmOrder(props: Props) {\r\n    var { items, show_next_discount, descuento, valor_envio, gran_total, total_pedido, subtotal } = props;\r\n    if (!descuento) descuento = { porcentaje: 0, valor: 0 };\r\n    const mostrarDescuentos = show_next_discount && descuento.sgte_descuento_porcentaje;\r\n\r\n    return (<List>\r\n        {items.map(item => <Row\r\n            key={item.id}\r\n            col1={item.cantidad}\r\n            col2={item.nombre}\r\n            col3={(item.pvp_final * item.cantidad).toCurrency()}\r\n            componentes={props.showComponentes ? item.componentes : null}\r\n        />)}\r\n\r\n        <Row col1=\"SUBTOTAL\" col3={subtotal.toCurrency()} />\r\n\r\n        <Row\r\n            col1={props.LabelDescuentoComponent || `TU GANANCIA (${descuento.porcentaje}%) EN ESTE PEDIDO`}\r\n            col3={descuento.valor.toCurrency()}\r\n            color=\"primary\"\r\n        />\r\n\r\n\r\n        {mostrarDescuentos\r\n            && <ListItem>\r\n                <Typography variant=\"subtitle1\" color=\"secondary\">{`Obtén el ${descuento.sgte_descuento_porcentaje}% de descuento agregando ${descuento.sgte_descuento_falta.toCurrency()} más a tu pedido`}</Typography>\r\n            </ListItem>}\r\n        <Row col1={\"TOTAL DEL PEDIDO\"} col3={total_pedido.toCurrency()} />\r\n\r\n        <Row col1={\"ENVÍO\"} col3={valor_envio.toCurrency()} />\r\n        <Row col1={\"GRAN TOTAL\"} variant={\"subtitle2\"} col3={gran_total.toCurrency()} />\r\n    </List>);\r\n}\r\n\r\n\r\nfunction Row(props: {\r\n    col1: any,\r\n    col2?: string | number,\r\n    col3: string,\r\n    color?: any,\r\n    variant?: any,\r\n    componentes?: any[]\r\n}) {\r\n    const { col1, col2, col3, color, variant, componentes } = props;\r\n    return (<ListItem>\r\n        <div style={{ width: \"100%\" }}>\r\n            <div>\r\n                <div style={{ width: \"100%\", display: \"table\" }}>\r\n                    <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: (col2 ? \"15%\" : \"75%\"), maxWidth: 100, textAlign: (col2 ? \"left\" : \"right\") }} variant={variant || \"body1\"}>{col1}</Typography>\r\n                    {col2 && <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"60%\" }} variant={variant || \"body1\"}>{col2}</Typography>}\r\n                    <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"25%\", maxWidth: 100, textAlign: \"right\" }} variant={variant || \"body1\"}>{col3}</Typography>\r\n                </div>\r\n            </div>\r\n\r\n            {(componentes && componentes.length)\r\n                ? (<div>\r\n                    {componentes.map(c => <Row\r\n                        key={c.id}\r\n                        col1={c.cantidad}\r\n                        col2={c.nombre}\r\n                        col3=\"\"\r\n                        variant=\"body2\"\r\n                        componentes={c.componentes}\r\n                    />)}\r\n                </div>)\r\n                : null}\r\n        </div>\r\n    </ListItem>)\r\n}","export function Totals(items: any[]) {\r\n    const result = {\r\n        total: 0,\r\n        cantidad: 0\r\n    }\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n        result.cantidad += item.cantidad;\r\n        result.total += (item.pvp_final * item.cantidad);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function EstimarDescuento(total: number, tablaDescuentos: Descuento[]) {\r\n    // de MAYOR a MENOR\r\n    var sorted = tablaDescuentos.sort((a, b) => b.montoDesde - a.montoDesde);\r\n    var founded = -1;\r\n    var results: DescuentoCalc = {\r\n        porcentaje: 0,\r\n        valor: 0,\r\n        sgte_descuento_porcentaje: 0,\r\n        sgte_descuento_falta: 0,\r\n        id: undefined\r\n    }\r\n    for (let i = 0; i < sorted.length; i++) {\r\n        const d = sorted[i];\r\n        if (total >= d.montoDesde) {\r\n            founded = i;\r\n            break;\r\n        }\r\n    }\r\n    if (founded >= 0) {\r\n        var desc = sorted[founded];\r\n        results.porcentaje = desc.porcentaje;\r\n        results.valor = (total * desc.porcentaje / 100);\r\n        results.id = desc.id;\r\n        // si no es el ultimo, busco al siguiente en la tabla\r\n    }\r\n    // si no existe, simulo que es el (MAXIMO+1), es decir esta fuera del rango\r\n    if (founded === -1) founded = sorted.length;\r\n    if ((founded - 1) >= 0) {\r\n        var next = sorted[founded - 1];\r\n        if (next) {\r\n            results.sgte_descuento_falta = next.montoDesde - total;\r\n            results.sgte_descuento_porcentaje = next.porcentaje;\r\n        }\r\n    }\r\n    return results;\r\n}\r\n\r\nexport function DocToString(doc: \"1\" | \"2\" | \"3\") {\r\n    if (!doc) doc = \"\" as any;\r\n    if (doc.toString() === \"1\") return \"RUC\";\r\n    if (doc.toString() === \"2\") return \"Cedula\";\r\n    if (doc.toString() === \"3\") return \"Pasaporte\";\r\n    return \"\";\r\n}\r\n\r\nexport function MonthToString(index: number) {\r\n    var months = [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sept\", \"Oct\", \"Nov\", \"Dic\"];\r\n    return months[index];\r\n}\r\n","export class ValidateInput {\r\n    static tel(value) {\r\n        if (!value) return;\r\n        if (value.length < 7) return \"El número de telefono debe tener al menos 7 digitos\";\r\n        for (let i = 0; i < value.length; i++) {\r\n            if (!(value[i] === \"+\" || isDigit(value[i]) || value[i].trim() === \"\")) {\r\n                return \"El número debe tener uno de estos formatos: '09123456789' o '+5931234567890'\";\r\n            }\r\n        }\r\n    }\r\n    static email(value) {\r\n        if (!value) return;\r\n        if (value.length < 5) return \"El email no está escrito correctamente\";\r\n        let twoParts = value.split(\"@\");\r\n        if (twoParts.length !== 2) return \"El email no está escrito correctamente\";\r\n        if (!(twoParts[1].indexOf(\".\") >= 0)) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\" \") >= 0) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\"\\t\") >= 0) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\"\\r\") >= 0) return \"El email no está escrito correctamente\";\r\n    }\r\n}\r\n\r\nexport function ValidarIdentificacion(value: string, documento: any) {\r\n    if (!value) value = \"\";\r\n    documento = +documento;\r\n    if (documento === 3) { return; }\r\n    if (documento === 1) {\r\n        if (value.length !== 13) return \"Número de RUC debe tener 13 digitos\";\r\n        if (value.length === 13 && value === \"9999999999999\") return;\r\n    }\r\n    if (documento === 2) {\r\n        if (value.length !== 10) return \"Número de Cedula debe tener 10 digitos\";\r\n    }\r\n    return \"\";\r\n}\r\n\r\nexport function isDigit(char) { return char >= \"0\" && char <= \"9\"; }\r\nfunction isNumber(obj) { return !isNaN(parseFloat(obj)) }\r\nfunction isEmptyOrNull(obj) {\r\n    if (obj === '' || obj == undefined || obj == null || obj == 'undefined') {\r\n        return true\r\n    } else {\r\n        return false;\r\n    }\r\n}","import React from \"react\";\r\nimport { TextField } from \"@material-ui/core\";\r\n\r\ninterface InputProps {\r\n    type?: string;\r\n    value?: string;\r\n    error?: string;\r\n    name?: string;\r\n    maxLength?: number;\r\n    [key: string]: any;\r\n}\r\n\r\nexport default function Input(props: InputProps) {\r\n    var { error, maxLength, ..._props } = props;\r\n    var error_props: any = {};\r\n\r\n    if (error) {\r\n        error_props.error = true;\r\n        error_props.helperText = error;\r\n    }\r\n\r\n    if (!_props.inputProps) _props.inputProps = {};\r\n    _props.inputProps.id = _props.name;\r\n    if (maxLength) _props.inputProps.maxLength = maxLength;\r\n    if (!_props.style) _props.style = {\r\n        margin: 10,\r\n        width: \"calc(100% - 20px)\"\r\n    }\r\n\r\n    return <TextField\r\n        {...error_props}\r\n        {..._props}\r\n    >{props.children}\r\n    </TextField>\r\n}","import React from \"react\";\r\nimport { TextField, Paper, Grid, Typography } from \"@material-ui/core\";\r\nimport { DocToString } from \"../../Utils/Calcs\";\r\nimport { ValidarIdentificacion, ValidateInput } from \"../../Utils/Validation\";\r\nimport Input from \"../Input\";\r\nexport default class Location extends React.PureComponent<DataProps, {}> {\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.props.onValueChange(name, value);\r\n    }\r\n    render() {\r\n\r\n        const { direccion, tipo_envio, ciudad, referencia, sector, visible,\r\n            documento, identificacion, razonSocial,\r\n            direccion_factura, telefono_factura, email_factura,\r\n            nombre_contacto, telefono_contacto, identificacion_contacto, documento_contacto\r\n        } = this.props;\r\n\r\n        let identificacion_e = identificacion\r\n            ? ValidarIdentificacion(identificacion, documento)\r\n            : \"\";\r\n        let telefono_e = ValidateInput.tel(telefono_factura);\r\n        let email_e = ValidateInput.email(email_factura);\r\n\r\n        let identificacion_contacto_e = identificacion_contacto\r\n            ? ValidarIdentificacion(identificacion_contacto, documento_contacto)\r\n            : \"\";\r\n        let telefono_contacto_e = ValidateInput.tel(telefono_contacto);\r\n\r\n        const mostrar_ciudad = tipo_envio !== \"DENTRO DE CIUDAD\" ? true : null;\r\n        const mostrar_datos_envio = tipo_envio !== \"PICK-UP\" ? true : null;\r\n\r\n        return (<Paper style={{ margin: \"auto\", height: \"100%\", width: \"100%\", padding: 10, marginTop: 10, display: visible ? \"block\" : \"none\" }}>\r\n\r\n            <Grid container >\r\n                <Grid item sm={6}>\r\n                    <Typography variant=\"subtitle1\" style={{ marginLeft: 10 }}>Datos de Envío</Typography>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"nombre_contacto\"\r\n                        inputProps={{ id: \"nombre_contacto\" }}\r\n                        value={nombre_contacto}\r\n                        onChange={this.handleChange}\r\n                        label=\"Nombre *\"\r\n                        multiline\r\n                        rows={2}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        name=\"documento_contacto\"\r\n                        value={documento_contacto}\r\n                        inputProps={{ id: \"documento_contacto\" }}\r\n                        variant=\"outlined\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Documento *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    >\r\n                        <option value=\"1\">{DocToString(\"1\")}</option>\r\n                        <option value=\"2\">{DocToString(\"2\")}</option>\r\n                        <option value=\"3\">{DocToString(\"3\")}</option>\r\n                    </TextField>\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"identificacion_contacto\"\r\n                        value={identificacion_contacto}\r\n                        error={identificacion_contacto_e}\r\n                        onChange={this.handleChange}\r\n                        type=\"phone\"\r\n                        maxLength={20}\r\n                        label={\"Numero de \" + DocToString(documento_contacto) + \" *\"}\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"telefono_contacto\"\r\n                        value={telefono_contacto}\r\n                        error={telefono_contacto_e}\r\n                        maxLength={20}\r\n                        onChange={this.handleChange}\r\n                        label=\"Telefono *\"\r\n                        type=\"phone\"\r\n                    />\r\n                    <TextField\r\n                        name=\"tipo_envio\"\r\n                        value={tipo_envio}\r\n                        inputProps={{ id: \"tipo_envio\" }}\r\n                        variant=\"outlined\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Tipo de Envío *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    >\r\n                        <option value=\"PICK-UP\">PICK-UP</option>\r\n                        <option value=\"DENTRO DE CIUDAD\">DENTRO DE CIUDAD</option>\r\n                        <option value=\"ZONA CONTINENTAL\">ZONA CONTINENTAL</option>\r\n                        <option value=\"GALAPAGOS ISLA CRUS - BALTRA\">GALAPAGOS ISLA CRUS - BALTRA</option>\r\n                        <option value=\"GALAPAGOS ISLA ISABELA Y FERNANDINA\">GALAPAGOS ISLA ISABELA Y FERNANDINA</option>\r\n                    </TextField>\r\n                    {mostrar_datos_envio && (<>\r\n                        {mostrar_ciudad && <TextField\r\n                            variant=\"outlined\"\r\n                            name=\"ciudad\"\r\n                            inputProps={{ id: \"ciudad\" }}\r\n                            value={ciudad}\r\n                            onChange={this.handleChange}\r\n                            label=\"Ciudad *\"\r\n                            style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                        />}\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            name=\"sector\"\r\n                            inputProps={{ id: \"sector\" }}\r\n                            value={sector}\r\n                            onChange={this.handleChange}\r\n                            label=\"Sector *\"\r\n                            style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                        />\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            name=\"direccion\"\r\n                            inputProps={{ id: \"direccion\" }}\r\n                            value={direccion}\r\n                            onChange={this.handleChange}\r\n                            label=\"Direccion Exacta* \"\r\n                            multiline\r\n                            rows={3}\r\n                            style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                        />\r\n                        <TextField\r\n                            variant=\"outlined\"\r\n                            name=\"referencia\"\r\n                            inputProps={{ id: \"referencia\" }}\r\n                            value={referencia}\r\n                            onChange={this.handleChange}\r\n                            label=\"Referencia\"\r\n                            multiline\r\n                            rows={2}\r\n                            style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                        />\r\n                    </>)}\r\n                </Grid>\r\n                <Grid item sm={6}>\r\n                    <Typography style={{ marginLeft: 10 }} variant=\"subtitle1\">Datos de Facturación</Typography>\r\n                    <TextField\r\n                        name=\"documento\"\r\n                        value={documento}\r\n                        inputProps={{ id: \"documento\" }}\r\n                        variant=\"outlined\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Documento *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    >\r\n                        <option value=\"1\">{DocToString(\"1\")}</option>\r\n                        <option value=\"2\">{DocToString(\"2\")}</option>\r\n                        <option value=\"3\">{DocToString(\"3\")}</option>\r\n                    </TextField>\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"identificacion\"\r\n                        value={identificacion}\r\n                        error={identificacion_e}\r\n                        onChange={this.handleChange}\r\n                        type=\"phone\"\r\n                        maxLength={20}\r\n                        label={\"Numero de \" + DocToString(documento) + \" *\"}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"razonSocial\"\r\n                        value={razonSocial}\r\n                        onChange={this.handleChange}\r\n                        label=\"Nombre / Empresa *\"\r\n                        inputProps={{ maxLength: 200, id: \"razonSocial\" }}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"direccion_factura\"\r\n                        value={direccion_factura}\r\n                        onChange={this.handleChange}\r\n                        label=\"Direccion *\"\r\n                        inputProps={{ maxLength: 300, id: \"direccion_factura\" }}\r\n                        multiline\r\n                        rows={2}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"telefono_factura\"\r\n                        value={telefono_factura}\r\n                        error={telefono_e}\r\n                        maxLength={20}\r\n                        onChange={this.handleChange}\r\n                        label=\"Telefono *\"\r\n                        type=\"phone\"\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"email_factura\"\r\n                        value={email_factura}\r\n                        error={email_e}\r\n                        maxLength={50}\r\n                        onChange={this.handleChange}\r\n                        label=\"Email *\"\r\n                        type=\"email\"\r\n                    />\r\n                </Grid>\r\n            </Grid >\r\n\r\n        </Paper >)\r\n    }\r\n}\r\ninterface DataProps extends Order_Datos_Envio, Order_Datos_Facturacion {\r\n    visible?: boolean,\r\n    onValueChange: (prop: string, value: string) => void\r\n} ","import React from \"react\";\r\nimport { CardActionArea, CardMedia, Typography } from \"@material-ui/core\";\r\nimport { Image } from \"@material-ui/icons\";\r\ninterface Props {\r\n    src: string;\r\n    onChange: (imageFile?: File) => void;\r\n    className: string;\r\n    title?: string;\r\n    disabled?: boolean;\r\n}\r\nexport default class ImageInput extends React.PureComponent<Props> {\r\n    COMPONENT_ID = \"IMAGE_INPUT_\" + new Date().valueOf()\r\n    handleClick = _ => {\r\n        document.getElementById(this.COMPONENT_ID).click();\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.currentTarget.files;\r\n        this.props.onChange((files && files.length && files[0]) || null);\r\n    }\r\n    render() {\r\n        const { src, title, className, disabled } = this.props;\r\n        return (<CardActionArea disabled={disabled} onClick={this.handleClick} style={{ textAlign: \"center\" }} type=\"button\">\r\n            <input\r\n                hidden={true}\r\n                type=\"file\"\r\n                onChange={this.handleChange}\r\n                accept=\"image/*\"\r\n                id={this.COMPONENT_ID}\r\n            />\r\n            {src\r\n                ? <CardMedia component=\"img\" className={className} title={title || \"Imagen\"} image={src} />\r\n                : <div className={className} style={{ display: \"table\", textAlign: \"center\", margin: \"auto\" }} >\r\n                    <div style={{ display: \"table-cell\", verticalAlign: \"middle\" }}>\r\n                        <Image />\r\n                        <Typography>Agrega una imagen</Typography>\r\n                    </div>\r\n                </div>}\r\n        </CardActionArea>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Paper, Typography, TextField, Button, Divider, CircularProgress, Switch, FormControlLabel } from \"@material-ui/core\";\r\nimport ImageInput from \"../ImageInput\";\r\nexport default function (props: {\r\n    onValueChange: Function;\r\n    numeroTransaccion: string;\r\n    onImgChange: (imageFile?: File) => void;\r\n    usarImagen?: boolean;\r\n    imgTransaccion: string;\r\n    items: any[];\r\n    onDone: any;\r\n    total_pagar: number;\r\n    loading: boolean;\r\n    visible: boolean;\r\n}) {\r\n    return (<Paper style={{ maxWidth: 400, padding: 10, marginTop: 10, height: \"100%\", marginLeft: \"auto\", marginRight: \"auto\", display: props.visible ? \"block\" : \"none\" }}>\r\n        <form onSubmit={props.onDone} style={{ textAlign: \"center\" }}>\r\n            <Typography style={{ marginTop: 10, marginBottom: 10, textAlign: \"center\" }} variant=\"h6\">Total a Pagar : {props.total_pagar.toCurrency()}</Typography>\r\n            <Divider />\r\n            <div style={{ padding: 20 }}>\r\n                <Typography>Realiza tu pago mediante Transferencia o Deposito Bancario a la cuenta:</Typography>\r\n                <Typography>BANCO PICHINCHA Cta. Ahorros #2205511631</Typography>\r\n                <Typography>RUC. 1792627192001</Typography>\r\n                <Typography>COSMETICOSNATU CIA LTDA</Typography>\r\n            </div>\r\n            <FormControlLabel\r\n                label=\"Subir una Imagen\"\r\n                control={<Switch\r\n                    disabled={props.loading}\r\n                    checked={Boolean(props.usarImagen)}\r\n                    onChange={e => props.onValueChange(\"usarImagen\", e.currentTarget.checked)}\r\n                />}\r\n            />\r\n\r\n            {!props.usarImagen && <TextField\r\n                style={{ width: \"calc(100% - 20px)\", margin: 10 }}\r\n                variant=\"outlined\"\r\n                inputMode=\"numeric\"\r\n                inputProps={{ id: \"numeroTransaccion\" }}\r\n                onChange={event => props.onValueChange(\"numeroTransaccion\", event.currentTarget.value)}\r\n                value={props.numeroTransaccion}\r\n                label=\"Numero de Comprobante *\"\r\n            />}\r\n            {props.usarImagen && <ImageInput disabled={props.loading} className=\"transaction-img\" onChange={props.onImgChange} src={props.imgTransaccion} />}\r\n\r\n            <Button type=\"submit\" disabled={props.loading} variant=\"outlined\" color=\"primary\" style={{ margin: 10, width: \"calc(100% - 20px)\" }}>\r\n                {props.loading ? <CircularProgress size={25} /> : \"ENVIAR\"}\r\n            </Button>\r\n        </form>\r\n    </Paper >)\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, TextField, DialogActions, Button, CircularProgress } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(class Survey extends React.Component<any, any> {\r\n    state = { txt1: \"\", txt2: \"\", loading: false, id: \"\" };\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.state.id = props.match.params.id;\r\n    }\r\n    handleChange(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    unblock() { }\r\n    componentDidMount() {\r\n        this.unblock = this.props.history.block = () =>\r\n            this.state.loading ? \"Espera un momento, tu información se está guardando\" : null\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        const { txt1, txt2, loading, id } = this.state;\r\n        if (loading) return;\r\n        if (!txt1 && !txt2) {\r\n            return this.props.history.goBack();\r\n        }\r\n        this.setState({ loading: true });\r\n        API.ActionOrder(id, {\r\n            action: \"SURVEY\",\r\n            value: [txt1, txt2]\r\n        }).then(x => {\r\n            this.setState({ loading: false });\r\n            this.props.history.goBack();\r\n        }).catch(ex => {\r\n            this.setState({ loading: false });\r\n            alert(ex.message);\r\n        });\r\n    }\r\n    handleClose() {\r\n        if (this.state.loading) return;\r\n        this.props.history.goBack();\r\n    }\r\n    render() {\r\n        const { props } = this;\r\n        const { txt1, txt2, loading } = this.state;\r\n        return (<Dialog open={true} onClose={this.handleClose}>\r\n            <form onSubmit={this.handleSubmit}>\r\n                <DialogContent>\r\n                    <Typography style={{ textAlign: \"center\" }} variant=\"h6\" >{props.title}</Typography>\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">Cómo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                    <TextField autoFocus={true} name=\"txt1\" multiline rows={2} label=\"Escribe tu respuesta\" value={txt1} onChange={this.handleChange} fullWidth />\r\n\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">Compártenos alguna experiencia que hayan tenido tus clientes usando nuestros productos</Typography>\r\n                    <TextField name=\"txt2\" multiline rows={3} label=\"Escribe tu respuesta\" value={txt2} onChange={this.handleChange} fullWidth />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button type=\"submit\" variant=\"outlined\" >{loading ? <CircularProgress size={25} /> : \"GUARDAR\"}</Button>\r\n                </DialogActions>\r\n            </form>\r\n        </Dialog>)\r\n    }\r\n});","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, DialogTitle, DialogActions, Button } from \"@material-ui/core\";\r\n\r\nexport default function Message(props: {\r\n    title?: string,\r\n    message?: string,\r\n    info?: string,\r\n    onClose: (ev) => void,\r\n    children?: any\r\n}) {\r\n    const { title, message, info, onClose } = props;\r\n    return (<Dialog open={Boolean(message) || Boolean(props.children)} onClose={onClose}>\r\n        <DialogTitle>{title}</DialogTitle>\r\n        <DialogContent style={{ textAlign: \"center\" }}>\r\n            {props.children || (<div>\r\n                <Typography variant=\"subtitle1\">{message}</Typography>\r\n                <Typography variant=\"body1\">{info}</Typography>\r\n            </div>)}\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button type=\"button\" onClick={props.onClose} >SALIR</Button>\r\n        </DialogActions>\r\n    </Dialog>);\r\n}","import React from \"react\";\r\nimport Message from \"./Message\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(class RouteMessage extends React.PureComponent<any> {\r\n    unblock = () => null;\r\n    componentDidMount() {\r\n        var params: any = new URLSearchParams(this.props.location.search);\r\n        var focusafter = params.get(\"focusafter\");\r\n        if (focusafter)\r\n            this.unblock = this.props.history.block(x => {\r\n                setTimeout(function () {\r\n                    window.requestAnimationFrame(function () {\r\n                        try {\r\n                            document.getElementById(focusafter).focus();\r\n                        } catch (ex) { }\r\n                    });\r\n                }, 100);\r\n            });\r\n    }\r\n    componentWillUnmount() {\r\n        this.unblock && this.unblock();\r\n    }\r\n    render() {\r\n        var params: any = new URLSearchParams(this.props.location.search);\r\n        return (<Message title={params.get(\"a\")} message={params.get(\"b\")} onClose={x => this.props.history.goBack()} />)\r\n    }\r\n});","import React from \"react\";\r\nimport { Typography, List, ListItem, ListItemSecondaryAction, ListItemText, IconButton } from \"@material-ui/core\";\r\nimport Modal from \"../Modal\";\r\nimport { Delete } from \"@material-ui/icons\";\r\n\r\ninterface Props {\r\n    productList: Product[];\r\n    selections: { [idProducto: number]: number[][] };\r\n    onDeleteSelection: (DoneObject?) => void;\r\n    id: number;\r\n}\r\n\r\nexport default function ProductSelections(props: Props) {\r\n\r\n    const { id, productList, selections } = props;\r\n    const show = !(id === undefined || id === null);\r\n    const Item = productList.find(x => x.id === +id) || {} as Product;\r\n    const Rows = ((selections || {})[id] || []);\r\n\r\n    function deletionClick(event) {\r\n        const index = +event.currentTarget.value;\r\n        if (index === null || index === undefined || isNaN(index)) return;\r\n        props.onDeleteSelection({ id, index });\r\n    }\r\n\r\n    return (<Modal\r\n        title=\"Elimina una combinación\"\r\n        onClose={props.onDeleteSelection}\r\n        show={show}\r\n        fullScreen={true}\r\n    >\r\n        <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\r\n            <Typography variant=\"h6\">{Item.nombre}</Typography>\r\n        </div>\r\n        <div style={{ paddingLeft: 10, paddingRight: 10, margin: \"auto\", width: \"calc(100% - 20px)\" }}>\r\n            <List>\r\n                {Rows.map((r, index) => <ListItem>\r\n                    <ListItemText>\r\n                        {r.map(idOpcion => <Typography>{(\r\n                            productList.find(x => x.id === idOpcion) ||\r\n                            { nombre: `id ${idOpcion} - Not Found` }\r\n                        ).nombre}\r\n                        </Typography>)}\r\n                    </ListItemText>\r\n                    <ListItemSecondaryAction>\r\n                        <IconButton onClick={deletionClick} value={index}>\r\n                            <Delete />\r\n                        </IconButton>\r\n                    </ListItemSecondaryAction>\r\n                </ListItem>)}\r\n            </List>\r\n        </div>\r\n    </Modal>);\r\n}\r\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport API from \"../../../Services/API\";\r\n\r\n\r\nconst GetProductsThunk = createAsyncThunk<Product[]>(\r\n    \"Product/GetProducts\"\r\n    , function () {\r\n        return API.GetProducts();\r\n    }\r\n)\r\n\r\nexport default GetProductsThunk;","\r\nexport default class OrderState {\r\n    productList: Product[] = [];\r\n    productoSelecciones: { [idProducto: number]: number[][] } = {};\r\n    descuentoAplica: DescuentoCalc = null;\r\n    subtotal: number = 0;\r\n\r\n    tipo_envio: TIPO_ENVIO = \"PICK-UP\";\r\n    direccion: string = \"\";\r\n    sector: string = \"\";\r\n    ciudad: string = \"\";\r\n    referencia: string = \"\";\r\n\r\n    documento: \"1\" | \"2\" | \"3\" = \"1\";\r\n    razonSocial: string = \"\";\r\n    identificacion: string = \"\";\r\n    telefono_factura: string = \"\";\r\n    direccion_factura: string = \"\";\r\n    email_factura: string = \"\";\r\n\r\n    documento_contacto: \"1\" | \"2\" | \"3\" = \"2\";\r\n    identificacion_contacto: string = \"\";\r\n    nombre_contacto: string = \"\";\r\n    telefono_contacto: string = \"\";\r\n\r\n    observacion: string = \"\";\r\n    numeroTransaccion: string = \"\";\r\n    imgTransaccion = \"\";\r\n\r\n    imageFile?: Blob;\r\n    usarImagen: boolean = false;\r\n}\r\n","import Preferences from \"../../../Utils/Preferences\";\r\nimport OrderState from \"./OrderState\";\r\n\r\nexport default function (): [Partial<OrderState>, { cantidad: number, id: number }[]] {\r\n    try {\r\n        var new_state = new OrderState();\r\n        var updates = {} as Partial<OrderState>;\r\n        var choosen = [] as { cantidad: number, id: number }[];\r\n\r\n        const stored_direccion = Preferences.Get(\"direccion\") || {};\r\n        for (const key in stored_direccion) {\r\n            if (new_state.hasOwnProperty(key) && stored_direccion[key]) {\r\n                updates[key] = stored_direccion[key];\r\n            }\r\n        }\r\n\r\n        const stored_factura = Preferences.Get(\"factura\") || {};\r\n        for (const key in stored_factura) {\r\n            if (new_state.hasOwnProperty(key) && stored_factura[key]) {\r\n                updates[key] = stored_factura[key];\r\n            }\r\n        }\r\n\r\n        const before = Preferences.Get(\"current_order\") || {};\r\n        for (const key in before) {\r\n            if (new_state.hasOwnProperty(key)) {\r\n                updates[key] = before[key];\r\n            }\r\n        }\r\n        if (before && before.choosen && before.choosen.length) choosen = before.choosen;\r\n    } catch (ex) { }\r\n    return [updates, choosen];\r\n}\r\n","export default function (file: Blob): Promise<string> {\r\n    return new Promise((resolve, reject) => {\r\n        if (file.size > (15 * 1024 * 1024)) {\r\n            var mb = (file.size / 1024 / 1024).toFixed(2);\r\n            return reject({ message: `Tu imagen (${mb} Mb) es muy pesada, selecciona otra máximo de 15 Mb` });\r\n        }\r\n        setTimeout(x => {\r\n            var reader = new FileReader();\r\n            reader.onload = function (event) {\r\n                resolve(event.target.result as string);\r\n            }\r\n            reader.onerror = reject;\r\n            reader.readAsDataURL(file);\r\n        }, 100);\r\n    });\r\n}\r\nexport function ImgFileToObject(file: Blob): Promise<{ ext: string, base64: string }> {\r\n    return new Promise((resolve, reject) => {\r\n        var reader = new FileReader();\r\n        reader.onload = function (event) {\r\n            resolve({\r\n                base64: base64ArrayBuffer(event.target.result as any),\r\n                ext: file.type.split(\"/\")[1]\r\n            });\r\n        }\r\n        reader.onerror = reject;\r\n        reader.readAsArrayBuffer(file);\r\n    });\r\n}\r\n\r\nfunction base64ArrayBuffer(arrayBuffer: ArrayBuffer): string {\r\n    var base64 = ''\r\n    var encodings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\r\n\r\n    var bytes = new Uint8Array(arrayBuffer);\r\n    var byteLength = bytes.byteLength;\r\n    var byteRemainder = byteLength % 3;\r\n    var mainLength = byteLength - byteRemainder;\r\n\r\n    var a, b, c, d;\r\n    var chunk;\r\n\r\n    // Main loop deals with bytes in chunks of 3\r\n    for (var i = 0; i < mainLength; i = i + 3) {\r\n        // Combine the three bytes into a single integer\r\n        chunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2]\r\n\r\n        // Use bitmasks to extract 6-bit segments from the triplet\r\n        a = (chunk & 16515072) >> 18 // 16515072 = (2^6 - 1) << 18\r\n        b = (chunk & 258048) >> 12 // 258048   = (2^6 - 1) << 12\r\n        c = (chunk & 4032) >> 6 // 4032     = (2^6 - 1) << 6\r\n        d = chunk & 63               // 63       = 2^6 - 1\r\n\r\n        // Convert the raw binary segments to the appropriate ASCII encoding\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + encodings[d]\r\n    }\r\n\r\n    // Deal with the remaining bytes and padding\r\n    if (byteRemainder === 1) {\r\n        chunk = bytes[mainLength]\r\n\r\n        a = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2\r\n\r\n        // Set the 4 least significant bits to zero\r\n        b = (chunk & 3) << 4 // 3   = 2^2 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + '=='\r\n    } else if (byteRemainder === 2) {\r\n        chunk = (bytes[mainLength] << 8) | bytes[mainLength + 1]\r\n\r\n        a = (chunk & 64512) >> 10 // 64512 = (2^6 - 1) << 10\r\n        b = (chunk & 1008) >> 4 // 1008  = (2^6 - 1) << 4\r\n\r\n        // Set the 2 least significant bits to zero\r\n        c = (chunk & 15) << 2 // 15    = 2^4 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + '='\r\n    }\r\n    return base64\r\n}","import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport ImageReader from \"../../../Utils/ImageReader\";\r\n\r\nconst LoadingMessageWindow = document.getElementById(\"loading-full-message\");\r\nconst LoadImageThunk = createAsyncThunk(\r\n    \"Image/LoadImage\", function (params: { imgFile: File, reportError?(message: string): void }) {\r\n\r\n        const { reportError, imgFile } = params;\r\n\r\n        return new Promise(resolve => {\r\n\r\n            LoadingMessageWindow.style.display = \"none\";\r\n\r\n            if (window.requestAnimationFrame)\r\n                return window.requestAnimationFrame(() => resolve(void 0));\r\n\r\n            resolve(void 0);\r\n\r\n        }).then(() => ImageReader(imgFile)\r\n            .then(imgUrl => {\r\n                LoadingMessageWindow.style.display = \"none\";\r\n                return { imgUrl, imgFile };\r\n            }).catch(ex => {\r\n                LoadingMessageWindow.style.display = \"none\";\r\n                reportError(ex.message);\r\n                throw ex;\r\n            }));\r\n    });\r\n\r\nexport default LoadImageThunk;\r\n\r\n/*\r\ndocument.getElementById(\"loading-full-message\").style.display = \"block\";\r\nif (window.requestAnimationFrame) {\r\nwindow.requestAnimationFrame(() => this._renderImage(imageFile));\r\n} else {\r\nthis._renderImage(imageFile);\r\n}\r\n}\r\nprivate _renderImage(imageFile) {\r\nImageReader(imageFile)\r\n    .then(imgTransaccion => {\r\n        this.setState({ imgTransaccion, imageFile }, () => {\r\n            document.getElementById(\"loading-full-message\").style.display = \"none\";\r\n        });\r\n    }).catch(ex => {\r\n        document.getElementById(\"loading-full-message\").style.display = \"none\";\r\n        this.failed_msg(\"No se pudo cargar tu imagen. \" + ex.message);\r\n    });\r\n}*/","import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport Preferences from \"../../../Utils/Preferences\";\r\nimport { RootState } from \"./Store\";\r\n\r\nconst PREFERENCES_KEY = \"current_order\";\r\n\r\nconst LocalStoreOrder = createAsyncThunk(\"pedido/LocalStoreOrder\", function (params: { clean?: boolean, reportCompleted?: Function }, ThunkAPI) {\r\n\r\n    if (params.clean) {\r\n        if (params.reportCompleted) params.reportCompleted();\r\n        return Promise.resolve(Preferences.Set(PREFERENCES_KEY));\r\n    }\r\n\r\n    const state = (ThunkAPI.getState() as RootState).Order.data;\r\n    // actualizar todo!\r\n    var choosen = state.productList.filter(x => x.cantidad).map(x => ({ id: x.id, cantidad: x.cantidad }));\r\n\r\n    const { numeroTransaccion, observacion,\r\n        direccion, ciudad, sector, referencia,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura, tipo_envio,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto, productoSelecciones\r\n    } = state;\r\n\r\n    Preferences.Set(PREFERENCES_KEY, {\r\n        numeroTransaccion, direccion, ciudad, choosen,\r\n        sector, observacion, referencia,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura, tipo_envio,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto, productoSelecciones\r\n    });\r\n\r\n    params.reportCompleted && params.reportCompleted();\r\n    return Promise.resolve();\r\n\r\n});\r\nexport default LocalStoreOrder;\r\n","import API from \"../../../Services/API\";\r\nimport { DocToString } from \"../../../Utils/Calcs\";\r\nimport { ValidarIdentificacion, ValidateInput } from \"../../../Utils/Validation\";\r\nimport Preferences from \"../../../Utils/Preferences\";\r\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport { mapOrderStateProps } from \"../mapOrderState\";\r\nimport { ImgFileToObject } from \"../../../Utils/ImageReader\";\r\n\r\n\r\nconst OrderSaveThunk = createAsyncThunk(\r\n    \"Order/SaveOrderIntoAPI\", async function (params: {\r\n        order: mapOrderStateProps[\"order\"]\r\n        , reportError(message: Error, propertyName?: string): void\r\n            , reportCompleted(id: number): void\r\n    }) {\r\n    const { order, reportError, reportCompleted } = params;\r\n    try {\r\n        const error = ValidateSave(order);\r\n        if (error) {\r\n            if (error.productList) throw {\r\n                message: error.productList,\r\n                name: \"ProductsValidationError\"\r\n            };\r\n\r\n            var keys = Object.keys(error);\r\n            if (keys.length) {\r\n                if ([\r\n                    \"ciudad\", \"referencia\", \"direccion\", \"sector\", \"tipo_envio\",\r\n                    \"identificacion\", \"documento\", \"razonSocial\",\r\n                    \"tipo_envio\", \"direccion_factura\", \"telefono_factura\", \"email_factura\",\r\n                    \"identificacion_contacto\", \"nombre_contacto\", \"telefono_contacto\"\r\n                ].indexOf(keys[0]) >= 0) throw {\r\n                    message: error[keys[0]],\r\n                    propertyName: keys[0],\r\n                    name: \"OrderDataValidationError\"\r\n                };\r\n\r\n                throw {\r\n                    message: error[keys[0]],\r\n                    propertyName: keys[0],\r\n                    name: \"OrderValidationError\"\r\n                };\r\n            }\r\n        }\r\n\r\n        const { ciudad, sector, direccion, observacion, referencia, tipo_envio,\r\n            documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n            documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n            descuentoAplica, usarImagen, productoSelecciones,\r\n            imageFile,\r\n            subtotal, envio, total\r\n        } = order;\r\n\r\n        if (usarImagen) {\r\n            var fileTransaccion = await ImgFileToObject(imageFile);\r\n        } else {\r\n            var numeroTransaccion = order.numeroTransaccion;\r\n        }\r\n        const { id } = await API.SaveOrder({\r\n            ciudad, sector, direccion, observacion, referencia, tipo_envio,\r\n            documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n            documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n            detalle: order.productList.filter(x => x.cantidad || (productoSelecciones[x.id] || []).length)\r\n                .map(x => ({\r\n                    ...x\r\n                    , idProducto: x.id\r\n                    , cantidad: x.cantidad as number\r\n                    , descuentoPorcentaje: (descuentoAplica && descuentoAplica.porcentaje) || 0\r\n                    , descuentoTotal: 0\r\n                })).map(x => {\r\n                    delete x.id;\r\n                    if (x.descuentoPorcentaje && !x.descuentoTotal) {\r\n                        x.descuentoTotal = ((x.cantidad * x.pvp_final) * x.descuentoPorcentaje) / 100;\r\n                        x.descuentoTotal = x.descuentoTotal.moneyRound();\r\n                    }\r\n                    return x;\r\n                }),\r\n            numeroTransaccion,\r\n            fileTransaccion,\r\n\r\n            subtotal,\r\n            envio,\r\n            regaloTotal: 0,\r\n            baseIva: 0,\r\n            iva: 0,\r\n            total,\r\n\r\n            descuentoPorcentaje: descuentoAplica && descuentoAplica.porcentaje,\r\n            descuentoTotal: descuentoAplica && descuentoAplica.valor,\r\n            productoSelecciones\r\n        });\r\n        Preferences.Set(\"current_order\");\r\n        Preferences.Set(\"direccion\", {\r\n            direccion, ciudad, sector, referencia, tipo_envio,\r\n            documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        });\r\n        Preferences.Set(\"factura\", {\r\n            identificacion, documento, razonSocial,\r\n            telefono_factura, direccion_factura, email_factura,\r\n        });\r\n        reportCompleted(id);\r\n        return id;\r\n    } catch (ex) {\r\n        reportError(ex);\r\n        throw ex;\r\n    }\r\n});\r\n\r\n\r\nfunction isEmpty(val) {\r\n    return !(val && val.length && val.trim().length);\r\n}\r\n\r\nfunction ValidateSave(order: mapOrderStateProps[\"order\"]) {\r\n    var { numeroTransaccion, ciudad, sector, direccion, tipo_envio,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        email_factura, usarImagen, imgTransaccion\r\n    } = order;\r\n\r\n    var results: any = {};\r\n    var choosen = order.productList.filter(x => x.cantidad);\r\n\r\n    if (!choosen.length) return { productList: \"Debes elegir por lo menos un producto\" };\r\n\r\n    if (isEmpty(tipo_envio)) results.tipo_envio = \"Selecciona el tipo de envío\";\r\n\r\n    if ([\"PICK-UP\", \"DENTRO DE CIUDAD\"].indexOf(tipo_envio) < 0 && isEmpty(ciudad)) results.ciudad = \"Digita la ciudad\";\r\n    if (tipo_envio !== \"PICK-UP\" && isEmpty(sector)) results.sector = \"Digita el sector\";\r\n    if (tipo_envio !== \"PICK-UP\" && isEmpty(direccion)) results.direccion = \"Digita la direccion\";\r\n\r\n    if (isEmpty(documento_contacto)) results.documento_contacto = \"Selecciona el documento de identificación de la persona que recibe\";\r\n    if (isEmpty(identificacion_contacto)) {\r\n        results.identificacion_contacto = \"Digita el número de \" + DocToString(documento_contacto) + \" de la persona que recibe\";\r\n    } else {\r\n        let error = ValidarIdentificacion(identificacion_contacto, documento_contacto)\r\n        if (error) results.identificacion_contacto = \"La identificación de la persona que recibe es incorrecta: \" + error;\r\n    }\r\n    if (isEmpty(nombre_contacto)) results.nombre_contacto = \"Digita el nombre de la persona que recibe\";\r\n    if (isEmpty(telefono_contacto)) {\r\n        results.telefono_contacto = \"Digita el numero de Telefono de la persona que recibe\";\r\n    } else {\r\n        let error = ValidateInput.tel(telefono_contacto);\r\n        if (error) results.telefono_contacto = \"Telefono de persona que recibe inválido: \" + error;\r\n    }\r\n\r\n\r\n    if (isEmpty(documento)) results.documento = \"Selecciona un documento de identificación\";\r\n    if (isEmpty(identificacion)) {\r\n        results.identificacion = \"Digita el número de \" + DocToString(documento) + \" de facturación\";\r\n    } else {\r\n        let error = ValidarIdentificacion(identificacion, documento)\r\n        if (error) results.identificacion = \"La identificación de facturación está incorrecta: \" + error;\r\n    }\r\n    if (isEmpty(razonSocial)) results.razonSocial = \"Digita la Razon Social de la factura\";\r\n    if (isEmpty(telefono_factura)) {\r\n        results.telefono_factura = \"Digita el número de Telefono de facturación\";\r\n    } else {\r\n        let error = ValidateInput.tel(telefono_factura);\r\n        if (error) results.telefono_factura = \"Telefono de facturación inválido: \" + error;\r\n    }\r\n    if (isEmpty(direccion_factura)) results.direccion_factura = \"Digita la dirección de facturación\";\r\n    if (isEmpty(email_factura)) results.email_factura = \"Digita el email de facturación\";\r\n    if (isEmpty(email_factura)) {\r\n        results.email_factura = \"Digita el email de facturación\";\r\n    } else {\r\n        let error = ValidateInput.email(email_factura);\r\n        if (error) results.email_factura = error;\r\n    }\r\n\r\n    if (usarImagen) {\r\n        if (isEmpty(imgTransaccion)) results.imgTransaccion = \"Agrega la imagen del comprobante de pago\";\r\n    } else {\r\n        if (isEmpty(numeroTransaccion)) results.numeroTransaccion = \"Digita el numero de comprobante de pago\";\r\n    }\r\n\r\n    if (Object.keys(results).length) return results;\r\n    return null;\r\n}\r\n\r\nexport default OrderSaveThunk;","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport OrderState from \"../lib/OrderState\";\r\nimport RecoverStoredOrder from \"../lib/RecoverStoredOrder\";\r\nimport GetProductsThunk from \"./GetProductsThunk\";\r\nimport LoadImageThunk from \"./LoadImageThunk\";\r\nimport LocalStoreOrder from \"./LocalStorePedido\";\r\nimport OrderSaveThunk from \"./OrderSaveThunk\";\r\n\r\nconst OrderReducer = createSlice({\r\n    name: \"Order\",\r\n    reducers: {\r\n        updateCurrentTab(state, action: PayloadAction<TabName>) {\r\n            if (state.status !== \"save-order:loading\")\r\n                state.currentTab = action.payload;\r\n        },\r\n        changeProductQuantity(state, action: PayloadAction<{ Id: number, type: \"+\" | \"-\" }>) {\r\n            change_cantidad_item(state, action.payload.Id, action.payload.type);\r\n            state.isDirty = true;\r\n        },\r\n        changeDataValue(state, action: PayloadAction<{ name: keyof typeof state[\"data\"], value: any }>) {\r\n            const { name, value } = action.payload;\r\n            state.data[name as any] = value;\r\n            state.isDirty = true;\r\n        },\r\n        changeProductPrice(state, action: PayloadAction<{ id: number, pvp_final: number }>) {\r\n            const { pvp_final, id } = action.payload;\r\n            var found = state.data.productList.find(x => x.id === id);\r\n            if (found)\r\n                found.pvp_final = pvp_final;\r\n            state.isDirty = true;\r\n        },\r\n        addProductSelection(state, action: PayloadAction<{ id: number, selections: number[] }>) {\r\n            const { id, selections } = action.payload;\r\n            if (!state.data.productoSelecciones.hasOwnProperty(id)) {\r\n                state.data.productoSelecciones[id] = [];\r\n            }\r\n            state.data.productoSelecciones[id].push(selections);\r\n            state.isDirty = true;\r\n        },\r\n        removeProductSelection(state, action: PayloadAction<{ id: number, index: number }>) {\r\n            const { id, index } = action.payload;\r\n            if (state.data.productoSelecciones.hasOwnProperty(id)) {\r\n                var exists = state.data.productoSelecciones[id][index];\r\n                if (exists) state.data.productoSelecciones[id].splice(index, 1);\r\n            }\r\n            state.isDirty = true;\r\n        }\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(GetProductsThunk.pending, (state) => {\r\n                state.status = \"products:loading\";\r\n            })\r\n            .addCase(GetProductsThunk.rejected, (state, payload) => {\r\n                state.status = \"products:error\";\r\n                state.error = payload.error.message;\r\n            })\r\n            .addCase(GetProductsThunk.fulfilled, (state, action) => {\r\n                state.status = \"products:completed\";\r\n                state.data.productList = action.payload.map(x => ({ ...x, cantidad: 0 }));\r\n                const [updates, choosen] = RecoverStoredOrder();\r\n                Object.assign(state.data, updates);\r\n                for (const item of choosen) {\r\n                    for (let i = 0; i < item.cantidad; i++) {\r\n                        change_cantidad_item(state, item.id, \"+\");\r\n                    }\r\n                }\r\n            })\r\n\r\n            .addCase(LoadImageThunk.fulfilled, (state, action) => {\r\n                state.data.imgTransaccion = action.payload.imgUrl;\r\n                state.data.imageFile = action.payload.imgFile;\r\n                state.isDirty = true;\r\n            })\r\n            .addCase(LoadImageThunk.rejected, (state, error) => {\r\n                state.error = error.error.message;\r\n            }).addCase(LocalStoreOrder.fulfilled, (state) => {\r\n                state.isDirty = false;\r\n            })\r\n\r\n            .addCase(OrderSaveThunk.pending, (state) => {\r\n                state.status = \"save-order:loading\";\r\n            })\r\n            .addCase(OrderSaveThunk.rejected, (state, action) => {\r\n                state.status = \"save-order:error\";\r\n                state.error = action.error.message;\r\n                if (action.error.name === \"OrderDataValidationError\") {\r\n                    state.currentTab = \"OrderData\";\r\n                }\r\n                if (action.error.name === \"ProductsValidationError\") {\r\n                    state.currentTab = \"ProductList\";\r\n                }\r\n            })\r\n            .addCase(OrderSaveThunk.fulfilled, (state) => {\r\n                state.isDirty = false;\r\n                state.status = \"save-order:completed\";\r\n                const [updates] = RecoverStoredOrder();\r\n                state.data = Object.assign({}, new OrderState(), updates);\r\n            });\r\n    },\r\n    initialState: {\r\n        currentTab: \"ProductList\" as TabName\r\n        , isDirty: false\r\n        , status: \"\" as \"products:loading\" | \"products:completed\" | \"products:error\" | \"save-order:loading\" | \"save-order:completed\" | \"save-order:error\" | \"\"\r\n        , error: undefined as string\r\n        , data: Object.assign({}, new OrderState())\r\n    }\r\n});\r\n\r\n\r\n\r\nfunction change_cantidad_item(state: ReturnType<typeof OrderReducer[\"getInitialState\"]>, Id: number, type: \"+\" | \"-\") {\r\n    var item = state.data.productList.find(x => x.id === Id);\r\n    if (!item) return;\r\n    var previous_cant = (item.cantidad && !isNaN(+item.cantidad)) ? item.cantidad : 0;\r\n    if (type === \"+\") {\r\n        if (item.cantidad_desde && previous_cant <= 0) {\r\n            item.cantidad = item.cantidad_desde;\r\n        } else {\r\n            item.cantidad = (+previous_cant) + 1;\r\n        }\r\n    }\r\n    if (type === \"-\") {\r\n        if (item.cantidad_desde && previous_cant <= item.cantidad_desde) {\r\n            item.cantidad = 0\r\n        } else {\r\n            item.cantidad = (+previous_cant) - 1;\r\n        }\r\n    }\r\n}\r\n\r\nexport default OrderReducer.reducer;\r\nexport type OrderReduceState = ReturnType<typeof OrderReducer[\"getInitialState\"]>\r\nexport const { actions } = OrderReducer;\r\nexport type TabName = \"ProductList\" | \"OrderData\" | \"ConfirmOrder\" | \"OrderPayment\";","import React from \"react\";\r\nimport { Tabs, Tab, Paper, Typography, TextField, Fab } from \"@material-ui/core\";\r\nimport ProductGrid from \"../Products/ProductGrid\";\r\nimport ProductOptions from \"./ProductOptions\";\r\nimport ConfirmOrder from \"../ConfirmOrder\";\r\nimport Data from \"./Data\";\r\nimport Payment from \"./Payment\";\r\nimport Survey from \"./Survey\";\r\nimport { withRouter, Route } from \"react-router-dom\";\r\nimport RouteMessage from \"../RouteMessage\";\r\nimport { Save } from \"@material-ui/icons\";\r\nimport ProductSelections from \"./ProductSelections\";\r\nimport OrderState from \"./lib/OrderState\";\r\nimport { connect } from \"react-redux\";\r\nimport GetProductsThunk from \"./Redux/GetProductsThunk\";\r\nimport { actions } from \"./Redux/OrderReducer\";\r\nimport LoadImageThunk from \"./Redux/LoadImageThunk\";\r\nimport LocalStoreOrder from \"./Redux/LocalStorePedido\";\r\nimport mapOrderState, { mapOrderStateProps } from \"./mapOrderState\";\r\nimport OrderSaveThunk from \"./Redux/OrderSaveThunk\";\r\n\r\ntype OrderReduceActions = typeof actions;\r\ninterface OrderProps extends OrderReduceActions, mapOrderStateProps {\r\n    onMounted: (path: string) => void;\r\n    history: any;\r\n    match: any;\r\n    rol: number;\r\n    editablePrices?: boolean;\r\n    descuentos: Descuento[];\r\n\r\n    getProducts: typeof GetProductsThunk;\r\n    loadTransaccionImg: typeof LoadImageThunk;\r\n    setStoredOrder: typeof LocalStoreOrder;\r\n    saveOrder: typeof OrderSaveThunk;\r\n}\r\nconst OrderComponent = withRouter(class Order extends React.PureComponent<OrderProps, OrderState> {\r\n    unblockNavigation() { }\r\n    constructor(props: any) {\r\n        super(props);\r\n        if (props.onMounted) props.onMounted(props.match.path);\r\n    }\r\n    componentDidMount() {\r\n        window.onbeforeunload = _ =>\r\n            this.props.isDirty\r\n                ? \"Tu pedido aún está incompleto, deseas salir sin guardarlo?\"\r\n                : null;\r\n        this.unblockNavigation = this.props.history.block(this.routerWillLeave.bind(this));\r\n        this.props.getProducts();\r\n    }\r\n    componentWillUnmount() {\r\n        this.unblockNavigation && this.unblockNavigation();\r\n        window.onbeforeunload && (window.onbeforeunload = undefined);\r\n    }\r\n    routerWillLeave(nextLocation?) {\r\n        if (nextLocation && nextLocation.pathname.indexOf(this.props.match.path) === 0) return;\r\n        if (!this.props.isDirty) return;\r\n\r\n        var confirm = window.confirm(\"Tu pedido está incompleto, quieres guardarlo para completarlo después?\");\r\n        if (confirm) {\r\n            this.props.setStoredOrder({});\r\n        } else {\r\n            // actualizar todo!\r\n            this.props.setStoredOrder({ clean: true });\r\n        }\r\n    }\r\n    guardarBorrador = (event) => {\r\n        if (!this.props.isDirty) return;\r\n        this.props.setStoredOrder({\r\n            reportCompleted: () => this.message(\"Tu pedido fue guardado como borrador\", \"Listo!\")\r\n        });\r\n    }\r\n    handleDone = event => {\r\n        event.preventDefault();\r\n        if (this.props.async_status.indexOf(\":loading\") >= 0) return;\r\n        this.props.saveOrder({\r\n            order: this.props.order\r\n            , reportCompleted: (id) => {\r\n                this.props.history.push(this.props.match.path + \"/survey/\" + id);\r\n            },\r\n            reportError: (exception) => {\r\n                this.message(exception.message, undefined, (exception as any).propertyName);\r\n            }\r\n        });\r\n    }\r\n    message = (message, title?, focusafter?) => {\r\n        var params = new URLSearchParams();\r\n        params.set(\"a\", title || \"Ocurrió un problem\");\r\n        params.set(\"b\", message);\r\n        if (focusafter) params.set(\"focusafter\", focusafter);\r\n        this.props.history.push(this.props.match.path + \"/msg?\" + params.toString());\r\n    }\r\n    handleProductAction = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        const item = this.props.order.productList.find(x => x.id === (+value));\r\n        if (item && item.opciones && item.opciones.length)\r\n            return this.props.history.push(this.props.match.path + \"/select-product-options/\" + item.id);\r\n\r\n        this.props.changeProductQuantity({ Id: +value, type: name as any });\r\n    }\r\n    handleValueChange = (name: string, value: string) => {\r\n        this.props.changeDataValue({ name: name as any, value });\r\n    }\r\n    imageChange = (imgFile: File) => {\r\n        if (!imgFile) return;\r\n        this.props.loadTransaccionImg({ imgFile, reportError: this.message });\r\n    }\r\n\r\n    handleAddSelection = (result?) => {\r\n        if (result) this.props.addProductSelection(result);\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    handleDeleteSelection = (result) => {\r\n        if (result) this.props.removeProductSelection(result);\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    handlePriceChange = (event) => {\r\n        const id = +event.currentTarget.name;\r\n        const pvp_final = event.currentTarget.value;\r\n        this.props.changeProductPrice({ id, pvp_final });\r\n    }\r\n    render() {\r\n        const { currentTab, order, async_status, tablaDescuentos } = this.props;\r\n        const choosenItems = order.productList.filter((x: any) => x.cantidad);\r\n\r\n        const isLoading = async_status.indexOf(\":loading\") >= 0;\r\n\r\n        return (<div style={{ width: \"100%\", height: \"calc(100% - 1px)\", display: \"flex\", flexDirection: \"column\", padding: 10, overflow: \"hidden\" }} >\r\n            <Tabs variant=\"fullWidth\" onChange={(ev, currentTab) => this.props.updateCurrentTab(currentTab)} value={currentTab}>\r\n                <Tab value=\"ProductList\" label=\"Productos\" />\r\n                <Tab value=\"OrderData\" label=\"Datos\" />\r\n                <Tab value=\"ConfirmOrder\" label=\"Pedido\" />\r\n                <Tab value=\"OrderPayment\" label=\"Pago\" />\r\n            </Tabs>\r\n            {currentTab === \"ProductList\" && <ProductGrid\r\n                visible={true}\r\n                onActionClick={this.handleProductAction}\r\n                items={order.productList}\r\n                editablePrices={this.props.editablePrices}\r\n                onPriceChange={this.handlePriceChange}\r\n                controls=\"ADD-REMOVE\"\r\n                async_status={this.props.async_status}\r\n                async_error={(this.props.async_status || \"\").indexOf(\"products\") >= 0 ? this.props.async_error : undefined}\r\n            />}\r\n            {currentTab === \"OrderData\" && <Data visible={true} {...order} onValueChange={this.handleValueChange} />}\r\n            {currentTab === \"ConfirmOrder\" && (<Paper style={{\r\n                textAlign: \"center\"\r\n                , padding: 10\r\n                , margin: \"auto\"\r\n                , marginTop: 10\r\n                , width: \"100%\"\r\n                , maxWidth: 500\r\n                , height: \"100%\"\r\n            }}>\r\n                <Typography variant=\"h5\">TU PEDIDO</Typography>\r\n                <ConfirmOrder\r\n                    show_next_discount={true}\r\n                    items={choosenItems}\r\n\r\n                    descuento={order.descuentoAplica}\r\n                    valor_envio={order.envio}\r\n                    gran_total={order.total}\r\n                    total_pedido={order.total_pedido}\r\n                    subtotal={order.subtotal}\r\n\r\n                    LabelDescuentoComponent={this.props.rol === 3\r\n                        ? (<TextField\r\n                            onChange={(ev) => this.handleValueChange(\"descuentoAplica\", tablaDescuentos.find(x => x.id === (+ev.currentTarget.value)))}\r\n                            value={(order.descuentoAplica && order.descuentoAplica.id) || \"\"}\r\n                            SelectProps={{ native: true }}\r\n                            select\r\n                        >\r\n                            <option>- SELECCIONA UN DESCUENTO -</option>\r\n                            {tablaDescuentos.map(d => (\r\n                                <option key={d.id} value={d.id}>DESCUENTO {d.porcentaje}%</option>\r\n                            ))}\r\n                        </TextField>)\r\n                        : null}\r\n                />\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    value={order.observacion}\r\n                    name=\"observacion\"\r\n                    onChange={(ev) => this.handleValueChange(ev.currentTarget.name, ev.currentTarget.value)}\r\n                    style={{ width: \"calc(100% - 20px)\", margin: 10 }}\r\n                    label=\"Observacion\"\r\n                    multiline\r\n                    rows=\"2\"\r\n                    inputProps={{ maxLength: 300, id: \"observacion\" }}\r\n                />\r\n            </Paper>)}\r\n            {currentTab === \"OrderPayment\" && <Payment\r\n                visible={true}\r\n                loading={isLoading}\r\n                total_pagar={order.total}\r\n                onDone={this.handleDone}\r\n                items={choosenItems}\r\n                numeroTransaccion={order.numeroTransaccion}\r\n                imgTransaccion={order.imgTransaccion}\r\n                onImgChange={this.imageChange}\r\n                usarImagen={order.usarImagen}\r\n                onValueChange={this.handleValueChange}\r\n            />}\r\n\r\n            <Route path={this.props.match.path + \"/msg\"} component={RouteMessage} />\r\n            <Route path={this.props.match.path + \"/survey/:id\"} component={Survey} />\r\n            <Route path={this.props.match.path + \"/select-product-options/:id\"}\r\n                children={({ match }) => <ProductOptions\r\n                    showingID={match && +match.params.id}\r\n                    onDone={this.handleAddSelection}\r\n                    productList={order.productList}\r\n                />}\r\n            />\r\n            <Route path={this.props.match.path + \"/view-product-options/:id\"}\r\n                children={({ match }) => <ProductSelections\r\n                    id={match && match.params.id}\r\n                    onDeleteSelection={this.handleDeleteSelection}\r\n                    productList={order.productList}\r\n                    selections={order.productoSelecciones}\r\n                />}\r\n            />\r\n            <Fab title=\"Guardar Borrador\" onClick={this.guardarBorrador} variant=\"extended\" style={{ position: \"fixed\", bottom: 20, right: 20 }} color=\"primary\">\r\n                <Save />\r\n            </Fab>\r\n        </div >)\r\n    }\r\n});\r\n\r\n\r\nexport default connect(mapOrderState, {\r\n    ...actions\r\n    , getProducts: GetProductsThunk\r\n    , loadTransaccionImg: LoadImageThunk\r\n    , setStoredOrder: LocalStoreOrder\r\n    , saveOrder: OrderSaveThunk\r\n})(OrderComponent);","import { Totals, EstimarDescuento } from \"../../Utils/Calcs\";\r\nimport { RootState } from \"./Redux/Store\";\r\n\r\nexport default function mapOrderState(rootState: RootState, props) {\r\n    const { Order } = rootState;\r\n    const tablaDescuentos = (props.descuentos || [])\r\n        .map((d, index) => {\r\n            return { ...d, id: d.id || index };\r\n        });\r\n\r\n    /** Lista de productos incluyendo los productos seleccionados desde OPCIONES */\r\n    var normalizedProductList = [...Order.data.productList].sort((a, b) => a.orden - b.orden).map(x => {\r\n        if (x.opciones && x.opciones.length) {\r\n            x = { ...x, cantidad: 0 };\r\n            var exists = Order.data.productoSelecciones[x.id];\r\n            // Creo un nuevo articulo, para evitar la Mutación\r\n            if (exists) x.cantidad = exists.length;\r\n        }\r\n        return x;\r\n    });\r\n\r\n    var subtotal = Totals(normalizedProductList.filter(x => x.cantidad)).total;\r\n    // en ROL 3, el descuento es MANUAL, no calculado\r\n    if (props.rol === 3) {\r\n        if (Order.data.descuentoAplica) var descuentoAplica = {\r\n            ...Order.data.descuentoAplica,\r\n            valor: (Order.data.descuentoAplica.porcentaje * subtotal / 100).moneyRound()\r\n        }\r\n    } else {\r\n        descuentoAplica = EstimarDescuento(subtotal, tablaDescuentos);\r\n    }\r\n\r\n    var total_pedido = subtotal - ((descuentoAplica && descuentoAplica.valor) || 0);\r\n    var envio = getValorEnvio(total_pedido, Order.data.tipo_envio);\r\n    var total = (total_pedido + envio).moneyRound();\r\n\r\n    return {\r\n        order: {\r\n            ...Order.data\r\n            , descuentoAplica\r\n            , productList: normalizedProductList\r\n            , subtotal\r\n            , total_pedido\r\n            , envio\r\n            , total\r\n        },\r\n        isDirty: Order.isDirty,\r\n        tablaDescuentos,\r\n        currentTab: Order.currentTab,\r\n        async_status: Order.status,\r\n        async_error: Order.error\r\n    }\r\n}\r\n\r\n\r\nfunction getValorEnvio(total_pedido: number, tipo_envio: RootState[\"Order\"][\"data\"][\"tipo_envio\"]) {\r\n    if (total_pedido >= 80) return 0;\r\n    if (tipo_envio === \"PICK-UP\") return 0;\r\n    if (tipo_envio === \"DENTRO DE CIUDAD\") return 3;\r\n    if (tipo_envio === \"ZONA CONTINENTAL\") return 5;\r\n    if (tipo_envio === \"GALAPAGOS ISLA CRUS - BALTRA\") return 10;\r\n    if (tipo_envio === \"GALAPAGOS ISLA ISABELA Y FERNANDINA\") return 14;\r\n}\r\n\r\nexport type mapOrderStateProps = ReturnType<typeof mapOrderState>","import { OrderDetailsState } from \"../Components/OrderList/OrderDetails\";\r\nimport API from \"./API\";\r\n\r\nexport default class OrderActions {\r\n    static Aprobar(state: OrderDetailsState) {\r\n        let cf = window.confirm(\"Esta seguro de APROBAR este pedido?\");\r\n        if (!cf) return;\r\n        return API.ActionOrder(state.id, { action: \"APROBAR\" });\r\n    }\r\n    static Rechazar(state: OrderDetailsState) {\r\n        let cf = window.confirm(\"Esta seguro de RECHAZAR este pedido?\");\r\n        if (!cf) return;\r\n        let value = window.prompt(\"Digita el Motivo de Rechazo\");\r\n        if (!value) return;\r\n        return API.ActionOrder(state.id, { action: \"RECHAZAR\", value })\r\n    }\r\n    static Enviar(state: OrderDetailsState) {\r\n        const { _fechaEnvio } = state;\r\n        if (!(_fechaEnvio && _fechaEnvio.toString().trim().length && !isNaN(+new Date(_fechaEnvio)))) {\r\n            alert(\"Agregue una fecha de envío válida\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"_fechaEnvio\").focus();\r\n            });\r\n            return;\r\n        }\r\n        let cf = window.confirm(\"Esta seguro de seleccionar este pedido como ENVIADO?\");\r\n        if (!cf) return;\r\n        let value = new Date(\r\n            +_fechaEnvio.split(\"-\")[0],\r\n            (+_fechaEnvio.split(\"-\")[1]) - 1,\r\n            +_fechaEnvio.split(\"-\")[2]\r\n        );\r\n        return API.ActionOrder(state.id, { action: \"ENVIAR\", value })\r\n    }\r\n    static Recibir(state: OrderDetailsState) {\r\n        const { _fechaRecepcion, bienRecibido, observacionRecepcion } = state;\r\n        if (!(_fechaRecepcion && _fechaRecepcion.toString().trim().length && !isNaN(+new Date(_fechaRecepcion)))) {\r\n            alert(\"Agregue una fecha de recepción válida\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"_fechaRecepcion\").focus();\r\n            });\r\n            return;\r\n        }\r\n        if (!bienRecibido && !(observacionRecepcion && observacionRecepcion.toString().trim().length)) {\r\n            alert(\"Agregue la observación de la Recepción\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"observacionRecepcion\").focus();\r\n            });\r\n            return;\r\n        }\r\n        let value = new Date(\r\n            +_fechaRecepcion.split(\"-\")[0],\r\n            (+_fechaRecepcion.split(\"-\")[1]) - 1,\r\n            +_fechaRecepcion.split(\"-\")[2]\r\n        );\r\n        if (value.valueOf() < new Date(state.fechaEnvio).valueOf()) {\r\n            alert(\"La fecha de Recepción no puede ser menor a la fecha de envío\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"_fechaRecepcion\").focus();\r\n            });\r\n        }\r\n\r\n        let cf = window.confirm(\"Esta seguro de seleccionar este pedido como RECIBIDO?\");\r\n        if (!cf) return;\r\n\r\n        return API.ActionOrder(state.id, {\r\n            action: \"RECIBIR\",\r\n            value,\r\n            bienRecibido,\r\n            observacionRecepcion\r\n        });\r\n    }/*\r\n    static Facturar(state: OrderDetailsState) {\r\n        if (!(state.numeroFactura && state.numeroFactura.toString().trim().length)) {\r\n            alert(\"Agregue el número de factura\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"numeroFactura\").focus();\r\n            });\r\n            return;\r\n        }\r\n        let cf = window.confirm(\"Esta seguro de FACTURAR este pedido?\");\r\n        if (!cf) return;\r\n        return API.ActionOrder(state.id, { action: \"FACTURAR\", value: state.numeroFactura });\r\n    }*/\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, DialogTitle, Typography, TextField, Button, CircularProgress, DialogActions, Divider, FormControlLabel, Checkbox, CardMedia } from \"@material-ui/core\";\r\nimport ConfirmOrder from \"../ConfirmOrder\";\r\nimport API from \"../../Services/API\";\r\nimport { DocToString } from \"../../Utils/Calcs\";\r\nimport OrderActions from \"../../Services/OrderActions\";\r\n\r\nexport default class detaOrderDetails extends React.Component<{\r\n    onClose: (refresh: boolean) => void,\r\n    editable?: boolean,\r\n    id: number\r\n}> {\r\n    state = {\r\n        loading: \"data\",\r\n        _fechaEnvio: \"\",\r\n        _fechaRecepcion: \"\",\r\n    } as OrderDetailsState\r\n    componentWillMount() {\r\n        API.GetOrder(this.props.id)\r\n            .then(order => this.setState({ ...order, loading: null }));\r\n    }\r\n    handleClose = (event: React.MouseEvent<HTMLElement>) => {\r\n        this.props.onClose(this.state.shouldRefresh);\r\n    }\r\n    handleButton = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        const { name } = event.currentTarget;\r\n        if (this.state.loading) return;\r\n        if (name === \"APROBAR\") {\r\n            let promise = OrderActions.Aprobar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"RECHAZAR\") {\r\n            let promise = OrderActions.Rechazar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"ENVIAR\") {\r\n            let promise = OrderActions.Enviar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"RECIBIR\") {\r\n            let promise = OrderActions.Recibir(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        /*\r\n        if (name === \"FACTURAR\") {\r\n            let promise = OrderActions.Facturar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }*/\r\n        this.setState({ loading: name });\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleCheck = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, checked } = event.currentTarget;\r\n        this.setState({ [name]: checked });\r\n    }\r\n\r\n    handleExpand(src) {\r\n        var children = window.open(\"\", \"_blank\");\r\n        var img = children.document.createElement(\"img\");\r\n        img.src = src;\r\n        children.document.body.appendChild(img);\r\n        children.document.body.style.textAlign = \"center\";\r\n        children.document.body.style.margin = \"auto\";\r\n    }\r\n    render() {\r\n        const { numero,\r\n\r\n            fechaCreacion, fechaEnvio, fechaRecepcion,\r\n            detalle,\r\n            descuentoPorcentaje, descuentoTotal, observacion,\r\n            direccion, sector, ciudad, referencia//, numeroTransaccion, imgTransaccion,\r\n            , statusText, total, envio, username,\r\n            survey1, survey2, loading,\r\n            documento, identificacion, razonSocial,\r\n            telefono_factura, direccion_factura, email_factura,\r\n            nombre_contacto, identificacion_contacto, documento_contacto, telefono_contacto,\r\n\r\n            _fechaEnvio, _fechaRecepcion, bienRecibido, observacionRecepcion\r\n        } = this.state;\r\n        const editable = this.props.editable === true;\r\n\r\n        const total_pedido = (total - envio).moneyRound();\r\n\r\n        if (loading === \"data\")\r\n            return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\" >\r\n                <DialogContent style={{ textAlign: \"center\", paddingTop: 100, width: 400, height: 400 }}>\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </DialogContent>\r\n            </Dialog>);\r\n\r\n\r\n        return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\">\r\n            <DialogTitle>PEDIDO #{numero}</DialogTitle>\r\n            <DialogContent>\r\n                <TextRow value={new Date(fechaCreacion).toLocaleString()} label=\"Fecha\" />\r\n                <TextRow value={username} label=\"Usuario\" />\r\n                <TextRow value={statusText} label=\"Estado\" />\r\n\r\n                {/*numeroFactura && <TextRow value={numeroFactura} label=\"Factura #\" />*/}\r\n                {fechaEnvio && <TextRow value={new Date(fechaEnvio).toLocaleDateString()} label=\"Enviado\" />}\r\n                {fechaRecepcion && <TextRow value={new Date(fechaRecepcion).toLocaleDateString()} label=\"Recibido\" />}\r\n                {statusText === \"RECIBIDO\" && <TextRow value={(bienRecibido ? \"NO\" : \"SI\")} label=\"Incompleto\" />}\r\n                {statusText === \"RECIBIDO\" && <TextRow label=\"Comentarios\" value={observacionRecepcion} />}\r\n\r\n                <SectionHeader>PRODUCTOS</SectionHeader>\r\n                <ConfirmOrder\r\n                    items={detalle}\r\n                    descuento={{ porcentaje: descuentoPorcentaje, valor: descuentoTotal }}\r\n                    valor_envio={envio}\r\n                    total_pedido={total_pedido}\r\n                    gran_total={total}\r\n                    subtotal={total_pedido + descuentoTotal}\r\n                    showComponentes={true}\r\n                />\r\n                <TextRow value={observacion} label=\"Observación\" />\r\n\r\n                <SectionHeader>DATOS DE ENTREGA</SectionHeader>\r\n\r\n                <TextRow value={nombre_contacto} label=\"Nombre\" />\r\n                <TextRow value={identificacion_contacto} label={DocToString(documento_contacto as any)} />\r\n                <TextRow value={telefono_contacto} label=\"Telefono\" />\r\n\r\n                <TextRow value={ciudad} label=\"Ciudad\" />\r\n                <TextRow value={sector} label=\"Sector\" />\r\n                <TextRow value={direccion} label=\"Direccion\" />\r\n                <TextRow value={referencia} label=\"Referencia\" />\r\n\r\n\r\n                <SectionHeader>DATOS DE FACTURACIÓN</SectionHeader>\r\n                <TextRow value={identificacion} label={DocToString(documento as any)} />\r\n                <TextRow value={razonSocial} label=\"Nombre\" />\r\n                <TextRow value={direccion_factura} label=\"Dirección\" />\r\n                <TextRow value={telefono_factura} label=\"Teléfono\" />\r\n                <TextRow value={email_factura} label=\"Email\" />\r\n\r\n                <SectionHeader>PAGO</SectionHeader>\r\n                {/*numeroTransaccion && <TextRow value={numeroTransaccion} label=\"Comprobante\" />*/}\r\n                {/*imgTransaccion && <CardMedia component=\"img\" style={{ height: \"auto\", width: \"100%\", objectFit: \"contain\" }}\r\n                    image={imgTransaccion} title=\"Comprobante\" onClick={ev => this.handleExpand(imgTransaccion)} />*/}\r\n\r\n                <SectionHeader>ENCUESTA</SectionHeader>\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">Cómo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                <Typography>{survey1 || \"\"}</Typography>\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">\r\n                    Compártenos alguna experiencia que hayan tenido tus clientes usando nuestros productos\r\n                </Typography>\r\n                <Typography>{survey2 || \"\"}</Typography>\r\n\r\n                {statusText === \"PENDIENTE\" && editable && <ActionButtons\r\n                    loadingAction={this.state.loading}\r\n                    label=\"APROBAR\"\r\n                    showReject={true}\r\n                    onClick={this.handleButton}\r\n                />}\r\n\r\n                {statusText === \"APROBADO\" && editable && (<React.Fragment>\r\n                    <SectionHeader>ENVIAR</SectionHeader>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\", marginTop: 15, marginBottom: 10 }}>\r\n                        <Typography variant=\"button\" style={{ marginRight: 10, paddingTop: 5 }} >Fecha de Envío</Typography>\r\n                        <TextField\r\n                            type=\"date\"\r\n                            fullWidth\r\n                            inputProps={{ id: \"_fechaEnvio\" }}\r\n                            name=\"_fechaEnvio\"\r\n                            value={_fechaEnvio || \"\"}\r\n                            style={{ flex: 1 }}\r\n                            onChange={this.handleChange}\r\n                        />\r\n                    </div>\r\n                    <ActionButtons\r\n                        loadingAction={this.state.loading}\r\n                        label=\"ENVIAR\"\r\n                        showReject={true}\r\n                        onClick={this.handleButton}\r\n                    />\r\n                </React.Fragment>)}\r\n\r\n                {statusText === \"ENVIADO\" && editable && <React.Fragment>\r\n                    <SectionHeader>RECIBIR</SectionHeader>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\", margin: 10 }}>\r\n                        <Typography variant=\"button\" style={{ marginRight: 10, paddingTop: 5 }} >Fecha Recepción</Typography>\r\n                        <TextField\r\n                            type=\"date\"\r\n                            fullWidth\r\n                            name=\"_fechaRecepcion\"\r\n                            value={_fechaRecepcion || \"\"}\r\n                            inputProps={{ id: \"_fechaRecepcion\" }}\r\n                            style={{ flex: 1 }}\r\n                            onChange={this.handleChange}\r\n                        /></div>\r\n                    <FormControlLabel\r\n                        label=\"El pedido se envió completo?\"\r\n                        control={<Checkbox\r\n                            checked={bienRecibido}\r\n                            onChange={this.handleCheck}\r\n                            name=\"bienRecibido\"\r\n                        />}\r\n                    />\r\n                    <TextField\r\n                        name=\"observacionRecepcion\"\r\n                        value={observacionRecepcion || \"\"}\r\n                        onChange={this.handleChange}\r\n                        rows={2}\r\n                        required={!bienRecibido}\r\n                        label=\"Comentarios\"\r\n                        fullWidth\r\n                        multiline\r\n                        inputProps={{\r\n                            id: \"observacionRecepcion\",\r\n                            maxLength: 300\r\n                        }}\r\n                    />\r\n                    <ActionButtons\r\n                        loadingAction={this.state.loading}\r\n                        name=\"RECIBIR\"\r\n                        label=\"COMPLETAR\"\r\n                        showReject={true}\r\n                        onClick={this.handleButton}\r\n                    />\r\n                </React.Fragment>}\r\n\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={this.handleClose}>SALIR</Button>\r\n            </DialogActions>\r\n        </Dialog>);\r\n    }\r\n}\r\n\r\nexport interface OrderDetailsState extends GetOrder {\r\n    loading: string;\r\n    _fechaEnvio: string;\r\n    _fechaRecepcion: string;\r\n    shouldRefresh?: boolean;\r\n}\r\n\r\nfunction TextRow(props: { value: any, label: any }) {\r\n    const { value, label } = props;\r\n    return <div style={{ width: \"100%\", textAlign: \"left\" }}>\r\n        <div style={{ width: 120, display: \"inline-block\" }}>\r\n            <Typography variant=\"body1\" >{label}</Typography>\r\n        </div>\r\n        <Typography variant=\"body2\" style={{ width: \"auto\", display: \"inline\" }}>{value}</Typography>\r\n    </div>\r\n}\r\n\r\nfunction SectionHeader(props: any) {\r\n    const style = { marginTop: 12, marginBottom: 5 } as any;\r\n    if (props.center) style.textAlign = \"center\";\r\n    return (\r\n        <div style={style}>\r\n            <Typography variant=\"h6\">{props.children}</Typography>\r\n            <Divider />\r\n        </div>);\r\n}\r\nfunction ActionButtons(props: {\r\n    loadingAction?: string,\r\n    label?: string,\r\n    onClick?: any,\r\n    showReject?: boolean | \"ONLY\",\r\n    name?: string\r\n}) {\r\n    return <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n        {props.showReject === \"ONLY\"\r\n            ? null\r\n            : (<Button\r\n                style={{ margin: 10, flex: 1 }}\r\n                onClick={props.onClick}\r\n                variant=\"outlined\"\r\n                color=\"primary\"\r\n                disabled={Boolean(props.loadingAction)}\r\n                name={props.name || props.label}\r\n            >\r\n                {props.loadingAction === (props.name || props.label)\r\n                    ? \"CARGANDO...\"\r\n                    : props.label}\r\n            </Button>)\r\n        }\r\n        {props.showReject &&\r\n            (<Button\r\n                style={{ margin: 10, flex: 1 }}\r\n                onClick={props.onClick}\r\n                variant=\"outlined\"\r\n                color=\"secondary\"\r\n                disabled={Boolean(props.loadingAction)}\r\n                name=\"RECHAZAR\"\r\n            >\r\n                {props.loadingAction === \"RECHAZAR\"\r\n                    ? \"CARGANDO...\"\r\n                    : \"RECHAZAR\"}\r\n            </Button>)}\r\n    </div>\r\n}","import React from \"react\";\r\nimport { List, ListItem, Grid, Paper, Typography, Hidden, CircularProgress } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { Route } from \"react-router-dom\";\r\nimport OrderDetails from \"./OrderDetails\";\r\nimport Message from \"../Message\";\r\nexport default class extends React.Component<any> {\r\n    state = {\r\n        data: [] as GetOrder[],\r\n        msg: null,\r\n        loading: true\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleMessage = this.handleMessage.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        API.GetOrders()\r\n            .then(data => this.setState({ data, loading: null }))\r\n            .catch(err => this.setState({\r\n                loading: null,\r\n                msg: { title: \"Ocurrió un error\", message: err.message, info: err.code }\r\n            }));\r\n    }\r\n    handleMessage() {\r\n        this.setState({ msg: null });\r\n    }\r\n    handleClick(event: React.MouseEvent<HTMLElement>) {\r\n        const { id } = event.currentTarget;\r\n        this.props.history.push(this.props.match.path + \"/\" + id);\r\n    }\r\n    handleClose(refresh: boolean) {\r\n        if (refresh) {\r\n            this.setState({ loading: true });\r\n            API.GetOrders()\r\n                .then(data => this.setState({ data, loading: null }))\r\n                .catch(ex => this.setState({\r\n                    msg: { title: \"No se pudo actualizar el listado\", message: ex.message, info: ex.code },\r\n                    loading: null\r\n                }));\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    render() {\r\n        const { data, msg, loading } = this.state;\r\n        const { rol } = this.props;\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        return (<Paper style={{ width: \"calc(100%-20px)\", height: \"calc(100% - 30px)\", display: \"flex\", flexDirection: \"column\", margin: 10, padding: 10, paddingBottom: 0, overflowX: \"hidden\" }}>\r\n            <List>\r\n                <Hidden xsDown implementation=\"css\" >\r\n                    <ListItem>\r\n                        <Grid container spacing={1} style={{ borderBottom: \"1px solid #ebebeb\" }}>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Numero</Typography></Grid>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Creado</Typography></Grid>\r\n\r\n                            {rol === 3 && <Grid sm={3} item><Typography variant=\"overline\">Usuario</Typography></Grid>}\r\n\r\n                            <Grid sm={1} item><Typography variant=\"overline\">Total</Typography></Grid>\r\n\r\n                            {rol === 1 && <Grid sm={1} item><Typography variant=\"overline\">Ganancia</Typography></Grid>}\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Estado</Typography></Grid>\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Fecha de Envío</Typography></Grid>\r\n                        </Grid>\r\n                    </ListItem>\r\n                </Hidden>\r\n                {data.map(d => <ListItem key={d.id} id={\"\" + d.id} button onClick={this.handleClick}>\r\n                    <Grid container spacing={1} style={{ paddingTop: 5, paddingBottom: 5, borderBottom: \"1px solid #fafafa\" }}>\r\n\r\n                        <Grid xs={12} sm={2} item >\r\n                            <Hidden smUp >PEDIDO #</Hidden>\r\n                            {d.id}\r\n                        </Grid>\r\n                        <Grid xs={12} sm={2} item >\r\n                            {new Date(d.fechaCreacion).toLocaleDateString()}\r\n                        </Grid>\r\n\r\n                        {rol === 3 && <Grid xs={12} sm={3} item >\r\n                            {d.username}\r\n                        </Grid>}\r\n\r\n                        <Grid xs={12} sm={1} item >$ {d.total.toFixed(2)}</Grid>\r\n\r\n                        {rol === 1 && <Grid xs={12} sm={1} item >$ {(d.descuentoTotal || 0).toFixed(2)}</Grid>}\r\n\r\n                        <Grid xs={12} sm={2} item ><Typography color={EstadoToVariant(d.statusText)}>{d.statusText}</Typography></Grid>\r\n\r\n                        <Grid xs={12} sm={2} item >{d.fechaEnvio && new Date(d.fechaEnvio).toDateString()}</Grid>\r\n                    </Grid>\r\n                </ListItem>)}\r\n            </List>\r\n\r\n            {msg && <Message {...msg} onClose={this.handleMessage} />}\r\n\r\n            <Route\r\n                path={this.props.match.path + \"/:id\"}\r\n                render={props => <OrderDetails id={+props.match.params.id} onClose={this.handleClose} />}\r\n            />\r\n        </Paper>);\r\n    }\r\n}\r\n\r\nfunction EstadoToVariant(estado): any {\r\n    if (estado === \"APROBADO\") return \"primary\";\r\n    if (estado === \"RECHAZADO\") return \"secondary\";\r\n    return \"initial\";\r\n}","import React from \"react\";\r\nimport { CardHeader, IconButton, Typography } from \"@material-ui/core\";\r\nimport { HourglassEmpty, ArrowLeft, ArrowRight } from \"@material-ui/icons\";\r\n\r\n\r\ninterface Props {\r\n    onBackClick?: (any) => void,\r\n    onNextClick?: (any) => void,\r\n    loading?: boolean,\r\n    title?: string,\r\n    subtitle?: string\r\n}\r\n\r\nexport default function LeftRigthHeader(props: Props) {\r\n    const { onBackClick, loading, onNextClick, title, subtitle } = props;\r\n    return (\r\n        <CardHeader\r\n            title={<div style={{ flex: 1, display: \"flex\", flexDirection: \"row\" }}>\r\n                {onBackClick && <div><IconButton onClick={onBackClick} disabled={loading}>\r\n                    {loading ? <HourglassEmpty /> : <ArrowLeft />}\r\n                </IconButton></div>}\r\n                <div style={{ flex: 1 }}>\r\n                    <Typography variant=\"h5\">{title}</Typography>\r\n                    <Typography variant=\"body1\">{subtitle}</Typography>\r\n                </div>\r\n                {onNextClick && <div><IconButton onClick={onNextClick} disabled={loading}>\r\n                    {loading ? <HourglassEmpty /> : <ArrowRight />}\r\n                </IconButton></div>}\r\n            </div>}\r\n            disableTypography={true}\r\n            style={{ textAlign: \"center\" }}\r\n        />);\r\n}","import React from \"react\";\r\nimport { CardContent, Card, List, ListItem, Typography } from \"@material-ui/core\";\r\nimport LeftRigthHeader from \"./LeftRightHeader\";\r\nexport default function RankingCard(props: RankProps) {\r\n    const {\r\n        data,\r\n        col1,\r\n        col2,\r\n        secondColType,\r\n        colType,\r\n        ...remainProps\r\n    } = props;\r\n\r\n    return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n        <LeftRigthHeader {...remainProps} />\r\n        <CardContent style={{ flex: 1, overflow: \"auto\" }}>\r\n            <List>\r\n                {data.sort((a, b) => b[col1] - a[col1])\r\n                    .map((r, index) => {\r\n                        var value1 = r[col1];\r\n                        if (col2) {\r\n                            var value2 = r[col2];\r\n                            if (secondColType && secondColType === \"DATE\") {\r\n                                value2 = DateToString(r[col2]);\r\n                            } else {\r\n                                value2 = value2.toFixed(2);\r\n                            }\r\n                        }\r\n\r\n                        return (<ListItem key={index} id={\"ranking-listitem-\" + index} >\r\n                            <div style={{ display: \"table\", width: \"100%\" }} >\r\n\r\n                                <Typography style={{ display: \"table-cell\", width: 50 }} variant={r.me ? \"body1\" : \"caption\"}># {index + 1}</Typography>\r\n                                <Typography style={{ display: \"table-cell\" }} variant={r.me ? \"body1\" : \"caption\"} >\r\n                                    {r.username}\r\n                                </Typography>\r\n\r\n                                {colType === \"PERFOMANCE\" && <PerfomanceCell value={value1} me={r.me} />}\r\n\r\n                                {colType === \"MONEY\" && <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                    $ {value1.toFixed(2)}\r\n                                </Typography>}\r\n\r\n                                {colType === \"NUMBER\" && <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                    {value1}\r\n                                </Typography>}\r\n\r\n                                {col2\r\n                                    ? (secondColType === \"PERFOMANCE\"\r\n                                        ? <PerfomanceCell value={+value2} me={r.me} />\r\n                                        : <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100, paddingLeft: 10 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                            {secondColType === \"MONEY\" ? \"$\" : null} {value2}\r\n                                        </Typography>)\r\n                                    : null\r\n                                }\r\n                            </div>\r\n                        </ListItem>)\r\n                    })}\r\n            </List>\r\n        </CardContent>\r\n    </Card>)\r\n}\r\nfunction PerfomanceCell(props: { value: any, me: boolean }) {\r\n    return <Typography\r\n        color={props.value ? (props.value > 0 ? \"primary\" : \"secondary\") : \"inherit\"}\r\n        style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }}\r\n        variant={props.me ? \"body1\" : \"caption\"}\r\n    >\r\n        % {props.value.toFixed(2)} {props.value ? (props.value > 0 ? \"↑\" : \"↓\") : null}\r\n    </Typography>\r\n}\r\n\r\nfunction DateToString(x) {\r\n    if (!x) return \"Nunca\";\r\n    var date = new Date(x);\r\n    if (isNaN(+date)) return x;\r\n    var ahora = new Date();\r\n    if (date.getDate() === ahora.getDate() &&\r\n        date.getMonth() === ahora.getMonth() &&\r\n        date.getFullYear() === ahora.getFullYear()) {\r\n        return date.toLocaleTimeString();\r\n    }\r\n\r\n    for (let i = 1; i < 30; i++) {\r\n        var este_dia = new Date(ahora.getFullYear(), ahora.getMonth(), ahora.getDate() - i);\r\n        if (date.getDate() === este_dia.getDate() &&\r\n            date.getMonth() === este_dia.getMonth() &&\r\n            date.getFullYear() === este_dia.getFullYear()) {\r\n            if (i === 1) return \"Ayer\";\r\n            return \"Hace \" + i + \" días\";\r\n        }\r\n    }\r\n    return date.toLocaleDateString();\r\n}\r\n\r\n\r\nexport interface RankProps {\r\n    data: Rank[];\r\n    title: string;\r\n    col1: string;\r\n    col2?: string;\r\n    colType: \"MONEY\" | \"PERFOMANCE\" | \"NUMBER\";\r\n    secondColType?: \"MONEY\" | \"DATE\" | \"PERFOMANCE\";\r\n\r\n    subtitle?: string;\r\n    onBackClick?: any;\r\n    onNextClick?: any;\r\n    loading?: boolean;\r\n}","import React from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { Card, CardContent } from \"@material-ui/core\";\r\nimport { MonthToString } from \"../../Utils/Calcs\";\r\nimport LeftRigthHeader from \"./LeftRightHeader\";\r\n\r\nexport default class LineCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false,\r\n            bezierCurve: false,\r\n            scales: {\r\n                yAxes: [{\r\n\r\n                    ticks: {\r\n                        maxTicksLimit: 10,\r\n                        padding: 5,\r\n                        beginAtZero: true\r\n                    }\r\n                }],\r\n                xAxes: [{\r\n                    ticks: {\r\n                        padding: 5\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        const { data: RawData, ...remain } = this.props;\r\n        var labels = [];\r\n        var values = [];\r\n        for (let i = 0; i < RawData.length; i++) {\r\n            const el = RawData[i];\r\n            if (el.we) {\r\n                var x = new Date(el.we);\r\n                labels.push(`${x.getDate()} ${MonthToString(x.getMonth())}`);\r\n            } else {\r\n                labels.push(el.label);\r\n            }\r\n            values.push(el.value);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor: \"#3f51b5\",\r\n                borderColor: \"#3f51b5\",\r\n                data: values,\r\n                lineTension: 0,\r\n                fill: false\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <LeftRigthHeader\r\n                {...remain}\r\n            />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Line options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >);\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { Card, CardContent, Typography, CardHeader, List, ListItem, ListItemText, ListItemSecondaryAction } from \"@material-ui/core\";\r\n\r\nexport default function ProfitCard(props: { month: number, year: number }) {\r\n    const { month, year } = props;\r\n    var reservas = 0, promo = 0;\r\n    if (month) {\r\n        reservas = (month * 5) / 100;\r\n        promo = (month * 14) / 100;\r\n    }\r\n    return (<Card className=\"dashboard-card\">\r\n        <CardHeader title=\"GANANCIAS\" style={{ textAlign: \"center\" }} />\r\n        <CardContent>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <div style={{ textAlign: \"center\", flex: 1 }}>\r\n                    <Typography color=\"primary\" variant=\"h5\" style={{ flex: 1 }}>$ {reduceMoney(month)}</Typography>\r\n                    <Typography color=\"primary\">ESTE MES</Typography>\r\n                </div>\r\n                <div style={{ borderLeft: \"1px solid black\", textAlign: \"center\", flex: 1 }}>\r\n                    <Typography variant=\"h5\" style={{ flex: 1 }} >$ {reduceMoney(year)}</Typography>\r\n                    <Typography>ESTE AÑO</Typography>\r\n                </div>\r\n            </div>\r\n            <Typography variant=\"subtitle1\" style={{ marginTop: 20, paddingLeft: 15, textAlign: \"left\" }}>Te aconsejamos apartar lo siguiente:</Typography>\r\n            <List>\r\n                <ListItem dense>\r\n                    <ListItemText primary=\"RESERVAS 5%\" />\r\n                    <ListItemSecondaryAction>$ {reservas.toFixed(2)}</ListItemSecondaryAction>\r\n                </ListItem>\r\n                <ListItem dense>\r\n                    <ListItemText primary=\"PROMOCION 14%\" />\r\n                    <ListItemSecondaryAction>$ {promo.toFixed(2)}</ListItemSecondaryAction>\r\n                </ListItem>\r\n            </List>\r\n        </CardContent >\r\n    </Card >)\r\n}\r\nfunction reduceMoney(value) {\r\n    if (!value) return 0;\r\n    if (value > 1000) return (+(value / 1000).toFixed(1)) + \" K\";\r\n    if (value > 1000000) return (+(value / 1000).toFixed(1)) + \" M\";\r\n    return +value.toFixed(2);\r\n}","export enum ROLES {\r\n    ASESOR = 1,\r\n    GUIA = 2,\r\n    ADMINISTRADOR = 3,\r\n}","import React from \"react\";\r\nimport { Pie } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default class PieCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        var backgroundColor = [];\r\n        var info = this.props.data.sort((a, b) => b.value - a.value);\r\n        for (let i = 0; i < info.length; i++) {\r\n            const el = info[i];\r\n            labels.push(el.label);\r\n            values.push(el.value);\r\n            backgroundColor.push(el.color);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor,\r\n                data: values\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Pie options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >)\r\n    }\r\n}","import React from \"react\";\r\nimport API from \"../../Services/API\";\r\nimport { MonthToString } from \"../../Utils/Calcs\";\r\nexport default function <T = { [key: string]: any }>(Component) {\r\n    return class WithTimeTravel extends React.Component<RankWithTimeTravel & T> {\r\n        state = {\r\n            data: [] as any,\r\n            current_week: null as Week,\r\n            statName: null as any,\r\n            reduceFn: null as (data: any[]) => any[],\r\n            loading: false\r\n        }\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = { ...props };\r\n        }\r\n        handleBack = () => {\r\n            if (this.state.loading) return;\r\n            this.setState({ loading: true });\r\n            var new_week = this.state.current_week.id - 1;\r\n            API.Stats([this.state.statName, \"current_week\"], new_week)\r\n                .then(this.updateData).catch(this.showError);\r\n        }\r\n        handleNext = () => {\r\n            if (this.state.loading) return;\r\n            this.setState({ loading: true });\r\n            var new_week = this.state.current_week.id + 1;\r\n            API.Stats([this.state.statName, \"current_week\"], new_week)\r\n                .then(this.updateData).catch(this.showError);\r\n        }\r\n        updateData = (results) => {\r\n            const { current_week, ...remain } = results;\r\n            this.setState({\r\n                data: remain[this.state.statName] || [],\r\n                current_week,\r\n                loading: false\r\n            });\r\n        }\r\n        showError = (ex) => {\r\n            this.setState({ loading: false });\r\n            alert(ex.message);\r\n        }\r\n        render() {\r\n            var { current_week, data, reduceFn, loading } = this.state;\r\n            var subtitle = \"\";\r\n            if (current_week) {\r\n                let desde = new Date(current_week.start);\r\n                let hasta = new Date(current_week.end);\r\n                subtitle = `${desde.getDate()} ${MonthToString(desde.getMonth())} - ` +\r\n                    `${hasta.getDate()} ${MonthToString(hasta.getMonth())}`;\r\n            }\r\n            var { data, ...remainState } = this.state;\r\n            if (reduceFn) data = reduceFn(data);\r\n\r\n            return (<Component\r\n                {...remainState}\r\n                data={data}\r\n                subtitle={subtitle}\r\n                loading={loading}\r\n                onBackClick={this.handleBack}\r\n                onNextClick={this.handleNext}\r\n            />);\r\n        }\r\n    }\r\n}\r\n\r\ninterface RankWithTimeTravel {\r\n    statName: string;\r\n    reduceFn?: (data: any[]) => any[];\r\n    current_week?: Week;\r\n}","import React from \"react\";\r\nimport { Bar } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default class BardCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false,\r\n            scaleBeginAtZero: true,\r\n            scales: {\r\n                yAxes: [{\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        for (let i = 0; i < this.props.data.length; i++) {\r\n            const el = this.props.data[i];\r\n            labels.push(el.label);\r\n            if (el.we) {\r\n                values.push(new Date(el.we).toLocaleDateString());\r\n            } else {\r\n                values.push(el.value);\r\n            }\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor: \"#3f51b5\",\r\n                borderColor: \"#3f51b5\",\r\n                data: values,\r\n                fill: false\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Bar options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Grid, CircularProgress, Typography, Hidden, Divider } from \"@material-ui/core\";\r\nimport RankingCard, { RankProps } from \"./RankingCard\";\r\nimport API from \"../../Services/API\";\r\nimport LineCard from \"./LineCard\"\r\nimport ProfitCard from \"./ProfitCard\";\r\nimport PieCard from \"./PieCard\";\r\nimport BardCard from \"./BarCard\";\r\nimport WithTimeTravel from \"./WithTimeTravel\";\r\nimport { ROLES } from \"../../Globals\";\r\n\r\nconst TimeTravelRank = WithTimeTravel<RankProps>(RankingCard);\r\nconst PersonalGraph = WithTimeTravel(LineCard);\r\n\r\nexport default class Feed extends React.Component<{ onMounted: Function, username: string, rol: number }> {\r\n    unmounted = false;\r\n    state = {\r\n        loading: true,\r\n        error: null,\r\n        week_ranking: [],\r\n        group_graph: [],\r\n        personal_graph: [],\r\n        year_sales: [],\r\n        product_resume: [],\r\n        group_ranking: [],\r\n        current_week: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    componentDidMount() {\r\n        const stats = [\r\n            // \"week_ranking\",\r\n            \"personal_graph\",\r\n            \"year_sales\",\r\n            \"product_resume\",\r\n            \"current_week\"\r\n        ];\r\n        if (this.props.rol !== ROLES.ADMINISTRADOR) stats.push(\"group_graph\");\r\n        // if (this.props.rol === ROLES.ADMINISTRADOR) stats.push(\"group_ranking\");\r\n        API.Stats(stats)\r\n            .then(x => {\r\n                if (this.unmounted) return;\r\n                this.setState({ ...x, loading: null })\r\n            })\r\n            .catch(error => {\r\n                if (this.unmounted) return;\r\n                this.setState({ error, loading: null });\r\n            });\r\n    }\r\n    componentWillUnmount = () => this.unmounted = true;\r\n    productResumeReducer = data => data.map(a => {\r\n        a.username = a.label;\r\n        return a;\r\n    });\r\n    render() {\r\n        var { loading, error,\r\n            week_ranking,\r\n            personal_graph,\r\n            group_graph,\r\n            year_sales,\r\n            product_resume,\r\n            group_ranking,\r\n            current_week\r\n        } = this.state;\r\n        const { rol, username } = this.props;\r\n        var resume = { month: 0, year: 0 };\r\n        var ahora = new Date();\r\n        const esAdmin = rol === ROLES.ADMINISTRADOR;\r\n\r\n        for (let i = 0; i < year_sales.length; i++) {\r\n            const x = year_sales[i];\r\n            x.createdAt = new Date(x.createdAt);\r\n            if (x.createdAt.getMonth() === ahora.getMonth() &&\r\n                x.createdAt.getFullYear() === ahora.getFullYear()) {\r\n                resume.month += x.profit;\r\n            }\r\n            resume.year += x.profit;\r\n        }\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        if (error) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <Typography variant=\"h5\">OCURRIÓ UN PROBLEMA</Typography>\r\n            <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n            <Typography variant=\"body1\">{error.status} {error.code}</Typography>\r\n        </div>);\r\n\r\n        return (<Grid container spacing={2} style={{ margin: \"auto\", width: \"calc(100% - 10px)\", textAlign: \"center\" }}>\r\n\r\n            <Grid item xs={12}>\r\n                <Typography color=\"primary\" variant=\"h6\">\r\n                    Hola {username}, Esta es tu cuenta personal de Natú.\r\n                </Typography>\r\n                <Typography variant=\"subtitle1\">\r\n                    Estamos aquí para prosperar juntos. Estos son los indicadores de tu trabajo.\r\n                </Typography>\r\n            </Grid>\r\n\r\n            {(group_ranking && group_ranking.length)\r\n                ? <Grid item sm={6} xs={12}>\r\n                    <TimeTravelRank\r\n                        statName=\"group_ranking\"\r\n                        data={group_ranking}\r\n                        current_week={current_week}\r\n                        title=\"RANKING DE GRUPOS\"\r\n                        colType=\"MONEY\"\r\n                        secondColType=\"MONEY\"\r\n                        col1=\"stat\"\r\n                        col2=\"ventas_lider\"\r\n                    />\r\n                </Grid>\r\n                : null}\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <PersonalGraph\r\n                    data={personal_graph}\r\n                    statName=\"personal_graph\"\r\n                    current_week={current_week}\r\n                    title={\"ESTADISTICA SEMANAL\"}\r\n                />\r\n            </Grid>\r\n\r\n\r\n            {(group_graph && group_graph.length)\r\n                ? <React.Fragment>\r\n                    {false && <Grid item sm={6} xs={12}>\r\n                        <BardCard data={group_graph} title={\"grupo\" || \"ESTADISTICA MENSUAL\"} />\r\n                    </Grid>}\r\n\r\n                    <Grid item sm={6} xs={12}>\r\n                        <PieCard data={product_resume} title=\"PRODUCTOS VENDIDOS\" />\r\n                    </Grid>\r\n\r\n                    <Grid item sm={6} xs={12}>\r\n                        <ProfitCard month={resume.month} year={resume.year} />\r\n                    </Grid>\r\n                </React.Fragment>\r\n                : null}\r\n\r\n            <Hidden smUp>\r\n                <Grid item xs={12}>\r\n                    <Divider />\r\n                </Grid>\r\n            </Hidden>\r\n\r\n            {esAdmin && <Grid item sm={6} xs={12}>\r\n                <TimeTravelRank\r\n                    current_week={current_week}\r\n                    statName=\"product_resume\"\r\n                    reduceFn={this.productResumeReducer}\r\n                    data={product_resume}\r\n                    title=\"PRODUCTOS VENDIDOS\"\r\n                    colType=\"NUMBER\"\r\n                    col1=\"value\"\r\n                />\r\n            </Grid>}\r\n            {false && <Grid item sm={6} xs={12}>\r\n                <TimeTravelRank\r\n                    statName=\"week_ranking\"\r\n                    current_week={current_week}\r\n                    data={week_ranking}\r\n                    reduceFn={data => esAdmin ? data.filter(x => x.rol === ROLES.ADMINISTRADOR) : data}\r\n                    title=\"RANKING DE LA SEMANA\"\r\n                    colType=\"MONEY\"\r\n                    secondColType=\"DATE\"\r\n                    col1=\"stat\"\r\n                    col2=\"ultimoPedido\"\r\n                />\r\n            </Grid>}\r\n\r\n            {false && !esAdmin && <Grid item sm={6} xs={12}>\r\n                <TimeTravelRank\r\n                    statName=\"week_ranking\"\r\n                    current_week={current_week}\r\n                    data={week_ranking}\r\n                    title=\"PROGRESO DE LA SEMANA\"\r\n                    colType=\"PERFOMANCE\"\r\n                    col1=\"perfomance\"\r\n                />\r\n            </Grid>}\r\n\r\n            {false && rol !== ROLES.ASESOR && <Grid item sm={6} xs={12}>\r\n                <RankingCard\r\n                    data={week_ranking}\r\n                    title=\"RANKING ACUMULATIVO\"\r\n                    colType=\"MONEY\"\r\n                    col1=\"monto_acumulativo\"\r\n                />\r\n            </Grid>}\r\n\r\n        </Grid>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Table, TableHead, TextField, TableCell, TableRow, Button, CircularProgress, Typography, TableBody } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nexport default class ProductSales extends React.Component {\r\n    state = {\r\n        loading: null,\r\n        error: null,\r\n        data: []\r\n    }\r\n    handleClick = () => {\r\n        if (this.state.loading) return;\r\n        var desde = this.valueOf(\"desde\");\r\n        var hasta = this.valueOf(\"hasta\");\r\n        var estado = this.valueOf(\"estado\");\r\n        if (!(desde && !isNaN(+new Date(desde)))) return alert(\"Selecciona la fecha desde\");\r\n        if (!(hasta && !isNaN(+new Date(hasta)))) return alert(\"Selecciona la fecha hasta\");\r\n        if (!estado) return alert(\"Selecciona el estado\");\r\n\r\n        this.setState({ loading: true });\r\n\r\n        desde = new Date(desde).toJSON();\r\n        hasta = new Date(hasta).toJSON();\r\n\r\n        API.ProductSalesReport({ desde, hasta, estado })\r\n            .then(data => this.setState({ data, loading: null, error: null }))\r\n            .catch(error => this.setState({ error, loading: null }));\r\n    }\r\n    valueOf(ID: string) {\r\n        var el = document.getElementById(ID) as any;\r\n        return el && el.value;\r\n    }\r\n    render() {\r\n        const { data, error, loading } = this.state;\r\n        return (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <div>\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"desde\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"hasta\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} select SelectProps={{ native: true }} inputProps={{ id: \"estado\" }} >\r\n                    <option value={1}>PENDIENTE</option>\r\n                    <option value={0}>APROBADO</option>\r\n                    <option value={2}>RECHAZADO</option>\r\n                    <option value={3}>ENTREGADO</option>\r\n                </TextField>\r\n                <Button disabled={loading} style={{ marginLeft: 10, marginRight: 10 }} variant=\"outlined\" onClick={this.handleClick} >GENERAR</Button>\r\n            </div>\r\n            {loading\r\n                ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </div>)\r\n                : (error\r\n                    ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                        <Typography variant=\"h4\">OCURRIÓ UN ERROR</Typography>\r\n                        <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                        <Typography variant=\"subtitle2\" >{error.code} {error.status}</Typography>\r\n                    </div>)\r\n                    : (<div>\r\n                        <Table>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell component=\"th\" >Fecha</TableCell>\r\n                                    <TableCell component=\"th\" >#</TableCell>\r\n                                    <TableCell component=\"th\" >Usuario</TableCell>\r\n                                    <TableCell component=\"th\" >Estado</TableCell>\r\n                                    <TableCell component=\"th\" >Observacion</TableCell>\r\n                                    <TableCell component=\"th\" >Fecha Envío</TableCell>\r\n                                    <TableCell component=\"th\" >Entregado</TableCell>\r\n                                    <TableCell component=\"th\" >Motivo Anulacion</TableCell>\r\n                                    <TableCell component=\"th\" >Producto</TableCell>\r\n                                    <TableCell component=\"th\" >Cant</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {data.map(d => (<TableRow key={d.id}>\r\n                                    <TableCell >{new Date(d.createdAt).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.idPedido}</TableCell>\r\n                                    <TableCell>{d.username}</TableCell>\r\n                                    <TableCell>{d.estado}</TableCell>\r\n                                    <TableCell>{d.observacion}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.motivoAnulacion}</TableCell>\r\n                                    <TableCell>{d.descripcion}</TableCell>\r\n                                    <TableCell>{d.cantidad}</TableCell>\r\n                                </TableRow>))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>)\r\n                )}\r\n        </div >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Tabs, Tab, Paper } from \"@material-ui/core\";\r\nimport ProductSales from \"./ProductSales\";\r\n\r\nexport default class Reports extends React.Component<any> {\r\n    state = {\r\n        currentTab: 0\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    handleChange = (x, currentTab) => {\r\n        this.setState({ currentTab });\r\n    }\r\n    render() {\r\n        const { currentTab } = this.state;\r\n        return (\r\n            <Paper style={{ margin: 10 }}>\r\n                <Tabs style={{ marginBottom: 10 }} value={currentTab} onChange={this.handleChange}>\r\n                    <Tab label=\"Detalle de Productos\" />\r\n                </Tabs>\r\n                {currentTab === 0 && <ProductSales />}\r\n            </Paper>)\r\n    }\r\n}","import React from \"react\";\r\nimport MUIDataTable from \"mui-datatables\";\r\n\r\nexport default class Queue extends React.PureComponent<{\r\n    data: any[],\r\n    columns: any[],\r\n    estado: string,\r\n    onClick: (id: number) => void\r\n}> {\r\n    handleClick = (values, index) => {\r\n        this.props.onClick(values[0]);\r\n    }\r\n    render() {\r\n        const { data, columns } = this.props;\r\n        const rows = data.filter(x => x.estado === this.props.estado)\r\n            .sort((a, b) => a.changedAt - b.changedAt)\r\n        return (\r\n            <MUIDataTable\r\n                data={rows}\r\n                columns={columns}\r\n                options={{\r\n                    selectableRows: \"none\",\r\n                    onRowClick: this.handleClick\r\n                }}\r\n            />\r\n        )\r\n    }\r\n}","export const entrada_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"numeroTransaccion\",\r\n        label: \"# Comprobante\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    }\r\n];\r\n\r\nexport const aprobado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: true\r\n        }\r\n    }\r\n];\r\nexport const enviado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaEnvio\",\r\n        label: \"Enviado\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: true\r\n        }\r\n    }\r\n];\r\nexport const recibido_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaRecepcion\",\r\n        label: \"Recepcion\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"bienRecibido\",\r\n        label: \"Incompleto\",\r\n        options: {\r\n            filter: true,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"observacionRecepcion\",\r\n        label: \"Observaciones\",\r\n        options: {\r\n            sort: false,\r\n            filter: false\r\n        }\r\n    }\r\n];\r\nexport const facturado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaRecepcion\",\r\n        label: \"Recepcion\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"bienRecibido\",\r\n        label: \"Incompleto\",\r\n        options: {\r\n            filter: true,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"observacionRecepcion\",\r\n        label: \"Observaciones\",\r\n        options: {\r\n            sort: false,\r\n            filter: false\r\n        }\r\n    },\r\n    {\r\n        name: \"numeroFactura\",\r\n        label: \"Factura\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    }\r\n];\r\n\r\nexport const rechazado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaAnulacion\",\r\n        label: \"Rechazado\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"motivoAnulacion\",\r\n        label: \"Motivo\",\r\n        options: {\r\n            filter: false,\r\n            sort: false\r\n        }\r\n    }\r\n];","import React from \"react\";\r\nimport { Tabs, Tab, AppBar } from \"@material-ui/core\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport API from \"../../Services/API\";\r\nimport Queue from \"./Queue\";\r\nimport OrderDetails from \"../OrderList/OrderDetails\";\r\nimport { entrada_columns, aprobado_columns, enviado_columns, recibido_columns, facturado_columns, rechazado_columns } from \"./Columns\";\r\n\r\nexport default class OrderQueue extends React.Component<{\r\n    match?: any,\r\n    history?: any,\r\n    location?: any,\r\n    onMounted?: Function\r\n}> {\r\n    state = {\r\n        data: [],\r\n        loading: true,\r\n        error: null,\r\n        id: null\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.match.path);\r\n        this.loadData();\r\n    }\r\n    loadData() {\r\n        API.GetOrders()\r\n            .then(rawData => {\r\n                const data = rawData.map(x => {\r\n                    var fechaCreacion = new Date(x.fechaCreacion);\r\n                    x.fechaCreacion = fechaCreacion.toLocaleDateString() as any;\r\n                    x.fechaEnvio = x.fechaEnvio && new Date(x.fechaEnvio).toLocaleDateString() as any;\r\n                    x.fechaRecepcion = x.fechaRecepcion && new Date(x.fechaRecepcion).toLocaleDateString() as any;\r\n                    x.fechaAnulacion = x.fechaAnulacion && new Date(x.fechaAnulacion).toLocaleDateString() as any;\r\n                    if (x.fechaAnulacion) console.info(x);\r\n                    x.total = x.total.toFixed(2) as any;\r\n                    x.bienRecibido = (x.bienRecibido ? \"\" : \"SI\") as any;\r\n                    x.changedAt = (x.changedAt\r\n                        ? new Date(x.changedAt).valueOf()\r\n                        : 0) as any;\r\n\r\n                    //x.numeroTransaccion = x.imgTransaccion ? \"IMAGEN\" : x.numeroTransaccion;\r\n                    return x;\r\n                });\r\n                this.setState({ data, loading: null });\r\n            })\r\n            .catch(error => this.setState({ error }));\r\n    }\r\n    handleTab = (_, value) => {\r\n        this.props.history.push(this.props.match.path + value);\r\n    }\r\n    openOrder = id => {\r\n        this.props.history.push(this.props.match.path + this.currentTab() + \"/\" + id);\r\n    }\r\n    closeOrder = shouldUpdate => {\r\n        if (shouldUpdate) this.loadData();\r\n        this.props.history.push(this.props.match.path + this.currentTab());\r\n    }\r\n    currentTab() {\r\n        return \"/\" + (this.props.location.pathname.split(\"/\")[2] || \"inbox\");\r\n    }\r\n    render() {\r\n        return (<div>\r\n            <AppBar position=\"relative\" color=\"primary\">\r\n                <Tabs onChange={this.handleTab} value={this.currentTab()} variant=\"fullWidth\">\r\n                    <Tab label=\"Entrada\" value=\"/inbox\" />\r\n                    <Tab label=\"Aprobado\" value=\"/ok\" />\r\n                    <Tab label=\"Enviado\" value=\"/sent\" />\r\n                    <Tab label=\"Recibido\" value=\"/ack\" />\r\n                    <Tab label=\"Facturado\" value=\"/invoice\" />\r\n                    <Tab label=\"Rechazado\" value=\"/denied\" />\r\n                </Tabs>\r\n            </AppBar>\r\n            <Switch>\r\n                <Route path={this.props.match.path + \"/inbox\"}\r\n                    render={_ => (<Queue\r\n                        columns={entrada_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"PENDIENTE\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/ok\"}\r\n                    render={_ => (<Queue\r\n                        columns={aprobado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"APROBADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/sent\"}\r\n                    render={_ => (<Queue\r\n                        columns={enviado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"ENVIADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/ack\"}\r\n                    render={_ => (<Queue\r\n                        columns={recibido_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"RECIBIDO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/invoice\"}\r\n                    render={_ => (<Queue\r\n                        columns={facturado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"FACTURADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/denied\"}\r\n                    render={_ => (<Queue\r\n                        columns={rechazado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"RECHAZADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/\"} exact>\r\n                    <Redirect to={this.props.match.path + \"/inbox\"} />\r\n                </Route>\r\n            </Switch>\r\n            <Route path={this.props.match.path + \"/:group/:id\"}\r\n                render={routeProps => <OrderDetails\r\n                    id={+routeProps.match.params.id}\r\n                    onClose={this.closeOrder}\r\n                    editable={true} />}\r\n            />\r\n        </div>);\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { ListItem, List, ListItemIcon, IconButton, ListItemText, ListItemSecondaryAction, TextField } from \"@material-ui/core\";\r\nimport { Add, Delete } from \"@material-ui/icons\";\r\n\r\ninterface InputOptions {\r\n    label?: string;\r\n    type?: \"number\" | \"string\";\r\n    allowZero?: boolean;\r\n}\r\n\r\ninterface Props {\r\n    dataSource: any[];\r\n    onAdd: (results: { name?: string, item?: any, inputValue?: string }) => void;\r\n    onRemove: (results: { name?: string, item?: any }) => void;\r\n    items: any[];\r\n    name?: string;\r\n    IdProp: string;\r\n    DisplayProp: string;\r\n    SecondaryDisplayProp?: string;\r\n\r\n    InputConfig?: InputOptions\r\n}\r\n\r\nvar COUNT = 0;\r\n\r\nexport default class ItemList extends React.PureComponent<Props> {\r\n    state = {\r\n        inputValue: \"\",\r\n        selectValue: \"\",\r\n        showErrors: false\r\n    }\r\n    INPUT_ID = \"CUSTOM_INPUT_ID_NO_\";\r\n    SELECT_ID = \"CUSTOM_SELECT_ID_NO_\";\r\n    constructor(props) {\r\n        super(props);\r\n        this.INPUT_ID += COUNT;\r\n        this.SELECT_ID += COUNT;\r\n        COUNT++;\r\n    }\r\n    handleDelete = event => {\r\n        const index = event.currentTarget.value;\r\n        var item = this.props.items[index];\r\n        this.props.onRemove({ name: this.props.name, item });\r\n    }\r\n    handleAdd = () => {\r\n        const { InputConfig, IdProp, dataSource, onAdd, name } = this.props;\r\n        const { inputValue, selectValue } = this.state;\r\n\r\n        if (InputConfig) {\r\n            var error = validateInput(inputValue, InputConfig);\r\n            if (error) {\r\n                window.requestAnimationFrame(() => {\r\n                    try { document.getElementById(this.INPUT_ID).focus() } catch (ex) { }\r\n                });\r\n                return this.setState({ showErrors: true });\r\n            }\r\n        }\r\n        if (!selectValue) {\r\n            window.requestAnimationFrame(() => {\r\n                try { document.getElementById(this.SELECT_ID).focus() } catch (ex) { }\r\n            });\r\n            return this.setState({ showErrors: true });\r\n        }\r\n        var item = dataSource.find(x => x[IdProp].toString() === selectValue.toString());\r\n        onAdd({ name: name, item: { ...item }, inputValue });\r\n        this.setState({ selectValue: \"\", inputValue: \"\", showErrors: false });\r\n    }\r\n    handleChange = event => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value } as any);\r\n    }\r\n    render() {\r\n        const { InputConfig, DisplayProp, IdProp, SecondaryDisplayProp, items } = this.props;\r\n        var dataSource = this.props.dataSource;\r\n        const { inputValue, selectValue, showErrors } = this.state;\r\n\r\n        const inputError = showErrors\r\n            ? (InputConfig ? validateInput(inputValue, InputConfig) : \"\")\r\n            : \"\";\r\n        const selectError = showErrors\r\n            ? (selectValue ? \"\" : \"Selecciona un item\")\r\n            : \"\";\r\n\r\n        var IDs = this.props.items.map(x => x[IdProp]);\r\n        dataSource = dataSource.filter(x => IDs.indexOf(x[IdProp]) < 0);\r\n\r\n        return (<>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\", width: \"calc(100% - 20px)\", margin: \"auto\" }}>\r\n                <TextField\r\n                    style={{ flex: 1, marginTop: 8, marginBottom: 8 }}\r\n                    inputProps={{ id: this.SELECT_ID }}\r\n                    SelectProps={{ native: true }}\r\n                    error={!!selectError} helperText={selectError}\r\n                    select\r\n                    name=\"selectValue\"\r\n                    value={selectValue}\r\n                    onChange={this.handleChange}\r\n                >\r\n                    <option value=\"\"> - SELECCIONA UNA OPCIÓN - </option>\r\n                    {dataSource.map(x => (\r\n                        <option key={x[IdProp]} value={x[IdProp]}>{x[DisplayProp]}</option>\r\n                    ))}\r\n                </TextField>\r\n                {InputConfig && <TextField\r\n                    error={!!inputError}\r\n                    helperText={inputError}\r\n                    style={{ margin: 10 }}\r\n                    margin=\"dense\"\r\n                    type={InputConfig.type || \"text\"}\r\n                    value={inputValue}\r\n                    name=\"inputValue\"\r\n                    onChange={this.handleChange}\r\n                    placeholder={InputConfig.label || \"\"}\r\n                    inputProps={{ id: this.INPUT_ID }}\r\n                />}\r\n                <div>\r\n                    <IconButton onClick={this.handleAdd} >\r\n                        <Add />\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n            {items && items.length\r\n                ? (<List>\r\n                    {items.map((x, index) => (<ListItem key={x[IdProp]} dense >\r\n                        {SecondaryDisplayProp && <ListItemIcon>{x[SecondaryDisplayProp]}</ListItemIcon>}\r\n                        <ListItemText>{x[DisplayProp]}</ListItemText>\r\n                        <ListItemSecondaryAction>\r\n                            <IconButton value={index} name=\"delete\" onClick={this.handleDelete}>\r\n                                <Delete />\r\n                            </IconButton>\r\n                        </ListItemSecondaryAction>\r\n                    </ListItem>))}\r\n                </List>)\r\n                : null}\r\n        </>);\r\n    }\r\n}\r\n\r\nfunction validateInput(value: string, input: InputOptions) {\r\n    var x = (value || \"\").trim();\r\n    if (!x) return \"Digite un valor\";\r\n    if (input.type === \"number\") {\r\n        if (isNaN(+x)) return \"Digite un número\";\r\n    }\r\n    return;\r\n}","import React from \"react\";\r\nimport Input from \"../Input\";\r\nimport Modal from \"../Modal\";\r\nimport API from \"../../Services/API\";\r\nimport ImageInput from \"../ImageInput\";\r\nimport ImageReader, { ImgFileToObject } from \"../../Utils/ImageReader\";\r\nimport { Button, Typography, FormControlLabel, Switch } from \"@material-ui/core\";\r\nimport ItemList from \"../ItemList\";\r\n\r\ninterface Props {\r\n    onDone: (update?: boolean) => void,\r\n    showingID: string,\r\n    productList: FullProduct[]\r\n}\r\ninterface State extends FullProduct {\r\n    error?: { [name: string]: string }\r\n    loading?: string;\r\n    rawFile?: File;\r\n}\r\n\r\nexport default class Edit extends React.Component<Props, State> {\r\n    state = {} as State;\r\n    handleChange = e => {\r\n        const { name, value } = e.currentTarget;\r\n        this.setState({ [name]: value } as any);\r\n    }\r\n    handleChecked = e => {\r\n        const { name, checked } = e.currentTarget;\r\n        this.setState({ [name]: checked } as any);\r\n    }\r\n    handleDelete = () => {\r\n        if (!this.state.id) return;\r\n        var doIt = window.confirm(\"Deseas continuar con esta acción?\");\r\n        if (!doIt) return;\r\n        this.setState({ loading: \"ELIMINAR\" });\r\n        API.DeleteProduct(this.state.id)\r\n            .then(this._updated)\r\n            .catch(this._failed);\r\n    }\r\n    handleSave = () => {\r\n        const errors = this._validar(this.state);\r\n        if (errors) {\r\n            var focusOn = Object.keys(errors)[0];\r\n            window.requestAnimationFrame(() => {\r\n                try { document.getElementById(focusOn).focus(); } catch (ex) { }\r\n            });\r\n            return;\r\n        }\r\n        this.setState({ loading: \"GUARDAR\" });\r\n        if (this.state.rawFile) {\r\n            const { rawFile, ...product } = this.state;\r\n            return ImgFileToObject(this.state.rawFile)\r\n                .then(imageFile => API.SaveProduct({ imageFile, ...product }))\r\n                .then(this._updated)\r\n                .catch(this._failed);\r\n        }\r\n        API.SaveProduct(this.state)\r\n            .then(this._updated)\r\n            .catch(this._failed);\r\n    }\r\n    _validar(data: FullProduct) {\r\n        var nombre = (data.nombre || \"\").trim();\r\n        const errorSet: any = {};\r\n        if (!nombre) errorSet.nombre = \"Digita el nombre\";\r\n        if (!(data.pvp_final || \"\").toString().trim()) {\r\n            errorSet.pvp_final = \"Digita el Precio Final\";\r\n        } else {\r\n            if (isNaN(+data.pvp_final)) {\r\n                errorSet.pvp_final = \"Precio final debe ser un número\";\r\n            }\r\n        }\r\n        if (data.opciones && data.opciones.length && !data.maxItems)\r\n            errorSet.maxItems = \"Digita la cantidad máxima a escoger\";\r\n        if (Object.keys(errorSet).length) return errorSet;\r\n        return;\r\n    }\r\n    _updated = () => {\r\n        this.setState({ loading: null, error: null });\r\n        this.props.onDone(true);\r\n    }\r\n    _failed = error => {\r\n        this.setState({ loading: null, error });\r\n        window.requestAnimationFrame(() => {\r\n            try { document.getElementById(\"ERROR_MESSAGE\").focus(); } catch (ex) { }\r\n        });\r\n    }\r\n    handleClose = () => {\r\n        if (this.state.loading) return;\r\n        this.props.onDone();\r\n    }\r\n    handleFile = rawFile => {\r\n        ImageReader(rawFile)\r\n            .then(imgSrc => this.setState({ imgSrc, rawFile }))\r\n            .catch(this._failed);\r\n    }\r\n\r\n    handleAdd = ({ name, item, inputValue }) => {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            if (name === \"OPCIONES\") {\r\n                state.opciones = state.opciones ? [...state.opciones] : [];\r\n                state.opciones.push({ idOpcion: +item.id });\r\n                return state;\r\n            }\r\n            if (name === \"COMPONENTES\") {\r\n                state.componentes = state.componentes ? [...state.componentes] : [];\r\n                state.componentes.push({ idComponente: +item.id, cantidad: +(inputValue || 1) });\r\n                return state;\r\n            }\r\n        });\r\n    }\r\n    handleRemove = ({ name, index }) => {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            if (name === \"OPCIONES\") {\r\n                state.opciones = [...state.opciones];\r\n                state.opciones.splice(index, 1);\r\n            }\r\n            if (name === \"COMPONENTES\") {\r\n                state.componentes = [...state.componentes];\r\n                state.componentes.splice(index, 1);\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        const id = this.props.showingID;\r\n        const nextId = nextProps.showingID;\r\n        var show = !(id === null || id === undefined);\r\n        var nextShow = !(nextId === null || nextId === undefined);\r\n        if (!show && nextShow) {\r\n            this.setState(prev => {\r\n                var { habilitado, ...exists } = this.props.productList.find(p => p.id === +nextId) || {} as any;\r\n                const keys = Object.keys(this.state)\r\n                // RESETEO LAS PROPIEDADES QUE NO EXISTEN\r\n                if (habilitado === undefined || habilitado === null) habilitado = true;\r\n                return {\r\n                    ...keys.reduce((acc, v) => ({ ...acc, [v]: undefined }), {})\r\n                    , ...exists\r\n                    , habilitado\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // MIENTRAS ESTÉ CERRADO, EL COMPONENTE NO SE ACTUALIZARÁ\r\n    shouldComponentUpdate(nextProps) {\r\n        var isOpen = !(this.props.showingID === null || this.props.showingID === undefined);\r\n        var NextisOpen = !(nextProps.showingID === null || nextProps.showingID === undefined);\r\n        return (isOpen === NextisOpen && isOpen === false) ? false : true;\r\n    }\r\n    render() {\r\n        const { loading } = this.state;\r\n        const id = this.props.showingID;\r\n        const error: any = this._validar(this.state) || {};\r\n        const show = !(id === null || id === undefined);\r\n\r\n        const opciones = (this.state.opciones || []).map(o => ({\r\n            id: o.idOpcion\r\n            , nombre: (this.props.productList.find(a => a.id === o.idOpcion) || {}).nombre\r\n        }));\r\n        const componentes = (this.state.componentes || []).map(o => ({\r\n            id: o.idComponente\r\n            , nombre: (this.props.productList.find(a => a.id === o.idComponente) || {}).nombre\r\n            , cantidad: o.cantidad\r\n        }));\r\n        const dataSource = this.props.productList.filter(x => !x.combo && x.id !== +id);\r\n\r\n        const footer = (<>\r\n            <FormControlLabel\r\n                label=\"Habilitado\"\r\n                style={{ flexGrow: 1 }}\r\n                control={<Switch\r\n                    checked={!!this.state.habilitado}\r\n                    name=\"habilitado\"\r\n                    onChange={this.handleChecked}\r\n                />}\r\n            />\r\n            {id !== \"NUEVO\" && <Button disabled={!!loading} onClick={this.handleDelete} color=\"secondary\" variant=\"outlined\" >\r\n                {loading === \"ELIMINAR\" ? \"ELIMINANDO...\" : \"ELIMINAR\"}\r\n            </Button>}\r\n            <Button disabled={!!loading} onClick={this.handleSave} color=\"primary\" variant=\"outlined\" >\r\n                {loading === \"GUARDAR\" ? \"GUARDANDO...\" : \"GUARDAR\"}\r\n            </Button>\r\n            <Button color=\"inherit\" disabled={!!loading} onClick={this.handleClose}>SALIR</Button>\r\n        </>);\r\n\r\n        return (<Modal\r\n            title=\"\"\r\n            onClose={this.handleClose}\r\n            show={show}\r\n            footer={footer}\r\n\r\n        >\r\n            <Input\r\n                value={this.state.nombre || \"\"}\r\n                onChange={this.handleChange}\r\n                name=\"nombre\"\r\n                required\r\n                label=\"Nombre\"\r\n                maxLength={100}\r\n                error={error.nombre}\r\n            />\r\n            <ImageInput\r\n                className=\"card-product-img\"\r\n                onChange={this.handleFile}\r\n                src={this.state.imgSrc}\r\n                title={this.state.nombre}\r\n            />\r\n            <div style={{ textAlign: \"center\", marginBottom: 10 }}>\r\n                <Typography variant=\"caption\">\r\n                    El peso recomendado para la imagen es entre 100 y 200 Kbs.\r\n            </Typography>\r\n            </div>\r\n\r\n            <div style={{ marginLeft: \"auto\", marginRight: \"auto\", textAlign: \"center\" }}>\r\n                <Input type=\"phone\"\r\n                    value={this.state.pvp_final || \"\" as any}\r\n                    onChange={this.handleChange}\r\n                    name=\"pvp_final\"\r\n                    required\r\n                    label=\"Precio Final\"\r\n                    maxLength={10}\r\n                    error={error.pvp_final}\r\n                    style={{ marginRight: 10 }}\r\n                />\r\n                <Input type=\"phone\"\r\n                    value={this.state.cantidad_desde || \"\" as any}\r\n                    onChange={this.handleChange}\r\n                    name=\"cantidad_desde\"\r\n                    label=\"Cantidad mínima\"\r\n                    maxLength={2}\r\n                    error={error.cantidad_desde}\r\n                    style={{}}\r\n                />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 20, textAlign: \"center\", marginLeft: \"auto\", marginRight: \"auto\" }}>\r\n                <FormControlLabel\r\n                    label=\"El producto es un combo\"\r\n                    control={<Switch\r\n                        checked={!!this.state.combo}\r\n                        name=\"combo\"\r\n                        onChange={this.handleChecked}\r\n                    />}\r\n                />\r\n            </div>\r\n\r\n            {this.state.combo && <>\r\n                <Typography style={{ marginTop: 20 }} variant=\"h6\">COMPONENTES</Typography>\r\n                <ItemList\r\n                    dataSource={dataSource}\r\n                    items={componentes}\r\n                    onAdd={this.handleAdd}\r\n                    onRemove={this.handleRemove}\r\n                    IdProp=\"id\"\r\n                    DisplayProp=\"nombre\"\r\n                    SecondaryDisplayProp=\"cantidad\"\r\n                    InputConfig={{ type: \"number\", label: \"Cantidad\" }}\r\n                    name=\"COMPONENTES\"\r\n                />\r\n\r\n                <Typography style={{ marginTop: 20 }} variant=\"h6\">OPCIONES</Typography>\r\n                <ItemList\r\n                    dataSource={dataSource}\r\n                    items={opciones}\r\n                    onAdd={this.handleAdd}\r\n                    onRemove={this.handleRemove}\r\n                    IdProp=\"id\"\r\n                    DisplayProp=\"nombre\"\r\n                    name=\"OPCIONES\"\r\n                />\r\n                <Input type=\"phone\"\r\n                    value={this.state.maxItems || \"\" as any}\r\n                    onChange={this.handleChange}\r\n                    name=\"maxItems\"\r\n                    label=\"Máximo\"\r\n                    maxLength={2}\r\n                    error={error.maxItems}\r\n                    style={{}}\r\n                />\r\n\r\n\r\n                <Typography variant=\"body2\" color=\"secondary\" id=\"ERROR_MESSAGE\" tabIndex={0} style={{ marginTop: 10 }}>\r\n                    {this.state.error && this.state.error.message}\r\n                </Typography>\r\n            </>}\r\n\r\n        </Modal>);\r\n    }\r\n}","import React from \"react\";\r\nimport API from \"../../Services/API\";\r\nimport ProductGrid from \"./ProductGrid\";\r\nimport { Typography, CircularProgress } from \"@material-ui/core\";\r\nimport { Route } from \"react-router-dom\";\r\nimport Edit from \"./Edit\";\r\n\r\nexport default class extends React.Component<any, any> {\r\n    state = {\r\n        data: [] as Product[],\r\n        loading: true,\r\n        error: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.match.path);\r\n        this._Update();\r\n    }\r\n\r\n    _Update = () => {\r\n        API.GetProducts(true)\r\n            .then(data => this.setState({ data, loading: false }))\r\n            .catch(error => this.setState({ loading: false, error }));\r\n    }\r\n    handleClick = e => {\r\n        this.props.history.push(this.props.match.path + \"/\" + e.currentTarget.value);\r\n    }\r\n    handleDone = shouldUpdate => {\r\n        if (shouldUpdate) this._Update();\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    productSorted() {\r\n        return this.state.data.sort((a, b) => a.orden - b.orden);\r\n    }\r\n    handleAction = event => {\r\n        const { name, value } = event.currentTarget;\r\n        var sorted = this.productSorted();\r\n        var exists = sorted.find(x => x.id === +value);\r\n        // NO EXISTE\r\n        if (!exists) return;\r\n        // PRIMERO\r\n        if (name === \"LEFT\" && sorted.indexOf(exists) === 0) return;\r\n        // ULTIMO\r\n        if (name === \"RIGHT\" && sorted.length === (sorted.indexOf(exists) + 1)) return;\r\n\r\n        API.SendProductAction(value, name)\r\n            .then(this._Update)\r\n            .catch(error => this.setState({ error }));\r\n    }\r\n    render() {\r\n        if (this.state.loading)\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h6\">CARGANDO...</Typography>\r\n            </div>);\r\n\r\n        return (<div style={{ width: \"calc(100% - 25px)\", margin: \"auto\", marginTop: 10 }}>\r\n            <ProductGrid\r\n                items={this.productSorted()}\r\n                showNewItem={true}\r\n                visible={true}\r\n                controls=\"LEFT-RIGHT\"\r\n                onActionClick={this.handleAction}\r\n                onCardClick={this.handleClick}\r\n            />\r\n            <Route\r\n                path={this.props.match.path + \"/:id\"}\r\n                children={({ match }) => (\r\n                    <Edit\r\n                        productList={this.state.data}\r\n                        showingID={match && match.params.id}\r\n                        onDone={this.handleDone}\r\n                    />\r\n                )}\r\n            />\r\n        </div>);\r\n    }\r\n}","const UserColumns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"ID\"\r\n    }, {\r\n        name: \"grupo\",\r\n        label: \"Grupo\"\r\n    }, {\r\n        name: \"nombre\",\r\n        label: \"Nombre\"\r\n    }, {\r\n        name: \"username\",\r\n        label: \"Usuario\"\r\n    }, {\r\n        name: \"Rol\",\r\n        label: \"Rol\"\r\n    }, {\r\n        name: \"ultimoPedido\",\r\n        options: { display: \"\" }\r\n    }, {\r\n        name: \"UltimoPedido\",\r\n        label: \"Ultimo Pedido\"\r\n    }, {\r\n        name: \"Estado\",\r\n        label: \"Estado\"\r\n    }\r\n]\r\nexport default UserColumns;","/// <reference path=\"./lib/UserDataFormProps.d.ts\" />\r\nimport React from \"react\";\r\nimport { FormLabel, InputAdornment, TextField, IconButton, Typography, Button, CircularProgress, FormControlLabel, Switch } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\n\r\n\r\nexport default function (props: UserDataFormProps) {\r\n\r\n    const {\r\n        loading, id, error, onSubmit, onChange, formType, editionType,\r\n        ...state } = props;\r\n    const grupos = props.grupos || [];\r\n\r\n    function _onSubmit(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        onSubmit();\r\n    }\r\n\r\n    const editarEstado = formType === \"EDIT\" && editionType !== \"USER\" ? true : null;\r\n    const editarModificarPVPs = (formType === \"EDIT\" && editionType !== \"USER\" && +state.rol === 3) ? true : null;\r\n    const editarTermsAndConds = formType === \"EDIT\" && editionType !== \"USER\";\r\n\r\n    //const editarGrupo = (+state.rol === 1 || state.rol === undefined || state.rol === null);\r\n    //const editarNombreGrupo = +state.rol === 2 && editionType !== \"USER\";\r\n    const editarGrupo = false;\r\n    const editarNombreGrupo = false;\r\n\r\n\r\n    return (<form style={{ margin: \"auto\", maxWidth: 600 }} noValidate onSubmit={_onSubmit}>\r\n        <Typography variant=\"h6\">Información Personal</Typography>\r\n        <Input disabled={loading} error={error && error.nombre} onChange={onChange} value={state.nombre || \"\"} name=\"nombre\" label=\"Nombres Completos\" />\r\n        <Input disabled={loading} error={error && error.identificacion} onChange={onChange} value={state.identificacion || \"\"} name=\"identificacion\" label=\"Identificacion (CI o Pasaporte)\" type=\"phone\" />\r\n        <Input disabled={loading} error={error && error.telefono} onChange={onChange} value={state.telefono || \"\"} name=\"telefono\" label=\"Telefono\" type=\"phone\" />\r\n        <Input disabled={loading} error={error && error.email} onChange={onChange} value={state.email || \"\"} name=\"email\" label=\"Correo Electronico\" type=\"email\" />\r\n        <Input disabled={loading} error={error && error.nacionalidad} onChange={onChange} value={state.nacionalidad || \"\"} name=\"nacionalidad\" label=\"Nacionalidad\" />\r\n        <Input disabled={loading} error={error && error.fechaNacimiento} onChange={onChange} value={state.fechaNacimiento || \"\"} name=\"fechaNacimiento\" label=\"Fecha Nacimiento\" type=\"date\" />\r\n\r\n        <Typography variant=\"h6\" style={{ marginTop: 30 }}>{formType === \"SIGN-IN\" ? \"Agrega tu dirección\" : \"Dirección\"}</Typography>\r\n        <Input disabled={loading} error={error && error.ciudad} onChange={onChange} value={state.ciudad || \"\"} name=\"ciudad\" label=\"Ciudad\" />\r\n        <Input disabled={loading} error={error && error.direccion} onChange={onChange} value={state.direccion || \"\"} name=\"direccion\" label=\"Direccion\" />\r\n\r\n        <Typography variant=\"h6\" style={{ marginTop: 30 }}>{formType === \"SIGN-IN\" ? \"Crea tu Usuario\" : \"Usuario\"}</Typography>\r\n        <Input disabled={loading} error={error && error.username} onChange={onChange} value={state.username || \"\"} name=\"username\" label=\"Usuario\" />\r\n        <Password required={formType === \"SIGN-IN\"} disabled={loading} error={error && error.password} onChange={onChange} value={state.password || \"\"} name=\"password\" label={formType === \"EDIT\" ? \"Nueva contraseña\" : \"Contraseña\"} />\r\n        <Password required={formType === \"SIGN-IN\"} disabled={loading} error={error && error.confirm_password} onChange={onChange} value={state.confirm_password || \"\"} name=\"confirm_password\" label={formType === \"EDIT\" ? \"confirma la nueva contraseña\" : \"Confirma tu contraseña\"} />\r\n\r\n        <Typography variant=\"h6\" style={{ marginTop: 30 }} >{formType === \"SIGN-IN\" ? \"A qué grupo quieres pertenecer?\" : \"Configuración del Usuario\"}</Typography>\r\n\r\n        {formType === \"EDIT\" && id\r\n            ? (<div style={{ marginTop: 10, marginBottom: 10 }}>\r\n                <Typography style={{ display: \"inline\" }} >Rol: </Typography>\r\n                <Typography style={{ display: \"inline\" }} variant=\"button\" >{RolToString(state.rol)}</Typography>\r\n            </div>)\r\n            : (formType === \"EDIT\" && <Input\r\n                select\r\n                disabled={loading}\r\n                value={state.rol || \"\"}\r\n                name=\"rol\"\r\n                label=\"Rol\"\r\n                SelectProps={{ native: true }}\r\n                onChange={onChange}\r\n            >\r\n                <option value=\"1\" >{RolToString(1)}</option>\r\n                <option value=\"2\" >{RolToString(2)}</option>\r\n                <option value=\"3\" >{RolToString(3)}</option>\r\n            </Input>)}\r\n\r\n        {editarGrupo &&\r\n            <Input select\r\n                disabled={loading}\r\n                error={error && error.grupo}\r\n                onChange={onChange}\r\n                value={state.grupo || \"\"}\r\n                name=\"grupo\"\r\n                label=\"\"\r\n                SelectProps={{ native: true }}\r\n            >\r\n                <option value=\"\">- SELECCIONA UN GRUPO -</option>\r\n                {grupos.map(g => <option key={g.id} value={g.id} >{g.id} - {g.nombre}</option>)}\r\n            </Input>}\r\n\r\n        {editarNombreGrupo &&\r\n            <Input\r\n                name=\"grupo\"\r\n                label=\"Grupo\"\r\n                value={state.grupo || \"\"}\r\n                onChange={onChange}\r\n                error={error && error.grupo}\r\n                diabled={loading}\r\n                inputProps={{ maxLength: 50 }}\r\n            />}\r\n\r\n        {editarEstado &&\r\n            <Input\r\n                select\r\n                disabled={loading}\r\n                value={(state.estado === undefined || state.estado === null) ? \"\" : state.estado.toString()}\r\n                name=\"estado\"\r\n                label=\"Estado\"\r\n                SelectProps={{ native: true }}\r\n                onChange={onChange}\r\n            >\r\n                <option value=\"1\" >PENDIENTE</option>\r\n                <option value=\"0\" >APROBADO (Habilitado)</option>\r\n                <option value=\"2\" >RECHAZADO (Deshabilitado)</option>\r\n            </Input>}\r\n\r\n        {editarModificarPVPs &&\r\n            <FormControlLabel\r\n                label=\"Puede modificar precios durante toma de pedido\"\r\n                control={<Switch\r\n                    checked={Boolean(state.editarPVPsdurantePedido)}\r\n                    name=\"editarPVPsdurantePedido\"\r\n                    onChange={onChange}\r\n                />}\r\n            />\r\n        }\r\n\r\n        {editarTermsAndConds &&\r\n            <div style={{ margin: \"auto\", textAlign: \"center\", paddingTop: 20, paddingBottom: 20 }}>\r\n                <FormControlLabel\r\n                    control={<input\r\n                        type=\"checkbox\"\r\n                        onChange={onChange}\r\n                        name=\"mustAcceptTermsAndConds\"\r\n                        checked={state.mustAcceptTermsAndConds || false}\r\n                    />}\r\n                    label=\"Mostrar Aceptar Terminos y Condiciones al iniciar\"\r\n                />\r\n                {state.termsAndCondsAcceptedAt && <div style={{ marginTop: 10 }}>\r\n                    <Typography variant=\"button\">\r\n                        Este usuario ha aceptado los Términos y Condiciones el:\r\n                        {new Date(state.termsAndCondsAcceptedAt).toLocaleString()}\r\n                    </Typography>\r\n                </div>}\r\n            </div>}\r\n\r\n\r\n        {(error && error.guardar) ? <Typography tabIndex={0} id=\"guardar\" color=\"secondary\">{error.guardar}</Typography> : null}\r\n        {formType === \"SIGN-IN\" &&\r\n            (<Button type=\"submit\" color=\"primary\" variant=\"outlined\" fullWidth style={{ marginTop: 20 }} >\r\n                {loading ? <CircularProgress size={20} color=\"inherit\" /> : \"ENVIAR\"}\r\n            </Button>)}\r\n        {props.children}\r\n    </form >\r\n    );\r\n}\r\n\r\nfunction Input(props: {\r\n    name: string,\r\n    value: any,\r\n    onChange: any,\r\n    label: string,\r\n    type?: string,\r\n    disabled?: boolean,\r\n    error?: any,\r\n    [key: string]: any\r\n}) {\r\n    const { error, type, label, ...other_props } = props;\r\n    var input_props: any = { type, inputProps: { id: props.name } };\r\n    if (error) {\r\n        input_props.error = true;\r\n        input_props.helperText = error;\r\n    }\r\n    if (type === \"date\")\r\n        return (<div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\", marginBottom: 5, marginTop: 15 }}>\r\n            <FormLabel style={{ paddingTop: 8, marginRight: 5 }}>{label}</FormLabel>\r\n            <TextField\r\n                required\r\n                {...input_props}\r\n                style={{ flex: 1 }}\r\n                {...other_props}\r\n            >{props.children} </TextField>\r\n        </div>);\r\n\r\n    input_props.label = label;\r\n\r\n    return (<TextField\r\n        fullWidth\r\n        required\r\n        {...input_props}\r\n        style={{ marginTop: 5, marginBottom: 5 }}\r\n        {...other_props}\r\n    />);\r\n}\r\n\r\nfunction Password(props: any) {\r\n    const { error, ...other_props } = props;\r\n    const [show_password, switchShowPassword] = React.useState(false);\r\n    var input_props: any = { inputProps: { id: props.name } };\r\n    if (error) {\r\n        input_props.error = true;\r\n        input_props.helperText = error;\r\n    }\r\n    return (<TextField\r\n        type={show_password ? \"text\" : \"password\"}\r\n        required\r\n        fullWidth\r\n        {...other_props}\r\n        {...input_props}\r\n        style={{ marginTop: 5, marginBottom: 5 }}\r\n        InputProps={{\r\n            endAdornment: <InputAdornment position=\"end\" >\r\n                <IconButton onClick={x => switchShowPassword(!show_password)}>\r\n                    {show_password ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n            </InputAdornment>\r\n        }}\r\n    />);\r\n}\r\n\r\n\r\nfunction RolToString(rol: number) {\r\n    if (+rol === 1) return \"ASESOR/A\";\r\n    if (+rol === 2) return \"GUÍA\";\r\n    if (+rol === 3) return \"ADMINISTRADOR/A\";\r\n    return \"\";\r\n}","interface Options {\r\n    passwordOpcional?: boolean;\r\n}\r\nexport default function ValidateUserForm(state: any, options: Options = {}) {\r\n    const { nombre,\r\n        telefono,\r\n        identificacion,\r\n        email,\r\n        fechaNacimiento,\r\n        nacionalidad,\r\n        ciudad,\r\n        direccion,\r\n        username,\r\n        password,\r\n        grupo,\r\n        confirm_password,\r\n        rol\r\n    } = state;\r\n\r\n    const result: any = {};\r\n\r\n    if (isEmpty(nombre)) result.nombre = \"Digita tu nombre\";\r\n\r\n    if (isEmpty(telefono)) {\r\n        result.telefono = \"Digita tu telefono\";\r\n    } else {\r\n        if (isNaN(parseInt(telefono))) result.telefono = \"El telefono solo puede contener numeros\";\r\n        if (telefono.length <= 5) result.telefono = \"El telefono debe tener mínimo 6 digitos\";\r\n    }\r\n\r\n    if (isEmpty(identificacion)) {\r\n        result.identificacion = \"Digita tu identificacion\";\r\n    }\r\n\r\n    if (isEmpty(email)) {\r\n        result.email = \"Digita tu email\";\r\n    } else {\r\n        if (email.indexOf(\"@\") === -1) result.email = \"El correo es incorrecto\";\r\n        if (email.indexOf(\".\") === -1) result.email = \"El correo es incorrecto\";\r\n    }\r\n\r\n    if (isEmpty(fechaNacimiento)) {\r\n        result.fechaNacimiento = \"Digita tu fecha de nacimiento\";\r\n    } else {\r\n        if (isNaN(+new Date(fechaNacimiento))) result.fechaNacimiento = \"La fecha no es válida\";\r\n    }\r\n\r\n    if (isEmpty(nacionalidad)) result.nacionalidad = \"Digita tu nacionalidad\";\r\n    if (isEmpty(ciudad)) result.ciudad = \"Digita tu ciudad\";\r\n    if (isEmpty(direccion)) result.direccion = \"Digita tu direccion\";\r\n\r\n    if (isEmpty(username)) result.username = \"Digita tu Usuario\";\r\n    if (isEmpty(password)) {\r\n        if (!options.passwordOpcional)\r\n            result.password = \"Digita la contraseña\";\r\n    } else {\r\n        if (password.length < 5) result.password = \"La contraseña debe tener más de 6 caracteres\";\r\n        if (password.trim() !== (confirm_password || \"\").trim()) result.confirm_password = \"Las contraseñas no concuerdan entre si\";\r\n    }\r\n    if (isEmpty(grupo)) {\r\n        if (+rol === 2) result.grupo = \"Digita el nombre de tu grupo\";\r\n        if (+rol === 1 || rol === undefined) result.grupo = \"Selecciona tu grupo\";\r\n    }\r\n\r\n    if (Object.keys(result).length) {\r\n        var key = Object.keys(result)[0];\r\n        FocusOn(key);\r\n        return result;\r\n    }\r\n    return null;\r\n}\r\nexport function FocusOn(id) {\r\n    window.requestAnimationFrame(() => {\r\n        try {\r\n            document.getElementById(id).focus();\r\n        } catch (ex) { }\r\n    });\r\n}\r\nfunction isEmpty(value) {\r\n    return !(value && value.length);\r\n}","import React from \"react\";\r\nimport Modal from \"../Modal\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport UserDataForm from \"./UserDataForm\";\r\nimport ValidateUserForm, { FocusOn } from \"./ValidateUserForm\";\r\nimport API from \"../../Services/API\";\r\n\r\ninterface EditUserProps {\r\n    show: boolean;\r\n    initialData: VisibleUser;\r\n    grupos: any[];\r\n    onClose: (shouldUpdate?: boolean) => void;\r\n}\r\ninterface State extends VisibleUser {\r\n    loading: boolean;\r\n    error: any;\r\n    validarPassword?: boolean;\r\n}\r\n\r\nexport default class EditUserData extends React.Component<EditUserProps, State> {\r\n    state = {} as State;\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        var show = this.props.show;\r\n        var nextShow = nextProps.show;\r\n        if (!show && nextShow) {\r\n            this.setState(prev => {\r\n                const keys = Object.keys(prev);\r\n                // RESETEO LAS PROPIEDADES QUE NO EXISTEN\r\n                var state = {\r\n                    ...keys.reduce((acc, v) => ({ ...acc, [v]: undefined }), {})\r\n                    , ...nextProps.initialData || {}\r\n                }\r\n                if (state.estado === undefined) state.estado = 1;\r\n                if (state.rol === undefined) state.rol = 1;\r\n                state.validarPassword = !state.id;\r\n                return state;\r\n            });\r\n        }\r\n    }\r\n    // MIENTRAS ESTÉ CERRADO, EL COMPONENTE NO SE ACTUALIZARÁ\r\n    shouldComponentUpdate(nextProps) {\r\n        var isOpen = this.props.show;\r\n        var NextisOpen = nextProps.show;\r\n        return (isOpen === NextisOpen && isOpen === false) ? false : true;\r\n    }\r\n\r\n    handleClose = () => {\r\n        if (this.state.loading) return;\r\n        this.props.onClose();\r\n    }\r\n\r\n    handleChange = event => {\r\n        var { name, value, type, checked } = event.currentTarget;\r\n        value = type === \"checkbox\" ? checked : value;\r\n        this.setState({ [name]: value } as any);\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        // divido el objeto para evitar enviar TODOS los parametros secundarios al servidor\r\n        const { loading, error, validarPassword, ...userData } = this.state;\r\n        if (loading) return;\r\n        var validationErrors = ValidateUserForm(userData, {\r\n            passwordOpcional: !validarPassword\r\n        });\r\n        if (validationErrors) return this.setState({ error: validationErrors });\r\n        this.setState({ loading: true });\r\n        API.SaveUser(userData)\r\n            .then(x => this.props.onClose(true))\r\n            .catch(error => this.setState({ error, loading: false },\r\n                () => Object.keys(error).forEach(FocusOn))\r\n            );\r\n    }\r\n    handleDelete = event => {\r\n        if (!this.state.id) return;\r\n        if (this.state.loading) return;\r\n        var isOk = window.confirm(\"Deseas eliminar este usuario?\");\r\n        if (!isOk) return;\r\n        this.setState({ loading: true });\r\n        API.DeleteUser(this.state.id)\r\n            .then(x => this.props.onClose(true))\r\n            .catch(err => this.setState({\r\n                error: { guardar: err.message },\r\n                loading: false\r\n            }, () => window.requestAnimationFrame(\r\n                () => document.getElementById(\"guardar\").focus()\r\n            )));\r\n    }\r\n    render() {\r\n        const { grupos } = this.props;\r\n        const { loading, error, ...state } = this.state;\r\n\r\n        const footer = (<>\r\n            <Button disabled={loading} variant=\"outlined\" onClick={this.handleDelete} color=\"secondary\">ELIMINAR</Button>\r\n            <Button disabled={loading} variant=\"outlined\" onClick={this.handleSubmit} color=\"primary\">GUARDAR</Button>\r\n            <Button disabled={loading} onClick={this.handleClose} color=\"primary\">SALIR</Button>\r\n        </>);\r\n\r\n        return (<Modal show={this.props.show} title=\"Usuario\" footer={footer} onClose={this.handleClose}>\r\n            <UserDataForm\r\n                formType=\"EDIT\"\r\n                editionType=\"ADMIN\"\r\n                grupos={grupos}\r\n                {...state as any}\r\n                loading={loading}\r\n                error={error}\r\n                onSubmit={this.handleSubmit}\r\n                onChange={this.handleChange}\r\n            />\r\n\r\n        </Modal>);\r\n    }\r\n}","import React from \"react\";\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport UserColumns from \"./Columns\";\r\nimport { Tooltip, IconButton, Typography, CircularProgress } from \"@material-ui/core\";\r\nimport { Add, Policy } from \"@material-ui/icons\";\r\nimport API from \"../../Services/API\";\r\nimport Edit from \"./Edit\";\r\nimport { Route } from \"react-router-dom\";\r\nimport RouteMessage from \"../RouteMessage\";\r\n\r\nexport default class Users extends React.Component<UserProps> {\r\n    unmounted = false;\r\n    state = {\r\n        data: [] as VisibleUser[],\r\n        grupos: [],\r\n        loading: true,\r\n        error: null\r\n    }\r\n    componentWillMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.match.path);\r\n        this.FetchData();\r\n    }\r\n    componentWillUnmount() { this.unmounted = true };\r\n    FetchData = () => {\r\n        this.setState({ loading: true });\r\n        Promise.all([API.GetUsers(), API.GetGroups()])\r\n            .then(([data, grupos]) => {\r\n                if (this.unmounted) return;\r\n                this.setState({\r\n                    grupos, data: (data || []).map(x => {\r\n                        if (x.ultimoPedido)\r\n                            x.UltimoPedido = new Date(x.ultimoPedido).toLocaleDateString();\r\n                        return x;\r\n                    }),\r\n                    loading: false\r\n                });\r\n            }).catch(error => {\r\n                this.setState({ loading: false });\r\n                if (this.unmounted) return;\r\n                this.reportError(error.message);\r\n            });\r\n    }\r\n    reportError(b: string, a?: string, focusafter: string = \"\") {\r\n        if (this.unmounted) return;\r\n        var params = new URLSearchParams({\r\n            a: a || \"Ocurrió un problema\",\r\n            b,\r\n            focusafter\r\n        });\r\n        this.props.history.push(this.props.match.path + \"/msg?\" + params.toString());\r\n    }\r\n    handleNew = () => {\r\n        this.props.history.push(this.props.match.path + \"/view/NUEVO\");\r\n    }\r\n    handleClose = update => {\r\n        if (update) this.FetchData();\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n\r\n    handleClick = (arr_data) => {\r\n        var ID = arr_data[0];\r\n        this.props.history.push(this.props.match.path + \"/view/\" + ID);\r\n    }\r\n    handleTermsAndConds = () => {\r\n        var isOk = window.confirm(\"Esta seguro de Mostrar en TODOS los usuarios ACEPTAR TERMINOS Y CONDICIONES al entrar\");\r\n        if (isOk) {\r\n            API.SendUserAction(\"ACCEPT_TERMS_AND_CONDS\", \"all\")\r\n                .then(this.FetchData)\r\n                .catch(ex => this.reportError(ex.message));\r\n        }\r\n    }\r\n    render() {\r\n        const { data, loading, grupos } = this.state;\r\n\r\n        if (loading)\r\n            return (<div style={{ paddingTop: 10, textAlign: \"center\" }}>\r\n                <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                <CircularProgress size={50} color=\"primary\" />\r\n            </div>)\r\n\r\n        return (<div>\r\n            <MUIDataTable\r\n                data={data}\r\n                columns={UserColumns}\r\n                options={{\r\n                    selectableRows: \"none\",\r\n                    onRowClick: this.handleClick,\r\n                    customToolbar: () => {\r\n                        return (<>\r\n                            <Tooltip title=\"Agregar Usuario\" >\r\n                                <IconButton color=\"primary\" onClick={this.handleNew} >\r\n                                    <Add />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                            <div style={{ width: 100, minWidth: 100 }}></div>\r\n                            <Tooltip title=\"Mostrar en TODOS los usuarios ACEPTAR TERMINOS Y CONDICIONES al entrar\">\r\n                                <IconButton color=\"secondary\" onClick={this.handleTermsAndConds}  >\r\n                                    <Policy />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </>);\r\n                    },\r\n                    customSort(data, colIndex: number, order: \"asc\" | \"desc\") {\r\n                        var col = UserColumns[colIndex];\r\n                        return data.sort((a, b) => {\r\n                            var value1 = a.data[colIndex];\r\n                            var value2 = b.data[colIndex];\r\n\r\n                            if (col.name === \"UltimoPedido\") {\r\n                                value1 = (a.data[colIndex - 1] && new Date(a.data[colIndex - 1]).valueOf()) || 0;\r\n                                value2 = (b.data[colIndex - 1] && new Date(b.data[colIndex - 1]).valueOf()) || 0;\r\n                            } else {\r\n                                if (typeof value1 === typeof \"\") value1 = value1.toLowerCase().trim();\r\n                                if (typeof value2 === typeof \"\") value2 = value2.toLowerCase().trim();\r\n                            }\r\n                            if (order === \"desc\") {\r\n                                if (value1 > value2) return -1;\r\n                                if (value2 > value1) return 1;\r\n                                return 0;\r\n                            }\r\n                            if (value1 < value2) return -1;\r\n                            if (value2 < value1) return 1;\r\n                            return 0;\r\n                        });\r\n                    }\r\n                }}\r\n            />\r\n            <Route path={this.props.match.path + \"/msg\"} component={RouteMessage} />\r\n            <Route path={this.props.match.path + \"/view/:id\"} children={({ match }) => <Edit\r\n                show={match && match.params.id ? true : false}\r\n                grupos={grupos}\r\n                initialData={match && data.find(d => d.id === +match.params.id)}\r\n                onClose={this.handleClose}\r\n            />} />\r\n        </div>);\r\n    }\r\n}\r\n\r\ninterface UserProps {\r\n    onMounted?: any,\r\n    match?: any,\r\n    history?: any\r\n}","import React from \"react\";\r\n\r\nexport default class extends React.PureComponent<{\r\n    TextSrc: string;\r\n    onMounted?: (path: any) => void;\r\n    path?: string;\r\n    className?: string;\r\n}> {\r\n    componentWillMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.path);\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"Iframe-Liason-Sheet\" className={\"iframe-border center-block-horiz \" + (this.props.className || \"\")}>\r\n                <div className=\"responsive-wrapper responsive-wrapper-wxh-760x1200\">\r\n                    <iframe\r\n                        title=\"Politicas de Natú\"\r\n                        src={this.props.TextSrc}\r\n                    >Cargando...</iframe>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport PolicyPage from \"../Components/PolicyPage\";\r\nimport { Button, FormControlLabel } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\n\r\nexport default class extends React.Component<{\r\n    onDone: () => void\r\n}> {\r\n    state = {\r\n        checked: false,\r\n        loading: false\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleCheck = this.handleCheck.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n    handleCheck(event) {\r\n        const checked = event.currentTarget.checked;\r\n        this.setState({ checked });\r\n    }\r\n    handleClick(event) {\r\n        if (this.state.loading) return;\r\n        if (!this.state.checked) return;\r\n        this.setState({ loading: true });\r\n\r\n        API.SendUserAction(\"ACCEPT_TERMS_AND_CONDS\")\r\n            .then(this.props.onDone)\r\n            .catch(ex => {\r\n                alert(ex.message);\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n    render() {\r\n        const { checked, loading } = this.state;\r\n        return (<div className=\"full-height\" style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <PolicyPage\r\n                className=\"iframe-wrapper-with-max-height\"\r\n                TextSrc=\"https://docs.google.com/document/d/e/2PACX-1vQM7gflRmudx9mnIJpfZMu5gM3WUl3u_h8RRuyVbb6yErxWTnU_jeu8kcKUJhht3VadenapB4nINf7h/pub?embedded=true\"\r\n            />\r\n            <div style={{\r\n                margin: \"auto\",\r\n                textAlign: \"center\",\r\n                paddingTop: 10,\r\n                paddingBottom: 10,\r\n                width: \"100%\"\r\n            }}>\r\n                <FormControlLabel\r\n                    control={<input\r\n                        disabled={loading}\r\n                        checked={checked}\r\n                        type=\"checkbox\"\r\n                        onChange={this.handleCheck}\r\n                    />}\r\n                    label=\"Acepto los términos y condiciones\"\r\n                />\r\n                <Button\r\n                    disabled={loading || !checked}\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    onClick={this.handleClick}\r\n                >\r\n                    CONTINUAR\r\n                </Button>\r\n            </div>\r\n        </div>);\r\n    }\r\n}","import React from \"react\";\r\nimport UserDataForm from \"./Users/UserDataForm\";\r\nimport API from \"../Services/API\";\r\nimport ValidateUserForm from \"./Users/ValidateUserForm\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nexport default function (props: {\r\n    userId: number,\r\n    onSubmit?: Function\r\n    onMounted?: Function,\r\n    match?: any,\r\n}) {\r\n    const [user, set_user] = React.useState({} as VisibleUser);\r\n    const [status, set_status] = React.useState(\"\" as \"GUARDAR\" | \"\" | \"GUARDADO\");\r\n    const [errores, set_errores] = React.useState(undefined);\r\n\r\n    function userchanged(event: React.ChangeEvent<HTMLInputElement>) {\r\n        set_user({ ...user, [event.target.name]: event.target.value });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        props.onMounted && props.match && props.onMounted(props.match.path);\r\n        API.GetUser(props.userId).then(set_user);\r\n    }, []);\r\n    React.useEffect(() => {\r\n        if (!status) return;\r\n        var validationErrors = ValidateUserForm(user, { passwordOpcional: true });\r\n        if (validationErrors) {\r\n            set_status(\"\");\r\n            set_errores(validationErrors);\r\n            return;\r\n        }\r\n        API.SaveUser(user).then(x => {\r\n            set_status(\"GUARDADO\");\r\n            set_errores(undefined);\r\n            props.onSubmit && props.onSubmit();\r\n        }).catch(ex => {\r\n            set_errores({\r\n                guardar: ex.message\r\n            });\r\n        });\r\n    }, [status]);\r\n\r\n    const isLoading = user.id === undefined || (status === \"GUARDAR\");\r\n\r\n    return <div style={{ padding: 15 }}>\r\n        <UserDataForm\r\n            onSubmit={() => set_status(\"GUARDAR\")}\r\n            onChange={userchanged}\r\n            error={errores}\r\n            formType=\"EDIT\"\r\n            editionType=\"USER\"\r\n            loading={isLoading}\r\n            {...user as any}\r\n        >\r\n            <div style={{ padding: 5 }}>\r\n                <Button fullWidth type=\"submit\" color={status === \"GUARDADO\" ? \"secondary\" : \"primary\"} disabled={isLoading} variant=\"outlined\" >\r\n                    {status === \"GUARDADO\" ? \"Listo!\" : \"Actualizar datos\"}\r\n                </Button>\r\n            </div>\r\n        </UserDataForm>\r\n    </div>\r\n}","import { configureStore } from '@reduxjs/toolkit'\r\nimport Order from \"./OrderReducer\";\r\n\r\nexport const store = configureStore({\r\n    reducer: {\r\n        Order\r\n    },\r\n})\r\n\r\n// Infer the `RootState` and `AppDispatch` types from the store itself\r\nexport type RootState = ReturnType<typeof store.getState>;\r\n// Inferred type: {posts: PostsState, comments: CommentsState, users: UsersState}\r\nexport type AppDispatch = typeof store.dispatch;","import React from 'react';\nimport { Drawer, List, ListItem, ListItemIcon, ListItemText, Typography, CssBaseline, withStyles, AppBar, Toolbar, IconButton, Hidden } from '@material-ui/core';\nimport { ShoppingCart, ListAlt, Menu, Close, Help, Inbox, Report, Category, Policy, PeopleAlt, Person } from \"@material-ui/icons\";\nimport { Link, Switch, Route, Redirect, HashRouter } from \"react-router-dom\";\nimport Order from './../Components/Order';\nimport OrderList from './../Components/OrderList';\nimport Feed from './../Components/Feed';\nimport Reports from './../Components/Reports';\nimport OrderQueue from '../Components/OrderQueue';\nimport Products from '../Components/Products';\nimport Users from '../Components/Users';\nimport PolicyPage from '../Components/PolicyPage';\nimport TermsAndConds from './TermsAndConds';\nimport UserProfile from '../Components/UserProfile';\nimport { Provider } from 'react-redux';\nimport { store } from '../Components/Order/Redux/Store';\n\nconst OPCIONES = [\n  { label: \"Inicio\", Icon: Inbox, path: \"/feed\" }\n  /** NINGUN PATH puede comenzar por order porque dana algunas partes de la logica */\n  , { label: \"Nuevo Pedido\", Icon: ShoppingCart, path: \"/order\" }\n\n  , { label: \"Pedidos\", Icon: ListAlt, path: \"/my-orders\", roles: [1, 2] }\n  , { label: \"Pedidos\", Icon: ListAlt, path: \"/queue\", roles: [3] }\n\n  , { label: \"Politicas\", Icon: Policy, path: \"/policy\" }\n\n  , { label: \"Catálogo\", Icon: Category, path: \"/products\", roles: [3] }\n  , { label: \"Usuarios\", Icon: PeopleAlt, path: \"/users\", roles: [3] }\n\n  , { label: \"Reportes\", Icon: Report, path: \"/reports\", roles: [3] }\n  , { label: \"Perfil\", Icon: Person, path: \"/my-profile\" }\n];\n\nconst drawerWidth = 200;\n\nexport default withStyles(theme => ({\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    flexGrow: 1,\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: drawerWidth\n    }\n  },\n  appBar: {\n    display: \"block\"\n  }\n}))(class Main extends React.Component<MainProps, any> {\n\n  state = {\n    selected: \"\"\n    , editarPVPsdurantePedido: false\n    , isMenuOpen: false\n    , username: \"\"\n    , userId: undefined as number\n    , ParentName: \"\"\n    , token: \"\"\n    , rol: 0\n    , accesos: []\n    , descuentos: [] as Descuento[]\n    , mustAcceptTermsAndConds: false\n    , solicitarDatosAlIniciar: false\n  };\n\n  constructor(props: any) {\n    super(props);\n    this.onMounted = this.onMounted.bind(this);\n    this.handleMenu = this.handleMenu.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n    this.TermsAndCondsAccepted = this.TermsAndCondsAccepted.bind(this);\n    this.state.username = props.username;\n    this.state.ParentName = props.ParentName;\n    this.state.rol = props.rol;\n    this.state.descuentos = props.descuentos || [];\n    this.state.editarPVPsdurantePedido = props.editarPVPsdurantePedido;\n    this.state.mustAcceptTermsAndConds = props.mustAcceptTermsAndConds;\n    this.state.solicitarDatosAlIniciar = props.solicitarDatosAlIniciar;\n    this.state.userId = props.id;\n    this.state.accesos = [...OPCIONES];\n    this.state.accesos = OPCIONES.filter(x => x.roles ? x.roles.indexOf(this.state.rol) >= 0 : true);\n  }\n  onMounted(selected: string) {\n    this.setState({ selected });\n  }\n  handleMenu() {\n    this.setState(prev => {\n      const state = { ...prev };\n      state.isMenuOpen = !state.isMenuOpen;\n      return state;\n    });\n  }\n  TermsAndCondsAccepted() {\n    this.setState({ mustAcceptTermsAndConds: false });\n  }\n  closeMenu() {\n    this.setState({ isMenuOpen: false });\n  }\n  render() {\n    const { selected, isMenuOpen, username, ParentName, mustAcceptTermsAndConds, solicitarDatosAlIniciar } = this.state;\n    const { window, classes } = this.props;\n    const container = window !== undefined ? () => window().document.body : undefined;\n\n    if (mustAcceptTermsAndConds) {\n      return <TermsAndConds onDone={this.TermsAndCondsAccepted} />;\n    }\n    if (solicitarDatosAlIniciar) {\n      return <div style={{ textAlign: \"center\", paddingTop: 15 }}>\n        <Typography variant=\"overline\"  >Hola! estamos actualizando la información de nuestros miembros. Por favor llena los campos que faltan para continuar.</Typography>\n        <UserProfile userId={this.state.userId} onSubmit={() => this.setState({ solicitarDatosAlIniciar: false })} />\n      </div>\n    }\n\n    const drawerChildren = (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\n        <Typography style={{ display: \"block\" }} variant=\"button\">{username}</Typography>\n        <Typography style={{ display: \"block\" }} variant=\"caption\"> {ParentName}</Typography>\n      </div>\n      <List style={{ flex: 1 }}>\n        {this.state.accesos.map(o => (<ListItem onClick={this.closeMenu} selected={selected === o.path} component={Link} to={o.path} button key={o.label}>\n          <ListItemIcon >{<o.Icon />}</ListItemIcon>\n          <ListItemText style={{ flex: 1 }} primary={o.label} />\n        </ListItem>))}\n      </List>\n      <ListItem component=\"a\" target=\"_a\" href=\"https://wa.me/\" >\n        <ListItemIcon> <Help /> </ListItemIcon>\n        <ListItemText primary=\"AYUDA\" />\n      </ListItem>\n    </div>);\n\n    return (<HashRouter basename=\"/app\" >\n      <div style={{ width: \"100%\", height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\n        <CssBaseline />\n        <nav className={classes.drawer}>\n          <Hidden smUp implementation=\"css\" >\n            <Drawer\n              container={container}\n              variant=\"temporary\"\n              anchor={'left'}\n              open={isMenuOpen}\n              onClose={this.closeMenu}\n              classes={{ paper: classes.drawerPaper }}\n              ModalProps={{\n                keepMounted: true, // Better open performance on mobile.\n              }}\n            >\n              <div className={classes.toolbar} style={{ textAlign: \"right\" }}>\n                <IconButton onClick={this.handleMenu}>\n                  <Close />\n                </IconButton>\n              </div>\n              {drawerChildren}\n            </Drawer>\n          </Hidden>\n          <Hidden xsDown implementation=\"css\">\n            <Drawer\n              classes={{ paper: classes.drawerPaper }}\n              variant=\"permanent\"\n              open\n            >\n              {drawerChildren}\n            </Drawer>\n          </Hidden>\n        </nav>\n\n        <Hidden smUp implementation=\"css\" >\n          <AppBar position=\"fixed\" className={classes.x}>\n            <Toolbar>\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open drawer\"\n                edge=\"start\"\n                onClick={this.handleMenu}\n              >\n                <Menu />\n              </IconButton>\n              <Typography style={{ flexGrow: 1 }}>{(OPCIONES.find(x => x.path === selected) || {}).label}</Typography>\n            </Toolbar>\n          </AppBar>\n        </Hidden>\n\n        <main className={classes.content}>\n          <Provider store={store}>\n            <Hidden smUp implementation=\"css\">\n              <div className={classes.toolbar}></div>\n            </Hidden>\n            <Switch>\n              <Route path=\"/feed\" render={props => <Feed {...props} onMounted={this.onMounted} username={this.state.username} rol={this.state.rol} />} />\n              <Route path=\"/order\" render={_ => <Order onMounted={this.onMounted} rol={this.state.rol} descuentos={this.state.descuentos} editablePrices={this.state.editarPVPsdurantePedido} />} />\n              <Route path=\"/my-orders\" render={props => <OrderList {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\n              <Route path=\"/queue\" render={props => <OrderQueue {...props} onMounted={this.onMounted} />} />\n\n              <Route path=\"/policy\" render={props => <PolicyPage\n                onMounted={this.onMounted}\n                path={props.match && props.match.path}\n                TextSrc=\"https://docs.google.com/document/d/e/2PACX-1vSC-0iC8dbpYgrNhlDyRWAQdwdFM4esg40JLZQS-zg6Koix_w1B86KoGI3YPpq-TdNjoJV0eenbcRKv/pub?embedded=true\"\n              />}\n              />\n\n              <Route path=\"/users\" render={props => <Users {...props} onMounted={this.onMounted} />} />\n              <Route path=\"/products\" render={props => <Products {...props} onMounted={this.onMounted} />} />\n\n              <Route path=\"/reports\" render={props => <Reports {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\n              <Route path=\"/my-profile\" render={props => <UserProfile {...props} userId={this.state.userId} onMounted={this.onMounted} />} />\n              <Route path=\"/\" exact><Redirect to=\"/feed\" /></Route>\n            </Switch>\n          </Provider>\n        </main>\n      </div>\n    </HashRouter>)\n  }\n});\n\ninterface MainProps {\n  username: string;\n  rol: number;\n  ParentName?: string;\n  editarPVPsdurantePedido?: boolean;\n\n  token: string;\n  window?: any;\n  classes: any;\n}","import React from \"react\";\r\nimport { Paper, Typography, Divider } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Preferences from \"../Utils/Preferences\";\r\nimport UserDataForm from \"../Components/Users/UserDataForm\";\r\nimport ValidateUserForm, { FocusOn } from \"../Components/Users/ValidateUserForm\";\r\nimport { ROLES } from \"../Globals\";\r\n\r\nexport default class SignIn extends React.Component {\r\n    state = {\r\n        nombre: \"\",\r\n        identificacion: \"\",\r\n        telefono: \"\",\r\n        email: \"\",\r\n        fechaNacimiento: \"\",\r\n        nacionalidad: \"\",\r\n        ciudad: \"\",\r\n        direccion: \"\",\r\n        username: \"\",\r\n        password: \"\",\r\n        confirm_password: \"\",\r\n        error: null,\r\n        grupo: \"\",\r\n        grupos: [],\r\n        loading: false,\r\n        fin_registro: null\r\n    }/*\r\n    componentDidMount() {\r\n        API.GetGroups()\r\n            .then(grupos => this.setState({ grupos }))\r\n            .catch(ex => this.setState({\r\n                error: { grupo: \"No se pudieron cargar los grupos: \" + ex.message }\r\n            }));\r\n    }*/\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleSubmit = () => {\r\n        if (this.state.loading) return;\r\n        var error = ValidateUserForm(this.state);\r\n        if (error) return this.setState({ error });\r\n        this.setState({ loading: true, error: null });\r\n        setTimeout(() => {\r\n            // AQUI POR DEFAULT los envio como ROL=3 (asesores)\r\n            API.SignIn({ ...this.state, rol: ROLES.ASESOR })\r\n                .then(x => {\r\n                    this.setState({ loading: false, fin_registro: x.email });\r\n                    Preferences.Set(\"user\", this.state.username);\r\n                }).catch(error =>\r\n                    this.setState({ error, loading: false },\r\n                        () => {\r\n                            Object.keys(error).forEach(a => {\r\n                                FocusOn(a);\r\n                            });\r\n                        })\r\n                );\r\n        }, 2000);\r\n    }\r\n    render() {\r\n        const { fin_registro, ...state } = this.state;\r\n\r\n        if (fin_registro) return (<div style={{ width: \"100%\", padding: 30, textAlign: \"center\" }}>\r\n            <Typography variant=\"h4\">Registro completado!</Typography>\r\n            <Typography variant=\"subtitle1\">\r\n                Para habilitar tu cuenta entra a tu correo ({fin_registro})\r\n            y abre el enlace que te enviamos.\r\n            </Typography>\r\n            <Typography variant=\"body1\">\r\n                Si no encuentras nuestro correo en tu Bandeja de Entreda, es posible que encuentre en SPAM o NO DESEADOS.\r\n            </Typography>\r\n        </div>);\r\n\r\n        return (<main style={{ width: \"100%\", padding: 10, textAlign: \"center\", backgroundColor: \"#fafafa\" }}>\r\n            <Paper style={{ padding: 20, margin: \"auto\", maxWidth: 600 }}>\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <img style={{ height: 100 }} src=\"./logo.png\" alt=\"Natu - Logo\"></img>\r\n                    <div style={{ flexGrow: 1, margin: 20, textAlign: \"left\" }}>\r\n                        <Typography variant=\"h4\">REGISTRATE</Typography>\r\n                        <Typography component={Link} to=\"/login\" >Ya tienes una cuenta? Inicia sesión aquí</Typography>\r\n                    </div>\r\n                </div>\r\n                <Divider />\r\n                <UserDataForm editionType=\"USER\" {...state} onChange={this.handleChange} onSubmit={this.handleSubmit} formType=\"SIGN-IN\" />\r\n            </Paper>\r\n        </main>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Router, Switch, Route, Redirect } from \"react-router-dom\";\r\nimport { createHashHistory } from \"history\";\r\nimport Login from \"./Components/Login\";\r\nimport Main from \"./Layouts/Main\";\r\nimport API from \"./Services/API\";\r\nimport SignIn from \"./Layouts/SignIn\";\r\nimport Preferences from \"./Utils/Preferences\";\r\n\r\nexport default class App extends React.Component {\r\n    state: { user?: LoggedIn } = { user: undefined };\r\n    history = createHashHistory();\r\n    constructor(props: any) {\r\n        super(props);\r\n        if (props.user) {\r\n            this.state.user = props.user;\r\n            API.KEY = props.user.token;\r\n        }\r\n    }\r\n    handleLoggedIn = (user: LoggedIn) => {\r\n        this.setState({ user });\r\n        // aun esta pendiente, por lo que tiene que ir directamente al curso\r\n        if (user.estado === \"PENDIENTE\")\r\n            return this.history.push(\"/classroom\");\r\n        this.history.push(\"/app\");\r\n        API.KEY = user.token;\r\n        try {\r\n            Preferences.setPrefix(user.id ? (user.id + \"_\") : \"\");\r\n        } catch (ex) {\r\n            console.info(\"Ocurrio un error en Preferences.setPrefix\", ex);\r\n        }\r\n    }\r\n    render() {\r\n        const { user } = this.state;\r\n        var user_routes;\r\n        if (user) {\r\n            switch (user.estado) {\r\n                case \"PENDIENTE\":\r\n                    user_routes = <Route>BIENVENIDO A CLASSROOM</Route>;\r\n                    break;\r\n                case \"RECHAZADO\":\r\n                    user_routes = <Route>USUARIO ESTÁ DESHABILITADO</Route>;\r\n                    break;\r\n                default:\r\n                    user_routes = (<Switch>\r\n                        <Route path=\"/classroom\">BIENVENIDO A CLASSROOM</Route>\r\n                        <Route path=\"/app\" render={() => <Main {...user} />} />\r\n                        <Route>\r\n                            <Redirect to=\"/app\" />\r\n                        </Route>\r\n                    </Switch>);\r\n                    break;\r\n            }\r\n        }\r\n        return (<Router history={this.history} >\r\n            {user\r\n                ? user_routes\r\n                : (<Switch>\r\n                    <Route path=\"/signin\" component={SignIn} />\r\n                    <Route path=\"/recover-password\">AQUI PUEDE RECUPERAR TU CONTRAEÑA</Route>\r\n                    <Route path=\"/login\" render={_ => <Login onLoggedIn={this.handleLoggedIn} />} />\r\n                    <Route>\r\n                        <Redirect to=\"/login\" />\r\n                    </Route>\r\n                </Switch>)\r\n            }\r\n        </Router>)\r\n    }\r\n}","/// <reference path=\"./typings/index.d.ts\" />\nimport \"./lib/ExtendNumber\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\nimport App from \"./App\";\n/** \n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n*/\nReactDOM.render(<React.StrictMode>\n  <App />\n</React.StrictMode>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}