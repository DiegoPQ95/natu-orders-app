{"version":3,"sources":["serviceWorker.ts","Services/API.ts","Utils/Preferences.ts","Components/Login.tsx","Components/Products/ProductCard.tsx","Components/Products/ProductGrid.tsx","Components/Modal.tsx","Components/Order/ProductOptions.tsx","Components/Order/ConfirmOrder.tsx","Utils/Calcs.ts","Utils/Validation.ts","Components/Input.tsx","Components/Order/Data.tsx","Components/ImageInput.tsx","Components/Order/Payment.tsx","Components/Order/Survey.tsx","Components/Message.tsx","Components/RouteMessage.tsx","Components/Order/OrderSave.ts","Utils/ImageReader.ts","Components/Order/ProductSelections.tsx","Components/Order/index.tsx","Services/OrderActions.ts","Components/OrderList/OrderDetails.tsx","Components/OrderList/index.tsx","Components/Feed/LeftRightHeader.tsx","Components/Feed/RankingCard.tsx","Components/Feed/LineCard.tsx","Components/Feed/ProfitCard.tsx","Globals.ts","Components/Feed/PieCard.tsx","Components/Feed/BarCard.tsx","Components/Feed/WithTimeTravel.tsx","Components/Feed/index.tsx","Components/Reports/ProductSales.tsx","Components/Reports/index.tsx","Components/OrderQueue/Queue.tsx","Components/OrderQueue/Columns.ts","Components/OrderQueue/index.tsx","Components/ItemList.tsx","Components/Products/Edit.tsx","Components/Products/index.tsx","Components/Users/Columns.ts","Components/Users/UserDataForm.tsx","Components/Users/ValidateUserForm.ts","Components/Users/Edit.tsx","Components/Users/index.tsx","Components/PolicyPage/index.tsx","Layouts/TermsAndConds.tsx","Components/UserProfile.tsx","Layouts/Main.tsx","Layouts/SignIn.tsx","App.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","DOMAIN","PROJECT_ENVIROMENT","KEY","body","this","F","method","todos","id","action","array_items","semana","year","join","params","param_str","Object","keys","length","URLSearchParams","toString","userId","user","item","URI","options","DEFAULTS","cache","mode","ops","headers","JSON","stringify","fetch","then","response","ok","json","clone","catch","text","x","message","status","statusText","obj","ex","prefix","Preferences","_prefix","_key_","key","localStorage","getItem","parse","value","undefined","value_txt","setItem","removeItem","productoSelecciones","productList","product","find","opciones","list","filter","combo","ID","Login","props","state","loading","pwd","error","isPasswordVisible","handleChange","bind","handleSubmit","handlePassword","API","Get","event","currentTarget","name","setState","setTimeout","requestAnimationFrame","document","getElementById","focus","preventDefault","trim","r","Set","onLoggedIn","prev","style","paddingTop","Card","width","maxWidth","margin","textAlign","onSubmit","CardContent","src","alt","height","minHeight","TextField","inputProps","onChange","label","fullWidth","disabled","defaultStyle","type","InputProps","endAdornment","InputAdornment","position","IconButton","onClick","VisibilityOff","Visibility","Typography","color","variant","Button","Divider","display","component","Link","to","React","Component","marginTop","marginBottom","onCardClick","onActionClick","controls","remainProps","textStyle","CardActionArea","Content","CardActions","Add","cantidad","Remove","ArrowLeft","ArrowRight","CardMedia","className","image","imgSrc","flexDirection","flex","overflow","nombre","editablePrice","Input","onPriceChange","pvp_final","startAdornment","AttachMoney","toFixed","ProductGrid","visible_style","visible","Grid","container","alignItems","spacing","items","map","sm","md","xs","ProductCard","editablePrices","habilitado","textDecoration","showNewItem","Transition","forwardRef","ref","Slide","direction","Modal","show","onClose","fullScreen","title","closeButtonText","Dialog","open","TransitionComponent","AppBar","Toolbar","flexGrow","Close","DialogTitle","DialogContent","children","footer","DialogActions","ItemCard","selectedStyle","selected","border","ProductOptions","selections","handleClose","maxItems","_Item","alert","onDone","showingID","toggleSelect","existsIndex","indexOf","splice","push","nextProps","isOpen","Item","opcionIDs","idOpcion","paddingLeft","paddingRight","ConfirmOrder","show_next_discount","descuento","total","subtotal","porcentaje","valor","mostrarDescuentos","sgte_descuento_porcentaje","List","Row","col1","col2","col3","componentes","showComponentes","LabelDescuentoComponent","ListItem","sgte_descuento_falta","c","Totals","result","i","DocToString","doc","MonthToString","index","ValidateInput","isDigit","twoParts","split","ValidarIdentificacion","documento","numero","vacioEstaBien","exito","mensaje","esValido","isNaN","parseFloat","isNumber","residuo","p1","p2","p3","p4","p5","p6","p7","p8","p9","pri","pub","nat","modulo","d1","substr","d2","d3","d4","d5","d6","d7","d8","d9","d10","d11","d12","d13","digitoVerificador","validadorCedulaRuc","char","maxLength","_props","error_props","helperText","Location","onValueChange","direccion","ciudad","referencia","sector","identificacion","razonSocial","direccion_factura","telefono_factura","email_factura","nombre_contacto","telefono_contacto","identificacion_contacto","documento_contacto","identificacion_e","telefono_e","tel","email_e","email","identificacion_contacto_e","telefono_contacto_e","Paper","padding","marginLeft","multiline","rows","select","SelectProps","native","PureComponent","ImageInput","COMPONENT_ID","Date","valueOf","handleClick","_","click","files","hidden","accept","verticalAlign","Image","marginRight","FormControlLabel","control","Switch","checked","usarImagen","e","inputMode","numeroTransaccion","onImgChange","imgTransaccion","CircularProgress","size","withRouter","txt1","txt2","unblock","history","block","goBack","ActionOrder","autoFocus","Message","info","focusafter","search","get","isEmpty","val","file","Promise","resolve","reject","mb","reader","FileReader","onload","target","onerror","readAsDataURL","ImgFileToObject","base64","base64ArrayBuffer","ext","readAsArrayBuffer","arrayBuffer","chunk","encodings","bytes","Uint8Array","byteLength","byteRemainder","mainLength","ProductSelections","Rows","deletionClick","onDeleteSelection","ListItemText","ListItemSecondaryAction","Delete","PEDIDO_TIMESTAMP","OrderState","handleTab","handleProductAction","handleValueChange","handleDone","handleDescuentoChanged","imageChange","handleAddSelection","handleDeleteSelection","handlePriceChange","guardarBorrador","onMounted","path","tablaDescuentos","descuentos","d","onbeforeunload","isDirty","unblockNavigation","routerWillLeave","GetProducts","updates","stored_direccion","hasOwnProperty","stored_factura","before","choosen","console","hasProductoSelecciones","NormalizeProductoSelecciones","CalcularTotalesEstado","times","avoidIsDirty","currentTab","nextLocation","pathname","confirm","observacion","OrderSave","a","b","results","failed_msg","imageFile","imgJson","_s","imgFileTransaccion","descuentoAplica","detalle","fileTransaccion","SaveOrder","descuentoPorcentaje","descuentoTotal","new_state","sort","orden","exists","_CalcProductList","rol","sorted","montoDesde","founded","desc","next","EstimarDescuento","cant","cantidad_desde","_renderImage","ImageReader","found","remain_state","choosenItems","Tabs","Tab","Payment","RouteMessage","Survey","Fab","bottom","right","OrderActions","prompt","_fechaEnvio","_fechaRecepcion","bienRecibido","observacionRecepcion","fechaEnvio","numeroFactura","detaOrderDetails","shouldRefresh","handleButton","promise","Aprobar","Rechazar","Enviar","Recibir","Facturar","handleCheck","GetOrder","order","img","createElement","appendChild","fechaCreacion","fechaRecepcion","estado","username","survey1","survey2","editable","TextRow","toLocaleString","toLocaleDateString","SectionHeader","objectFit","ev","handleExpand","ActionButtons","loadingAction","showReject","Fragment","Checkbox","required","placeholder","center","data","msg","handleMessage","GetOrders","err","code","refresh","paddingBottom","overflowX","Hidden","xsDown","implementation","borderBottom","button","smUp","EstadoToVariant","toDateString","render","LeftRigthHeader","onBackClick","onNextClick","subtitle","CardHeader","HourglassEmpty","disableTypography","RankingCard","secondColType","colType","value1","value2","date","ahora","getDate","getMonth","getFullYear","toLocaleTimeString","este_dia","DateToString","me","PerfomanceCell","LineCard","legend","maintainAspectRatio","bezierCurve","scales","yAxes","ticks","maxTicksLimit","beginAtZero","xAxes","RawData","remain","labels","values","el","we","datasets","backgroundColor","borderColor","lineTension","fill","ProfitCard","month","reservas","promo","reduceMoney","borderLeft","dense","primary","ROLES","PieCard","BardCard","scaleBeginAtZero","current_week","statName","reduceFn","handleBack","new_week","Stats","updateData","showError","handleNext","desde","start","hasta","end","remainState","TimeTravelRank","WithTimeTravel","PersonalGraph","Feed","unmounted","week_ranking","group_graph","personal_graph","year_sales","product_resume","group_ranking","componentWillUnmount","productResumeReducer","stats","ADMINISTRADOR","grupo","resume","esAdmin","createdAt","profit","ASESOR","ProductSales","toJSON","ProductSalesReport","Table","TableHead","TableRow","TableCell","TableBody","idPedido","fechaEntrega","motivoAnulacion","descripcion","Reports","Queue","columns","changedAt","selectableRows","onRowClick","entrada_columns","aprobado_columns","enviado_columns","recibido_columns","facturado_columns","rechazado_columns","OrderQueue","openOrder","closeOrder","shouldUpdate","loadData","rawData","fechaAnulacion","exact","routeProps","COUNT","ItemList","inputValue","selectValue","showErrors","INPUT_ID","SELECT_ID","handleDelete","onRemove","handleAdd","InputConfig","IdProp","dataSource","onAdd","validateInput","DisplayProp","SecondaryDisplayProp","inputError","selectError","IDs","ListItemIcon","input","Edit","handleChecked","DeleteProduct","_updated","_failed","handleSave","errors","_validar","focusOn","rawFile","SaveProduct","handleFile","idComponente","handleRemove","errorSet","nextId","p","reduce","acc","v","o","tabIndex","_Update","handleAction","productSorted","SendProductAction","UserColumns","formType","editionType","grupos","editarEstado","editarModificarPVPs","editarTermsAndConds","editarGrupo","editarNombreGrupo","noValidate","stopPropagation","telefono","nacionalidad","fechaNacimiento","Password","password","confirm_password","RolToString","g","diabled","editarPVPsdurantePedido","mustAcceptTermsAndConds","termsAndCondsAcceptedAt","guardar","other_props","input_props","FormLabel","useState","show_password","switchShowPassword","ValidateUserForm","parseInt","passwordOpcional","FocusOn","EditUserData","validarPassword","userData","validationErrors","SaveUser","forEach","DeleteUser","nextShow","initialData","UserDataForm","Users","FetchData","all","GetUsers","GetGroups","ultimoPedido","UltimoPedido","reportError","handleNew","update","arr_data","handleTermsAndConds","SendUserAction","customToolbar","Tooltip","minWidth","Policy","customSort","colIndex","col","toLowerCase","TextSrc","set_user","set_status","errores","set_errores","useEffect","GetUser","isLoading","OPCIONES","Icon","Inbox","ShoppingCart","ListAlt","roles","Category","PeopleAlt","Report","Person","withStyles","theme","drawer","breakpoints","up","flexShrink","toolbar","mixins","drawerPaper","content","appBar","isMenuOpen","token","accesos","solicitarDatosAlIniciar","handleMenu","closeMenu","TermsAndCondsAccepted","classes","UserProfile","drawerChildren","href","Help","basename","CssBaseline","Drawer","anchor","paper","ModalProps","keepMounted","aria-label","edge","Menu","SignIn","fin_registro","App","createHashHistory","handleLoggedIn","setPrefix","user_routes","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.239a5cf5.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const DOMAIN = (window as any).PROJECT_ENVIROMENT === \"development\" ? \"http://localhost:9000\" : \"https://natuapp.ue.r.appspot.com\";\r\n\r\nclass API {\r\n    KEY = \"\";\r\n    Login(body) { return this.F(\"user/login\", { body, method: \"POST\" }); }\r\n    GetProducts(todos?: boolean) { return this.F(\"product\" + (todos ? \"?todos=1\" : \"\")); }\r\n    SendProductAction(id: number, action: string) { return this.F(\"product/\" + id, { body: { action }, method: \"PATCH\" }); }\r\n    GetOrders(): Promise<Order[]> { return this.F(\"order\"); }\r\n    GetOrder(id: number): Promise<Order> { return this.F(\"order/\" + id); }\r\n    SaveOrder(body: Order) { return this.F(\"order\", { method: \"POST\", body }); }\r\n    ActionOrder(id: number | string, body: ActionBody) { return this.F(\"order/\" + id, { method: \"PUT\", body }); }\r\n    Stats(array_items, semana?, year?) { return this.F(\"dashboard?data=\" + array_items.join(\",\") + (semana ? (\"&semana=\" + semana) : \"\") + (year ? (\"&year=\" + year) : \"\")); }\r\n    ProductSalesReport(params: { desde: string, hasta: string, estado: any }) {\r\n        var param_str = \"\";\r\n        if (params && Object.keys(params).length)\r\n            param_str = \"?\" + new URLSearchParams(params).toString();\r\n\r\n        return this.F(\"reports/product-sales\" + param_str);\r\n    }\r\n    GetGroups() { return this.F(\"user/groups\"); }\r\n    SignIn(body: any) { return this.F(\"user\", { method: \"POST\", body }); }\r\n\r\n    GetUsers(): Promise<VisibleUser[]> { return this.F(\"user\") }\r\n    GetUser(userId: number): Promise<VisibleUser> { return this.F(\"user/\" + userId) }\r\n    SaveUser(user: VisibleUser) {\r\n        return this.F(\"user\" + (user.id ? `/${user.id}` : \"\"), {\r\n            method: user.id ? \"PUT\" : \"POST\",\r\n            body: user\r\n        });\r\n    }\r\n    DeleteUser(id: number) {\r\n        return this.F(\"user/\" + id, {\r\n            method: \"DELETE\"\r\n        });\r\n    }\r\n    SendUserAction(action: \"ACCEPT_TERMS_AND_CONDS\", id: any = null) {\r\n        return this.F(\"user\" + (id === null ? \"\" : `/${id}`), { method: \"PATCH\", body: { action } });\r\n    }\r\n\r\n    SaveProduct(item: FullProduct) {\r\n        return this.F(\"product\" + (item.id ? (\"/\" + item.id) : \"\"), {\r\n            method: item.id ? \"PUT\" : \"POST\",\r\n            body: item\r\n        });\r\n    }\r\n    DeleteProduct(id: number) {\r\n        return this.F(\"product/\" + id, { method: \"DELETE\" });\r\n    }\r\n\r\n    private F(URI, options: SpecialRequest = {}) {\r\n        const DEFAULTS: any = {\r\n            method: \"GET\",\r\n            cache: \"reload\",\r\n            mode: \"cors\"\r\n        };\r\n        var ops: RequestInit = { ...DEFAULTS, ...options };\r\n        if (!ops.headers) ops.headers = {};\r\n        ops.headers['Content-Type'] = 'application/json';\r\n        ops.headers['Access-Control-Allow-Origin'] = '*';\r\n\r\n        if (this.KEY) {\r\n            if (!ops.headers) ops.headers = {};\r\n            ops.headers[\"Authorization\"] = 'Basic ' + this.KEY;\r\n        }\r\n\r\n        if (ops.body && (typeof ops.body !== typeof \"\"))\r\n            ops.body = JSON.stringify(ops.body);\r\n\r\n        return fetch(DOMAIN + \"/\" + URI, ops).then(response => {\r\n            if (response.ok) return response.json();\r\n            return response.clone().json()\r\n                .catch(() => {\r\n                    return response.text().then(x => {\r\n                        throw {\r\n                            message: x,\r\n                            status: response.status,\r\n                            statusText: response.statusText\r\n                        }\r\n                    })\r\n                }).then(obj => {\r\n                    throw {\r\n                        ...obj,\r\n                        status: response.status,\r\n                        statusText: response.statusText\r\n                    }\r\n                })\r\n        }).catch(ex => {\r\n            if (ex.message === \"Failed to fetch\") {\r\n                throw {\r\n                    message: \"Este servicio no se encuentra disponible por el momento. Intentelo más tarde.\",\r\n                    status: 0\r\n                }\r\n            }\r\n            if (!ex.message) ex.message = ex.statusText;\r\n            throw ex;\r\n        });\r\n    }\r\n}\r\nexport default new API();\r\n\r\ninterface SpecialRequest extends RequestInit {\r\n    body?: any\r\n}\r\n\r\ninterface ActionBody {\r\n    action: \"SURVEY\" | \"APROBAR\" | \"RECHAZAR\" | \"ENVIAR\" | \"RECIBIR\" | \"FACTURAR\",\r\n    value?: any,\r\n    bienRecibido?: boolean,\r\n    observacionRecepcion?: string\r\n}","import { OrderState } from \"../Components/Order\";\r\n\r\nvar prefix = \"\";\r\nexport default class Preferences {\r\n    static setPrefix(_prefix: string) {\r\n        prefix = _prefix || \"\";\r\n    }\r\n    static Get(_key_: \"current_order\" | \"direccion\" | \"user\" | \"factura\") {\r\n        var key = prefix + _key_;\r\n        var x = window.localStorage.getItem(key);\r\n        try {\r\n            return JSON.parse(x);\r\n        } catch (ex) { }\r\n        return x;\r\n    }\r\n    static Set(_key_: \"current_order\" | \"direccion\" | \"user\" | \"factura\", value: any = undefined) {\r\n        var key = prefix + _key_;\r\n        if (value === undefined) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        } else if (value === null) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        }\r\n        var value_txt = value;\r\n        if (typeof value === typeof {})\r\n            value_txt = JSON.stringify(value);\r\n\r\n        window.localStorage.setItem(key, value_txt);\r\n    }\r\n    static NormalizeProductoSelecciones(productoSelecciones: typeof OrderState.prototype.productoSelecciones, productList: Product[]) {\r\n        if (!(productoSelecciones && Object.keys(productoSelecciones).length)) return false;\r\n        for (const key in productoSelecciones) {\r\n            var product = productList.find(x => x.id === +key);\r\n            // el producto no está en la lista, se borra\r\n            if (!product || !(product.opciones && product.opciones.length)) {\r\n                delete productoSelecciones[key];\r\n                continue;\r\n            }\r\n            var list = productoSelecciones[key];\r\n            // algun item no está en la lista, se borra el conjunto\r\n            list = list.filter(combo => {\r\n                var existingItems = combo.filter(ID => productList.find(x => x.id === +ID));\r\n                return existingItems.length === combo.length;\r\n            });\r\n            productoSelecciones[key] = list;\r\n            // la lista no tiene items, se borra\r\n            if (!productoSelecciones[key].length) delete productoSelecciones[key];\r\n        }\r\n        return Object.keys(productoSelecciones).length > 0;\r\n    }\r\n}","import React from \"react\";\r\nimport { Card, CardContent, TextField, Button, InputAdornment, IconButton, Typography, Divider } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Preferences from \"../Utils/Preferences\";\r\n\r\nexport default class Login extends React.Component<{ onLoggedIn: (params: LoggedIn) => void }, LoginState> {\r\n    state = {\r\n        loading: false,\r\n        user: \"\",\r\n        pwd: \"\",\r\n        error: null,\r\n        isPasswordVisible: false\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handlePassword = this.handlePassword.bind(this);\r\n        API.KEY = \"\";\r\n        this.state.user = Preferences.Get(\"user\") || \"\";\r\n    }\r\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({\r\n            [name]: value\r\n        } as any);\r\n    }\r\n    componentDidMount() {\r\n        setTimeout(() =>\r\n            window.requestAnimationFrame(() => {\r\n                if (this.state.user) {\r\n                    document.getElementById(\"password-textfield\").focus();\r\n                } else {\r\n                    document.getElementById(\"user-textfield\").focus();\r\n                }\r\n            }), 100);\r\n    }\r\n    handleSubmit(event: any) {\r\n        event.preventDefault();\r\n        if (this.state.loading) return;\r\n        const user = this.state.user && this.state.user.toString().trim();\r\n        const pwd = this.state.pwd && this.state.pwd.toString().trim();\r\n        if (!user) return this.setState({ error: { message: \"Digite su usuario\" } });\r\n        if (!pwd) return this.setState({ error: { message: \"Digite su contraseña\" } });\r\n        this.setState({ loading: true, error: null });\r\n        API.Login({ user, pwd })\r\n            .then(r => {\r\n                // importante, se debe ejecutar ANTES de onLoggedIn\r\n                Preferences.Set(\"user\", user);\r\n                this.setState({ loading: null });\r\n                this.props.onLoggedIn({ ...r });\r\n            })\r\n            .catch(error => this.setState({ loading: null, error }));\r\n    }\r\n    handlePassword(event) {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.isPasswordVisible = !state.isPasswordVisible;\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const { loading, error, user, pwd, isPasswordVisible } = this.state;\r\n        return (<div style={{ paddingTop: 20 }}>\r\n            <Card style={{ width: \"100%\", maxWidth: 300, margin: \"auto\", textAlign: \"center\" }}>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <CardContent>\r\n                        <img src=\"./logo.png\" alt=\"Logo\"\r\n                            style={{ height: 150, minHeight: 150, width: \"auto\" }} />\r\n                        <TextField\r\n                            inputProps={{ id: \"user-textfield\" }}\r\n                            onChange={this.handleChange}\r\n                            value={user}\r\n                            label=\"Usuario\"\r\n                            name=\"user\"\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                        />\r\n                        <TextField\r\n                            onChange={this.handleChange}\r\n                            value={pwd}\r\n                            name=\"pwd\"\r\n                            label=\"Contraseña\"\r\n                            type={isPasswordVisible ? \"input\" : \"password\"}\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                            inputProps={{ id: \"password-textfield\" }}\r\n                            InputProps={{\r\n                                endAdornment: <InputAdornment position=\"end\">\r\n                                    <IconButton onClick={this.handlePassword}>\r\n                                        {isPasswordVisible ? <VisibilityOff /> : <Visibility />}\r\n                                    </IconButton>\r\n                                </InputAdornment>\r\n                            }}\r\n                        />\r\n                        {error && <Typography color=\"secondary\" variant=\"body1\" style={{ textAlign: \"center\" }}>{error.message}</Typography>}\r\n                        <Button type=\"submit\" variant=\"outlined\" style={defaultStyle} color=\"primary\" disabled={loading} fullWidth >\r\n                            {loading ? \"CARGANDO...\" : \"ENTRAR\"}\r\n                        </Button>\r\n                        <Divider style={{ margin: 20 }} />\r\n                        <Typography style={{ display: \"block\", textAlign: \"center\", margin: 5 }} variant=\"body2\" component={Link} to=\"/signin\">No eres asesor/a natú? Registrate aquí!</Typography>\r\n                    </CardContent>\r\n                </form>\r\n            </Card>\r\n        </div>)\r\n    }\r\n}\r\nconst defaultStyle = {\r\n    marginTop: 10,\r\n    marginBottom: 10\r\n}\r\n\r\nclass LoginState {\r\n    user = \"\";\r\n    pwd = \"\";\r\n    loading = false;\r\n    isPasswordVisible = false;\r\n    error = null;\r\n}","import React from \"react\";\r\nimport { CardMedia, Card, CardContent, Typography, Input, CardActions, InputAdornment, IconButton, CardActionArea } from \"@material-ui/core\";\r\nimport { AttachMoney, Add, Remove, ArrowLeft, ArrowRight } from \"@material-ui/icons\";\r\n\r\ninterface Props extends Product {\r\n    id: any;\r\n    pvp_final: any;\r\n\r\n    editablePrice?: boolean;\r\n    onActionClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n    onPriceChange?: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\r\n    controls?: \"ADD-REMOVE\" | \"LEFT-RIGHT\";\r\n    onCardClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n\r\n    textStyle?: any;\r\n}\r\n\r\nexport default function (props: Props) {\r\n    const { onCardClick, onActionClick, controls, ...remainProps } = props;\r\n\r\n    const item = props;\r\n    const textStyle = props.textStyle || {};\r\n\r\n    return (<Card>\r\n        {onCardClick\r\n            ? (<CardActionArea name=\"card\" value={props.id} onClick={onCardClick}>\r\n                <Content {...remainProps} />\r\n            </CardActionArea>)\r\n            : <Content {...remainProps} />}\r\n\r\n        {controls === \"ADD-REMOVE\"\r\n            && (<CardActions>\r\n                <IconButton onClick={onActionClick} name=\"+\" value={item.id}>\r\n                    <Add />\r\n                </IconButton>\r\n                <Typography variant=\"body1\" style={textStyle}>{item.cantidad}</Typography>\r\n                <IconButton disabled={!(item.cantidad > 0)} onClick={onActionClick} name=\"-\" value={item.id}>\r\n                    <Remove />\r\n                </IconButton>\r\n            </CardActions>)}\r\n\r\n        {controls === \"LEFT-RIGHT\"\r\n            && (<CardActions>\r\n                <IconButton onClick={onActionClick} name=\"LEFT\" value={item.id}>\r\n                    <ArrowLeft />\r\n                </IconButton>\r\n                <IconButton onClick={onActionClick} name=\"RIGHT\" value={item.id}>\r\n                    <ArrowRight />\r\n                </IconButton>\r\n            </CardActions>)}\r\n    </Card>);\r\n}\r\n\r\nfunction Content(props: Props) {\r\n    const item = props;\r\n    const textStyle = props.textStyle || {};\r\n    return (<>\r\n        <CardMedia component=\"img\" className=\"card-product-img\" image={item.imgSrc || \"https://diegopq95.github.io/take-orders/img/default.png\"} />\r\n        <CardContent style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n            <Typography style={{ flex: 1, height: 60, overflow: \"hidden\", ...textStyle }} variant=\"subtitle1\">{item.nombre}</Typography>\r\n\r\n            {props.editablePrice\r\n                ? <Input\r\n                    style={{ width: 100 }}\r\n                    type=\"number\"\r\n                    onChange={props.onPriceChange}\r\n                    value={\"\" + item.pvp_final}\r\n                    name={\"\" + item.id}\r\n                    startAdornment={<InputAdornment position=\"start\" >\r\n                        <AttachMoney />\r\n                    </InputAdornment>}\r\n                />\r\n                : <Typography variant=\"h6\" style={textStyle}>$ {item.pvp_final.toFixed(2)}</Typography>}\r\n\r\n        </CardContent>\r\n    </>);\r\n}","import React from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport ProductCard from \"./ProductCard\";\r\n\r\nexport default function ProductGrid(props: {\r\n    items: FullProduct[];\r\n    visible: boolean;\r\n\r\n    onActionClick?: any;\r\n    editablePrices?: boolean;\r\n    onPriceChange?: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\r\n\r\n    controls?: \"ADD-REMOVE\" | \"LEFT-RIGHT\";\r\n    onCardClick?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n    showNewItem?: boolean;\r\n}) {\r\n    const visible_style: any = {}\r\n    if (!props.visible) visible_style.display = \"none\";\r\n    return (<Grid\r\n        container\r\n        alignItems=\"center\"\r\n        style={{ flex: 1, /*overflow: \"auto\",*/ marginTop: 5, ...visible_style }}\r\n        spacing={3}>\r\n        {props.items.map(item => (\r\n            <Grid item sm={6} md={4} xs={12} key={item.id}>\r\n                <ProductCard\r\n                    {...item}\r\n                    editablePrice={props.editablePrices}\r\n                    onPriceChange={props.onPriceChange}\r\n                    onActionClick={props.onActionClick}\r\n                    onCardClick={props.onCardClick}\r\n                    controls={props.controls}\r\n                    textStyle={item.habilitado ? null : { textDecoration: \"line-through\" }}\r\n                />\r\n            </Grid>\r\n        ))}\r\n        {props.showNewItem && <Grid item sm={6} md={4} xs={12}>\r\n            <ProductCard\r\n                id=\"NUEVO\"\r\n                imgSrc=\"./add.svg\"\r\n                pvp_final={0}\r\n                nombre=\"AGREGA UN NUEVO ITEM\"\r\n                onCardClick={props.onCardClick}\r\n            />\r\n        </Grid>}\r\n    </Grid>)\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, AppBar, Toolbar, Button, Typography, IconButton, DialogActions, DialogTitle } from \"@material-ui/core\";\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Close } from \"@material-ui/icons\";\r\n\r\nconst Transition: any = React.forwardRef(function (props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n} as any);\r\n\r\ninterface ModalProps {\r\n    show: boolean;\r\n    title: string;\r\n    onClose?: (event: {}, reason?: \"backdropClick\" | \"escapeKeyDown\") => void;\r\n    fullScreen?: boolean;\r\n    closeButtonText?: string | \"ICON\";\r\n    children?: any;\r\n    footer?: any;\r\n}\r\n\r\nexport default function Modal(props: ModalProps) {\r\n    const { show, onClose, fullScreen, title } = props;\r\n    var closeButtonText = props.closeButtonText || \"ICON\";\r\n\r\n    return (<Dialog\r\n        maxWidth={fullScreen ? false : \"sm\"}\r\n        fullWidth={true}\r\n        open={show}\r\n        onClose={onClose}\r\n        fullScreen={fullScreen}\r\n        TransitionComponent={Transition}\r\n    >\r\n        {fullScreen\r\n            ? (<AppBar position=\"relative\">\r\n                <Toolbar>\r\n                    <Typography color=\"inherit\" variant=\"h4\" style={{ flexGrow: 1 }}>{title}</Typography>\r\n                    {closeButtonText === \"ICON\"\r\n                        ? (<IconButton onClick={onClose} type=\"button\" color=\"inherit\">\r\n                            <Close />\r\n                        </IconButton>)\r\n                        : (<Button type=\"button\" onClick={onClose} color=\"inherit\">\r\n                            {closeButtonText || \"SALIR\"}\r\n                        </Button>)\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>)\r\n            : (<DialogTitle\r\n                title={title}\r\n            />)}\r\n\r\n        <DialogContent>\r\n            {props.children}\r\n        </DialogContent>\r\n\r\n        {props.footer\r\n            && <DialogActions>\r\n                {props.footer}\r\n            </DialogActions>}\r\n    </Dialog>)\r\n}","import React from \"react\";\r\nimport { Grid, Card, CardMedia, CardActionArea, CardContent, Typography } from \"@material-ui/core\";\r\nimport Modal from \"../Modal\";\r\n\r\ninterface DoneObject {\r\n    id: number,\r\n    selections: number[]\r\n}\r\ninterface Props {\r\n    productList: Product[],\r\n    onDone: (DoneObject?) => void,\r\n    showingID: number,\r\n    match?: any\r\n}\r\n\r\nfunction ItemCard(props) {\r\n    const selectedStyle = props.selected ? { border: \"3px solid #333\" } : null;\r\n    return (<Card>\r\n        <CardActionArea onClick={props.onClick} value={props.id} style={selectedStyle} component=\"button\">\r\n            <CardMedia style={{ minHeight: 150, height: \"25vh\" }}\r\n                image={props.imgSrc}\r\n                title={props.nombre}\r\n            />\r\n            <CardContent>\r\n                <Typography>{props.nombre}</Typography>\r\n            </CardContent>\r\n        </CardActionArea>\r\n    </Card>);\r\n}\r\nexport default class ProductOptions extends React.Component<Props> {\r\n    state = { selections: [] }\r\n    handleClose = () => {\r\n        const Item = this._Item();\r\n        const maxItems = Item.maxItems || 0;\r\n\r\n        if (!this.state.selections.length)\r\n            return this.props.onDone();\r\n\r\n        if (maxItems < this.state.selections.length)\r\n            return alert(\"No se puede continuar selecciona \" + maxItems + \" items\");\r\n\r\n        this.props.onDone({\r\n            selections: this.state.selections,\r\n            id: this.props.showingID\r\n        });\r\n    }\r\n    componentWillReceiveProps(nextProps: Props) {\r\n        if (nextProps.showingID === null || nextProps.showingID === undefined) {\r\n            this.setState({ selections: [] });\r\n        }\r\n    }\r\n    // MIENTRAS ESTÉ CERRADO, EL COMPONENTE NO SE ACTUALIZARÁ\r\n    shouldComponentUpdate(nextProps) {\r\n        var isOpen = !(this.props.showingID === null || this.props.showingID === undefined);\r\n        var NextisOpen = !(nextProps.showingID === null || nextProps.showingID === undefined);\r\n        return (isOpen === NextisOpen && isOpen === false) ? false : true;\r\n    }\r\n    toggleSelect = event => {\r\n        const { value } = event.currentTarget;\r\n        const Item = this._Item();\r\n        const maxItems = Item.maxItems || 0;\r\n        this.setState(prev => {\r\n            const state: any = { ...prev };\r\n            state.selections = [...state.selections];\r\n            var existsIndex = state.selections.indexOf(+value);\r\n            if (existsIndex >= 0) {\r\n                state.selections.splice(existsIndex, 1);\r\n            } else {\r\n                state.selections.push(+value);\r\n                // quito el primero de la lista para agregar este!\r\n                if (state.selections.length > maxItems) {\r\n                    state.selections.splice(0, 1);\r\n                }\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n    _Item(): Product {\r\n        return this.props.productList.find(x => x.id === this.props.showingID) || {} as any;\r\n    }\r\n    render() {\r\n        const show = !(this.props.showingID === undefined || this.props.showingID === null);\r\n        const { selections } = this.state;\r\n        const Item = this._Item();\r\n        const opcionIDs = (Item.opciones || []).map(x => x.idOpcion);\r\n        const productList = this.props.productList.filter(x => opcionIDs.indexOf(x.id) >= 0);\r\n        return (<Modal\r\n            title=\"Crea tu combinación\"\r\n            onClose={this.handleClose}\r\n            show={show}\r\n            fullScreen={true}\r\n            closeButtonText={selections.length ? \"GUARDAR\" : \"SALIR\"}\r\n        >\r\n            <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\r\n                <Typography variant=\"h6\">{Item.nombre}</Typography>\r\n            </div>\r\n            <div style={{ paddingLeft: 10, paddingRight: 10, margin: \"auto\", width: \"calc(100% - 20px)\" }}>\r\n                <Grid container spacing={3}>\r\n                    {productList.map(x =>\r\n                        (<Grid key={x.id} item xs={12} sm={4}>\r\n                            <ItemCard\r\n                                {...x}\r\n                                onClick={this.toggleSelect}\r\n                                selected={selections.indexOf(x.id) >= 0}\r\n                            />\r\n                        </Grid>))}\r\n                </Grid>\r\n            </div>\r\n        </Modal>);\r\n    }\r\n}","import React from \"react\";\r\nimport { List, ListItem, Typography } from \"@material-ui/core\";\r\n\r\ninterface Props {\r\n    items: any[];\r\n    subtotal: number;\r\n    total: number;\r\n    show_next_discount?: boolean;\r\n    showComponentes?: boolean;\r\n    descuento?: DescuentoCalc;\r\n    LabelDescuentoComponent?: React.ReactElement;\r\n}\r\n\r\nexport default function ConfirmOrder(props: Props) {\r\n    var { items, show_next_discount, descuento, total, subtotal } = props;\r\n    if (!descuento) descuento = { porcentaje: 0, valor: 0 };\r\n    const mostrarDescuentos = show_next_discount && descuento.sgte_descuento_porcentaje;\r\n\r\n    return (<List>\r\n        {items.map(item => <Row\r\n            key={item.id}\r\n            col1={item.nombre}\r\n            col2={item.cantidad}\r\n            col3={\"$ \" + (item.pvp_final * item.cantidad).toFixed(2)}\r\n            componentes={props.showComponentes ? item.componentes : null}\r\n        />)}\r\n\r\n        <Row col1=\"SUBTOTAL\" col3={`$ ${subtotal.toFixed(2)}`} />\r\n\r\n        <Row\r\n            col1={props.LabelDescuentoComponent || `TU GANANCIA (${descuento.porcentaje}%) EN ESTE PEDIDO`}\r\n            col3={`$ ${descuento.valor.toFixed(2)}`}\r\n            color=\"primary\"\r\n        />\r\n\r\n        <Row col1={\"TOTAL\"} variant={\"subtitle2\"} col3={`$ ${total.toFixed(2)}`} />\r\n\r\n        {mostrarDescuentos\r\n            && <ListItem>\r\n                <Typography variant=\"subtitle1\" color=\"secondary\">{`Obtén el ${descuento.sgte_descuento_porcentaje}% de descuento agregando ${descuento.sgte_descuento_falta.toFixed(2)} USD más a tu pedido`}</Typography>\r\n            </ListItem>}\r\n    </List>);\r\n}\r\n\r\n\r\nfunction Row(props: {\r\n    col1: any,\r\n    col2?: string | number,\r\n    col3: string,\r\n    color?: any,\r\n    variant?: any,\r\n    componentes?: any[]\r\n}) {\r\n    const { col1, col2, col3, color, variant, componentes } = props;\r\n    return (<ListItem>\r\n        <div style={{ width: \"100%\" }}>\r\n            <div>\r\n                <div style={{ width: \"100%\", display: \"table\" }}>\r\n                    <Typography color={color || \"initial\"} style={{ display: \"table-cell\" }} variant={variant || \"body1\"}>{col1}</Typography>\r\n                    {col2 && <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"15%\", maxWidth: 100, textAlign: \"right\" }} variant={variant || \"body1\"}>{col2}</Typography>}\r\n                    <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"25%\", maxWidth: 100, textAlign: \"right\" }} variant={variant || \"body1\"}>{col3}</Typography>\r\n                </div>\r\n            </div>\r\n\r\n            {(componentes && componentes.length)\r\n                ? (<div>\r\n                    {componentes.map(c => <Row\r\n                        key={c.id}\r\n                        col1={c.nombre}\r\n                        col2={c.cantidad}\r\n                        col3=\"\"\r\n                        variant=\"body2\"\r\n                        componentes={c.componentes}\r\n                    />)}\r\n                </div>)\r\n                : null}\r\n        </div>\r\n    </ListItem>)\r\n}","export function Totals(items: any[]) {\r\n    const result = {\r\n        total: 0,\r\n        cantidad: 0\r\n    }\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n        result.cantidad += item.cantidad;\r\n        result.total += (item.pvp_final * item.cantidad);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function EstimarDescuento(total: number, tablaDescuentos: Descuento[]) {\r\n    // de MAYOR a MENOR\r\n    var sorted = tablaDescuentos.sort((a, b) => b.montoDesde - a.montoDesde);\r\n    var founded = -1;\r\n    var results: DescuentoCalc = {\r\n        porcentaje: 0,\r\n        valor: 0,\r\n        sgte_descuento_porcentaje: 0,\r\n        sgte_descuento_falta: 0\r\n    }\r\n    for (let i = 0; i < sorted.length; i++) {\r\n        const d = sorted[i];\r\n        if (total >= d.montoDesde) {\r\n            founded = i;\r\n            break;\r\n        }\r\n    }\r\n    if (founded >= 0) {\r\n        var desc = sorted[founded];\r\n        results.porcentaje = desc.porcentaje;\r\n        results.valor = (total * desc.porcentaje / 100);\r\n        // si no es el ultimo, busco al siguiente en la tabla\r\n    }\r\n    // si no existe, simulo que es el (MAXIMO+1), es decir esta fuera del rango\r\n    if (founded === -1) founded = sorted.length;\r\n    if ((founded - 1) >= 0) {\r\n        var next = sorted[founded - 1];\r\n        if (next) {\r\n            results.sgte_descuento_falta = next.montoDesde - total;\r\n            results.sgte_descuento_porcentaje = next.porcentaje;\r\n        }\r\n    }\r\n    return results;\r\n}\r\n\r\nexport function DocToString(doc: \"1\" | \"2\" | \"3\") {\r\n    if (!doc) doc = \"\" as any;\r\n    if (doc.toString() === \"1\") return \"RUC\";\r\n    if (doc.toString() === \"2\") return \"Cedula\";\r\n    if (doc.toString() === \"3\") return \"Pasaporte\";\r\n    return \"\";\r\n}\r\n\r\nexport function MonthToString(index: number) {\r\n    var months = [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sept\", \"Oct\", \"Nov\", \"Dic\"];\r\n    return months[index];\r\n}\r\n","export class ValidateInput {\r\n    static tel(value) {\r\n        if (!value) return;\r\n        if (value.length < 7) return \"El número de telefono debe tener al menos 7 digitos\";\r\n        for (let i = 0; i < value.length; i++) {\r\n            if (!(value[i] === \"+\" || isDigit(value[i]) || value[i].trim() === \"\")) {\r\n                return \"El número debe tener uno de estos formatos: '09123456789' o '+5931234567890'\";\r\n            }\r\n        }\r\n    }\r\n    static email(value) {\r\n        if (!value) return;\r\n        if (value.length < 5) return \"El email no está escrito correctamente\";\r\n        let twoParts = value.split(\"@\");\r\n        if (twoParts.length !== 2) return \"El email no está escrito correctamente\";\r\n        if (!(twoParts[1].indexOf(\".\") >= 0)) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\" \") >= 0) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\"\\t\") >= 0) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\"\\r\") >= 0) return \"El email no está escrito correctamente\";\r\n    }\r\n}\r\n\r\nexport function ValidarIdentificacion(value: string, documento: any) {\r\n    if (!value) value = \"\";\r\n    documento = +documento;\r\n    if (documento === 3) { return; }\r\n    if (documento === 1) {\r\n        if (value.length !== 13) return \"Número de RUC debe tener 13 digitos\";\r\n        if (value.length === 13 && value === \"9999999999999\") return;\r\n    }\r\n    if (documento === 2) {\r\n        if (value.length !== 10) return \"Número de Cedula debe tener 10 digitos\";\r\n    }\r\n    return validadorCedulaRuc(value, false);\r\n}\r\nfunction validadorCedulaRuc(numero: string, vacioEstaBien?: boolean, exito?: Function, error?: Function) {\r\n    var mensaje = '';\r\n    var esValido = false;\r\n    if (vacioEstaBien && isEmptyOrNull(numero)) {\r\n        mensaje = '';\r\n        esValido = true;\r\n    } else {\r\n        if (isNumber(numero)) {\r\n\r\n            if (numero.length < 10) {\r\n                mensaje = \"El numero de Cedula debe tener 10 dígitos\";\r\n            } else if (numero.length > 10 && numero.length < 13) {\r\n                mensaje = \"El numero de RUC debe tener 13 dígitos\";\r\n            } else if (numero.length > 13) {\r\n                mensaje = \"El numero tiene más de 13 dígitos\";\r\n            }\r\n\r\n\r\n            var suma = 0;\r\n            var residuo = 0;\r\n            var pri = false;\r\n            var pub = false;\r\n            var nat = false;\r\n            var numeroProvincias = 22;\r\n            var modulo = 11;\r\n\r\n            /* Verifico que el campo no contenga letras */\r\n            var ok = 1;\r\n            /*for (i=0; i numeroProvincias){\r\n            mensaje = 'El código de la provincia (dos primeros dígitos) es inválido'); esValido = fals;\r\n        } */\r\n\r\n            /* Aqui almacenamos los digitos de la cedula en variables. */\r\n            const d1: any = numero.substr(0, 1);\r\n            const d2: any = numero.substr(1, 1);\r\n            const d3: any = numero.substr(2, 1);\r\n            const d4: any = numero.substr(3, 1);\r\n            const d5: any = numero.substr(4, 1);\r\n            const d6: any = numero.substr(5, 1);\r\n            const d7: any = numero.substr(6, 1);\r\n            const d8: any = numero.substr(7, 1);\r\n            const d9: any = numero.substr(8, 1);\r\n            const d10: any = numero.substr(9, 1);\r\n            if (!isDigit(d1)) mensaje = \"El digito 1 no es un número\";\r\n            if (!isDigit(d2)) mensaje = \"El digito 2 no es un número\";\r\n            if (!isDigit(d3)) mensaje = \"El digito 3 no es un número\";\r\n            if (!isDigit(d4)) mensaje = \"El digito 4 no es un número\";\r\n            if (!isDigit(d5)) mensaje = \"El digito 5 no es un número\";\r\n            if (!isDigit(d6)) mensaje = \"El digito 6 no es un número\";\r\n            if (!isDigit(d7)) mensaje = \"El digito 7 no es un número\";\r\n            if (!isDigit(d8)) mensaje = \"El digito 8 no es un número\";\r\n            if (!isDigit(d9)) mensaje = \"El digito 9 no es un número\";\r\n            if (!isDigit(d10)) mensaje = \"El digito 10 no es un número\";\r\n\r\n            if (numero.length > 10) {\r\n                const d11 = numero.substr(10, 1);\r\n                const d12 = numero.substr(10, 1);\r\n                const d13 = numero.substr(10, 1);\r\n                if (d11 && !isDigit(d11)) mensaje = \"El digito 11 no es un número\";\r\n                if (d12 && !isDigit(d12)) mensaje = \"El digito 12 no es un número\";\r\n                if (d13 && !isDigit(d13)) mensaje = \"El digito 13 no es un número\";\r\n            }\r\n\r\n            /* El tercer digito es: */\r\n            /* 9 para sociedades privadas y extranjeros */\r\n            /* 6 para sociedades publicas */\r\n            /* menor que 6 (0,1,2,3,4,5) para personas naturales */\r\n\r\n            let p1;\r\n            let p2;\r\n            let p3;\r\n            let p4;\r\n            let p5;\r\n            let p6;\r\n            let p7;\r\n            let p8;\r\n            let p9;\r\n\r\n            if (d3 == 7 || d3 == 8) {\r\n                mensaje = 'El tercer dígito ingresado es inválido';\r\n                esValido = false;\r\n            }\r\n\r\n            /* Solo para personas naturales (modulo 10) */\r\n            if (d3 < 6) {\r\n                nat = true;\r\n                p1 = d1 * 2; if (p1 >= 10) p1 -= 9;\r\n                p2 = d2 * 1; if (p2 >= 10) p2 -= 9;\r\n                p3 = d3 * 2; if (p3 >= 10) p3 -= 9;\r\n                p4 = d4 * 1; if (p4 >= 10) p4 -= 9;\r\n                p5 = d5 * 2; if (p5 >= 10) p5 -= 9;\r\n                p6 = d6 * 1; if (p6 >= 10) p6 -= 9;\r\n                p7 = d7 * 2; if (p7 >= 10) p7 -= 9;\r\n                p8 = d8 * 1; if (p8 >= 10) p8 -= 9;\r\n                p9 = d9 * 2; if (p9 >= 10) p9 -= 9;\r\n                modulo = 10;\r\n            }\r\n\r\n            /* Solo para sociedades publicas (modulo 11) */\r\n            /* Aqui el digito verficador esta en la posicion 9, en las otras 2 en la pos. 10 */\r\n            else if (d3 == 6) {\r\n                pub = true;\r\n                p1 = d1 * 3;\r\n                p2 = d2 * 2;\r\n                p3 = d3 * 7;\r\n                p4 = d4 * 6;\r\n                p5 = d5 * 5;\r\n                p6 = d6 * 4;\r\n                p7 = d7 * 3;\r\n                p8 = d8 * 2;\r\n                p9 = 0;\r\n            }\r\n\r\n            /* Solo para entidades privadas (modulo 11) */\r\n            else if (d3 == 9) {\r\n                pri = true;\r\n                p1 = d1 * 4;\r\n                p2 = d2 * 3;\r\n                p3 = d3 * 2;\r\n                p4 = d4 * 7;\r\n                p5 = d5 * 6;\r\n                p6 = d6 * 5;\r\n                p7 = d7 * 4;\r\n                p8 = d8 * 3;\r\n                p9 = d9 * 2;\r\n            }\r\n\r\n            suma = p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8 + p9;\r\n            residuo = suma % modulo;\r\n\r\n            /* Si residuo=0, dig.ver.=0, caso contrario 10 - residuo*/\r\n            const digitoVerificador = residuo == 0 ? 0 : modulo - residuo;\r\n\r\n            /* ahora comparamos el elemento de la posicion 10 con el dig. ver.*/\r\n            if (pub == true) {\r\n                if (digitoVerificador != d9) {\r\n                    mensaje = 'El ruc de la empresa del sector público es incorrecto.';\r\n                    esValido = false;\r\n                }\r\n                /* El ruc de las empresas del sector publico terminan con 0001*/\r\n                if (numero.substr(9, 4) != '0001') {\r\n                    mensaje = 'El ruc de la empresa del sector público debe terminar con 0001';\r\n                    esValido = false;\r\n                }\r\n            }\r\n            else if (pri == true) {\r\n                if (digitoVerificador != d10) {\r\n                    mensaje = 'El ruc de la empresa del sector privado es incorrecto.';\r\n                    esValido = false;\r\n                }\r\n                if (numero.substr(10, 3) != '001') {\r\n                    mensaje = 'El ruc de la empresa del sector privado debe terminar con 001';\r\n                    esValido = false;\r\n                }\r\n            }\r\n\r\n            else if (nat == true) {\r\n                if (digitoVerificador != d10) {\r\n                    mensaje = 'El número de cédula de la persona natural es incorrecto.';\r\n                    esValido = false;\r\n                }\r\n                if (numero.length > 10 && numero.substr(10, 3) != '001') {\r\n                    mensaje = 'El ruc de la persona natural debe terminar con 001';\r\n                    esValido = false;\r\n                }\r\n            }\r\n            esValido = true;\r\n\r\n        } else {\r\n            mensaje = 'Este campo solo admite numeros';\r\n        }\r\n    }\r\n\r\n    if (esValido && mensaje == '') {\r\n        if (exito) { exito(); }\r\n        return \"\";\r\n    } else {\r\n        if (mensaje == '') {\r\n            mensaje = 'La cantidad de digitos no corresponde a Cedula o RUC'\r\n        }\r\n        if (error) { error(mensaje); }\r\n        return mensaje;\r\n    }\r\n}\r\n\r\nexport function isDigit(char) { return char >= \"0\" && char <= \"9\"; }\r\nfunction isNumber(obj) { return !isNaN(parseFloat(obj)) }\r\nfunction isEmptyOrNull(obj) {\r\n    if (obj === '' || obj == undefined || obj == null || obj == 'undefined') {\r\n        return true\r\n    } else {\r\n        return false;\r\n    }\r\n}","import React from \"react\";\r\nimport { TextField } from \"@material-ui/core\";\r\n\r\ninterface InputProps {\r\n    type?: string;\r\n    value?: string;\r\n    error?: string;\r\n    name?: string;\r\n    maxLength?: number;\r\n    [key: string]: any;\r\n}\r\n\r\nexport default function Input(props: InputProps) {\r\n    var { error, maxLength, ..._props } = props;\r\n    var error_props: any = {};\r\n\r\n    if (error) {\r\n        error_props.error = true;\r\n        error_props.helperText = error;\r\n    }\r\n\r\n    if (!_props.inputProps) _props.inputProps = {};\r\n    _props.inputProps.id = _props.name;\r\n    if (maxLength) _props.inputProps.maxLength = maxLength;\r\n    if (!_props.style) _props.style = {\r\n        margin: 10,\r\n        width: \"calc(100% - 20px)\"\r\n    }\r\n\r\n    return <TextField\r\n        {...error_props}\r\n        {..._props}\r\n    >{props.children}\r\n    </TextField>\r\n}","import React from \"react\";\r\nimport { TextField, Paper, Grid, Typography } from \"@material-ui/core\";\r\nimport { DocToString } from \"../../Utils/Calcs\";\r\nimport { ValidarIdentificacion, ValidateInput } from \"../../Utils/Validation\";\r\nimport Input from \"../Input\";\r\nexport default class Location extends React.PureComponent<DataProps, {}> {\r\n    /*state = {\r\n        defaultCenter: null\r\n    }\r\n    mapRef;\r\n    virtualMarker;\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleMapMounted = this.handleMapMounted.bind(this);\r\n        this.handleDragStart = this.handleDragStart.bind(this);\r\n        this.handleDragEnd = this.handleDragEnd.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        Geo.currentPosition()\r\n            .then(x => this.setState({ defaultCenter: x }))\r\n    }/*\r\n    handleDragStart() {\r\n        this.virtualMarker.classList.add(\"on-move\");\r\n    }\r\n    handleDragEnd() {\r\n        Geo.PlaceFromCoords(this.mapRef.getCenter())\r\n            .then(d => this.props.onValueChange(\"direccion\", d.inputText))\r\n            .catch(ex => console.warn(\"PlaceFromCoords ERROR\", ex));\r\n        this.virtualMarker.classList.remove(\"on-move\");\r\n    }\r\n    handleMapMounted(map) {\r\n        this.mapRef = map;\r\n        if (!this.mapRef) return;\r\n        this.virtualMarker = document.createElement(\"div\");\r\n        this.virtualMarker.className = \"centerMarker\";\r\n        map.getDiv().appendChild(this.virtualMarker);\r\n    }*/\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.props.onValueChange(name, value);\r\n    }\r\n    render() {\r\n\r\n        const { direccion, ciudad, referencia, sector, visible,\r\n            documento, identificacion, razonSocial,\r\n            direccion_factura, telefono_factura, email_factura,\r\n            nombre_contacto, telefono_contacto, identificacion_contacto, documento_contacto\r\n        } = this.props;\r\n\r\n        let identificacion_e = identificacion\r\n            ? ValidarIdentificacion(identificacion, documento)\r\n            : \"\";\r\n        let telefono_e = ValidateInput.tel(telefono_factura);\r\n        let email_e = ValidateInput.email(email_factura);\r\n\r\n        let identificacion_contacto_e = identificacion_contacto\r\n            ? ValidarIdentificacion(identificacion_contacto, documento_contacto)\r\n            : \"\";\r\n        let telefono_contacto_e = ValidateInput.tel(telefono_contacto);\r\n\r\n        return (<Paper style={{ margin: \"auto\", height: \"100%\", width: \"100%\", padding: 10, marginTop: 10, display: visible ? \"block\" : \"none\" }}>\r\n\r\n            <Grid container >\r\n                <Grid item sm={6}>\r\n                    <Typography variant=\"subtitle1\" style={{ marginLeft: 10 }}>Datos de Envío</Typography>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"nombre_contacto\"\r\n                        inputProps={{ id: \"nombre_contacto\" }}\r\n                        value={nombre_contacto}\r\n                        onChange={this.handleChange}\r\n                        label=\"Nombre *\"\r\n                        multiline\r\n                        rows={2}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        name=\"documento_contacto\"\r\n                        value={documento_contacto}\r\n                        inputProps={{ id: \"documento_contacto\" }}\r\n                        variant=\"outlined\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Documento *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    >\r\n                        <option value=\"1\">{DocToString(\"1\")}</option>\r\n                        <option value=\"2\">{DocToString(\"2\")}</option>\r\n                        <option value=\"3\">{DocToString(\"3\")}</option>\r\n                    </TextField>\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"identificacion_contacto\"\r\n                        value={identificacion_contacto}\r\n                        error={identificacion_contacto_e}\r\n                        onChange={this.handleChange}\r\n                        type=\"phone\"\r\n                        maxLength={20}\r\n                        label={\"Numero de \" + DocToString(documento_contacto) + \" *\"}\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"telefono_contacto\"\r\n                        value={telefono_contacto}\r\n                        error={telefono_contacto_e}\r\n                        maxLength={20}\r\n                        onChange={this.handleChange}\r\n                        label=\"Telefono *\"\r\n                        type=\"phone\"\r\n                    />\r\n\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"ciudad\"\r\n                        inputProps={{ id: \"ciudad\" }}\r\n                        value={ciudad}\r\n                        onChange={this.handleChange}\r\n                        label=\"Ciudad *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"sector\"\r\n                        inputProps={{ id: \"sector\" }}\r\n                        value={sector}\r\n                        onChange={this.handleChange}\r\n                        label=\"Sector *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"direccion\"\r\n                        inputProps={{ id: \"direccion\" }}\r\n                        value={direccion}\r\n                        onChange={this.handleChange}\r\n                        label=\"Direccion Exacta* \"\r\n                        multiline\r\n                        rows={3}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"referencia\"\r\n                        inputProps={{ id: \"referencia\" }}\r\n                        value={referencia}\r\n                        onChange={this.handleChange}\r\n                        label=\"Referencia\"\r\n                        multiline\r\n                        rows={2}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                </Grid>\r\n                <Grid item sm={6}>\r\n                    <Typography style={{ marginLeft: 10 }} variant=\"subtitle1\">Datos de Facturación</Typography>\r\n                    <TextField\r\n                        name=\"documento\"\r\n                        value={documento}\r\n                        inputProps={{ id: \"documento\" }}\r\n                        variant=\"outlined\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Documento *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    >\r\n                        <option value=\"1\">{DocToString(\"1\")}</option>\r\n                        <option value=\"2\">{DocToString(\"2\")}</option>\r\n                        <option value=\"3\">{DocToString(\"3\")}</option>\r\n                    </TextField>\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"identificacion\"\r\n                        value={identificacion}\r\n                        error={identificacion_e}\r\n                        onChange={this.handleChange}\r\n                        type=\"phone\"\r\n                        maxLength={20}\r\n                        label={\"Numero de \" + DocToString(documento) + \" *\"}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"razonSocial\"\r\n                        value={razonSocial}\r\n                        onChange={this.handleChange}\r\n                        label=\"Nombre / Empresa *\"\r\n                        inputProps={{ maxLength: 200, id: \"razonSocial\" }}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"direccion_factura\"\r\n                        value={direccion_factura}\r\n                        onChange={this.handleChange}\r\n                        label=\"Direccion *\"\r\n                        inputProps={{ maxLength: 300, id: \"direccion_factura\" }}\r\n                        multiline\r\n                        rows={2}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"telefono_factura\"\r\n                        value={telefono_factura}\r\n                        error={telefono_e}\r\n                        maxLength={20}\r\n                        onChange={this.handleChange}\r\n                        label=\"Telefono *\"\r\n                        type=\"phone\"\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"email_factura\"\r\n                        value={email_factura}\r\n                        error={email_e}\r\n                        maxLength={50}\r\n                        onChange={this.handleChange}\r\n                        label=\"Email *\"\r\n                        type=\"email\"\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n\r\n        </Paper>)\r\n    }\r\n}\r\n/*\r\nconst Map = withScriptjs(withGoogleMap(function (props: any) {\r\n    const { onMounted, ...google_maps_props } = props;\r\n    return (<GoogleMap\r\n        ref={onMounted}\r\n        {...google_maps_props}\r\n        options={{\r\n            disableDefaultUI: true,\r\n            zoomControl: true,\r\n            clickableIcons: false\r\n        }}\r\n    >\r\n\r\n    </GoogleMap>)\r\n}));\r\n\r\n            {defaultCenter && <Map\r\n                googleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyDxc5H1-I6rNF0PZH4Kiw2YsW0kMCWC9_Q&v=3.exp&libraries=geometry,drawing,places\"\r\n                loadingElement={<div style={{ height: `100%` }} />}\r\n                containerElement={<div id=\"location-map-container\" />}\r\n                mapElement={<div style={{ height: `100%` }} />}\r\n                defaultCenter={defaultCenter}\r\n                defaultZoom={15}\r\n                onMounted={this.handleMapMounted}\r\n                onDragStart={this.handleDragStart}\r\n                onDragEnd={this.handleDragEnd}\r\n            />}\r\n */\r\n\r\ninterface DataProps extends Order {\r\n    visible?: boolean,\r\n    onValueChange: (prop: string, value: string) => void\r\n} ","import React from \"react\";\r\nimport { CardActionArea, CardMedia, Typography } from \"@material-ui/core\";\r\nimport { Image } from \"@material-ui/icons\";\r\ninterface Props {\r\n    src: string;\r\n    onChange: (imageFile?: File) => void;\r\n    className: string;\r\n    title?: string;\r\n}\r\nexport default class ImageInput extends React.PureComponent<Props> {\r\n    COMPONENT_ID = \"IMAGE_INPUT_\" + new Date().valueOf()\r\n    handleClick = _ => {\r\n        document.getElementById(this.COMPONENT_ID).click();\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = event.currentTarget.files;\r\n        this.props.onChange((files && files.length && files[0]) || null);\r\n    }\r\n    render() {\r\n        const { src, title, className } = this.props;\r\n        return (<CardActionArea onClick={this.handleClick} style={{ textAlign: \"center\" }} type=\"button\">\r\n            <input\r\n                hidden={true}\r\n                type=\"file\"\r\n                onChange={this.handleChange}\r\n                accept=\"image/*\"\r\n                id={this.COMPONENT_ID}\r\n            />\r\n            {src\r\n                ? <CardMedia component=\"img\" className={className} title={title || \"Imagen\"} image={src} />\r\n                : <div className={className} style={{ display: \"table\", textAlign: \"center\", margin: \"auto\" }} >\r\n                    <div style={{ display: \"table-cell\", verticalAlign: \"middle\" }}>\r\n                        <Image />\r\n                        <Typography>Agrega una imagen</Typography>\r\n                    </div>\r\n                </div>}\r\n        </CardActionArea>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Paper, Typography, TextField, Button, Divider, CircularProgress, Switch, FormControlLabel } from \"@material-ui/core\";\r\nimport ImageInput from \"../ImageInput\";\r\nexport default function (props: {\r\n    onValueChange: Function;\r\n    numeroTransaccion: string;\r\n    onImgChange: (imageFile?: File) => void;\r\n    usarImagen?: boolean;\r\n    imgTransaccion: string;\r\n    items: any[];\r\n    onDone: any;\r\n    total: number;\r\n    loading: boolean;\r\n    visible: boolean;\r\n}) {\r\n    return (<Paper style={{ maxWidth: 400, padding: 10, marginTop: 10, height: \"100%\", marginLeft: \"auto\", marginRight: \"auto\", display: props.visible ? \"block\" : \"none\" }}>\r\n        <form onSubmit={props.onDone} style={{ textAlign: \"center\" }}>\r\n            <Typography style={{ marginTop: 10, marginBottom: 10, textAlign: \"center\" }} variant=\"h6\">Total a Pagar: ${props.total.toFixed(2)}</Typography>\r\n            <Divider />\r\n            <div style={{ padding: 20 }}>\r\n                <Typography>Realiza tu pago mediante Transferencia o Deposito Bancario a la cuenta:</Typography>\r\n                <Typography>BANCO PICHINCHA Cta. Ahorros #2205511631</Typography>\r\n                <Typography>RUC. 1792627192001</Typography>\r\n                <Typography>COSMETICOSNATU CIA LTDA</Typography>\r\n            </div>\r\n            <FormControlLabel\r\n                label=\"Subir una Imagen\"\r\n                control={<Switch\r\n                    checked={Boolean(props.usarImagen)}\r\n                    onChange={e => props.onValueChange(\"usarImagen\", e.currentTarget.checked)}\r\n                />}\r\n            />\r\n\r\n            {!props.usarImagen && <TextField\r\n                style={{ width: \"calc(100% - 20px)\", margin: 10 }}\r\n                variant=\"outlined\"\r\n                inputMode=\"numeric\"\r\n                inputProps={{ id: \"numeroTransaccion\" }}\r\n                onChange={event => props.onValueChange(\"numeroTransaccion\", event.currentTarget.value)}\r\n                value={props.numeroTransaccion}\r\n                label=\"Numero de Comprobante *\"\r\n            />}\r\n            {props.usarImagen && <ImageInput className=\"transaction-img\" onChange={props.onImgChange} src={props.imgTransaccion} />}\r\n\r\n            <Button type=\"submit\" disabled={props.loading} variant=\"outlined\" color=\"primary\" style={{ margin: 10, width: \"calc(100% - 20px)\" }}>\r\n                {props.loading ? <CircularProgress size={25} /> : \"ENVIAR\"}\r\n            </Button>\r\n        </form>\r\n    </Paper >)\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, TextField, DialogActions, Button, CircularProgress } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(class Survey extends React.Component<any, any> {\r\n    state = { txt1: \"\", txt2: \"\", loading: false, id: \"\" };\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.state.id = props.match.params.id;\r\n    }\r\n    handleChange(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    unblock() { }\r\n    componentDidMount() {\r\n        this.unblock = this.props.history.block = () =>\r\n            this.state.loading ? \"Espera un momento, tu información se está guardando\" : null\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        const { txt1, txt2, loading, id } = this.state;\r\n        if (loading) return;\r\n        if (!txt1 && !txt2) {\r\n            return this.props.history.goBack();\r\n        }\r\n        this.setState({ loading: true });\r\n        API.ActionOrder(id, {\r\n            action: \"SURVEY\",\r\n            value: [txt1, txt2]\r\n        }).then(x => {\r\n            this.setState({ loading: false });\r\n            this.props.history.goBack();\r\n        }).catch(ex => {\r\n            this.setState({ loading: false });\r\n            alert(ex.message);\r\n        });\r\n    }\r\n    handleClose() {\r\n        if (this.state.loading) return;\r\n        this.props.history.goBack();\r\n    }\r\n    render() {\r\n        const { props } = this;\r\n        const { txt1, txt2, loading } = this.state;\r\n        return (<Dialog open={true} onClose={this.handleClose}>\r\n            <form onSubmit={this.handleSubmit}>\r\n                <DialogContent>\r\n                    <Typography style={{ textAlign: \"center\" }} variant=\"h6\" >{props.title}</Typography>\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">Cómo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                    <TextField autoFocus={true} name=\"txt1\" multiline rows={2} label=\"Escribe tu respuesta\" value={txt1} onChange={this.handleChange} fullWidth />\r\n\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">Compártenos alguna experiencia que hayan tenido tus clientes usando nuestros productos</Typography>\r\n                    <TextField name=\"txt2\" multiline rows={3} label=\"Escribe tu respuesta\" value={txt2} onChange={this.handleChange} fullWidth />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button type=\"submit\" variant=\"outlined\" >{loading ? <CircularProgress size={25} /> : \"GUARDAR\"}</Button>\r\n                </DialogActions>\r\n            </form>\r\n        </Dialog>)\r\n    }\r\n});","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, DialogTitle, DialogActions, Button } from \"@material-ui/core\";\r\n\r\nexport default function Message(props: {\r\n    title?: string,\r\n    message?: string,\r\n    info?: string,\r\n    onClose: (ev) => void,\r\n    children?: any\r\n}) {\r\n    const { title, message, info, onClose } = props;\r\n    return (<Dialog open={Boolean(message) || Boolean(props.children)} onClose={onClose}>\r\n        <DialogTitle>{title}</DialogTitle>\r\n        <DialogContent style={{ textAlign: \"center\" }}>\r\n            {props.children || (<div>\r\n                <Typography variant=\"subtitle1\">{message}</Typography>\r\n                <Typography variant=\"body1\">{info}</Typography>\r\n            </div>)}\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button type=\"button\" onClick={props.onClose} >SALIR</Button>\r\n        </DialogActions>\r\n    </Dialog>);\r\n}","import React from \"react\";\r\nimport Message from \"./Message\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(class RouteMessage extends React.PureComponent<any> {\r\n    unblock = () => null;\r\n    componentDidMount() {\r\n        var params: any = new URLSearchParams(this.props.location.search);\r\n        var focusafter = params.get(\"focusafter\");\r\n        if (focusafter)\r\n            this.unblock = this.props.history.block(x => {\r\n                setTimeout(function () {\r\n                    window.requestAnimationFrame(function () {\r\n                        try {\r\n                            document.getElementById(focusafter).focus();\r\n                        } catch (ex) { }\r\n                    });\r\n                }, 100);\r\n            });\r\n    }\r\n    componentWillUnmount() {\r\n        this.unblock && this.unblock();\r\n    }\r\n    render() {\r\n        var params: any = new URLSearchParams(this.props.location.search);\r\n        return (<Message title={params.get(\"a\")} message={params.get(\"b\")} onClose={x => this.props.history.goBack()} />)\r\n    }\r\n});","import API from \"../../Services/API\";\r\nimport { DocToString } from \"../../Utils/Calcs\";\r\nimport { ValidarIdentificacion, ValidateInput } from \"../../Utils/Validation\";\r\nimport Preferences from \"../../Utils/Preferences\";\r\nimport { OrderState } from \"./index\";\r\n\r\nexport function ValidateSave(state: OrderState) {\r\n    var { numeroTransaccion, ciudad, sector, direccion,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        email_factura, loading, usarImagen, imgTransaccion\r\n    } = state;\r\n    if (loading) return { loading: true };\r\n\r\n    var results: any = {};\r\n    var choosen = state.productList.filter(x => x.cantidad || (state.productoSelecciones[x.id] || []).length);\r\n\r\n    if (!choosen.length) return { productList: \"Debes elegir por lo menos un producto\" };\r\n\r\n    if (isEmpty(ciudad)) results.ciudad = \"Digita la ciudad\";\r\n    if (isEmpty(sector)) results.sector = \"Digita el sector\";\r\n    if (isEmpty(direccion)) results.direccion = \"Digita la direccion\";\r\n\r\n\r\n    if (isEmpty(documento_contacto)) results.documento_contacto = \"Selecciona el documento de identificación de la persona que recibe\";\r\n    if (isEmpty(identificacion_contacto)) {\r\n        results.identificacion_contacto = \"Digita el número de \" + DocToString(documento_contacto) + \" de la persona que recibe\";\r\n    } else {\r\n        let error = ValidarIdentificacion(identificacion_contacto, documento_contacto)\r\n        if (error) results.identificacion_contacto = \"La identificación de la persona que recibe es incorrecta: \" + error;\r\n    }\r\n    if (isEmpty(nombre_contacto)) results.nombre_contacto = \"Digita el nombre de la persona que recibe\";\r\n    if (isEmpty(telefono_contacto)) {\r\n        results.telefono_contacto = \"Digita el numero de Telefono de la persona que recibe\";\r\n    } else {\r\n        let error = ValidateInput.tel(telefono_contacto);\r\n        if (error) results.telefono_contacto = \"Telefono de persona que recibe inválido: \" + error;\r\n    }\r\n\r\n\r\n    if (isEmpty(documento)) results.documento = \"Selecciona un documento de identificación\";\r\n    if (isEmpty(identificacion)) {\r\n        results.identificacion = \"Digita el número de \" + DocToString(documento) + \" de facturación\";\r\n    } else {\r\n        let error = ValidarIdentificacion(identificacion, documento)\r\n        if (error) results.identificacion = \"La identificación de facturación está incorrecta: \" + error;\r\n    }\r\n    if (isEmpty(razonSocial)) results.razonSocial = \"Digita la Razon Social de la factura\";\r\n    if (isEmpty(telefono_factura)) {\r\n        results.telefono_factura = \"Digita el número de Telefono de facturación\";\r\n    } else {\r\n        let error = ValidateInput.tel(telefono_factura);\r\n        if (error) results.telefono_factura = \"Telefono de facturación inválido: \" + error;\r\n    }\r\n    if (isEmpty(direccion_factura)) results.direccion_factura = \"Digita la dirección de facturación\";\r\n    if (isEmpty(email_factura)) results.email_factura = \"Digita el email de facturación\";\r\n    if (isEmpty(email_factura)) {\r\n        results.email_factura = \"Digita el email de facturación\";\r\n    } else {\r\n        let error = ValidateInput.email(email_factura);\r\n        if (error) results.email_factura = error;\r\n    }\r\n\r\n    if (usarImagen) {\r\n        if (isEmpty(imgTransaccion)) results.imgTransaccion = \"Agrega la imagen del comprobante de pago\";\r\n    } else {\r\n        if (isEmpty(numeroTransaccion)) results.numeroTransaccion = \"Digita el numero de comprobante de pago\";\r\n    }\r\n\r\n    if (Object.keys(results).length) return results;\r\n    return null;\r\n}\r\nexport function Save(state: OrderState, imgFileTransaccion?) {\r\n    const { ciudad, sector, direccion, observacion, referencia,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n        descuentoAplica, position, subtotal, usarImagen, productoSelecciones\r\n    } = state;\r\n\r\n    var detalle = state.productList.filter(x => x.cantidad || (productoSelecciones[x.id] || []).length);\r\n\r\n    if (usarImagen) {\r\n        var fileTransaccion = imgFileTransaccion;\r\n    } else {\r\n        var numeroTransaccion = state.numeroTransaccion;\r\n    }\r\n    return API.SaveOrder({\r\n        ciudad, sector, direccion, observacion, referencia,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n        detalle,\r\n        descuentoPorcentaje: descuentoAplica && descuentoAplica.porcentaje,\r\n        descuentoTotal: descuentoAplica && descuentoAplica.valor,\r\n        total: subtotal - ((descuentoAplica && descuentoAplica.valor) || 0),\r\n        position, numeroTransaccion, fileTransaccion, productoSelecciones\r\n    }).then(x => {\r\n        Preferences.Set(\"current_order\");\r\n        Preferences.Set(\"direccion\", {\r\n            direccion, ciudad, sector, referencia,\r\n            documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        });\r\n        Preferences.Set(\"factura\", {\r\n            identificacion, documento, razonSocial,\r\n            telefono_factura, direccion_factura, email_factura,\r\n        });\r\n        return {\r\n            currentTab: 0,\r\n            descuentoAplica: null,\r\n            subtotal: 0,\r\n            numeroTransaccion: \"\",\r\n            observacion: \"\",\r\n            position: null,\r\n            loading: null,\r\n            productList: state.productList.map(x => {\r\n                x.cantidad = 0;\r\n                return x;\r\n            }),\r\n            productoSelecciones: {},\r\n            isDirty: false,\r\n            id: x.id\r\n        }\r\n    })\r\n}\r\n\r\nexport function GuardarBorrador(state: OrderState) {\r\n    // actualizar todo!\r\n    var choosen = state.productList.filter(x => x.cantidad).map(x => ({ id: x.id, cantidad: x.cantidad }));\r\n    const { numeroTransaccion, observacion,\r\n        direccion, ciudad, sector, referencia, position,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto, productoSelecciones\r\n    } = state;\r\n    Preferences.Set(\"current_order\", {\r\n        numeroTransaccion, direccion, ciudad, choosen,\r\n        sector, observacion, referencia, position,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto, productoSelecciones\r\n    });\r\n}\r\n\r\nfunction isEmpty(val) {\r\n    return !(val && val.length && val.trim().length);\r\n}","export default function (file: Blob): Promise<string> {\r\n    return new Promise((resolve, reject) => {\r\n        if (file.size > (15 * 1024 * 1024)) {\r\n            var mb = (file.size / 1024 / 1024).toFixed(2);\r\n            return reject({ message: `Tu imagen (${mb} Mb) es muy pesada, selecciona otra máximo de 15 Mb` });\r\n        }\r\n        setTimeout(x => {\r\n            var reader = new FileReader();\r\n            reader.onload = function (event) {\r\n                resolve(event.target.result as string);\r\n            }\r\n            reader.onerror = reject;\r\n            reader.readAsDataURL(file);\r\n        }, 100);\r\n    });\r\n}\r\nexport function ImgFileToObject(file: Blob): Promise<{ ext: string, base64: string }> {\r\n    return new Promise((resolve, reject) => {\r\n        var reader = new FileReader();\r\n        reader.onload = function (event) {\r\n            resolve({\r\n                base64: base64ArrayBuffer(event.target.result as any),\r\n                ext: file.type.split(\"/\")[1]\r\n            });\r\n        }\r\n        reader.onerror = reject;\r\n        reader.readAsArrayBuffer(file);\r\n    });\r\n}\r\n\r\nfunction base64ArrayBuffer(arrayBuffer: ArrayBuffer): string {\r\n    var base64 = ''\r\n    var encodings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\r\n\r\n    var bytes = new Uint8Array(arrayBuffer);\r\n    var byteLength = bytes.byteLength;\r\n    var byteRemainder = byteLength % 3;\r\n    var mainLength = byteLength - byteRemainder;\r\n\r\n    var a, b, c, d;\r\n    var chunk;\r\n\r\n    // Main loop deals with bytes in chunks of 3\r\n    for (var i = 0; i < mainLength; i = i + 3) {\r\n        // Combine the three bytes into a single integer\r\n        chunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2]\r\n\r\n        // Use bitmasks to extract 6-bit segments from the triplet\r\n        a = (chunk & 16515072) >> 18 // 16515072 = (2^6 - 1) << 18\r\n        b = (chunk & 258048) >> 12 // 258048   = (2^6 - 1) << 12\r\n        c = (chunk & 4032) >> 6 // 4032     = (2^6 - 1) << 6\r\n        d = chunk & 63               // 63       = 2^6 - 1\r\n\r\n        // Convert the raw binary segments to the appropriate ASCII encoding\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + encodings[d]\r\n    }\r\n\r\n    // Deal with the remaining bytes and padding\r\n    if (byteRemainder === 1) {\r\n        chunk = bytes[mainLength]\r\n\r\n        a = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2\r\n\r\n        // Set the 4 least significant bits to zero\r\n        b = (chunk & 3) << 4 // 3   = 2^2 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + '=='\r\n    } else if (byteRemainder === 2) {\r\n        chunk = (bytes[mainLength] << 8) | bytes[mainLength + 1]\r\n\r\n        a = (chunk & 64512) >> 10 // 64512 = (2^6 - 1) << 10\r\n        b = (chunk & 1008) >> 4 // 1008  = (2^6 - 1) << 4\r\n\r\n        // Set the 2 least significant bits to zero\r\n        c = (chunk & 15) << 2 // 15    = 2^4 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + '='\r\n    }\r\n    return base64\r\n}","import React from \"react\";\r\nimport { Typography, List, ListItem, ListItemSecondaryAction, ListItemText, IconButton } from \"@material-ui/core\";\r\nimport Modal from \"../Modal\";\r\nimport { Delete } from \"@material-ui/icons\";\r\n\r\ninterface Props {\r\n    productList: Product[];\r\n    selections: { [idProducto: number]: number[][] };\r\n    onDeleteSelection: (DoneObject?) => void;\r\n    id: number;\r\n}\r\n\r\nexport default function ProductSelections(props: Props) {\r\n\r\n    const { id, productList, selections } = props;\r\n    const show = !(id === undefined || id === null);\r\n    const Item = productList.find(x => x.id === +id) || {} as Product;\r\n    const Rows = ((selections || {})[id] || []);\r\n\r\n    function deletionClick(event) {\r\n        const index = +event.currentTarget.value;\r\n        if (index === null || index === undefined || isNaN(index)) return;\r\n        props.onDeleteSelection({ id, index });\r\n    }\r\n\r\n    return (<Modal\r\n        title=\"Elimina una combinación\"\r\n        onClose={props.onDeleteSelection}\r\n        show={show}\r\n        fullScreen={true}\r\n    >\r\n        <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\r\n            <Typography variant=\"h6\">{Item.nombre}</Typography>\r\n        </div>\r\n        <div style={{ paddingLeft: 10, paddingRight: 10, margin: \"auto\", width: \"calc(100% - 20px)\" }}>\r\n            <List>\r\n                {Rows.map((r, index) => <ListItem>\r\n                    <ListItemText>\r\n                        {r.map(idOpcion => <Typography>{(\r\n                            productList.find(x => x.id === idOpcion) ||\r\n                            { nombre: `id ${idOpcion} - Not Found` }\r\n                        ).nombre}\r\n                        </Typography>)}\r\n                    </ListItemText>\r\n                    <ListItemSecondaryAction>\r\n                        <IconButton onClick={deletionClick} value={index}>\r\n                            <Delete />\r\n                        </IconButton>\r\n                    </ListItemSecondaryAction>\r\n                </ListItem>)}\r\n            </List>\r\n        </div>\r\n    </Modal>);\r\n}\r\n","import React from \"react\";\r\nimport { Tabs, Tab, Paper, Typography, CircularProgress, TextField, Fab } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport ProductGrid from \"../Products/ProductGrid\";\r\nimport ProductOptions from \"./ProductOptions\";\r\nimport ConfirmOrder from \"./ConfirmOrder\";\r\nimport Data from \"./Data\";\r\nimport Payment from \"./Payment\";\r\nimport { Totals, EstimarDescuento } from \"../../Utils/Calcs\";\r\nimport Survey from \"./Survey\";\r\nimport Preferences from \"../../Utils/Preferences\";\r\nimport { withRouter, Route } from \"react-router-dom\";\r\nimport RouteMessage from \"../RouteMessage\";\r\nimport * as OrderSave from \"./OrderSave\";\r\nimport { Save } from \"@material-ui/icons\";\r\nimport ImageReader, { ImgFileToObject } from \"../../Utils/ImageReader\";\r\nimport ProductSelections from \"./ProductSelections\";\r\n\r\nexport default withRouter(class Order extends React.PureComponent<OrderProps, OrderState> {\r\n    PEDIDO_TIMESTAMP = new Date().valueOf();\r\n    state = new OrderState()\r\n    unblockNavigation() { }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleTab = this.handleTab.bind(this);\r\n        this.handleProductAction = this.handleProductAction.bind(this);\r\n        this.handleValueChange = this.handleValueChange.bind(this);\r\n        this.handleDone = this.handleDone.bind(this);\r\n        this.handleDescuentoChanged = this.handleDescuentoChanged.bind(this);\r\n        this.imageChange = this.imageChange.bind(this);\r\n        this.handleAddSelection = this.handleAddSelection.bind(this);\r\n        this.handleDeleteSelection = this.handleDeleteSelection.bind(this);\r\n        this.handlePriceChange = this.handlePriceChange.bind(this);\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n\r\n        this.guardarBorrador = this.guardarBorrador.bind(this);\r\n\r\n        if (props.onMounted) props.onMounted(props.match.path);\r\n        this.state.tablaDescuentos = (props.descuentos || [])\r\n            .map((d, index) => {\r\n                d.id = d.id || index;\r\n                return d;\r\n            });\r\n    }\r\n    componentDidMount() {\r\n        window.onbeforeunload = _ =>\r\n            this.state.isDirty\r\n                ? \"Tu pedido aún está incompleto, deseas salir sin guardarlo?\"\r\n                : null;\r\n\r\n        this.unblockNavigation = this.props.history.block(this.routerWillLeave.bind(this));\r\n\r\n        API.GetProducts()\r\n            .then(productList => {\r\n                this.setState({\r\n                    productList: productList.map(x => ({\r\n                        ...x,\r\n                        cantidad: 0\r\n                    })), loading: null\r\n                });\r\n                try {\r\n                    var updates: any = {};\r\n\r\n                    const stored_direccion = Preferences.Get(\"direccion\") || {};\r\n                    for (const key in stored_direccion) {\r\n                        if (this.state.hasOwnProperty(key) && stored_direccion[key]) {\r\n                            updates[key] = stored_direccion[key];\r\n                        }\r\n                    }\r\n\r\n                    const stored_factura = Preferences.Get(\"factura\") || {};\r\n                    for (const key in stored_factura) {\r\n                        if (this.state.hasOwnProperty(key) && stored_factura[key]) {\r\n                            updates[key] = stored_factura[key];\r\n                        }\r\n                    }\r\n\r\n                    const before = Preferences.Get(\"current_order\") || {};\r\n                    for (const key in before) {\r\n                        if (this.state.hasOwnProperty(key)) {\r\n                            updates[key] = before[key];\r\n                        }\r\n                    }\r\n                    if (!(Object.keys(updates).length || (before.choosen && before.choosen.length))) return;\r\n                    //updates.isDirty = Boolean(Object.keys(before).length) || Boolean(before.chooen && before.choosen.lengh);\r\n                    console.info(\"Preferences \", before);\r\n                    console.info(\"updates \", updates);\r\n                    var hasProductoSelecciones = Preferences.NormalizeProductoSelecciones(updates.productoSelecciones, productList);\r\n\r\n                    this.setState(updates, () => {\r\n                        if (!(before.choosen || []).length && hasProductoSelecciones) {\r\n                            this.setState({\r\n                                ...this.CalcularTotalesEstado(this.state)\r\n                            });\r\n                        }\r\n                    });\r\n                    if (!(before.choosen || []).length) return;\r\n                    for (let i = 0; i < before.choosen.length; i++) {\r\n                        const x = before.choosen[i];\r\n                        const cantidad = x.cantidad;\r\n                        const value = +x.id;\r\n                        /** integracion con un producto que ANTES no tenia opciones */\r\n                        const product = this.state.productList.find(item => item.id === value);\r\n                        if (!product) continue;\r\n                        if (product.opciones && product.opciones.length) continue;\r\n                        /** integracion con un producto que ANTES no tenia opciones */\r\n                        for (let times = 0; times < cantidad; times++) {\r\n                            this.handleProductAction({\r\n                                currentTarget: { name: \"+\", value }, avoidIsDirty: true\r\n                            } as any)\r\n                        }\r\n                    }\r\n                } catch (ex) { }\r\n            }).catch(ex => alert(ex.message));\r\n    }\r\n    componentWillUnmount() {\r\n        this.unblockNavigation && this.unblockNavigation();\r\n        window.onbeforeunload && (window.onbeforeunload = undefined);\r\n    }\r\n    handleTab(event: any, currentTab: number) {\r\n        this.setState({ currentTab });\r\n    }\r\n    routerWillLeave(nextLocation?) {\r\n        if (nextLocation && nextLocation.pathname.indexOf(this.props.match.path) === 0) return;\r\n        if (!this.state.isDirty) return;\r\n\r\n        var confirm = window.confirm(\"Tu pedido está incompleto, quieres guardarlo para completarlo después?\");\r\n        if (confirm) {\r\n            this.guardarBorrador();\r\n        } else {\r\n            // actualizar todo!\r\n            Preferences.Set(\"current_order\");\r\n        }\r\n    }\r\n    guardarBorrador(event?) {\r\n        if (event && !this.state.isDirty) return;\r\n        try {\r\n            OrderSave.GuardarBorrador(this.state);\r\n            if (event) {\r\n                this.props.history.push(this.props.match.path + \"/msg?\" + new URLSearchParams({\r\n                    a: \"Listo\",\r\n                    b: \"Tu pedido fue guardado como borrador.\"\r\n                }).toString());\r\n                this.setState({ isDirty: false });\r\n            }\r\n        } catch (ex) { }\r\n    }\r\n    handleDone(event: React.FormEvent) {\r\n        event.preventDefault();\r\n        if (this.state.loading) return;\r\n        this.setState({ loading: \"guardar\" });\r\n\r\n        var error = OrderSave.ValidateSave(this.state);\r\n        if (error) {\r\n            if (error.loading) return;\r\n            if (error.productList) {\r\n                this.failed_msg(error.productList);\r\n                return this.setState({ loading: null });\r\n            }\r\n            var keys = Object.keys(error);\r\n            if (keys.length) {\r\n                this.failed_msg(error[keys[0]], undefined, keys[0]);\r\n                let currentTab = this.state.currentTab;\r\n                if ([\r\n                    \"ciudad\", \"referencia\", \"direccion\", \"sector\",\r\n                    \"identificacion\", \"documento\", \"razonSocial\",\r\n                    \"direccion_factura\", \"telefono_factura\", \"email_factura\",\r\n                    \"identificacion_contacto\", \"nombre_contacto\", \"telefono_contacto\"\r\n                ].indexOf(keys[0]) >= 0) {\r\n                    currentTab = 2\r\n                }\r\n                return this.setState({ loading: null, currentTab });\r\n            }\r\n        }\r\n        if (this.state.imageFile) {\r\n            return ImgFileToObject(this.state.imageFile)\r\n                .then(imgJson => this._s(imgJson));\r\n        }\r\n        this._s();\r\n    }\r\n    private _s(imgJson?) {\r\n        return OrderSave.Save(this.state, imgJson)\r\n            .then(x => {\r\n                const { id, ...new_state } = x;\r\n                this.setState({\r\n                    ...new_state,\r\n                    imgTransaccion: null,\r\n                    imageFile: null\r\n                });\r\n                this.PEDIDO_TIMESTAMP = new Date().valueOf();\r\n                this.props.history.push(this.props.match.path + \"/survey/\" + x.id);\r\n            })\r\n            .catch(ex => {\r\n                this.failed_msg(ex.message + \" \" + (ex.status || \"\"), \"Ocurrió un error\");\r\n                this.setState({ loading: null });\r\n            });\r\n    }\r\n    /** Lista de productos incluyendo los productos seleccionados desde OPCIONES */\r\n    private _CalcProductList(state: OrderState) {\r\n        return state.productList.sort((a, b) => a.orden - b.orden).map(x => {\r\n            if (x.opciones && x.opciones.length) {\r\n                x = { ...x, cantidad: 0 };\r\n                var exists = state.productoSelecciones[x.id];\r\n                // Creo un nuevo articulo, para evitar la Mutación\r\n                if (exists) x.cantidad = exists.length;\r\n            }\r\n            return x;\r\n        });\r\n    }\r\n    private CalcularTotalesEstado(state: OrderState) {\r\n        state.subtotal = Totals(this._CalcProductList(state).filter(x => x.cantidad)).total;\r\n        // en ROL 3, el descuento es MANUAL, no calculado\r\n        if (this.props.rol === 3) {\r\n            if (state.descuentoAplica)\r\n                state.descuentoAplica.valor = (state.subtotal * state.descuentoAplica.porcentaje / 100);\r\n        } else {\r\n            state.descuentoAplica = EstimarDescuento(state.subtotal, state.tablaDescuentos);\r\n        }\r\n        return state;\r\n    }\r\n\r\n    failed_msg(message, title?, focusafter?) {\r\n        var params = new URLSearchParams({\r\n            a: title || \"No se puede guardar\",\r\n            b: message,\r\n            focusafter\r\n        });\r\n        this.props.history.push(this.props.match.path + \"/msg?\" + params.toString());\r\n    }\r\n    handleProductAction(event: React.MouseEvent<HTMLButtonElement>) {\r\n        const { name, value } = event.currentTarget;\r\n        var avoidIsDirty = (event as any).avoidIsDirty;\r\n        this.setState(prev => {\r\n            const state: any = { ...prev };\r\n            state.productList = JSON.parse(JSON.stringify(state.productList));\r\n            var item: Product = state.productList.find((a: any) => a.id === +value);\r\n            var cant: number = (item.cantidad && !isNaN(+item.cantidad) && item.cantidad) || 0;\r\n            const { cantidad_desde } = item;\r\n            if (name === \"+\") {\r\n                if (item.opciones && item.opciones.length && !avoidIsDirty) {\r\n                    this.props.history.push(this.props.match.path + \"/select-product-options/\" + item.id);\r\n                    return state;\r\n                }\r\n                if (cant <= 0 && cantidad_desde) {\r\n                    cant = cantidad_desde;\r\n                } else {\r\n                    cant++;\r\n                }\r\n            } else if (name === \"-\") {\r\n                if (item.opciones && item.opciones.length) {\r\n                    this.props.history.push(this.props.match.path + \"/view-product-options/\" + item.id);\r\n                    return state;\r\n                }\r\n                if (cant <= 10 && cantidad_desde) {\r\n                    cant = 0;\r\n                } else {\r\n                    cant--;\r\n                }\r\n            }\r\n            item.cantidad = cant;\r\n            this.CalcularTotalesEstado(state);\r\n            if (!avoidIsDirty) state.isDirty = true;\r\n            return state;\r\n        });\r\n    }\r\n    handleValueChange(name: string, value: string) {\r\n        this.setState({ [name]: value, isDirty: true } as any);\r\n    }\r\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const { value, name } = event.currentTarget;\r\n        this.setState({ [name]: value, isDirty: true } as any);\r\n    }\r\n    handleDescuentoChanged(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const { value } = event.currentTarget;\r\n        var descuento = this.state.tablaDescuentos.find(x => x.id === +value);\r\n        if (descuento) {\r\n            var total = Totals(this._CalcProductList(this.state)).total;\r\n            this.setState({\r\n                descuentoAplica: {\r\n                    porcentaje: descuento.porcentaje,\r\n                    valor: (total * descuento.porcentaje / 100),\r\n                    id: descuento.id\r\n                }\r\n            });\r\n        }\r\n    }\r\n    imageChange(imageFile) {\r\n        if (!imageFile) return;\r\n        document.getElementById(\"loading-full-message\").style.display = \"block\";\r\n        if (window.requestAnimationFrame) {\r\n            window.requestAnimationFrame(() => this._renderImage(imageFile));\r\n        } else {\r\n            this._renderImage(imageFile);\r\n        }\r\n    }\r\n    private _renderImage(imageFile) {\r\n        ImageReader(imageFile)\r\n            .then(imgTransaccion => {\r\n                this.setState({ imgTransaccion, imageFile }, () => {\r\n                    document.getElementById(\"loading-full-message\").style.display = \"none\";\r\n                });\r\n            }).catch(ex => {\r\n                document.getElementById(\"loading-full-message\").style.display = \"none\";\r\n                this.failed_msg(\"No se pudo cargar tu imagen. \" + ex.message);\r\n            });\r\n    }\r\n    handleAddSelection(result?) {\r\n        if (result) {\r\n            const { id, selections } = result;\r\n            this.setState(prev => {\r\n                const state = { ...prev };\r\n                state.productoSelecciones = JSON.parse(JSON.stringify(state.productoSelecciones));\r\n                if (state.productoSelecciones.hasOwnProperty(id)) {\r\n                    state.productoSelecciones[id].push(selections);\r\n                } else {\r\n                    state.productoSelecciones[id] = [selections];\r\n                }\r\n                this.CalcularTotalesEstado(state);\r\n                state.isDirty = true;\r\n                return state;\r\n            });\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    handleDeleteSelection(result) {\r\n        if (result) {\r\n            const { id, index } = result;\r\n            this.setState(prev => {\r\n                const state = { ...prev };\r\n                state.productoSelecciones = JSON.parse(JSON.stringify(state.productoSelecciones));\r\n                if (state.productoSelecciones.hasOwnProperty(id)) {\r\n                    var exists = state.productoSelecciones[id][index];\r\n                    if (exists) state.productoSelecciones[id].splice(index, 1);\r\n                }\r\n                this.CalcularTotalesEstado(state);\r\n                state.isDirty = true;\r\n                return state;\r\n            });\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    handlePriceChange(event) {\r\n        const id = +event.currentTarget.name;\r\n        const pvp_final = event.currentTarget.value;\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.productList = [...state.productList];\r\n            var found = state.productList.find(x => x.id === id);\r\n            if (found) {\r\n                found.pvp_final = pvp_final;\r\n                //var foundIndex = state.productList.indexOf(found);\r\n                //state.productList[foundIndex] = { ...found, pvp_final };\r\n                this.CalcularTotalesEstado(state);\r\n                state.isDirty = true;\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const {\r\n            currentTab, productoSelecciones, numeroTransaccion, descuentoAplica, subtotal,\r\n            loading, observacion, imgTransaccion, usarImagen, tablaDescuentos,\r\n            ...remain_state\r\n        } = this.state;\r\n\r\n        const productList = this._CalcProductList(this.state);\r\n        const choosenItems = productList.filter((x: any) => x.cantidad);\r\n        const total = subtotal - ((descuentoAplica && descuentoAplica.valor) || 0);\r\n        if (loading === \"articulos\") {\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h6\">CARGANDO...</Typography>\r\n            </div >);\r\n        }\r\n\r\n\r\n        return (<div style={{ width: \"100%\", height: \"calc(100% - 1px)\", display: \"flex\", flexDirection: \"column\", padding: 10, overflow: \"hidden\" }} >\r\n            <Tabs variant=\"fullWidth\" onChange={this.handleTab} value={currentTab}>\r\n                <Tab label=\"Productos\" />\r\n                <Tab label=\"Pedido\" />\r\n                <Tab label=\"Datos\" />\r\n                <Tab label=\"Pago\" />\r\n            </Tabs>\r\n            {currentTab === 0 && <ProductGrid\r\n                visible={true}\r\n                onActionClick={this.handleProductAction}\r\n                items={productList}\r\n                editablePrices={this.props.editablePrices}\r\n                onPriceChange={this.handlePriceChange}\r\n                controls=\"ADD-REMOVE\"\r\n            />}\r\n            {currentTab === 1 && (<Paper style={{ display: currentTab === 1 ? \"block\" : \"none\", textAlign: \"center\", padding: 10, margin: \"auto\", marginTop: 10, width: \"100%\", maxWidth: 500, height: \"100%\" }}>\r\n                <Typography variant=\"h5\">TU PEDIDO</Typography>\r\n                <ConfirmOrder\r\n                    show_next_discount={true}\r\n                    items={choosenItems}\r\n                    descuento={descuentoAplica}\r\n                    subtotal={subtotal}\r\n                    total={total}\r\n                    LabelDescuentoComponent={this.props.rol === 3\r\n                        ? (<TextField\r\n                            onChange={this.handleDescuentoChanged}\r\n                            value={(descuentoAplica && descuentoAplica.id) || \"\"}\r\n                            SelectProps={{ native: true }}\r\n                            select\r\n                        >\r\n                            <option>- SELECCIONA UN DESCUENTO -</option>\r\n                            {tablaDescuentos.map(d => (\r\n                                <option key={d.id} value={d.id}>DESCUENTO {d.porcentaje}%</option>\r\n                            ))}\r\n                        </TextField>)\r\n                        : null}\r\n                />\r\n                <TextField variant=\"outlined\" value={observacion} name=\"observacion\" onChange={this.handleChange} style={{ width: \"calc(100% - 20px)\", margin: 10 }} label=\"Observacion\" multiline rows=\"2\"\r\n                    inputProps={{ maxLength: 300, id: \"observacion\" }}\r\n                />\r\n            </Paper>)}\r\n            {currentTab === 2 && <Data visible={true} {...remain_state} onValueChange={this.handleValueChange} />}\r\n            {currentTab === 3 && <Payment\r\n                visible={true}\r\n                loading={loading === \"guardar\"}\r\n                total={total}\r\n                onDone={this.handleDone}\r\n                items={choosenItems}\r\n                numeroTransaccion={numeroTransaccion}\r\n                imgTransaccion={imgTransaccion}\r\n                onImgChange={this.imageChange}\r\n                usarImagen={usarImagen}\r\n                onValueChange={this.handleValueChange}\r\n            />}\r\n\r\n            <Route path={this.props.match.path + \"/msg\"} component={RouteMessage} />\r\n            <Route path={this.props.match.path + \"/survey/:id\"} component={Survey} />\r\n            <Route path={this.props.match.path + \"/select-product-options/:id\"}\r\n                children={({ match }) => <ProductOptions\r\n                    showingID={match && +match.params.id}\r\n                    onDone={this.handleAddSelection}\r\n                    productList={productList}\r\n                />}\r\n            />\r\n            <Route path={this.props.match.path + \"/view-product-options/:id\"}\r\n                children={({ match }) => <ProductSelections\r\n                    id={match && match.params.id}\r\n                    onDeleteSelection={this.handleDeleteSelection}\r\n                    productList={productList}\r\n                    selections={productoSelecciones}\r\n                />}\r\n            />\r\n            <Fab title=\"Guardar Borrador\" onClick={this.guardarBorrador} variant=\"extended\" style={{ position: \"fixed\", bottom: 20, right: 20 }} color=\"primary\">\r\n                <Save />\r\n            </Fab>\r\n        </div >)\r\n    }\r\n});\r\n\r\n\r\nexport class OrderState {\r\n    currentTab: number = 0;\r\n    productList: Product[] = [];\r\n    productoSelecciones: { [idProducto: number]: number[][] } = {};\r\n    tablaDescuentos: Descuento[] = [];\r\n    descuentoAplica: DescuentoCalc = null;\r\n    subtotal: number = 0;\r\n\r\n    position: { lat: number, lng: number } = null;\r\n    direccion: string = \"\";\r\n    sector: string = \"\";\r\n    ciudad: string = \"\";\r\n    referencia: string = \"\";\r\n\r\n    documento: \"1\" | \"2\" | \"3\" = \"1\";\r\n    razonSocial: string = \"\";\r\n    identificacion: string = \"\";\r\n    telefono_factura: string = \"\";\r\n    direccion_factura: string = \"\";\r\n    email_factura: string = \"\";\r\n\r\n    documento_contacto: \"1\" | \"2\" | \"3\" = \"2\";\r\n    identificacion_contacto: string = \"\";\r\n    nombre_contacto: string = \"\";\r\n    telefono_contacto: string = \"\";\r\n\r\n    observacion: string = \"\";\r\n    numeroTransaccion: string = \"\";\r\n    imgTransaccion = \"\";\r\n    usarImagen = false;\r\n\r\n    loading: \"articulos\" | \"guardar\" = null;\r\n    isDirty?: boolean = false;\r\n    imageFile?: Blob;\r\n}\r\n\r\ninterface OrderProps {\r\n    onMounted: (path: string) => void;\r\n    history: any;\r\n    match: any;\r\n    rol: number;\r\n    editablePrices?: boolean;\r\n    descuentos: Descuento[];\r\n}","import { OrderDetailsState } from \"../Components/OrderList/OrderDetails\";\r\nimport API from \"./API\";\r\n\r\nexport default class OrderActions {\r\n    static Aprobar(state: OrderDetailsState) {\r\n        let cf = window.confirm(\"Esta seguro de APROBAR este pedido?\");\r\n        if (!cf) return;\r\n        return API.ActionOrder(state.id, { action: \"APROBAR\" });\r\n    }\r\n    static Rechazar(state: OrderDetailsState) {\r\n        let cf = window.confirm(\"Esta seguro de RECHAZAR este pedido?\");\r\n        if (!cf) return;\r\n        let value = window.prompt(\"Digita el Motivo de Rechazo\");\r\n        if (!value) return;\r\n        return API.ActionOrder(state.id, { action: \"RECHAZAR\", value })\r\n    }\r\n    static Enviar(state: OrderDetailsState) {\r\n        const { _fechaEnvio } = state;\r\n        if (!(_fechaEnvio && _fechaEnvio.toString().trim().length && !isNaN(+new Date(_fechaEnvio)))) {\r\n            alert(\"Agregue una fecha de envío válida\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"_fechaEnvio\").focus();\r\n            });\r\n            return;\r\n        }\r\n        let cf = window.confirm(\"Esta seguro de seleccionar este pedido como ENVIADO?\");\r\n        if (!cf) return;\r\n        let value = new Date(\r\n            +_fechaEnvio.split(\"-\")[0],\r\n            (+_fechaEnvio.split(\"-\")[1]) - 1,\r\n            +_fechaEnvio.split(\"-\")[2]\r\n        );\r\n        return API.ActionOrder(state.id, { action: \"ENVIAR\", value })\r\n    }\r\n    static Recibir(state: OrderDetailsState) {\r\n        const { _fechaRecepcion, bienRecibido, observacionRecepcion } = state;\r\n        if (!(_fechaRecepcion && _fechaRecepcion.toString().trim().length && !isNaN(+new Date(_fechaRecepcion)))) {\r\n            alert(\"Agregue una fecha de recepción válida\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"_fechaRecepcion\").focus();\r\n            });\r\n            return;\r\n        }\r\n        if (!bienRecibido && !(observacionRecepcion && observacionRecepcion.toString().trim().length)) {\r\n            alert(\"Agregue la observación de la Recepción\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"observacionRecepcion\").focus();\r\n            });\r\n            return;\r\n        }\r\n        let value = new Date(\r\n            +_fechaRecepcion.split(\"-\")[0],\r\n            (+_fechaRecepcion.split(\"-\")[1]) - 1,\r\n            +_fechaRecepcion.split(\"-\")[2]\r\n        );\r\n        if (value.valueOf() < new Date(state.fechaEnvio).valueOf()) {\r\n            alert(\"La fecha de Recepción no puede ser menor a la fecha de envío\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"_fechaRecepcion\").focus();\r\n            });\r\n        }\r\n\r\n        let cf = window.confirm(\"Esta seguro de seleccionar este pedido como RECIBIDO?\");\r\n        if (!cf) return;\r\n\r\n        return API.ActionOrder(state.id, {\r\n            action: \"RECIBIR\",\r\n            value,\r\n            bienRecibido,\r\n            observacionRecepcion\r\n        });\r\n    }\r\n    static Facturar(state: OrderDetailsState) {\r\n        if (!(state.numeroFactura && state.numeroFactura.toString().trim().length)) {\r\n            alert(\"Agregue el número de factura\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"numeroFactura\").focus();\r\n            });\r\n            return;\r\n        }\r\n        let cf = window.confirm(\"Esta seguro de FACTURAR este pedido?\");\r\n        if (!cf) return;\r\n        return API.ActionOrder(state.id, { action: \"FACTURAR\", value: state.numeroFactura });\r\n    }\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, DialogTitle, Typography, TextField, Button, CircularProgress, DialogActions, Divider, FormControlLabel, Checkbox, CardMedia } from \"@material-ui/core\";\r\nimport ConfirmOrder from \"../Order/ConfirmOrder\";\r\nimport API from \"../../Services/API\";\r\nimport { DocToString } from \"../../Utils/Calcs\";\r\nimport OrderActions from \"../../Services/OrderActions\";\r\n\r\nexport default class detaOrderDetails extends React.Component<{\r\n    onClose: (refresh: boolean) => void,\r\n    editable?: boolean,\r\n    id: number\r\n}> {\r\n    state = {\r\n        loading: \"data\",\r\n        _fechaEnvio: \"\",\r\n        _fechaRecepcion: \"\",\r\n    } as OrderDetailsState\r\n    componentWillMount() {\r\n        API.GetOrder(this.props.id)\r\n            .then(order => this.setState({ ...order, loading: null }));\r\n    }\r\n    handleClose = (event: React.MouseEvent<HTMLElement>) => {\r\n        this.props.onClose(this.state.shouldRefresh);\r\n    }\r\n    handleButton = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        const { name } = event.currentTarget;\r\n        if (this.state.loading) return;\r\n        if (name === \"APROBAR\") {\r\n            let promise = OrderActions.Aprobar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"RECHAZAR\") {\r\n            let promise = OrderActions.Rechazar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"ENVIAR\") {\r\n            let promise = OrderActions.Enviar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"RECIBIR\") {\r\n            let promise = OrderActions.Recibir(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"FACTURAR\") {\r\n            let promise = OrderActions.Facturar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        this.setState({ loading: name });\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleCheck = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, checked } = event.currentTarget;\r\n        this.setState({ [name]: checked });\r\n    }\r\n\r\n    handleExpand(src) {\r\n        var children = window.open(\"\", \"_blank\");\r\n        var img = children.document.createElement(\"img\");\r\n        img.src = src;\r\n        children.document.body.appendChild(img);\r\n        children.document.body.style.textAlign = \"center\";\r\n        children.document.body.style.margin = \"auto\";\r\n    }\r\n    render() {\r\n        const { numero,\r\n\r\n            fechaCreacion, fechaEnvio, fechaRecepcion,\r\n            detalle,\r\n            descuentoPorcentaje, descuentoTotal, observacion,\r\n            direccion, sector, ciudad, referencia, numeroTransaccion, imgTransaccion,\r\n            estado, total, username,\r\n            survey1, survey2, loading,\r\n            documento, identificacion, razonSocial,\r\n            telefono_factura, direccion_factura, email_factura,\r\n            nombre_contacto, identificacion_contacto, documento_contacto, telefono_contacto,\r\n\r\n            numeroFactura, _fechaEnvio, _fechaRecepcion, bienRecibido, observacionRecepcion\r\n        } = this.state;\r\n        const editable = this.props.editable === true;\r\n\r\n        if (loading === \"data\")\r\n            return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\" >\r\n                <DialogContent style={{ textAlign: \"center\", paddingTop: 100, width: 400, height: 400 }}>\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </DialogContent>\r\n            </Dialog>);\r\n\r\n\r\n        return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\">\r\n            <DialogTitle>PEDIDO #{numero}</DialogTitle>\r\n            <DialogContent>\r\n                <TextRow value={new Date(fechaCreacion).toLocaleString()} label=\"Fecha\" />\r\n                <TextRow value={username} label=\"Usuario\" />\r\n                <TextRow value={estado} label=\"Estado\" />\r\n\r\n                {numeroFactura && <TextRow value={numeroFactura} label=\"Factura #\" />}\r\n                {fechaEnvio && <TextRow value={new Date(fechaEnvio).toLocaleDateString()} label=\"Enviado\" />}\r\n                {fechaRecepcion && <TextRow value={new Date(fechaRecepcion).toLocaleDateString()} label=\"Recibido\" />}\r\n                {estado === \"RECIBIDO\" && <TextRow value={(bienRecibido ? \"NO\" : \"SI\")} label=\"Incompleto\" />}\r\n                {estado === \"RECIBIDO\" && <TextRow label=\"Comentarios\" value={observacionRecepcion} />}\r\n\r\n                <SectionHeader>PRODUCTOS</SectionHeader>\r\n                <ConfirmOrder\r\n                    items={detalle}\r\n                    descuento={{ porcentaje: descuentoPorcentaje, valor: descuentoTotal }}\r\n                    total={total}\r\n                    subtotal={total + descuentoTotal}\r\n                    showComponentes={true}\r\n                />\r\n                <TextRow value={observacion} label=\"Observación\" />\r\n\r\n                <SectionHeader>DATOS DE ENTREGA</SectionHeader>\r\n\r\n                <TextRow value={nombre_contacto} label=\"Nombre\" />\r\n                <TextRow value={identificacion_contacto} label={DocToString(documento_contacto as any)} />\r\n                <TextRow value={telefono_contacto} label=\"Telefono\" />\r\n\r\n                <TextRow value={ciudad} label=\"Ciudad\" />\r\n                <TextRow value={sector} label=\"Sector\" />\r\n                <TextRow value={direccion} label=\"Direccion\" />\r\n                <TextRow value={referencia} label=\"Referencia\" />\r\n\r\n\r\n                <SectionHeader>DATOS DE FACTURACIÓN</SectionHeader>\r\n                <TextRow value={identificacion} label={DocToString(documento as any)} />\r\n                <TextRow value={razonSocial} label=\"Nombre\" />\r\n                <TextRow value={direccion_factura} label=\"Dirección\" />\r\n                <TextRow value={telefono_factura} label=\"Teléfono\" />\r\n                <TextRow value={email_factura} label=\"Email\" />\r\n\r\n                <SectionHeader>PAGO</SectionHeader>\r\n                {numeroTransaccion && <TextRow value={numeroTransaccion} label=\"Comprobante\" />}\r\n                {imgTransaccion && <CardMedia component=\"img\" style={{ height: \"auto\", width: \"100%\", objectFit: \"contain\" }}\r\n                    image={imgTransaccion} title=\"Comprobante\" onClick={ev => this.handleExpand(imgTransaccion)} />}\r\n\r\n                <SectionHeader>ENCUESTA</SectionHeader>\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">Cómo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                <Typography>{survey1 || \"\"}</Typography>\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">\r\n                    Compártenos alguna experiencia que hayan tenido tus clientes usando nuestros productos\r\n                </Typography>\r\n                <Typography>{survey2 || \"\"}</Typography>\r\n\r\n                {estado === \"PENDIENTE\" && editable && <ActionButtons\r\n                    loadingAction={this.state.loading}\r\n                    label=\"APROBAR\"\r\n                    showReject={true}\r\n                    onClick={this.handleButton}\r\n                />}\r\n\r\n                {estado === \"APROBADO\" && editable && (<React.Fragment>\r\n                    <SectionHeader>ENVIAR</SectionHeader>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\", marginTop: 15, marginBottom: 10 }}>\r\n                        <Typography variant=\"button\" style={{ marginRight: 10, paddingTop: 5 }} >Fecha de Envío</Typography>\r\n                        <TextField\r\n                            type=\"date\"\r\n                            fullWidth\r\n                            inputProps={{ id: \"_fechaEnvio\" }}\r\n                            name=\"_fechaEnvio\"\r\n                            value={_fechaEnvio || \"\"}\r\n                            style={{ flex: 1 }}\r\n                            onChange={this.handleChange}\r\n                        />\r\n                    </div>\r\n                    <ActionButtons\r\n                        loadingAction={this.state.loading}\r\n                        label=\"ENVIAR\"\r\n                        showReject={true}\r\n                        onClick={this.handleButton}\r\n                    />\r\n                </React.Fragment>)}\r\n\r\n                {estado === \"ENVIADO\" && editable && <React.Fragment>\r\n                    <SectionHeader>RECIBIR</SectionHeader>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\", margin: 10 }}>\r\n                        <Typography variant=\"button\" style={{ marginRight: 10, paddingTop: 5 }} >Fecha Recepción</Typography>\r\n                        <TextField\r\n                            type=\"date\"\r\n                            fullWidth\r\n                            name=\"_fechaRecepcion\"\r\n                            value={_fechaRecepcion || \"\"}\r\n                            inputProps={{ id: \"_fechaRecepcion\" }}\r\n                            style={{ flex: 1 }}\r\n                            onChange={this.handleChange}\r\n                        /></div>\r\n                    <FormControlLabel\r\n                        label=\"El pedido se envió completo?\"\r\n                        control={<Checkbox\r\n                            checked={bienRecibido}\r\n                            onChange={this.handleCheck}\r\n                            name=\"bienRecibido\"\r\n                        />}\r\n                    />\r\n                    <TextField\r\n                        name=\"observacionRecepcion\"\r\n                        value={observacionRecepcion || \"\"}\r\n                        onChange={this.handleChange}\r\n                        rows={2}\r\n                        required={!bienRecibido}\r\n                        label=\"Comentarios\"\r\n                        fullWidth\r\n                        multiline\r\n                        inputProps={{\r\n                            id: \"observacionRecepcion\",\r\n                            maxLength: 300\r\n                        }}\r\n                    />\r\n                    <ActionButtons\r\n                        loadingAction={this.state.loading}\r\n                        name=\"RECIBIR\"\r\n                        label=\"COMPLETAR\"\r\n                        showReject={true}\r\n                        onClick={this.handleButton}\r\n                    />\r\n                </React.Fragment>}\r\n\r\n                {estado === \"RECIBIDO\" && editable && <React.Fragment>\r\n                    <SectionHeader>REGISTRAR FACTURA</SectionHeader>\r\n                    <TextField\r\n                        label=\"Numero de Factura\"\r\n                        placeholder=\"###-###-#####\"\r\n                        value={numeroFactura}\r\n                        inputProps={{\r\n                            id: \"numeroFactura\",\r\n                            maxLength: 20\r\n                        }}\r\n                        fullWidth\r\n                        onChange={this.handleChange}\r\n                        name=\"numeroFactura\"\r\n                    />\r\n                    <ActionButtons\r\n                        loadingAction={this.state.loading}\r\n                        label=\"FACTURAR\"\r\n                        showReject={true}\r\n                        onClick={this.handleButton}\r\n                    />\r\n                </React.Fragment>}\r\n\r\n                {estado === \"FACTURADO\" && editable && <ActionButtons\r\n                    loadingAction={this.state.loading}\r\n                    onClick={this.handleButton}\r\n                    showReject=\"ONLY\"\r\n                />}\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={this.handleClose}>SALIR</Button>\r\n            </DialogActions>\r\n        </Dialog>);\r\n    }\r\n}\r\n\r\nexport interface OrderDetailsState extends Order {\r\n    loading: string;\r\n    _fechaEnvio: string;\r\n    _fechaRecepcion: string;\r\n    shouldRefresh?: boolean;\r\n}\r\n\r\nfunction TextRow(props: { value: any, label: any }) {\r\n    const { value, label } = props;\r\n    return <div style={{ width: \"100%\", textAlign: \"left\" }}>\r\n        <div style={{ width: 120, display: \"inline-block\" }}>\r\n            <Typography variant=\"body1\" >{label}</Typography>\r\n        </div>\r\n        <Typography variant=\"body2\" style={{ width: \"auto\", display: \"inline\" }}>{value}</Typography>\r\n    </div>\r\n}\r\n\r\nfunction SectionHeader(props: any) {\r\n    const style = { marginTop: 12, marginBottom: 5 } as any;\r\n    if (props.center) style.textAlign = \"center\";\r\n    return (\r\n        <div style={style}>\r\n            <Typography variant=\"h6\">{props.children}</Typography>\r\n            <Divider />\r\n        </div>);\r\n}\r\nfunction ActionButtons(props: {\r\n    loadingAction?: string,\r\n    label?: string,\r\n    onClick?: any,\r\n    showReject?: boolean | \"ONLY\",\r\n    name?: string\r\n}) {\r\n    return <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n        {props.showReject === \"ONLY\"\r\n            ? null\r\n            : (<Button\r\n                style={{ margin: 10, flex: 1 }}\r\n                onClick={props.onClick}\r\n                variant=\"outlined\"\r\n                color=\"primary\"\r\n                disabled={Boolean(props.loadingAction)}\r\n                name={props.name || props.label}\r\n            >\r\n                {props.loadingAction === (props.name || props.label)\r\n                    ? \"CARGANDO...\"\r\n                    : props.label}\r\n            </Button>)\r\n        }\r\n        {props.showReject &&\r\n            (<Button\r\n                style={{ margin: 10, flex: 1 }}\r\n                onClick={props.onClick}\r\n                variant=\"outlined\"\r\n                color=\"secondary\"\r\n                disabled={Boolean(props.loadingAction)}\r\n                name=\"RECHAZAR\"\r\n            >\r\n                {props.loadingAction === \"RECHAZAR\"\r\n                    ? \"CARGANDO...\"\r\n                    : \"RECHAZAR\"}\r\n            </Button>)}\r\n    </div>\r\n}","import React from \"react\";\r\nimport { List, ListItem, Grid, Paper, Typography, Hidden, CircularProgress } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { Route } from \"react-router-dom\";\r\nimport OrderDetails from \"./OrderDetails\";\r\nimport Message from \"../Message\";\r\nexport default class extends React.Component<any> {\r\n    state = {\r\n        data: [] as Order[],\r\n        msg: null,\r\n        loading: true\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleMessage = this.handleMessage.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        API.GetOrders()\r\n            .then(data => this.setState({ data, loading: null }))\r\n            .catch(err => this.setState({\r\n                loading: null,\r\n                msg: { title: \"Ocurrió un error\", message: err.message, info: err.code }\r\n            }));\r\n    }\r\n    handleMessage() {\r\n        this.setState({ msg: null });\r\n    }\r\n    handleClick(event: React.MouseEvent<HTMLElement>) {\r\n        const { id } = event.currentTarget;\r\n        this.props.history.push(this.props.match.path + \"/\" + id);\r\n    }\r\n    handleClose(refresh: boolean) {\r\n        if (refresh) {\r\n            this.setState({ loading: true });\r\n            API.GetOrders()\r\n                .then(data => this.setState({ data, loading: null }))\r\n                .catch(ex => this.setState({\r\n                    msg: { title: \"No se pudo actualizar el listado\", message: ex.message, info: ex.code },\r\n                    loading: null\r\n                }));\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    render() {\r\n        const { data, msg, loading } = this.state;\r\n        const { rol } = this.props;\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        return (<Paper style={{ width: \"calc(100%-20px)\", height: \"calc(100% - 30px)\", display: \"flex\", flexDirection: \"column\", margin: 10, padding: 10, paddingBottom: 0, overflowX: \"hidden\" }}>\r\n            <List>\r\n                <Hidden xsDown implementation=\"css\" >\r\n                    <ListItem>\r\n                        <Grid container spacing={1} style={{ borderBottom: \"1px solid #ebebeb\" }}>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Numero</Typography></Grid>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Creado</Typography></Grid>\r\n\r\n                            {rol === 3 && <Grid sm={3} item><Typography variant=\"overline\">Usuario</Typography></Grid>}\r\n\r\n                            <Grid sm={1} item><Typography variant=\"overline\">Total</Typography></Grid>\r\n\r\n                            {rol === 1 && <Grid sm={1} item><Typography variant=\"overline\">Ganancia</Typography></Grid>}\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Estado</Typography></Grid>\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Fecha de Envío</Typography></Grid>\r\n                        </Grid>\r\n                    </ListItem>\r\n                </Hidden>\r\n                {data.map(d => <ListItem key={d.id} id={\"\" + d.id} button onClick={this.handleClick}>\r\n                    <Grid container spacing={1} style={{ paddingTop: 5, paddingBottom: 5, borderBottom: \"1px solid #fafafa\" }}>\r\n\r\n                        <Grid xs={12} sm={2} item >\r\n                            <Hidden smUp >PEDIDO #</Hidden>\r\n                            {d.id}\r\n                        </Grid>\r\n                        <Grid xs={12} sm={2} item >\r\n                            {new Date(d.fechaCreacion).toLocaleDateString()}\r\n                        </Grid>\r\n\r\n                        {rol === 3 && <Grid xs={12} sm={3} item >\r\n                            {d.username}\r\n                        </Grid>}\r\n\r\n                        <Grid xs={12} sm={1} item >$ {d.total.toFixed(2)}</Grid>\r\n\r\n                        {rol === 1 && <Grid xs={12} sm={1} item >$ {(d.descuentoTotal || 0).toFixed(2)}</Grid>}\r\n\r\n                        <Grid xs={12} sm={2} item ><Typography color={EstadoToVariant(d.estado)}>{d.estado}</Typography></Grid>\r\n\r\n                        <Grid xs={12} sm={2} item >{d.fechaEnvio && new Date(d.fechaEnvio).toDateString()}</Grid>\r\n                    </Grid>\r\n                </ListItem>)}\r\n            </List>\r\n\r\n            {msg && <Message {...msg} onClose={this.handleMessage} />}\r\n\r\n            <Route\r\n                path={this.props.match.path + \"/:id\"}\r\n                render={props => <OrderDetails id={+props.match.params.id} onClose={this.handleClose} />}\r\n            />\r\n        </Paper>);\r\n    }\r\n}\r\n\r\nfunction EstadoToVariant(estado): any {\r\n    if (estado === \"APROBADO\") return \"primary\";\r\n    if (estado === \"RECHAZADO\") return \"secondary\";\r\n    return \"initial\";\r\n}","import React from \"react\";\r\nimport { CardHeader, IconButton, Typography } from \"@material-ui/core\";\r\nimport { HourglassEmpty, ArrowLeft, ArrowRight } from \"@material-ui/icons\";\r\n\r\n\r\ninterface Props {\r\n    onBackClick?: (any) => void,\r\n    onNextClick?: (any) => void,\r\n    loading?: boolean,\r\n    title?: string,\r\n    subtitle?: string\r\n}\r\n\r\nexport default function LeftRigthHeader(props: Props) {\r\n    const { onBackClick, loading, onNextClick, title, subtitle } = props;\r\n    return (\r\n        <CardHeader\r\n            title={<div style={{ flex: 1, display: \"flex\", flexDirection: \"row\" }}>\r\n                {onBackClick && <div><IconButton onClick={onBackClick} disabled={loading}>\r\n                    {loading ? <HourglassEmpty /> : <ArrowLeft />}\r\n                </IconButton></div>}\r\n                <div style={{ flex: 1 }}>\r\n                    <Typography variant=\"h5\">{title}</Typography>\r\n                    <Typography variant=\"body1\">{subtitle}</Typography>\r\n                </div>\r\n                {onNextClick && <div><IconButton onClick={onNextClick} disabled={loading}>\r\n                    {loading ? <HourglassEmpty /> : <ArrowRight />}\r\n                </IconButton></div>}\r\n            </div>}\r\n            disableTypography={true}\r\n            style={{ textAlign: \"center\" }}\r\n        />);\r\n}","import React from \"react\";\r\nimport { CardContent, Card, List, ListItem, Typography } from \"@material-ui/core\";\r\nimport LeftRigthHeader from \"./LeftRightHeader\";\r\nexport default function RankingCard(props: RankProps) {\r\n    const {\r\n        data,\r\n        col1,\r\n        col2,\r\n        secondColType,\r\n        colType,\r\n        ...remainProps\r\n    } = props;\r\n\r\n    return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n        <LeftRigthHeader {...remainProps} />\r\n        <CardContent style={{ flex: 1, overflow: \"auto\" }}>\r\n            <List>\r\n                {data.sort((a, b) => b[col1] - a[col1])\r\n                    .map((r, index) => {\r\n                        var value1 = r[col1];\r\n                        if (col2) {\r\n                            var value2 = r[col2];\r\n                            if (secondColType && secondColType === \"DATE\") {\r\n                                value2 = DateToString(r[col2]);\r\n                            } else {\r\n                                value2 = value2.toFixed(2);\r\n                            }\r\n                        }\r\n\r\n                        return (<ListItem key={index} id={\"ranking-listitem-\" + index} >\r\n                            <div style={{ display: \"table\", width: \"100%\" }} >\r\n\r\n                                <Typography style={{ display: \"table-cell\", width: 50 }} variant={r.me ? \"body1\" : \"caption\"}># {index + 1}</Typography>\r\n                                <Typography style={{ display: \"table-cell\" }} variant={r.me ? \"body1\" : \"caption\"} >\r\n                                    {r.username}\r\n                                </Typography>\r\n\r\n                                {colType === \"PERFOMANCE\" && <PerfomanceCell value={value1} me={r.me} />}\r\n\r\n                                {colType === \"MONEY\" && <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                    $ {value1.toFixed(2)}\r\n                                </Typography>}\r\n\r\n                                {colType === \"NUMBER\" && <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                    {value1}\r\n                                </Typography>}\r\n\r\n                                {col2\r\n                                    ? (secondColType === \"PERFOMANCE\"\r\n                                        ? <PerfomanceCell value={+value2} me={r.me} />\r\n                                        : <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100, paddingLeft: 10 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                            {secondColType === \"MONEY\" ? \"$\" : null} {value2}\r\n                                        </Typography>)\r\n                                    : null\r\n                                }\r\n                            </div>\r\n                        </ListItem>)\r\n                    })}\r\n            </List>\r\n        </CardContent>\r\n    </Card>)\r\n}\r\nfunction PerfomanceCell(props: { value: any, me: boolean }) {\r\n    return <Typography\r\n        color={props.value ? (props.value > 0 ? \"primary\" : \"secondary\") : \"inherit\"}\r\n        style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }}\r\n        variant={props.me ? \"body1\" : \"caption\"}\r\n    >\r\n        % {props.value.toFixed(2)} {props.value ? (props.value > 0 ? \"↑\" : \"↓\") : null}\r\n    </Typography>\r\n}\r\n\r\nfunction DateToString(x) {\r\n    if (!x) return \"Nunca\";\r\n    var date = new Date(x);\r\n    if (isNaN(+date)) return x;\r\n    var ahora = new Date();\r\n    if (date.getDate() === ahora.getDate() &&\r\n        date.getMonth() === ahora.getMonth() &&\r\n        date.getFullYear() === ahora.getFullYear()) {\r\n        return date.toLocaleTimeString();\r\n    }\r\n\r\n    for (let i = 1; i < 30; i++) {\r\n        var este_dia = new Date(ahora.getFullYear(), ahora.getMonth(), ahora.getDate() - i);\r\n        if (date.getDate() === este_dia.getDate() &&\r\n            date.getMonth() === este_dia.getMonth() &&\r\n            date.getFullYear() === este_dia.getFullYear()) {\r\n            if (i === 1) return \"Ayer\";\r\n            return \"Hace \" + i + \" días\";\r\n        }\r\n    }\r\n    return date.toLocaleDateString();\r\n}\r\n\r\n\r\nexport interface RankProps {\r\n    data: Rank[];\r\n    title: string;\r\n    col1: string;\r\n    col2?: string;\r\n    colType: \"MONEY\" | \"PERFOMANCE\" | \"NUMBER\";\r\n    secondColType?: \"MONEY\" | \"DATE\" | \"PERFOMANCE\";\r\n\r\n    subtitle?: string;\r\n    onBackClick?: any;\r\n    onNextClick?: any;\r\n    loading?: boolean;\r\n}","import React from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { Card, CardContent } from \"@material-ui/core\";\r\nimport { MonthToString } from \"../../Utils/Calcs\";\r\nimport LeftRigthHeader from \"./LeftRightHeader\";\r\n\r\nexport default class LineCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false,\r\n            bezierCurve: false,\r\n            scales: {\r\n                yAxes: [{\r\n\r\n                    ticks: {\r\n                        maxTicksLimit: 10,\r\n                        padding: 5,\r\n                        beginAtZero: true\r\n                    }\r\n                }],\r\n                xAxes: [{\r\n                    ticks: {\r\n                        padding: 5\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        const { data: RawData, ...remain } = this.props;\r\n        var labels = [];\r\n        var values = [];\r\n        for (let i = 0; i < RawData.length; i++) {\r\n            const el = RawData[i];\r\n            if (el.we) {\r\n                var x = new Date(el.we);\r\n                labels.push(`${x.getDate()} ${MonthToString(x.getMonth())}`);\r\n            } else {\r\n                labels.push(el.label);\r\n            }\r\n            values.push(el.value);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor: \"#3f51b5\",\r\n                borderColor: \"#3f51b5\",\r\n                data: values,\r\n                lineTension: 0,\r\n                fill: false\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <LeftRigthHeader\r\n                {...remain}\r\n            />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Line options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >);\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { Card, CardContent, Typography, CardHeader, List, ListItem, ListItemText, ListItemSecondaryAction } from \"@material-ui/core\";\r\n\r\nexport default function ProfitCard(props: { month: number, year: number }) {\r\n    const { month, year } = props;\r\n    var reservas = 0, promo = 0;\r\n    if (month) {\r\n        reservas = (month * 5) / 100;\r\n        promo = (month * 14) / 100;\r\n    }\r\n    return (<Card className=\"dashboard-card\">\r\n        <CardHeader title=\"GANANCIAS\" style={{ textAlign: \"center\" }} />\r\n        <CardContent>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <div style={{ textAlign: \"center\", flex: 1 }}>\r\n                    <Typography color=\"primary\" variant=\"h5\" style={{ flex: 1 }}>$ {reduceMoney(month)}</Typography>\r\n                    <Typography color=\"primary\">ESTE MES</Typography>\r\n                </div>\r\n                <div style={{ borderLeft: \"1px solid black\", textAlign: \"center\", flex: 1 }}>\r\n                    <Typography variant=\"h5\" style={{ flex: 1 }} >$ {reduceMoney(year)}</Typography>\r\n                    <Typography>ESTE AÑO</Typography>\r\n                </div>\r\n            </div>\r\n            <Typography variant=\"subtitle1\" style={{ marginTop: 20, paddingLeft: 15, textAlign: \"left\" }}>Te aconsejamos apartar lo siguiente:</Typography>\r\n            <List>\r\n                <ListItem dense>\r\n                    <ListItemText primary=\"RESERVAS 5%\" />\r\n                    <ListItemSecondaryAction>$ {reservas.toFixed(2)}</ListItemSecondaryAction>\r\n                </ListItem>\r\n                <ListItem dense>\r\n                    <ListItemText primary=\"PROMOCION 14%\" />\r\n                    <ListItemSecondaryAction>$ {promo.toFixed(2)}</ListItemSecondaryAction>\r\n                </ListItem>\r\n            </List>\r\n        </CardContent >\r\n    </Card >)\r\n}\r\nfunction reduceMoney(value) {\r\n    if (!value) return 0;\r\n    if (value > 1000) return (+(value / 1000).toFixed(1)) + \" K\";\r\n    if (value > 1000000) return (+(value / 1000).toFixed(1)) + \" M\";\r\n    return +value.toFixed(2);\r\n}","export enum ROLES {\r\n    ASESOR = 1,\r\n    GUIA = 2,\r\n    ADMINISTRADOR = 3,\r\n}","import React from \"react\";\r\nimport { Pie } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default class PieCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        var backgroundColor = [];\r\n        var info = this.props.data.sort((a, b) => b.value - a.value);\r\n        for (let i = 0; i < info.length; i++) {\r\n            const el = info[i];\r\n            labels.push(el.label);\r\n            values.push(el.value);\r\n            backgroundColor.push(el.color);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor,\r\n                data: values\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Pie options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Bar } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default class BardCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false,\r\n            scaleBeginAtZero: true,\r\n            scales: {\r\n                yAxes: [{\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        for (let i = 0; i < this.props.data.length; i++) {\r\n            const el = this.props.data[i];\r\n            labels.push(el.label);\r\n            if (el.we) {\r\n                values.push(new Date(el.we).toLocaleDateString());\r\n            } else {\r\n                values.push(el.value);\r\n            }\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor: \"#3f51b5\",\r\n                borderColor: \"#3f51b5\",\r\n                data: values,\r\n                fill: false\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Bar options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >)\r\n    }\r\n}","import React from \"react\";\r\nimport API from \"../../Services/API\";\r\nimport { MonthToString } from \"../../Utils/Calcs\";\r\nexport default function <T = { [key: string]: any }>(Component) {\r\n    return class WithTimeTravel extends React.Component<RankWithTimeTravel & T> {\r\n        state = {\r\n            data: [] as any,\r\n            current_week: null as Week,\r\n            statName: null as any,\r\n            reduceFn: null as (data: any[]) => any[],\r\n            loading: false\r\n        }\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = { ...props };\r\n        }\r\n        handleBack = () => {\r\n            if (this.state.loading) return;\r\n            this.setState({ loading: true });\r\n            var new_week = this.state.current_week.id - 1;\r\n            API.Stats([this.state.statName, \"current_week\"], new_week)\r\n                .then(this.updateData).catch(this.showError);\r\n        }\r\n        handleNext = () => {\r\n            if (this.state.loading) return;\r\n            this.setState({ loading: true });\r\n            var new_week = this.state.current_week.id + 1;\r\n            API.Stats([this.state.statName, \"current_week\"], new_week)\r\n                .then(this.updateData).catch(this.showError);\r\n        }\r\n        updateData = (results) => {\r\n            const { current_week, ...remain } = results;\r\n            this.setState({\r\n                data: remain[this.state.statName] || [],\r\n                current_week,\r\n                loading: false\r\n            });\r\n        }\r\n        showError = (ex) => {\r\n            this.setState({ loading: false });\r\n            alert(ex.message);\r\n        }\r\n        render() {\r\n            var { current_week, data, reduceFn, loading } = this.state;\r\n            var subtitle = \"\";\r\n            if (current_week) {\r\n                let desde = new Date(current_week.start);\r\n                let hasta = new Date(current_week.end);\r\n                subtitle = `${desde.getDate()} ${MonthToString(desde.getMonth())} - ` +\r\n                    `${hasta.getDate()} ${MonthToString(hasta.getMonth())}`;\r\n            }\r\n            var { data, ...remainState } = this.state;\r\n            if (reduceFn) data = reduceFn(data);\r\n\r\n            return (<Component\r\n                {...remainState}\r\n                data={data}\r\n                subtitle={subtitle}\r\n                loading={loading}\r\n                onBackClick={this.handleBack}\r\n                onNextClick={this.handleNext}\r\n            />);\r\n        }\r\n    }\r\n}\r\n\r\ninterface RankWithTimeTravel {\r\n    statName: string;\r\n    reduceFn?: (data: any[]) => any[];\r\n    current_week?: Week;\r\n}","import React from \"react\";\r\nimport { Grid, CircularProgress, Typography, Hidden, Divider } from \"@material-ui/core\";\r\nimport RankingCard, { RankProps } from \"./RankingCard\";\r\nimport API from \"../../Services/API\";\r\nimport LineCard from \"./LineCard\"\r\nimport ProfitCard from \"./ProfitCard\";\r\nimport PieCard from \"./PieCard\";\r\nimport BardCard from \"./BarCard\";\r\nimport WithTimeTravel from \"./WithTimeTravel\";\r\nimport { ROLES } from \"../../Globals\";\r\n\r\nconst TimeTravelRank = WithTimeTravel<RankProps>(RankingCard);\r\nconst PersonalGraph = WithTimeTravel(LineCard);\r\n\r\nexport default class Feed extends React.Component<{ onMounted: Function, grupo: string, username: string, rol: number }> {\r\n    unmounted = false;\r\n    state = {\r\n        loading: true,\r\n        error: null,\r\n        week_ranking: [],\r\n        group_graph: [],\r\n        personal_graph: [],\r\n        year_sales: [],\r\n        product_resume: [],\r\n        group_ranking: [],\r\n        current_week: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    componentDidMount() {\r\n        const stats = [\r\n            \"week_ranking\",\r\n            \"personal_graph\",\r\n            \"year_sales\",\r\n            \"product_resume\",\r\n            \"current_week\"\r\n        ];\r\n        if (this.props.rol !== ROLES.ADMINISTRADOR) stats.push(\"group_graph\");\r\n        if (this.props.rol === ROLES.ADMINISTRADOR) stats.push(\"group_ranking\");\r\n        API.Stats(stats)\r\n            .then(x => {\r\n                if (this.unmounted) return;\r\n                this.setState({ ...x, loading: null })\r\n            })\r\n            .catch(error => {\r\n                if (this.unmounted) return;\r\n                this.setState({ error, loading: null });\r\n            });\r\n    }\r\n    componentWillUnmount = () => this.unmounted = true;\r\n    productResumeReducer = data => data.map(a => {\r\n        a.username = a.label;\r\n        return a;\r\n    });\r\n    render() {\r\n        var { loading, error,\r\n            week_ranking,\r\n            personal_graph,\r\n            group_graph,\r\n            year_sales,\r\n            product_resume,\r\n            group_ranking,\r\n            current_week\r\n        } = this.state;\r\n        const { rol, grupo, username } = this.props;\r\n        var resume = { month: 0, year: 0 };\r\n        var ahora = new Date();\r\n        const esAdmin = rol === ROLES.ADMINISTRADOR;\r\n\r\n        for (let i = 0; i < year_sales.length; i++) {\r\n            const x = year_sales[i];\r\n            x.createdAt = new Date(x.createdAt);\r\n            if (x.createdAt.getMonth() === ahora.getMonth() &&\r\n                x.createdAt.getFullYear() === ahora.getFullYear()) {\r\n                resume.month += x.profit;\r\n            }\r\n            resume.year += x.profit;\r\n        }\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        if (error) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <Typography variant=\"h5\">OCURRIÓ UN PROBLEMA</Typography>\r\n            <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n            <Typography variant=\"body1\">{error.status} {error.code}</Typography>\r\n        </div>);\r\n\r\n        return (<Grid container spacing={2} style={{ margin: \"auto\", width: \"calc(100% - 10px)\", textAlign: \"center\" }}>\r\n\r\n            <Grid item xs={12}>\r\n                <Typography color=\"primary\" variant=\"h6\">\r\n                    Hola {username}, Esta es tu cuenta personal de Natú.\r\n                </Typography>\r\n                <Typography variant=\"subtitle1\">\r\n                    Estamos aquí para prosperar juntos. Estos son los indicadores de tu trabajo.\r\n                </Typography>\r\n            </Grid>\r\n\r\n            {(group_ranking && group_ranking.length)\r\n                ? <Grid item sm={6} xs={12}>\r\n                    <TimeTravelRank\r\n                        statName=\"group_ranking\"\r\n                        data={group_ranking}\r\n                        current_week={current_week}\r\n                        title=\"RANKING DE GRUPOS\"\r\n                        colType=\"MONEY\"\r\n                        secondColType=\"MONEY\"\r\n                        col1=\"stat\"\r\n                        col2=\"ventas_lider\"\r\n                    />\r\n                </Grid>\r\n                : null}\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <PersonalGraph\r\n                    data={personal_graph}\r\n                    statName=\"personal_graph\"\r\n                    current_week={current_week}\r\n                    title={\"ESTADISTICA SEMANAL\"}\r\n                />\r\n            </Grid>\r\n\r\n\r\n            {(group_graph && group_graph.length)\r\n                ? <React.Fragment>\r\n                    <Grid item sm={6} xs={12}>\r\n                        <BardCard data={group_graph} title={grupo || \"ESTADISTICA MENSUAL\"} />\r\n                    </Grid>\r\n\r\n                    <Grid item sm={6} xs={12}>\r\n                        <PieCard data={product_resume} title=\"PRODUCTOS VENDIDOS\" />\r\n                    </Grid>\r\n\r\n                    <Grid item sm={6} xs={12}>\r\n                        <ProfitCard month={resume.month} year={resume.year} />\r\n                    </Grid>\r\n                </React.Fragment>\r\n                : null}\r\n\r\n            <Hidden smUp>\r\n                <Grid item xs={12}>\r\n                    <Divider />\r\n                </Grid>\r\n            </Hidden>\r\n\r\n            {esAdmin && <Grid item sm={6} xs={12}>\r\n                <TimeTravelRank\r\n                    current_week={current_week}\r\n                    statName=\"product_resume\"\r\n                    reduceFn={this.productResumeReducer}\r\n                    data={product_resume}\r\n                    title=\"PRODUCTOS VENDIDOS\"\r\n                    colType=\"NUMBER\"\r\n                    col1=\"value\"\r\n                />\r\n            </Grid>}\r\n            <Grid item sm={6} xs={12}>\r\n                <TimeTravelRank\r\n                    statName=\"week_ranking\"\r\n                    current_week={current_week}\r\n                    data={week_ranking}\r\n                    reduceFn={data => esAdmin ? data.filter(x => x.rol === ROLES.ADMINISTRADOR) : data}\r\n                    title=\"RANKING DE LA SEMANA\"\r\n                    colType=\"MONEY\"\r\n                    secondColType=\"DATE\"\r\n                    col1=\"stat\"\r\n                    col2=\"ultimoPedido\"\r\n                />\r\n            </Grid>\r\n\r\n            {!esAdmin && <Grid item sm={6} xs={12}>\r\n                <TimeTravelRank\r\n                    statName=\"week_ranking\"\r\n                    current_week={current_week}\r\n                    data={week_ranking}\r\n                    title=\"PROGRESO DE LA SEMANA\"\r\n                    colType=\"PERFOMANCE\"\r\n                    col1=\"perfomance\"\r\n                />\r\n            </Grid>}\r\n\r\n            {rol !== ROLES.ASESOR && <Grid item sm={6} xs={12}>\r\n                <RankingCard\r\n                    data={week_ranking}\r\n                    title=\"RANKING ACUMULATIVO\"\r\n                    colType=\"MONEY\"\r\n                    col1=\"monto_acumulativo\"\r\n                />\r\n            </Grid>}\r\n\r\n        </Grid>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Table, TableHead, TextField, TableCell, TableRow, Button, CircularProgress, Typography, TableBody } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nexport default class ProductSales extends React.Component {\r\n    state = {\r\n        loading: null,\r\n        error: null,\r\n        data: []\r\n    }\r\n    handleClick = () => {\r\n        if (this.state.loading) return;\r\n        var desde = this.valueOf(\"desde\");\r\n        var hasta = this.valueOf(\"hasta\");\r\n        var estado = this.valueOf(\"estado\");\r\n        if (!(desde && !isNaN(+new Date(desde)))) return alert(\"Selecciona la fecha desde\");\r\n        if (!(hasta && !isNaN(+new Date(hasta)))) return alert(\"Selecciona la fecha hasta\");\r\n        if (!estado) return alert(\"Selecciona el estado\");\r\n\r\n        this.setState({ loading: true });\r\n\r\n        desde = new Date(desde).toJSON();\r\n        hasta = new Date(hasta).toJSON();\r\n\r\n        API.ProductSalesReport({ desde, hasta, estado })\r\n            .then(data => this.setState({ data, loading: null, error: null }))\r\n            .catch(error => this.setState({ error, loading: null }));\r\n    }\r\n    valueOf(ID: string) {\r\n        var el = document.getElementById(ID) as any;\r\n        return el && el.value;\r\n    }\r\n    render() {\r\n        const { data, error, loading } = this.state;\r\n        return (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <div>\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"desde\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"hasta\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} select SelectProps={{ native: true }} inputProps={{ id: \"estado\" }} >\r\n                    <option value={1}>PENDIENTE</option>\r\n                    <option value={0}>APROBADO</option>\r\n                    <option value={2}>RECHAZADO</option>\r\n                    <option value={3}>ENTREGADO</option>\r\n                </TextField>\r\n                <Button disabled={loading} style={{ marginLeft: 10, marginRight: 10 }} variant=\"outlined\" onClick={this.handleClick} >GENERAR</Button>\r\n            </div>\r\n            {loading\r\n                ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </div>)\r\n                : (error\r\n                    ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                        <Typography variant=\"h4\">OCURRIÓ UN ERROR</Typography>\r\n                        <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                        <Typography variant=\"subtitle2\" >{error.code} {error.status}</Typography>\r\n                    </div>)\r\n                    : (<div>\r\n                        <Table>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell component=\"th\" >Fecha</TableCell>\r\n                                    <TableCell component=\"th\" >#</TableCell>\r\n                                    <TableCell component=\"th\" >Usuario</TableCell>\r\n                                    <TableCell component=\"th\" >Estado</TableCell>\r\n                                    <TableCell component=\"th\" >Observacion</TableCell>\r\n                                    <TableCell component=\"th\" >Fecha Envío</TableCell>\r\n                                    <TableCell component=\"th\" >Entregado</TableCell>\r\n                                    <TableCell component=\"th\" >Motivo Anulacion</TableCell>\r\n                                    <TableCell component=\"th\" >Producto</TableCell>\r\n                                    <TableCell component=\"th\" >Cant</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {data.map(d => (<TableRow key={d.id}>\r\n                                    <TableCell >{new Date(d.createdAt).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.idPedido}</TableCell>\r\n                                    <TableCell>{d.username}</TableCell>\r\n                                    <TableCell>{d.estado}</TableCell>\r\n                                    <TableCell>{d.observacion}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.motivoAnulacion}</TableCell>\r\n                                    <TableCell>{d.descripcion}</TableCell>\r\n                                    <TableCell>{d.cantidad}</TableCell>\r\n                                </TableRow>))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>)\r\n                )}\r\n        </div >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Tabs, Tab, Paper } from \"@material-ui/core\";\r\nimport ProductSales from \"./ProductSales\";\r\n\r\nexport default class Reports extends React.Component<any> {\r\n    state = {\r\n        currentTab: 0\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    handleChange = (x, currentTab) => {\r\n        this.setState({ currentTab });\r\n    }\r\n    render() {\r\n        const { currentTab } = this.state;\r\n        return (\r\n            <Paper style={{ margin: 10 }}>\r\n                <Tabs style={{ marginBottom: 10 }} value={currentTab} onChange={this.handleChange}>\r\n                    <Tab label=\"Detalle de Productos\" />\r\n                </Tabs>\r\n                {currentTab === 0 && <ProductSales />}\r\n            </Paper>)\r\n    }\r\n}","import React from \"react\";\r\nimport MUIDataTable from \"mui-datatables\";\r\n\r\nexport default class Queue extends React.PureComponent<{\r\n    data: any[],\r\n    columns: any[],\r\n    estado: string,\r\n    onClick: (id: number) => void\r\n}> {\r\n    handleClick = (values, index) => {\r\n        this.props.onClick(values[0]);\r\n    }\r\n    render() {\r\n        const { data, columns } = this.props;\r\n        const rows = data.filter(x => x.estado === this.props.estado)\r\n            .sort((a, b) => a.changedAt - b.changedAt)\r\n        return (\r\n            <MUIDataTable\r\n                data={rows}\r\n                columns={columns}\r\n                options={{\r\n                    selectableRows: \"none\",\r\n                    onRowClick: this.handleClick\r\n                }}\r\n            />\r\n        )\r\n    }\r\n}","export const entrada_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"numeroTransaccion\",\r\n        label: \"# Comprobante\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    }\r\n];\r\n\r\nexport const aprobado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: true\r\n        }\r\n    }\r\n];\r\nexport const enviado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaEnvio\",\r\n        label: \"Enviado\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: true\r\n        }\r\n    }\r\n];\r\nexport const recibido_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaRecepcion\",\r\n        label: \"Recepcion\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"bienRecibido\",\r\n        label: \"Incompleto\",\r\n        options: {\r\n            filter: true,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"observacionRecepcion\",\r\n        label: \"Observaciones\",\r\n        options: {\r\n            sort: false,\r\n            filter: false\r\n        }\r\n    }\r\n];\r\nexport const facturado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaRecepcion\",\r\n        label: \"Recepcion\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"bienRecibido\",\r\n        label: \"Incompleto\",\r\n        options: {\r\n            filter: true,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"observacionRecepcion\",\r\n        label: \"Observaciones\",\r\n        options: {\r\n            sort: false,\r\n            filter: false\r\n        }\r\n    },\r\n    {\r\n        name: \"numeroFactura\",\r\n        label: \"Factura\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    }\r\n];\r\n\r\nexport const rechazado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaAnulacion\",\r\n        label: \"Rechazado\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"motivoAnulacion\",\r\n        label: \"Motivo\",\r\n        options: {\r\n            filter: false,\r\n            sort: false\r\n        }\r\n    }\r\n];","import React from \"react\";\r\nimport { Tabs, Tab, AppBar } from \"@material-ui/core\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport API from \"../../Services/API\";\r\nimport Queue from \"./Queue\";\r\nimport OrderDetails from \"../OrderList/OrderDetails\";\r\nimport { entrada_columns, aprobado_columns, enviado_columns, recibido_columns, facturado_columns, rechazado_columns } from \"./Columns\";\r\n\r\nexport default class OrderQueue extends React.Component<{\r\n    match?: any,\r\n    history?: any,\r\n    location?: any,\r\n    onMounted?: Function\r\n}> {\r\n    state = {\r\n        data: [],\r\n        loading: true,\r\n        error: null,\r\n        id: null\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.match.path);\r\n        this.loadData();\r\n    }\r\n    loadData() {\r\n        API.GetOrders()\r\n            .then(rawData => {\r\n                const data = rawData.map(x => {\r\n                    var fechaCreacion = new Date(x.fechaCreacion);\r\n                    x.fechaCreacion = fechaCreacion.toLocaleDateString() as any;\r\n                    x.fechaEnvio = x.fechaEnvio && new Date(x.fechaEnvio).toLocaleDateString() as any;\r\n                    x.fechaRecepcion = x.fechaRecepcion && new Date(x.fechaRecepcion).toLocaleDateString() as any;\r\n                    x.fechaAnulacion = x.fechaAnulacion && new Date(x.fechaAnulacion).toLocaleDateString() as any;\r\n                    if (x.fechaAnulacion) console.info(x);\r\n                    x.total = x.total.toFixed(2) as any;\r\n                    x.bienRecibido = (x.bienRecibido ? \"\" : \"SI\") as any;\r\n                    x.changedAt = (x.changedAt\r\n                        ? new Date(x.changedAt).valueOf()\r\n                        : 0) as any;\r\n\r\n                    x.numeroTransaccion = x.imgTransaccion ? \"IMAGEN\" : x.numeroTransaccion;\r\n                    return x;\r\n                });\r\n                this.setState({ data, loading: null });\r\n            })\r\n            .catch(error => this.setState({ error }));\r\n    }\r\n    handleTab = (_, value) => {\r\n        this.props.history.push(this.props.match.path + value);\r\n    }\r\n    openOrder = id => {\r\n        this.props.history.push(this.props.match.path + this.currentTab() + \"/\" + id);\r\n    }\r\n    closeOrder = shouldUpdate => {\r\n        if (shouldUpdate) this.loadData();\r\n        this.props.history.push(this.props.match.path + this.currentTab());\r\n    }\r\n    currentTab() {\r\n        return \"/\" + (this.props.location.pathname.split(\"/\")[2] || \"inbox\");\r\n    }\r\n    render() {\r\n        return (<div>\r\n            <AppBar position=\"relative\" color=\"primary\">\r\n                <Tabs onChange={this.handleTab} value={this.currentTab()} variant=\"fullWidth\">\r\n                    <Tab label=\"Entrada\" value=\"/inbox\" />\r\n                    <Tab label=\"Aprobado\" value=\"/ok\" />\r\n                    <Tab label=\"Enviado\" value=\"/sent\" />\r\n                    <Tab label=\"Recibido\" value=\"/ack\" />\r\n                    <Tab label=\"Facturado\" value=\"/invoice\" />\r\n                    <Tab label=\"Rechazado\" value=\"/denied\" />\r\n                </Tabs>\r\n            </AppBar>\r\n            <Switch>\r\n                <Route path={this.props.match.path + \"/inbox\"}\r\n                    render={_ => (<Queue\r\n                        columns={entrada_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"PENDIENTE\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/ok\"}\r\n                    render={_ => (<Queue\r\n                        columns={aprobado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"APROBADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/sent\"}\r\n                    render={_ => (<Queue\r\n                        columns={enviado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"ENVIADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/ack\"}\r\n                    render={_ => (<Queue\r\n                        columns={recibido_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"RECIBIDO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/invoice\"}\r\n                    render={_ => (<Queue\r\n                        columns={facturado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"FACTURADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/denied\"}\r\n                    render={_ => (<Queue\r\n                        columns={rechazado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"RECHAZADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/\"} exact>\r\n                    <Redirect to={this.props.match.path + \"/inbox\"} />\r\n                </Route>\r\n            </Switch>\r\n            <Route path={this.props.match.path + \"/:group/:id\"}\r\n                render={routeProps => <OrderDetails\r\n                    id={+routeProps.match.params.id}\r\n                    onClose={this.closeOrder}\r\n                    editable={true} />}\r\n            />\r\n        </div>);\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { ListItem, List, ListItemIcon, IconButton, ListItemText, ListItemSecondaryAction, TextField } from \"@material-ui/core\";\r\nimport { Add, Delete } from \"@material-ui/icons\";\r\n\r\ninterface InputOptions {\r\n    label?: string;\r\n    type?: \"number\" | \"string\";\r\n    allowZero?: boolean;\r\n}\r\n\r\ninterface Props {\r\n    dataSource: any[];\r\n    onAdd: (results: { name?: string, item?: any, inputValue?: string }) => void;\r\n    onRemove: (results: { name?: string, item?: any }) => void;\r\n    items: any[];\r\n    name?: string;\r\n    IdProp: string;\r\n    DisplayProp: string;\r\n    SecondaryDisplayProp?: string;\r\n\r\n    InputConfig?: InputOptions\r\n}\r\n\r\nvar COUNT = 0;\r\n\r\nexport default class ItemList extends React.PureComponent<Props> {\r\n    state = {\r\n        inputValue: \"\",\r\n        selectValue: \"\",\r\n        showErrors: false\r\n    }\r\n    INPUT_ID = \"CUSTOM_INPUT_ID_NO_\";\r\n    SELECT_ID = \"CUSTOM_SELECT_ID_NO_\";\r\n    constructor(props) {\r\n        super(props);\r\n        this.INPUT_ID += COUNT;\r\n        this.SELECT_ID += COUNT;\r\n        COUNT++;\r\n    }\r\n    handleDelete = event => {\r\n        const index = event.currentTarget.value;\r\n        var item = this.props.items[index];\r\n        this.props.onRemove({ name: this.props.name, item });\r\n    }\r\n    handleAdd = () => {\r\n        const { InputConfig, IdProp, dataSource, onAdd, name } = this.props;\r\n        const { inputValue, selectValue } = this.state;\r\n\r\n        if (InputConfig) {\r\n            var error = validateInput(inputValue, InputConfig);\r\n            if (error) {\r\n                window.requestAnimationFrame(() => {\r\n                    try { document.getElementById(this.INPUT_ID).focus() } catch (ex) { }\r\n                });\r\n                return this.setState({ showErrors: true });\r\n            }\r\n        }\r\n        if (!selectValue) {\r\n            window.requestAnimationFrame(() => {\r\n                try { document.getElementById(this.SELECT_ID).focus() } catch (ex) { }\r\n            });\r\n            return this.setState({ showErrors: true });\r\n        }\r\n        var item = dataSource.find(x => x[IdProp].toString() === selectValue.toString());\r\n        onAdd({ name: name, item: { ...item }, inputValue });\r\n        this.setState({ selectValue: \"\", inputValue: \"\", showErrors: false });\r\n    }\r\n    handleChange = event => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value } as any);\r\n    }\r\n    render() {\r\n        const { InputConfig, DisplayProp, IdProp, SecondaryDisplayProp, items } = this.props;\r\n        var dataSource = this.props.dataSource;\r\n        const { inputValue, selectValue, showErrors } = this.state;\r\n\r\n        const inputError = showErrors\r\n            ? (InputConfig ? validateInput(inputValue, InputConfig) : \"\")\r\n            : \"\";\r\n        const selectError = showErrors\r\n            ? (selectValue ? \"\" : \"Selecciona un item\")\r\n            : \"\";\r\n\r\n        var IDs = this.props.items.map(x => x[IdProp]);\r\n        dataSource = dataSource.filter(x => IDs.indexOf(x[IdProp]) < 0);\r\n\r\n        return (<>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\", width: \"calc(100% - 20px)\", margin: \"auto\" }}>\r\n                <TextField\r\n                    style={{ flex: 1, marginTop: 8, marginBottom: 8 }}\r\n                    inputProps={{ id: this.SELECT_ID }}\r\n                    SelectProps={{ native: true }}\r\n                    error={!!selectError} helperText={selectError}\r\n                    select\r\n                    name=\"selectValue\"\r\n                    value={selectValue}\r\n                    onChange={this.handleChange}\r\n                >\r\n                    <option value=\"\"> - SELECCIONA UNA OPCIÓN - </option>\r\n                    {dataSource.map(x => (\r\n                        <option key={x[IdProp]} value={x[IdProp]}>{x[DisplayProp]}</option>\r\n                    ))}\r\n                </TextField>\r\n                {InputConfig && <TextField\r\n                    error={!!inputError}\r\n                    helperText={inputError}\r\n                    style={{ margin: 10 }}\r\n                    margin=\"dense\"\r\n                    type={InputConfig.type || \"text\"}\r\n                    value={inputValue}\r\n                    name=\"inputValue\"\r\n                    onChange={this.handleChange}\r\n                    placeholder={InputConfig.label || \"\"}\r\n                    inputProps={{ id: this.INPUT_ID }}\r\n                />}\r\n                <div>\r\n                    <IconButton onClick={this.handleAdd} >\r\n                        <Add />\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n            {items && items.length\r\n                ? (<List>\r\n                    {items.map((x, index) => (<ListItem key={x[IdProp]} dense >\r\n                        {SecondaryDisplayProp && <ListItemIcon>{x[SecondaryDisplayProp]}</ListItemIcon>}\r\n                        <ListItemText>{x[DisplayProp]}</ListItemText>\r\n                        <ListItemSecondaryAction>\r\n                            <IconButton value={index} name=\"delete\" onClick={this.handleDelete}>\r\n                                <Delete />\r\n                            </IconButton>\r\n                        </ListItemSecondaryAction>\r\n                    </ListItem>))}\r\n                </List>)\r\n                : null}\r\n        </>);\r\n    }\r\n}\r\n\r\nfunction validateInput(value: string, input: InputOptions) {\r\n    var x = (value || \"\").trim();\r\n    if (!x) return \"Digite un valor\";\r\n    if (input.type === \"number\") {\r\n        if (isNaN(+x)) return \"Digite un número\";\r\n    }\r\n    return;\r\n}","import React from \"react\";\r\nimport Input from \"../Input\";\r\nimport Modal from \"../Modal\";\r\nimport API from \"../../Services/API\";\r\nimport ImageInput from \"../ImageInput\";\r\nimport ImageReader, { ImgFileToObject } from \"../../Utils/ImageReader\";\r\nimport { Button, Typography, FormControlLabel, Switch } from \"@material-ui/core\";\r\nimport ItemList from \"../ItemList\";\r\n\r\ninterface Props {\r\n    onDone: (update?: boolean) => void,\r\n    showingID: string,\r\n    productList: FullProduct[]\r\n}\r\ninterface State extends FullProduct {\r\n    error?: { [name: string]: string }\r\n    loading?: string;\r\n    rawFile?: File;\r\n}\r\n\r\nexport default class Edit extends React.Component<Props, State> {\r\n    state = {} as State;\r\n    handleChange = e => {\r\n        const { name, value } = e.currentTarget;\r\n        this.setState({ [name]: value } as any);\r\n    }\r\n    handleChecked = e => {\r\n        const { name, checked } = e.currentTarget;\r\n        this.setState({ [name]: checked } as any);\r\n    }\r\n    handleDelete = () => {\r\n        if (!this.state.id) return;\r\n        var doIt = window.confirm(\"Deseas continuar con esta acción?\");\r\n        if (!doIt) return;\r\n        this.setState({ loading: \"ELIMINAR\" });\r\n        API.DeleteProduct(this.state.id)\r\n            .then(this._updated)\r\n            .catch(this._failed);\r\n    }\r\n    handleSave = () => {\r\n        const errors = this._validar(this.state);\r\n        if (errors) {\r\n            var focusOn = Object.keys(errors)[0];\r\n            window.requestAnimationFrame(() => {\r\n                try { document.getElementById(focusOn).focus(); } catch (ex) { }\r\n            });\r\n            return;\r\n        }\r\n        this.setState({ loading: \"GUARDAR\" });\r\n        if (this.state.rawFile) {\r\n            const { rawFile, ...product } = this.state;\r\n            return ImgFileToObject(this.state.rawFile)\r\n                .then(imageFile => API.SaveProduct({ imageFile, ...product }))\r\n                .then(this._updated)\r\n                .catch(this._failed);\r\n        }\r\n        API.SaveProduct(this.state)\r\n            .then(this._updated)\r\n            .catch(this._failed);\r\n    }\r\n    _validar(data: FullProduct) {\r\n        var nombre = (data.nombre || \"\").trim();\r\n        const errorSet: any = {};\r\n        if (!nombre) errorSet.nombre = \"Digita el nombre\";\r\n        if (!(data.pvp_final || \"\").toString().trim()) {\r\n            errorSet.pvp_final = \"Digita el Precio Final\";\r\n        } else {\r\n            if (isNaN(+data.pvp_final)) {\r\n                errorSet.pvp_final = \"Precio final debe ser un número\";\r\n            }\r\n        }\r\n        if (data.opciones && data.opciones.length && !data.maxItems)\r\n            errorSet.maxItems = \"Digita la cantidad máxima a escoger\";\r\n        if (Object.keys(errorSet).length) return errorSet;\r\n        return;\r\n    }\r\n    _updated = () => {\r\n        this.setState({ loading: null, error: null });\r\n        this.props.onDone(true);\r\n    }\r\n    _failed = error => {\r\n        this.setState({ loading: null, error });\r\n        window.requestAnimationFrame(() => {\r\n            try { document.getElementById(\"ERROR_MESSAGE\").focus(); } catch (ex) { }\r\n        });\r\n    }\r\n    handleClose = () => {\r\n        if (this.state.loading) return;\r\n        this.props.onDone();\r\n    }\r\n    handleFile = rawFile => {\r\n        ImageReader(rawFile)\r\n            .then(imgSrc => this.setState({ imgSrc, rawFile }))\r\n            .catch(this._failed);\r\n    }\r\n\r\n    handleAdd = ({ name, item, inputValue }) => {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            if (name === \"OPCIONES\") {\r\n                state.opciones = state.opciones ? [...state.opciones] : [];\r\n                state.opciones.push({ idOpcion: +item.id });\r\n                return state;\r\n            }\r\n            if (name === \"COMPONENTES\") {\r\n                state.componentes = state.componentes ? [...state.componentes] : [];\r\n                state.componentes.push({ idComponente: +item.id, cantidad: +(inputValue || 1) });\r\n                return state;\r\n            }\r\n        });\r\n    }\r\n    handleRemove = ({ name, index }) => {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            if (name === \"OPCIONES\") {\r\n                state.opciones = [...state.opciones];\r\n                state.opciones.splice(index, 1);\r\n            }\r\n            if (name === \"COMPONENTES\") {\r\n                state.componentes = [...state.componentes];\r\n                state.componentes.splice(index, 1);\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        const id = this.props.showingID;\r\n        const nextId = nextProps.showingID;\r\n        var show = !(id === null || id === undefined);\r\n        var nextShow = !(nextId === null || nextId === undefined);\r\n        if (!show && nextShow) {\r\n            this.setState(prev => {\r\n                var { habilitado, ...exists } = this.props.productList.find(p => p.id === +nextId) || {} as any;\r\n                const keys = Object.keys(this.state)\r\n                // RESETEO LAS PROPIEDADES QUE NO EXISTEN\r\n                if (habilitado === undefined || habilitado === null) habilitado = true;\r\n                return {\r\n                    ...keys.reduce((acc, v) => ({ ...acc, [v]: undefined }), {})\r\n                    , ...exists\r\n                    , habilitado\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // MIENTRAS ESTÉ CERRADO, EL COMPONENTE NO SE ACTUALIZARÁ\r\n    shouldComponentUpdate(nextProps) {\r\n        var isOpen = !(this.props.showingID === null || this.props.showingID === undefined);\r\n        var NextisOpen = !(nextProps.showingID === null || nextProps.showingID === undefined);\r\n        return (isOpen === NextisOpen && isOpen === false) ? false : true;\r\n    }\r\n    render() {\r\n        const { loading } = this.state;\r\n        const id = this.props.showingID;\r\n        const error: any = this._validar(this.state) || {};\r\n        const show = !(id === null || id === undefined);\r\n\r\n        const opciones = (this.state.opciones || []).map(o => ({\r\n            id: o.idOpcion\r\n            , nombre: (this.props.productList.find(a => a.id === o.idOpcion) || {}).nombre\r\n        }));\r\n        const componentes = (this.state.componentes || []).map(o => ({\r\n            id: o.idComponente\r\n            , nombre: (this.props.productList.find(a => a.id === o.idComponente) || {}).nombre\r\n            , cantidad: o.cantidad\r\n        }));\r\n        const dataSource = this.props.productList.filter(x => !x.combo && x.id !== +id);\r\n\r\n        const footer = (<>\r\n            <FormControlLabel\r\n                label=\"Habilitado\"\r\n                style={{ flexGrow: 1 }}\r\n                control={<Switch\r\n                    checked={!!this.state.habilitado}\r\n                    name=\"habilitado\"\r\n                    onChange={this.handleChecked}\r\n                />}\r\n            />\r\n            {id !== \"NUEVO\" && <Button disabled={!!loading} onClick={this.handleDelete} color=\"secondary\" variant=\"outlined\" >\r\n                {loading === \"ELIMINAR\" ? \"ELIMINANDO...\" : \"ELIMINAR\"}\r\n            </Button>}\r\n            <Button disabled={!!loading} onClick={this.handleSave} color=\"primary\" variant=\"outlined\" >\r\n                {loading === \"GUARDAR\" ? \"GUARDANDO...\" : \"GUARDAR\"}\r\n            </Button>\r\n            <Button color=\"inherit\" disabled={!!loading} onClick={this.handleClose}>SALIR</Button>\r\n        </>);\r\n\r\n        return (<Modal\r\n            title=\"Edita el Producto\"\r\n            onClose={this.handleClose}\r\n            show={show}\r\n            footer={footer}\r\n        >\r\n            <Input\r\n                value={this.state.nombre || \"\"}\r\n                onChange={this.handleChange}\r\n                name=\"nombre\"\r\n                required\r\n                label=\"Nombre\"\r\n                maxLength={100}\r\n                error={error.nombre}\r\n            />\r\n            <ImageInput\r\n                className=\"card-product-img\"\r\n                onChange={this.handleFile}\r\n                src={this.state.imgSrc}\r\n                title={this.state.nombre}\r\n            />\r\n            <div style={{ textAlign: \"center\", marginBottom: 10 }}>\r\n                <Typography variant=\"caption\">\r\n                    El peso recomendado para la imagen es entre 100 y 200 Kbs.\r\n            </Typography>\r\n            </div>\r\n\r\n            <div style={{ marginLeft: \"auto\", marginRight: \"auto\", textAlign: \"center\" }}>\r\n                <Input type=\"phone\"\r\n                    value={this.state.pvp_final || \"\" as any}\r\n                    onChange={this.handleChange}\r\n                    name=\"pvp_final\"\r\n                    required\r\n                    label=\"Precio Final\"\r\n                    maxLength={10}\r\n                    error={error.pvp_final}\r\n                    style={{ marginRight: 10 }}\r\n                />\r\n                <Input type=\"phone\"\r\n                    value={this.state.cantidad_desde || \"\" as any}\r\n                    onChange={this.handleChange}\r\n                    name=\"cantidad_desde\"\r\n                    label=\"Cantidad mínima\"\r\n                    maxLength={2}\r\n                    error={error.cantidad_desde}\r\n                    style={{}}\r\n                />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 20, textAlign: \"center\", marginLeft: \"auto\", marginRight: \"auto\" }}>\r\n                <FormControlLabel\r\n                    label=\"El producto es un combo\"\r\n                    control={<Switch\r\n                        checked={!!this.state.combo}\r\n                        name=\"combo\"\r\n                        onChange={this.handleChecked}\r\n                    />}\r\n                />\r\n            </div>\r\n\r\n            {this.state.combo && <>\r\n                <Typography style={{ marginTop: 20 }} variant=\"h6\">COMPONENTES</Typography>\r\n                <ItemList\r\n                    dataSource={dataSource}\r\n                    items={componentes}\r\n                    onAdd={this.handleAdd}\r\n                    onRemove={this.handleRemove}\r\n                    IdProp=\"id\"\r\n                    DisplayProp=\"nombre\"\r\n                    SecondaryDisplayProp=\"cantidad\"\r\n                    InputConfig={{ type: \"number\", label: \"Cantidad\" }}\r\n                    name=\"COMPONENTES\"\r\n                />\r\n\r\n                <Typography style={{ marginTop: 20 }} variant=\"h6\">OPCIONES</Typography>\r\n                <ItemList\r\n                    dataSource={dataSource}\r\n                    items={opciones}\r\n                    onAdd={this.handleAdd}\r\n                    onRemove={this.handleRemove}\r\n                    IdProp=\"id\"\r\n                    DisplayProp=\"nombre\"\r\n                    name=\"OPCIONES\"\r\n                />\r\n                <Input type=\"phone\"\r\n                    value={this.state.maxItems || \"\" as any}\r\n                    onChange={this.handleChange}\r\n                    name=\"maxItems\"\r\n                    label=\"Máximo\"\r\n                    maxLength={2}\r\n                    error={error.maxItems}\r\n                    style={{}}\r\n                />\r\n\r\n\r\n                <Typography variant=\"body2\" color=\"secondary\" id=\"ERROR_MESSAGE\" tabIndex={0} style={{ marginTop: 10 }}>\r\n                    {this.state.error && this.state.error.message}\r\n                </Typography>\r\n            </>}\r\n\r\n        </Modal>);\r\n    }\r\n}","import React from \"react\";\r\nimport API from \"../../Services/API\";\r\nimport ProductGrid from \"./ProductGrid\";\r\nimport { Typography, CircularProgress } from \"@material-ui/core\";\r\nimport { Route } from \"react-router-dom\";\r\nimport Edit from \"./Edit\";\r\n\r\nexport default class extends React.Component<any, any> {\r\n    state = {\r\n        data: [] as Product[],\r\n        loading: true,\r\n        error: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.match.path);\r\n        this._Update();\r\n    }\r\n\r\n    _Update = () => {\r\n        API.GetProducts(true)\r\n            .then(data => this.setState({ data, loading: false }))\r\n            .catch(error => this.setState({ loading: false, error }));\r\n    }\r\n    handleClick = e => {\r\n        this.props.history.push(this.props.match.path + \"/\" + e.currentTarget.value);\r\n    }\r\n    handleDone = shouldUpdate => {\r\n        if (shouldUpdate) this._Update();\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    productSorted() {\r\n        return this.state.data.sort((a, b) => a.orden - b.orden);\r\n    }\r\n    handleAction = event => {\r\n        const { name, value } = event.currentTarget;\r\n        var sorted = this.productSorted();\r\n        var exists = sorted.find(x => x.id === +value);\r\n        // NO EXISTE\r\n        if (!exists) return;\r\n        // PRIMERO\r\n        if (name === \"LEFT\" && sorted.indexOf(exists) === 0) return;\r\n        // ULTIMO\r\n        if (name === \"RIGHT\" && sorted.length === (sorted.indexOf(exists) + 1)) return;\r\n\r\n        API.SendProductAction(value, name)\r\n            .then(this._Update)\r\n            .catch(error => this.setState({ error }));\r\n    }\r\n    render() {\r\n        if (this.state.loading)\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h6\">CARGANDO...</Typography>\r\n            </div>);\r\n\r\n        return (<div style={{ width: \"calc(100% - 25px)\", margin: \"auto\", marginTop: 10 }}>\r\n            <ProductGrid\r\n                items={this.productSorted()}\r\n                showNewItem={true}\r\n                visible={true}\r\n                controls=\"LEFT-RIGHT\"\r\n                onActionClick={this.handleAction}\r\n                onCardClick={this.handleClick}\r\n            />\r\n            <Route\r\n                path={this.props.match.path + \"/:id\"}\r\n                children={({ match }) => (\r\n                    <Edit\r\n                        productList={this.state.data}\r\n                        showingID={match && match.params.id}\r\n                        onDone={this.handleDone}\r\n                    />\r\n                )}\r\n            />\r\n        </div>);\r\n    }\r\n}","const UserColumns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"ID\"\r\n    }, {\r\n        name: \"grupo\",\r\n        label: \"Grupo\"\r\n    }, {\r\n        name: \"nombre\",\r\n        label: \"Nombre\"\r\n    }, {\r\n        name: \"username\",\r\n        label: \"Usuario\"\r\n    }, {\r\n        name: \"Rol\",\r\n        label: \"Rol\"\r\n    }, {\r\n        name: \"ultimoPedido\",\r\n        options: { display: \"\" }\r\n    }, {\r\n        name: \"UltimoPedido\",\r\n        label: \"Ultimo Pedido\"\r\n    }, {\r\n        name: \"Estado\",\r\n        label: \"Estado\"\r\n    }\r\n]\r\nexport default UserColumns;","import React from \"react\";\r\nimport { FormLabel, InputAdornment, TextField, IconButton, Typography, Button, CircularProgress, FormControlLabel, Switch } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\n\r\ninterface Props {\r\n    loading: boolean;\r\n\r\n    id?: number;\r\n    nombre: string;\r\n    identificacion: string;\r\n    telefono: string;\r\n    email: string;\r\n    nacionalidad: string;\r\n    ciudad: string;\r\n    fechaNacimiento: string;\r\n    direccion: string;\r\n    username: string;\r\n    password: string;\r\n    confirm_password: string;\r\n    grupo: string;\r\n    grupos: { id: string, nombre: string }[];\r\n\r\n    rol?: number;\r\n    editarPVPsdurantePedido?: boolean;\r\n    estado?: string;\r\n\r\n    mustAcceptTermsAndConds?: boolean;\r\n    termsAndCondsAcceptedAt?: Date;\r\n\r\n    onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\r\n    onSubmit: () => void;\r\n    formType: \"SIGN-IN\" | \"EDIT\",\r\n    editionType: \"USER\" | \"ADMIN\"\r\n    error?: any;\r\n    children?: React.ReactNode\r\n}\r\n\r\nexport default function (props: Props) {\r\n\r\n    const {\r\n        loading, id, error, onSubmit, onChange, formType, editionType,\r\n        ...state } = props;\r\n    const grupos = props.grupos || [];\r\n\r\n    function _onSubmit(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        onSubmit();\r\n    }\r\n\r\n    const editarEstado = formType === \"EDIT\" && editionType !== \"USER\" ? true : null;\r\n    const editarModificarPVPs = (formType === \"EDIT\" && editionType !== \"USER\" && +state.rol === 3) ? true : null;\r\n    const editarTermsAndConds = formType === \"EDIT\" && editionType !== \"USER\";\r\n    const editarGrupo = (+state.rol === 1 || state.rol === undefined || state.rol === null);\r\n    const editarNombreGrupo = +state.rol === 2 && editionType !== \"USER\";\r\n\r\n    return (<form style={{ margin: \"auto\", maxWidth: 600 }} noValidate onSubmit={_onSubmit}>\r\n        <Typography variant=\"h6\">Información Personal</Typography>\r\n        <Input disabled={loading} error={error && error.nombre} onChange={onChange} value={state.nombre || \"\"} name=\"nombre\" label=\"Nombres Completos\" />\r\n        <Input disabled={loading} error={error && error.identificacion} onChange={onChange} value={state.identificacion || \"\"} name=\"identificacion\" label=\"Identificacion (CI o Pasaporte)\" type=\"phone\" />\r\n        <Input disabled={loading} error={error && error.telefono} onChange={onChange} value={state.telefono || \"\"} name=\"telefono\" label=\"Telefono\" type=\"phone\" />\r\n        <Input disabled={loading} error={error && error.email} onChange={onChange} value={state.email || \"\"} name=\"email\" label=\"Correo Electronico\" type=\"email\" />\r\n        <Input disabled={loading} error={error && error.nacionalidad} onChange={onChange} value={state.nacionalidad || \"\"} name=\"nacionalidad\" label=\"Nacionalidad\" />\r\n        <Input disabled={loading} error={error && error.fechaNacimiento} onChange={onChange} value={state.fechaNacimiento || \"\"} name=\"fechaNacimiento\" label=\"Fecha Nacimiento\" type=\"date\" />\r\n\r\n        <Typography variant=\"h6\" style={{ marginTop: 30 }}>{formType === \"SIGN-IN\" ? \"Agrega tu dirección\" : \"Dirección\"}</Typography>\r\n        <Input disabled={loading} error={error && error.ciudad} onChange={onChange} value={state.ciudad || \"\"} name=\"ciudad\" label=\"Ciudad\" />\r\n        <Input disabled={loading} error={error && error.direccion} onChange={onChange} value={state.direccion || \"\"} name=\"direccion\" label=\"Direccion\" />\r\n\r\n        <Typography variant=\"h6\" style={{ marginTop: 30 }}>{formType === \"SIGN-IN\" ? \"Crea tu Usuario\" : \"Usuario\"}</Typography>\r\n        <Input disabled={loading} error={error && error.username} onChange={onChange} value={state.username || \"\"} name=\"username\" label=\"Usuario\" />\r\n        <Password required={formType === \"SIGN-IN\"} disabled={loading} error={error && error.password} onChange={onChange} value={state.password || \"\"} name=\"password\" label={formType === \"EDIT\" ? \"Nueva contraseña\" : \"Contraseña\"} />\r\n        <Password required={formType === \"SIGN-IN\"} disabled={loading} error={error && error.confirm_password} onChange={onChange} value={state.confirm_password || \"\"} name=\"confirm_password\" label={formType === \"EDIT\" ? \"confirma la nueva contraseña\" : \"Confirma tu contraseña\"} />\r\n\r\n        <Typography variant=\"h6\" style={{ marginTop: 30 }} >{formType === \"SIGN-IN\" ? \"A qué grupo quieres pertenecer?\" : \"Configuración del Usuario\"}</Typography>\r\n\r\n        {formType === \"EDIT\" && id\r\n            ? (<div style={{ marginTop: 10, marginBottom: 10 }}>\r\n                <Typography style={{ display: \"inline\" }} >Rol: </Typography>\r\n                <Typography style={{ display: \"inline\" }} variant=\"button\" >{RolToString(state.rol)}</Typography>\r\n            </div>)\r\n            : (formType === \"EDIT\" && <Input\r\n                select\r\n                disabled={loading}\r\n                value={state.rol || \"\"}\r\n                name=\"rol\"\r\n                label=\"Rol\"\r\n                SelectProps={{ native: true }}\r\n                onChange={onChange}\r\n            >\r\n                <option value=\"1\" >{RolToString(1)}</option>\r\n                <option value=\"2\" >{RolToString(2)}</option>\r\n                <option value=\"3\" >{RolToString(3)}</option>\r\n            </Input>)}\r\n\r\n        {editarGrupo &&\r\n            <Input select\r\n                disabled={loading}\r\n                error={error && error.grupo}\r\n                onChange={onChange}\r\n                value={state.grupo || \"\"}\r\n                name=\"grupo\"\r\n                label=\"\"\r\n                SelectProps={{ native: true }}\r\n            >\r\n                <option value=\"\">- SELECCIONA UN GRUPO -</option>\r\n                {grupos.map(g => <option key={g.id} value={g.id} >{g.id} - {g.nombre}</option>)}\r\n            </Input>}\r\n\r\n        {editarNombreGrupo &&\r\n            <Input\r\n                name=\"grupo\"\r\n                label=\"Grupo\"\r\n                value={state.grupo || \"\"}\r\n                onChange={onChange}\r\n                error={error && error.grupo}\r\n                diabled={loading}\r\n                inputProps={{ maxLength: 50 }}\r\n            />}\r\n\r\n        {editarEstado &&\r\n            <Input\r\n                select\r\n                disabled={loading}\r\n                value={(state.estado === undefined || state.estado === null) ? \"\" : state.estado.toString()}\r\n                name=\"estado\"\r\n                label=\"Estado\"\r\n                SelectProps={{ native: true }}\r\n                onChange={onChange}\r\n            >\r\n                <option value=\"1\" >PENDIENTE</option>\r\n                <option value=\"0\" >APROBADO (Habilitado)</option>\r\n                <option value=\"2\" >RECHAZADO (Deshabilitado)</option>\r\n            </Input>}\r\n\r\n        {editarModificarPVPs &&\r\n            <FormControlLabel\r\n                label=\"Puede modificar precios durante toma de pedido\"\r\n                control={<Switch\r\n                    checked={Boolean(state.editarPVPsdurantePedido)}\r\n                    name=\"editarPVPsdurantePedido\"\r\n                    onChange={onChange}\r\n                />}\r\n            />\r\n        }\r\n\r\n        {editarTermsAndConds &&\r\n            <div style={{ margin: \"auto\", textAlign: \"center\", paddingTop: 20, paddingBottom: 20 }}>\r\n                <FormControlLabel\r\n                    control={<input\r\n                        type=\"checkbox\"\r\n                        onChange={onChange}\r\n                        name=\"mustAcceptTermsAndConds\"\r\n                        checked={state.mustAcceptTermsAndConds || false}\r\n                    />}\r\n                    label=\"Mostrar Aceptar Terminos y Condiciones al iniciar\"\r\n                />\r\n                {state.termsAndCondsAcceptedAt && <div style={{ marginTop: 10 }}>\r\n                    <Typography variant=\"button\">\r\n                        Este usuario ha aceptado los Términos y Condiciones el:\r\n                {new Date(state.termsAndCondsAcceptedAt).toLocaleString()}\r\n                    </Typography>\r\n                </div>}\r\n            </div>}\r\n\r\n\r\n        {(error && error.guardar) ? <Typography tabIndex={0} id=\"guardar\" color=\"secondary\">{error.guardar}</Typography> : null}\r\n        {formType === \"SIGN-IN\" &&\r\n            (<Button type=\"submit\" color=\"primary\" variant=\"outlined\" fullWidth style={{ marginTop: 20 }} >\r\n                {loading ? <CircularProgress size={20} color=\"inherit\" /> : \"ENVIAR\"}\r\n            </Button>)}\r\n        {props.children}\r\n    </form >\r\n    );\r\n}\r\n\r\nfunction Input(props: {\r\n    name: string,\r\n    value: any,\r\n    onChange: any,\r\n    label: string,\r\n    type?: string,\r\n    disabled?: boolean,\r\n    error?: any,\r\n    [key: string]: any\r\n}) {\r\n    const { error, type, label, ...other_props } = props;\r\n    var input_props: any = { type, inputProps: { id: props.name } };\r\n    if (error) {\r\n        input_props.error = true;\r\n        input_props.helperText = error;\r\n    }\r\n    if (type === \"date\")\r\n        return (<div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\", marginBottom: 5, marginTop: 15 }}>\r\n            <FormLabel style={{ paddingTop: 8, marginRight: 5 }}>{label}</FormLabel>\r\n            <TextField\r\n                required\r\n                {...input_props}\r\n                style={{ flex: 1 }}\r\n                {...other_props}\r\n            >{props.children} </TextField>\r\n        </div>);\r\n\r\n    input_props.label = label;\r\n\r\n    return (<TextField\r\n        fullWidth\r\n        required\r\n        {...input_props}\r\n        style={{ marginTop: 5, marginBottom: 5 }}\r\n        {...other_props}\r\n    />);\r\n}\r\n\r\nfunction Password(props: any) {\r\n    const { error, ...other_props } = props;\r\n    const [show_password, switchShowPassword] = React.useState(false);\r\n    var input_props: any = { inputProps: { id: props.name } };\r\n    if (error) {\r\n        input_props.error = true;\r\n        input_props.helperText = error;\r\n    }\r\n    return (<TextField\r\n        type={show_password ? \"text\" : \"password\"}\r\n        required\r\n        fullWidth\r\n        {...other_props}\r\n        {...input_props}\r\n        style={{ marginTop: 5, marginBottom: 5 }}\r\n        InputProps={{\r\n            endAdornment: <InputAdornment position=\"end\" >\r\n                <IconButton onClick={x => switchShowPassword(!show_password)}>\r\n                    {show_password ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n            </InputAdornment>\r\n        }}\r\n    />);\r\n}\r\n\r\n\r\nfunction RolToString(rol: number) {\r\n    if (+rol === 1) return \"ASESOR/A\";\r\n    if (+rol === 2) return \"GUÍA\";\r\n    if (+rol === 3) return \"ADMINISTRADOR/A\";\r\n    return \"\";\r\n}","interface Options {\r\n    passwordOpcional?: boolean;\r\n}\r\nexport default function ValidateUserForm(state: any, options: Options = {}) {\r\n    const { nombre,\r\n        telefono,\r\n        identificacion,\r\n        email,\r\n        fechaNacimiento,\r\n        nacionalidad,\r\n        ciudad,\r\n        direccion,\r\n        username,\r\n        password,\r\n        grupo,\r\n        confirm_password,\r\n        rol\r\n    } = state;\r\n\r\n    const result: any = {};\r\n\r\n    if (isEmpty(nombre)) result.nombre = \"Digita tu nombre\";\r\n\r\n    if (isEmpty(telefono)) {\r\n        result.telefono = \"Digita tu telefono\";\r\n    } else {\r\n        if (isNaN(parseInt(telefono))) result.telefono = \"El telefono solo puede contener numeros\";\r\n        if (telefono.length <= 5) result.telefono = \"El telefono debe tener mínimo 6 digitos\";\r\n    }\r\n\r\n    if (isEmpty(identificacion)) {\r\n        result.identificacion = \"Digita tu identificacion\";\r\n    }\r\n\r\n    if (isEmpty(email)) {\r\n        result.email = \"Digita tu email\";\r\n    } else {\r\n        if (email.indexOf(\"@\") === -1) result.email = \"El correo es incorrecto\";\r\n        if (email.indexOf(\".\") === -1) result.email = \"El correo es incorrecto\";\r\n    }\r\n\r\n    if (isEmpty(fechaNacimiento)) {\r\n        result.fechaNacimiento = \"Digita tu fecha de nacimiento\";\r\n    } else {\r\n        if (isNaN(+new Date(fechaNacimiento))) result.fechaNacimiento = \"La fecha no es válida\";\r\n    }\r\n\r\n    if (isEmpty(nacionalidad)) result.nacionalidad = \"Digita tu nacionalidad\";\r\n    if (isEmpty(ciudad)) result.ciudad = \"Digita tu ciudad\";\r\n    if (isEmpty(direccion)) result.direccion = \"Digita tu direccion\";\r\n\r\n    if (isEmpty(username)) result.username = \"Digita tu Usuario\";\r\n    if (isEmpty(password)) {\r\n        if (!options.passwordOpcional)\r\n            result.password = \"Digita la contraseña\";\r\n    } else {\r\n        if (password.length < 5) result.password = \"La contraseña debe tener más de 6 caracteres\";\r\n        if (password.trim() !== (confirm_password || \"\").trim()) result.confirm_password = \"Las contraseñas no concuerdan entre si\";\r\n    }\r\n    if (isEmpty(grupo)) {\r\n        if (+rol === 2) result.grupo = \"Digita el nombre de tu grupo\";\r\n        if (+rol === 1 || rol === undefined) result.grupo = \"Selecciona tu grupo\";\r\n    }\r\n\r\n    if (Object.keys(result).length) {\r\n        var key = Object.keys(result)[0];\r\n        FocusOn(key);\r\n        return result;\r\n    }\r\n    return null;\r\n}\r\nexport function FocusOn(id) {\r\n    window.requestAnimationFrame(() => {\r\n        try {\r\n            document.getElementById(id).focus();\r\n        } catch (ex) { }\r\n    });\r\n}\r\nfunction isEmpty(value) {\r\n    return !(value && value.length);\r\n}","import React from \"react\";\r\nimport Modal from \"../Modal\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport UserDataForm from \"./UserDataForm\";\r\nimport ValidateUserForm, { FocusOn } from \"./ValidateUserForm\";\r\nimport API from \"../../Services/API\";\r\n\r\ninterface EditUserProps {\r\n    show: boolean;\r\n    initialData: VisibleUser;\r\n    grupos: any[];\r\n    onClose: (shouldUpdate?: boolean) => void;\r\n}\r\ninterface State extends VisibleUser {\r\n    loading: boolean;\r\n    error: any;\r\n    validarPassword?: boolean;\r\n}\r\n\r\nexport default class EditUserData extends React.Component<EditUserProps, State> {\r\n    state = {} as State;\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        var show = this.props.show;\r\n        var nextShow = nextProps.show;\r\n        if (!show && nextShow) {\r\n            this.setState(prev => {\r\n                const keys = Object.keys(prev);\r\n                // RESETEO LAS PROPIEDADES QUE NO EXISTEN\r\n                var state = {\r\n                    ...keys.reduce((acc, v) => ({ ...acc, [v]: undefined }), {})\r\n                    , ...nextProps.initialData || {}\r\n                }\r\n                if (state.estado === undefined) state.estado = 1;\r\n                if (state.rol === undefined) state.rol = 1;\r\n                state.validarPassword = !state.id;\r\n                return state;\r\n            });\r\n        }\r\n    }\r\n    // MIENTRAS ESTÉ CERRADO, EL COMPONENTE NO SE ACTUALIZARÁ\r\n    shouldComponentUpdate(nextProps) {\r\n        var isOpen = this.props.show;\r\n        var NextisOpen = nextProps.show;\r\n        return (isOpen === NextisOpen && isOpen === false) ? false : true;\r\n    }\r\n\r\n    handleClose = () => {\r\n        if (this.state.loading) return;\r\n        this.props.onClose();\r\n    }\r\n\r\n    handleChange = event => {\r\n        var { name, value, type, checked } = event.currentTarget;\r\n        value = type === \"checkbox\" ? checked : value;\r\n        this.setState({ [name]: value } as any);\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        // divido el objeto para evitar enviar TODOS los parametros secundarios al servidor\r\n        const { loading, error, validarPassword, ...userData } = this.state;\r\n        if (loading) return;\r\n        var validationErrors = ValidateUserForm(userData, {\r\n            passwordOpcional: !validarPassword\r\n        });\r\n        if (validationErrors) return this.setState({ error: validationErrors });\r\n        this.setState({ loading: true });\r\n        API.SaveUser(userData)\r\n            .then(x => this.props.onClose(true))\r\n            .catch(error => this.setState({ error, loading: false },\r\n                () => Object.keys(error).forEach(FocusOn))\r\n            );\r\n    }\r\n    handleDelete = event => {\r\n        if (!this.state.id) return;\r\n        if (this.state.loading) return;\r\n        var isOk = window.confirm(\"Deseas eliminar este usuario?\");\r\n        if (!isOk) return;\r\n        this.setState({ loading: true });\r\n        API.DeleteUser(this.state.id)\r\n            .then(x => this.props.onClose(true))\r\n            .catch(err => this.setState({\r\n                error: { guardar: err.message },\r\n                loading: false\r\n            }, () => window.requestAnimationFrame(\r\n                () => document.getElementById(\"guardar\").focus()\r\n            )));\r\n    }\r\n    render() {\r\n        const { grupos } = this.props;\r\n        const { loading, error, ...state } = this.state;\r\n\r\n        const footer = (<>\r\n            <Button disabled={loading} variant=\"outlined\" onClick={this.handleDelete} color=\"secondary\">ELIMINAR</Button>\r\n            <Button disabled={loading} variant=\"outlined\" onClick={this.handleSubmit} color=\"primary\">GUARDAR</Button>\r\n            <Button disabled={loading} onClick={this.handleClose} color=\"primary\">SALIR</Button>\r\n        </>);\r\n\r\n        return (<Modal show={this.props.show} title=\"Usuario\" footer={footer} onClose={this.handleClose}>\r\n            <UserDataForm\r\n                formType=\"EDIT\"\r\n                editionType=\"ADMIN\"\r\n                grupos={grupos}\r\n                {...state as any}\r\n                loading={loading}\r\n                error={error}\r\n                onSubmit={this.handleSubmit}\r\n                onChange={this.handleChange}\r\n            />\r\n\r\n        </Modal>);\r\n    }\r\n}","import React from \"react\";\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport UserColumns from \"./Columns\";\r\nimport { Tooltip, IconButton, Typography, CircularProgress } from \"@material-ui/core\";\r\nimport { Add, Policy } from \"@material-ui/icons\";\r\nimport API from \"../../Services/API\";\r\nimport Edit from \"./Edit\";\r\nimport { Route } from \"react-router-dom\";\r\nimport RouteMessage from \"../RouteMessage\";\r\n\r\nexport default class Users extends React.Component<UserProps> {\r\n    unmounted = false;\r\n    state = {\r\n        data: [] as VisibleUser[],\r\n        grupos: [],\r\n        loading: true,\r\n        error: null\r\n    }\r\n    componentWillMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.match.path);\r\n        this.FetchData();\r\n    }\r\n    componentWillUnmount() { this.unmounted = true };\r\n    FetchData = () => {\r\n        this.setState({ loading: true });\r\n        Promise.all([API.GetUsers(), API.GetGroups()])\r\n            .then(([data, grupos]) => {\r\n                if (this.unmounted) return;\r\n                this.setState({\r\n                    grupos, data: (data || []).map(x => {\r\n                        if (x.ultimoPedido)\r\n                            x.UltimoPedido = new Date(x.ultimoPedido).toLocaleDateString();\r\n                        return x;\r\n                    }),\r\n                    loading: false\r\n                });\r\n            }).catch(error => {\r\n                this.setState({ loading: false });\r\n                if (this.unmounted) return;\r\n                this.reportError(error.message);\r\n            });\r\n    }\r\n    reportError(b: string, a?: string, focusafter: string = \"\") {\r\n        if (this.unmounted) return;\r\n        var params = new URLSearchParams({\r\n            a: a || \"Ocurrió un problema\",\r\n            b,\r\n            focusafter\r\n        });\r\n        this.props.history.push(this.props.match.path + \"/msg?\" + params.toString());\r\n    }\r\n    handleNew = () => {\r\n        this.props.history.push(this.props.match.path + \"/view/NUEVO\");\r\n    }\r\n    handleClose = update => {\r\n        if (update) this.FetchData();\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n\r\n    handleClick = (arr_data) => {\r\n        var ID = arr_data[0];\r\n        this.props.history.push(this.props.match.path + \"/view/\" + ID);\r\n    }\r\n    handleTermsAndConds = () => {\r\n        var isOk = window.confirm(\"Esta seguro de Mostrar en TODOS los usuarios ACEPTAR TERMINOS Y CONDICIONES al entrar\");\r\n        if (isOk) {\r\n            API.SendUserAction(\"ACCEPT_TERMS_AND_CONDS\", \"all\")\r\n                .then(this.FetchData)\r\n                .catch(ex => this.reportError(ex.message));\r\n        }\r\n    }\r\n    render() {\r\n        const { data, loading, grupos } = this.state;\r\n\r\n        if (loading)\r\n            return (<div style={{ paddingTop: 10, textAlign: \"center\" }}>\r\n                <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                <CircularProgress size={50} color=\"primary\" />\r\n            </div>)\r\n\r\n        return (<div>\r\n            <MUIDataTable\r\n                data={data}\r\n                columns={UserColumns}\r\n                options={{\r\n                    selectableRows: \"none\",\r\n                    onRowClick: this.handleClick,\r\n                    customToolbar: () => {\r\n                        return (<>\r\n                            <Tooltip title=\"Agregar Usuario\" >\r\n                                <IconButton color=\"primary\" onClick={this.handleNew} >\r\n                                    <Add />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                            <div style={{ width: 100, minWidth: 100 }}></div>\r\n                            <Tooltip title=\"Mostrar en TODOS los usuarios ACEPTAR TERMINOS Y CONDICIONES al entrar\">\r\n                                <IconButton color=\"secondary\" onClick={this.handleTermsAndConds}  >\r\n                                    <Policy />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </>);\r\n                    },\r\n                    customSort(data, colIndex: number, order: \"asc\" | \"desc\") {\r\n                        var col = UserColumns[colIndex];\r\n                        return data.sort((a, b) => {\r\n                            var value1 = a.data[colIndex];\r\n                            var value2 = b.data[colIndex];\r\n\r\n                            if (col.name === \"UltimoPedido\") {\r\n                                value1 = (a.data[colIndex - 1] && new Date(a.data[colIndex - 1]).valueOf()) || 0;\r\n                                value2 = (b.data[colIndex - 1] && new Date(b.data[colIndex - 1]).valueOf()) || 0;\r\n                            } else {\r\n                                if (typeof value1 === typeof \"\") value1 = value1.toLowerCase().trim();\r\n                                if (typeof value2 === typeof \"\") value2 = value2.toLowerCase().trim();\r\n                            }\r\n                            if (order === \"desc\") {\r\n                                if (value1 > value2) return -1;\r\n                                if (value2 > value1) return 1;\r\n                                return 0;\r\n                            }\r\n                            if (value1 < value2) return -1;\r\n                            if (value2 < value1) return 1;\r\n                            return 0;\r\n                        });\r\n                    }\r\n                }}\r\n            />\r\n            <Route path={this.props.match.path + \"/msg\"} component={RouteMessage} />\r\n            <Route path={this.props.match.path + \"/view/:id\"} children={({ match }) => <Edit\r\n                show={match && match.params.id ? true : false}\r\n                grupos={grupos}\r\n                initialData={match && data.find(d => d.id === +match.params.id)}\r\n                onClose={this.handleClose}\r\n            />} />\r\n        </div>);\r\n    }\r\n}\r\n\r\ninterface UserProps {\r\n    onMounted?: any,\r\n    match?: any,\r\n    history?: any\r\n}","import React from \"react\";\r\n\r\nexport default class extends React.PureComponent<{\r\n    TextSrc: string;\r\n    onMounted?: (path: any) => void;\r\n    path?: string;\r\n    className?: string;\r\n}> {\r\n    componentWillMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.path);\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"Iframe-Liason-Sheet\" className={\"iframe-border center-block-horiz \" + (this.props.className || \"\")}>\r\n                <div className=\"responsive-wrapper responsive-wrapper-wxh-760x1200\">\r\n                    <iframe\r\n                        title=\"Politicas de Natú\"\r\n                        src={this.props.TextSrc}\r\n                    >Cargando...</iframe>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport PolicyPage from \"../Components/PolicyPage\";\r\nimport { Button, FormControlLabel } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\n\r\nexport default class extends React.Component<{\r\n    onDone: () => void\r\n}> {\r\n    state = {\r\n        checked: false,\r\n        loading: false\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleCheck = this.handleCheck.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n    handleCheck(event) {\r\n        const checked = event.currentTarget.checked;\r\n        this.setState({ checked });\r\n    }\r\n    handleClick(event) {\r\n        if (this.state.loading) return;\r\n        if (!this.state.checked) return;\r\n        this.setState({ loading: true });\r\n\r\n        API.SendUserAction(\"ACCEPT_TERMS_AND_CONDS\")\r\n            .then(this.props.onDone)\r\n            .catch(ex => {\r\n                alert(ex.message);\r\n                this.setState({ loading: false });\r\n            });\r\n    }\r\n    render() {\r\n        const { checked, loading } = this.state;\r\n        return (<div className=\"full-height\" style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <PolicyPage\r\n                className=\"iframe-wrapper-with-max-height\"\r\n                TextSrc=\"https://docs.google.com/document/d/e/2PACX-1vQM7gflRmudx9mnIJpfZMu5gM3WUl3u_h8RRuyVbb6yErxWTnU_jeu8kcKUJhht3VadenapB4nINf7h/pub?embedded=true\"\r\n            />\r\n            <div style={{\r\n                margin: \"auto\",\r\n                textAlign: \"center\",\r\n                paddingTop: 10,\r\n                paddingBottom: 10,\r\n                width: \"100%\"\r\n            }}>\r\n                <FormControlLabel\r\n                    control={<input\r\n                        disabled={loading}\r\n                        checked={checked}\r\n                        type=\"checkbox\"\r\n                        onChange={this.handleCheck}\r\n                    />}\r\n                    label=\"Acepto los términos y condiciones\"\r\n                />\r\n                <Button\r\n                    disabled={loading || !checked}\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    onClick={this.handleClick}\r\n                >\r\n                    CONTINUAR\r\n                </Button>\r\n            </div>\r\n        </div>);\r\n    }\r\n}","import React from \"react\";\r\nimport UserDataForm from \"./Users/UserDataForm\";\r\nimport API from \"../Services/API\";\r\nimport ValidateUserForm from \"./Users/ValidateUserForm\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nexport default function (props: {\r\n    userId: number,\r\n    onSubmit?: Function\r\n    onMounted?: Function,\r\n    match?: any,\r\n}) {\r\n    const [user, set_user] = React.useState({} as VisibleUser);\r\n    const [status, set_status] = React.useState(\"\" as \"GUARDAR\" | \"\" | \"GUARDADO\");\r\n    const [errores, set_errores] = React.useState(undefined);\r\n\r\n    function userchanged(event: React.ChangeEvent<HTMLInputElement>) {\r\n        set_user({ ...user, [event.target.name]: event.target.value });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        props.onMounted && props.match && props.onMounted(props.match.path);\r\n        API.GetUser(props.userId).then(set_user);\r\n    }, []);\r\n    React.useEffect(() => {\r\n        if (!status) return;\r\n        var validationErrors = ValidateUserForm(user, { passwordOpcional: true });\r\n        if (validationErrors) {\r\n            set_status(\"\");\r\n            set_errores(validationErrors);\r\n            return;\r\n        }\r\n        API.SaveUser(user).then(x => {\r\n            set_status(\"GUARDADO\");\r\n            set_errores(undefined);\r\n            props.onSubmit && props.onSubmit();\r\n        }).catch(ex => {\r\n            set_errores({\r\n                guardar: ex.message\r\n            });\r\n        });\r\n    }, [status]);\r\n\r\n    const isLoading = user.id === undefined || (status === \"GUARDAR\");\r\n\r\n    return <div style={{ padding: 15 }}>\r\n        <UserDataForm\r\n            onSubmit={() => set_status(\"GUARDAR\")}\r\n            onChange={userchanged}\r\n            error={errores}\r\n            formType=\"EDIT\"\r\n            editionType=\"USER\"\r\n            loading={isLoading}\r\n            {...user as any}\r\n        >\r\n            <div style={{ padding: 5 }}>\r\n                <Button fullWidth type=\"submit\" color={status === \"GUARDADO\" ? \"secondary\" : \"primary\"} disabled={isLoading} variant=\"outlined\" >\r\n                    {status === \"GUARDADO\" ? \"Listo!\" : \"Actualizar datos\"}\r\n                </Button>\r\n            </div>\r\n        </UserDataForm>\r\n    </div>\r\n}","import React from 'react';\nimport { Drawer, List, ListItem, ListItemIcon, ListItemText, Typography, CssBaseline, withStyles, AppBar, Toolbar, IconButton, Hidden } from '@material-ui/core';\nimport { ShoppingCart, ListAlt, Menu, Close, Help, Inbox, Report, Category, Policy, PeopleAlt, Person } from \"@material-ui/icons\";\nimport { Link, Switch, Route, Redirect, HashRouter } from \"react-router-dom\";\nimport Order from './../Components/Order';\nimport OrderList from './../Components/OrderList';\nimport Feed from './../Components/Feed';\nimport Reports from './../Components/Reports';\nimport OrderQueue from '../Components/OrderQueue';\nimport Products from '../Components/Products';\nimport Users from '../Components/Users';\nimport PolicyPage from '../Components/PolicyPage';\nimport TermsAndConds from './TermsAndConds';\nimport UserProfile from '../Components/UserProfile';\n\nconst OPCIONES = [\n  { label: \"Inicio\", Icon: Inbox, path: \"/feed\" }\n  /** NINGUN PATH puede comenzar por order porque dana algunas partes de la logica */\n  , { label: \"Nuevo Pedido\", Icon: ShoppingCart, path: \"/order\" }\n\n  , { label: \"Pedidos\", Icon: ListAlt, path: \"/my-orders\", roles: [1, 2] }\n  , { label: \"Pedidos\", Icon: ListAlt, path: \"/queue\", roles: [3] }\n\n  , { label: \"Politicas\", Icon: Policy, path: \"/policy\" }\n\n  , { label: \"Catálogo\", Icon: Category, path: \"/products\", roles: [3] }\n  , { label: \"Usuarios\", Icon: PeopleAlt, path: \"/users\", roles: [3] }\n\n  , { label: \"Reportes\", Icon: Report, path: \"/reports\", roles: [3] }\n  , { label: \"Perfil\", Icon: Person, path: \"/my-profile\" }\n];\n\nconst drawerWidth = 200;\n\nexport default withStyles(theme => ({\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    flexGrow: 1,\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: drawerWidth\n    }\n  },\n  appBar: {\n    display: \"block\"\n  }\n}))(class Main extends React.Component<MainProps, any> {\n\n  state = {\n    selected: \"\"\n    , editarPVPsdurantePedido: false\n    , isMenuOpen: false\n    , username: \"\"\n    , userId: undefined as number\n    , grupo: \"\"\n    , token: \"\"\n    , rol: 0\n    , accesos: []\n    , descuentos: [] as Descuento[]\n    , mustAcceptTermsAndConds: false\n    , solicitarDatosAlIniciar: false\n  };\n\n  constructor(props: any) {\n    super(props);\n    this.onMounted = this.onMounted.bind(this);\n    this.handleMenu = this.handleMenu.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n    this.TermsAndCondsAccepted = this.TermsAndCondsAccepted.bind(this);\n    this.state.username = props.username;\n    this.state.grupo = props.grupo;\n    this.state.rol = props.rol;\n    this.state.descuentos = props.descuentos || [];\n    this.state.editarPVPsdurantePedido = props.editarPVPsdurantePedido;\n    this.state.mustAcceptTermsAndConds = props.mustAcceptTermsAndConds;\n    this.state.solicitarDatosAlIniciar = props.solicitarDatosAlIniciar;\n    this.state.userId = props.id;\n    this.state.accesos = [...OPCIONES];\n    this.state.accesos = OPCIONES.filter(x => x.roles ? x.roles.indexOf(this.state.rol) >= 0 : true);\n  }\n  onMounted(selected: string) {\n    this.setState({ selected });\n  }\n  handleMenu() {\n    this.setState(prev => {\n      const state = { ...prev };\n      state.isMenuOpen = !state.isMenuOpen;\n      return state;\n    });\n  }\n  TermsAndCondsAccepted() {\n    this.setState({ mustAcceptTermsAndConds: false });\n  }\n  closeMenu() {\n    this.setState({ isMenuOpen: false });\n  }\n  render() {\n    const { selected, isMenuOpen, username, grupo, mustAcceptTermsAndConds, solicitarDatosAlIniciar } = this.state;\n    const { window, classes } = this.props;\n    const container = window !== undefined ? () => window().document.body : undefined;\n\n    if (mustAcceptTermsAndConds) {\n      return <TermsAndConds onDone={this.TermsAndCondsAccepted} />;\n    }\n    if (solicitarDatosAlIniciar) {\n      return <div style={{ textAlign: \"center\", paddingTop: 15 }}>\n        <Typography variant=\"overline\"  >Hola! estamos actualizando la información de nuestros miembros. Por favor llena los campos que faltan para continuar.</Typography>\n        <UserProfile userId={this.state.userId} onSubmit={() => this.setState({ solicitarDatosAlIniciar: false })} />\n      </div>\n    }\n\n    const drawerChildren = (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\n        <Typography style={{ display: \"block\" }} variant=\"button\">{username}</Typography>\n        <Typography style={{ display: \"block\" }} variant=\"caption\">{grupo}</Typography>\n      </div>\n      <List style={{ flex: 1 }}>\n        {this.state.accesos.map(o => (<ListItem onClick={this.closeMenu} selected={selected === o.path} component={Link} to={o.path} button key={o.label}>\n          <ListItemIcon >{<o.Icon />}</ListItemIcon>\n          <ListItemText style={{ flex: 1 }} primary={o.label} />\n        </ListItem>))}\n      </List>\n      <ListItem component=\"a\" target=\"_a\" href=\"https://wa.me/\" >\n        <ListItemIcon> <Help /> </ListItemIcon>\n        <ListItemText primary=\"AYUDA\" />\n      </ListItem>\n    </div>);\n\n    return (<HashRouter basename=\"/app\" >\n      <div style={{ width: \"100%\", height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\n        <CssBaseline />\n        <nav className={classes.drawer}>\n          <Hidden smUp implementation=\"css\" >\n            <Drawer\n              container={container}\n              variant=\"temporary\"\n              anchor={'left'}\n              open={isMenuOpen}\n              onClose={this.closeMenu}\n              classes={{ paper: classes.drawerPaper }}\n              ModalProps={{\n                keepMounted: true, // Better open performance on mobile.\n              }}\n            >\n              <div className={classes.toolbar} style={{ textAlign: \"right\" }}>\n                <IconButton onClick={this.handleMenu}>\n                  <Close />\n                </IconButton>\n              </div>\n              {drawerChildren}\n            </Drawer>\n          </Hidden>\n          <Hidden xsDown implementation=\"css\">\n            <Drawer\n              classes={{ paper: classes.drawerPaper }}\n              variant=\"permanent\"\n              open\n            >\n              {drawerChildren}\n            </Drawer>\n          </Hidden>\n        </nav>\n\n        <Hidden smUp implementation=\"css\" >\n          <AppBar position=\"fixed\" className={classes.x}>\n            <Toolbar>\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open drawer\"\n                edge=\"start\"\n                onClick={this.handleMenu}\n              >\n                <Menu />\n              </IconButton>\n              <Typography style={{ flexGrow: 1 }}>{(OPCIONES.find(x => x.path === selected) || {}).label}</Typography>\n            </Toolbar>\n          </AppBar>\n        </Hidden>\n\n        <main className={classes.content}>\n          <Hidden smUp implementation=\"css\" >\n            <div className={classes.toolbar}></div>\n          </Hidden>\n          <Switch>\n            <Route path=\"/feed\" render={props => <Feed {...props} onMounted={this.onMounted} grupo={this.state.grupo} username={this.state.username} rol={this.state.rol} />} />\n            <Route path=\"/order\" render={_ => <Order onMounted={this.onMounted} rol={this.state.rol} descuentos={this.state.descuentos} editablePrices={this.state.editarPVPsdurantePedido} />} />\n            <Route path=\"/my-orders\" render={props => <OrderList {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\n            <Route path=\"/queue\" render={props => <OrderQueue {...props} onMounted={this.onMounted} />} />\n\n            <Route path=\"/policy\" render={props => <PolicyPage\n              onMounted={this.onMounted}\n              path={props.match && props.match.path}\n              TextSrc=\"https://docs.google.com/document/d/e/2PACX-1vSC-0iC8dbpYgrNhlDyRWAQdwdFM4esg40JLZQS-zg6Koix_w1B86KoGI3YPpq-TdNjoJV0eenbcRKv/pub?embedded=true\"\n            />}\n            />\n\n            <Route path=\"/users\" render={props => <Users {...props} onMounted={this.onMounted} />} />\n            <Route path=\"/products\" render={props => <Products {...props} onMounted={this.onMounted} />} />\n\n            <Route path=\"/reports\" render={props => <Reports {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\n            <Route path=\"/my-profile\" render={props => <UserProfile {...props} userId={this.state.userId} onMounted={this.onMounted} />} />\n            <Route path=\"/\" exact><Redirect to=\"/feed\" /></Route>\n          </Switch>\n        </main>\n      </div>\n    </HashRouter>)\n  }\n});\n\ninterface MainProps {\n  username: string;\n  rol: number;\n  grupo: string;\n  editarPVPsdurantePedido?: boolean;\n\n  token: string;\n  window?: any;\n  classes: any;\n}","import React from \"react\";\r\nimport { Paper, Typography, Divider } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Preferences from \"../Utils/Preferences\";\r\nimport UserDataForm from \"../Components/Users/UserDataForm\";\r\nimport ValidateUserForm, { FocusOn } from \"../Components/Users/ValidateUserForm\";\r\nimport { ROLES } from \"../Globals\";\r\n\r\nexport default class SignIn extends React.Component {\r\n    state = {\r\n        nombre: \"\",\r\n        identificacion: \"\",\r\n        telefono: \"\",\r\n        email: \"\",\r\n        fechaNacimiento: \"\",\r\n        nacionalidad: \"\",\r\n        ciudad: \"\",\r\n        direccion: \"\",\r\n        username: \"\",\r\n        password: \"\",\r\n        confirm_password: \"\",\r\n        error: null,\r\n        grupo: \"\",\r\n\r\n        grupos: [],\r\n        loading: false,\r\n        fin_registro: null\r\n    }\r\n    componentDidMount() {\r\n        API.GetGroups()\r\n            .then(grupos => this.setState({ grupos }))\r\n            .catch(ex => this.setState({\r\n                error: { grupo: \"No se pudieron cargar los grupos: \" + ex.message }\r\n            }));\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleSubmit = () => {\r\n        if (this.state.loading) return;\r\n        var error = ValidateUserForm(this.state);\r\n        if (error) return this.setState({ error });\r\n        this.setState({ loading: true, error: null });\r\n        setTimeout(() => {\r\n            // AQUI POR DEFAULT los envio como ROL=3 (asesores)\r\n            API.SignIn({ ...this.state, rol: ROLES.ASESOR })\r\n                .then(x => {\r\n                    this.setState({ loading: false, fin_registro: x.email });\r\n                    Preferences.Set(\"user\", this.state.username);\r\n                }).catch(error =>\r\n                    this.setState({ error, loading: false },\r\n                        () => {\r\n                            Object.keys(error).forEach(a => {\r\n                                FocusOn(a);\r\n                            });\r\n                        })\r\n                );\r\n        }, 2000);\r\n    }\r\n    render() {\r\n        const { fin_registro, ...state } = this.state;\r\n\r\n        if (fin_registro) return (<div style={{ width: \"100%\", padding: 30, textAlign: \"center\" }}>\r\n            <Typography variant=\"h4\">Registro completado!</Typography>\r\n            <Typography variant=\"subtitle1\">\r\n                Para habilitar tu cuenta entra a tu correo ({fin_registro})\r\n            y abre el enlace que te enviamos.\r\n            </Typography>\r\n            <Typography variant=\"body1\">\r\n                Si no encuentras nuestro correo en tu Bandeja de Entreda, es posible que encuentre en SPAM o NO DESEADOS.\r\n            </Typography>\r\n        </div>);\r\n\r\n        return (<main style={{ width: \"100%\", padding: 10, textAlign: \"center\", backgroundColor: \"#fafafa\" }}>\r\n            <Paper style={{ padding: 20, margin: \"auto\", maxWidth: 600 }}>\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <img style={{ height: 100 }} src=\"./logo.png\" alt=\"Natu - Logo\"></img>\r\n                    <div style={{ flexGrow: 1, margin: 20, textAlign: \"left\" }}>\r\n                        <Typography variant=\"h4\">REGISTRATE</Typography>\r\n                        <Typography component={Link} to=\"/login\" >Ya tienes una cuenta? Inicia sesión aquí</Typography>\r\n                    </div>\r\n                </div>\r\n                <Divider />\r\n                <UserDataForm editionType=\"USER\" {...state} onChange={this.handleChange} onSubmit={this.handleSubmit} formType=\"SIGN-IN\" />\r\n            </Paper>\r\n        </main>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Router, Switch, Route, Redirect } from \"react-router-dom\";\r\nimport { createHashHistory } from \"history\";\r\nimport Login from \"./Components/Login\";\r\nimport Main from \"./Layouts/Main\";\r\nimport API from \"./Services/API\";\r\nimport SignIn from \"./Layouts/SignIn\";\r\nimport Preferences from \"./Utils/Preferences\";\r\n\r\nexport default class App extends React.Component {\r\n    state = { user: null as LoggedIn };\r\n    history = createHashHistory();\r\n    constructor(props: any) {\r\n        super(props);\r\n        if (props.user) {\r\n            this.state.user = props.user;\r\n            API.KEY = props.user.token;\r\n        }\r\n    }\r\n    handleLoggedIn = (user: LoggedIn) => {\r\n        this.setState({ user });\r\n        // aun esta pendiente, por lo que tiene que ir directamente al curso\r\n        if (user.estado === \"PENDIENTE\")\r\n            return this.history.push(\"/classroom\");\r\n        this.history.push(\"/app\");\r\n        API.KEY = user.token;\r\n        try {\r\n            Preferences.setPrefix(user.id && (user.id + \"_\"));\r\n        } catch (ex) {\r\n            console.info(\"Ocurrio un error en Preferences.setPrefix\", ex);\r\n        }\r\n    }\r\n    render() {\r\n        const { user } = this.state;\r\n        var user_routes;\r\n        if (user) {\r\n            switch (user.estado) {\r\n                case \"PENDIENTE\":\r\n                    user_routes = <Route>BIENVENIDO A CLASSROOM</Route>;\r\n                    break;\r\n                case \"RECHAZADO\":\r\n                    user_routes = <Route>USUARIO ESTÁ DESHABILITADO</Route>;\r\n                    break;\r\n                default:\r\n                    user_routes = (<Switch>\r\n                        <Route path=\"/classroom\">BIENVENIDO A CLASSROOM</Route>\r\n                        <Route path=\"/app\" render={() => <Main {...user} />} />\r\n                        <Route>\r\n                            <Redirect to=\"/app\" />\r\n                        </Route>\r\n                    </Switch>);\r\n                    break;\r\n            }\r\n        }\r\n        return (<Router history={this.history} >\r\n            {user\r\n                ? user_routes\r\n                : (<Switch>\r\n                    <Route path=\"/signin\" component={SignIn} />\r\n                    <Route path=\"/recover-password\">AQUI PUEDE RECUPERAR TU CONTRAEÑA</Route>\r\n                    <Route path=\"/login\" render={_ => <Login onLoggedIn={this.handleLoggedIn} />} />\r\n                    <Route>\r\n                        <Redirect to=\"/login\" />\r\n                    </Route>\r\n                </Switch>)\r\n            }\r\n        </Router>)\r\n    }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\nimport App from \"./App\";\n/** \n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n*/\nReactDOM.render(<React.StrictMode>\n  <App />\n</React.StrictMode>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}