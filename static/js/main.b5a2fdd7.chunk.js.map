{"version":3,"sources":["serviceWorker.ts","Services/API.ts","Services/Preferences.ts","Components/Login.tsx","Components/Order/ProductGrid.tsx","Components/Modal/index.tsx","Components/Order/ProductOptions.tsx","Components/Order/ConfirmOrder.tsx","Services/Calcs.ts","Services/Validation.ts","Components/Input.tsx","Components/Order/Data.tsx","Components/Order/Payment.tsx","Components/Order/Survey.tsx","Components/Message.tsx","Components/RouteMessage.tsx","Components/Order/OrderSave.ts","Services/ImageReader.ts","Components/Order/ProductSelections.tsx","Components/Order/index.tsx","Services/OrderActions.ts","Components/OrderList/OrderDetails.tsx","Components/OrderList/index.tsx","Components/Feed/RankingCard.tsx","Components/Feed/LineCard.tsx","Components/Feed/ProfitCard.tsx","Components/Feed/WithTimeTravel.tsx","Components/Feed/PieCard.tsx","Components/Feed/BarCard.tsx","Components/Feed/index.tsx","Components/Reports/ProductSales.tsx","Components/Reports/index.tsx","Components/OrderQueue/Queue.tsx","Components/OrderQueue/Columns.ts","Components/OrderQueue/index.tsx","Layouts/Main.tsx","Layouts/SignIn.tsx","App.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","DOMAIN","KEY","body","this","F","method","id","array_items","semana","year","join","params","param_str","Object","keys","length","URLSearchParams","toString","URI","options","DEFAULTS","cache","mode","ops","headers","JSON","stringify","fetch","then","response","ok","json","clone","catch","text","x","message","status","statusText","obj","ex","prefix","Preferences","_prefix","_key_","key","localStorage","getItem","parse","value","undefined","value_txt","setItem","removeItem","Login","props","state","loading","user","pwd","error","isPasswordVisible","handleChange","bind","handleSubmit","handlePassword","API","Get","event","currentTarget","name","setState","setTimeout","requestAnimationFrame","document","getElementById","focus","preventDefault","trim","r","Set","onLoggedIn","prev","style","paddingTop","Card","width","maxWidth","margin","textAlign","onSubmit","CardContent","src","alt","height","minHeight","TextField","inputProps","onChange","label","fullWidth","disabled","defaultStyle","type","InputProps","endAdornment","InputAdornment","position","IconButton","onClick","VisibilityOff","Visibility","Typography","color","variant","Button","Divider","display","component","Link","to","React","Component","marginTop","marginBottom","ProductGrid","visible_style","visible","Grid","container","alignItems","flex","spacing","items","map","item","editablePrice","editablePrices","onPriceChange","onActionClick","ProductItem","sm","md","xs","CardMedia","objectFit","image","imgSrc","flexDirection","overflow","nombre","Input","pvp_final","startAdornment","AttachMoney","toFixed","CardActions","Add","cantidad","Remove","PureComponent","Transition","forwardRef","ref","Slide","direction","Modal","show","onClose","fullScreen","title","closeButtonText","Dialog","open","TransitionComponent","AppBar","Toolbar","flexGrow","Close","DialogContent","children","ItemCard","selectedStyle","selected","border","CardActionArea","ProductOptions","selections","handleClose","maxItems","_Item","alert","onDone","showingID","toggleSelect","existsIndex","indexOf","splice","push","nextProps","isOpen","productList","find","Item","opcionIDs","opciones","idOpcion","filter","paddingLeft","paddingRight","ConfirmOrder","show_next_discount","descuento","total","subtotal","porcentaje","valor","List","Row","col1","col2","col3","LabelDescuentoComponent","sgte_descuento_porcentaje","ListItem","sgte_descuento_falta","Totals","result","i","DocToString","doc","MonthToString","index","ValidateInput","isDigit","twoParts","split","ValidarIdentificacion","documento","numero","vacioEstaBien","exito","mensaje","esValido","isNaN","parseFloat","isNumber","residuo","p1","p2","p3","p4","p5","p6","p7","p8","p9","pri","pub","nat","modulo","d1","substr","d2","d3","d4","d5","d6","d7","d8","d9","d10","d11","d12","d13","digitoVerificador","validadorCedulaRuc","char","_props","other_props","helperText","Location","onValueChange","direccion","ciudad","referencia","sector","identificacion","razonSocial","direccion_factura","telefono_factura","email_factura","nombre_contacto","telefono_contacto","identificacion_contacto","documento_contacto","identificacion_e","telefono_e","tel","email_e","email","identificacion_contacto_e","telefono_contacto_e","Paper","padding","marginLeft","multiline","rows","select","SelectProps","native","maxLength","marginRight","hidden","files","onImgChange","input","accept","FormControlLabel","control","Switch","checked","usarImagen","e","inputMode","numeroTransaccion","click","imgTransaccion","className","verticalAlign","Image","CircularProgress","size","withRouter","txt1","txt2","unblock","history","block","goBack","ActionOrder","action","autoFocus","DialogActions","Message","info","DialogTitle","focusafter","search","get","isEmpty","val","base64ArrayBuffer","arrayBuffer","chunk","base64","encodings","bytes","Uint8Array","byteLength","byteRemainder","mainLength","ProductSelections","Rows","deletionClick","onDeleteSelection","ListItemText","ListItemSecondaryAction","Delete","OrderState","guardarBorrador","isDirty","choosen","observacion","productoSelecciones","OrderSave","path","a","b","handleDescuentoChanged","tablaDescuentos","descuentoAplica","imageChange","imageFile","file","Promise","resolve","reject","mb","reader","FileReader","onload","target","onerror","readAsDataURL","failed_msg","handleAddSelection","hasOwnProperty","handleDeleteSelection","handlePriceChange","found","handleTab","handleProductAction","handleValueChange","handleDone","onMounted","descuentos","d","onbeforeunload","_","unblockNavigation","routerWillLeave","GetProducts","updates","stored_direccion","stored_factura","before","times","avoidIsDirty","currentTab","nextLocation","pathname","confirm","results","ext","readAsArrayBuffer","imgJson","_s","imgFileTransaccion","fileTransaccion","SaveOrder","detalle","descuentoPorcentaje","descuentoTotal","new_state","cant","cantidad_desde","rol","sorted","sort","montoDesde","founded","desc","next","EstimarDescuento","originalProductList","remain_state","exists","choosenItems","console","Tabs","Tab","Payment","RouteMessage","Survey","Fab","bottom","right","OrderActions","prompt","_fechaEnvio","Date","_fechaRecepcion","bienRecibido","observacionRecepcion","valueOf","fechaEnvio","numeroFactura","detaOrderDetails","shouldRefresh","handleButton","promise","Aprobar","Rechazar","Enviar","Recibir","Facturar","handleCheck","GetOrder","order","fechaCreacion","fechaRecepcion","estado","username","survey1","survey2","editable","TextRow","toLocaleString","toLocaleDateString","SectionHeader","ActionButtons","loadingAction","showReject","Fragment","Checkbox","required","placeholder","center","data","msg","handleClick","handleMessage","GetOrders","err","code","refresh","paddingBottom","overflowX","Hidden","xsDown","implementation","borderBottom","button","smUp","EstadoToVariant","toDateString","render","RankingCard","secondColType","colType","subtitle","onBackClick","onNextClick","CardHeader","HourglassEmpty","ArrowLeft","ArrowRight","disableTypography","value1","value2","date","ahora","getDate","getMonth","getFullYear","toLocaleTimeString","este_dia","DateToString","me","PerfomanceCell","LineCard","legend","maintainAspectRatio","bezierCurve","scales","yAxes","ticks","maxTicksLimit","xAxes","labels","values","el","we","datasets","backgroundColor","borderColor","lineTension","fill","ProfitCard","month","reservas","promo","reduceMoney","borderLeft","dense","primary","PieCard","BardCard","scaleBeginAtZero","beginAtZero","TimeTravelRank","current_week","statName","reduceFn","handleBack","new_week","Stats","updateData","showError","handleNext","remain","desde","start","hasta","end","Feed","unmounted","week_ranking","group_graph","personal_graph","year_sales","product_resume","group_ranking","componentWillUnmount","productResumeReducer","grupo","resume","createdAt","profit","ProductSales","toJSON","ProductSalesReport","ID","Table","TableHead","TableRow","TableCell","TableBody","idPedido","fechaEntrega","motivoAnulacion","descripcion","Reports","Queue","columns","changedAt","selectableRows","onRowClick","entrada_columns","aprobado_columns","enviado_columns","recibido_columns","facturado_columns","rechazado_columns","OrderQueue","openOrder","closeOrder","shouldUpdate","loadData","rawData","fechaAnulacion","exact","routeProps","OPCIONES","Icon","Inbox","ShoppingCart","ListAlt","Report","withStyles","theme","drawer","breakpoints","up","flexShrink","toolbar","mixins","drawerPaper","content","appBar","puedeEditarPrecios","isMenuOpen","token","accesos","handleMenu","closeMenu","classes","drawerChildren","o","ListItemIcon","href","Help","basename","CssBaseline","Drawer","anchor","paper","ModalProps","keepMounted","aria-label","edge","Menu","SignIn","telefono","fechaNacimiento","nacionalidad","password","confirm_password","grupos","fin_registro","stopPropagation","Validar","GetGroups","noValidate","Password","g","guardar","parseInt","input_props","FormLabel","useState","show_password","setPassword","App","createHashHistory","handleLoggedIn","setPrefix","user_routes","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b5a2fdd7.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const DOMAIN = \"https://natuapp.ue.r.appspot.com\";\r\n//const DOMAIN = \"http://localhost:9000\";\r\n\r\nclass API {\r\n    KEY = \"\";\r\n    Login(body) { return this.F(\"user/login\", { body, method: \"POST\" }); }\r\n    GetProducts() { return this.F(\"product\"); }\r\n    GetOrders(): Promise<Order[]> { return this.F(\"order\"); }\r\n    GetOrder(id: number): Promise<Order> { return this.F(\"order/\" + id); }\r\n    SaveOrder(body: Order) { return this.F(\"order\", { method: \"POST\", body }); }\r\n    ActionOrder(id: number | string, body: ActionBody) { return this.F(\"order/\" + id, { method: \"PUT\", body }); }\r\n    Stats(array_items, semana?, year?) { return this.F(\"dashboard?data=\" + array_items.join(\",\") + (semana ? (\"&semana=\" + semana) : \"\") + (year ? (\"&year=\" + year) : \"\")); }\r\n    ProductSalesReport(params: { desde: string, hasta: string, estado: any }) {\r\n        var param_str = \"\";\r\n        if (params && Object.keys(params).length)\r\n            param_str = \"?\" + new URLSearchParams(params).toString();\r\n\r\n        return this.F(\"reports/product-sales\" + param_str);\r\n    }\r\n    GetGroups() { return this.F(\"user/groups\"); }\r\n    SignIn(body: any) { return this.F(\"user\", { method: \"POST\", body }); }\r\n\r\n    GetUsers() { return this.F(\"user\") }\r\n    GetUser(id: number) { return this.F(\"user/\" + id) }\r\n\r\n    private F(URI, options: SpecialRequest = {}) {\r\n        const DEFAULTS: any = {\r\n            method: \"GET\",\r\n            cache: \"reload\",\r\n            mode: \"cors\"\r\n        };\r\n        var ops: RequestInit = { ...DEFAULTS, ...options };\r\n        if (!ops.headers) ops.headers = {};\r\n        ops.headers['Content-Type'] = 'application/json';\r\n        ops.headers['Access-Control-Allow-Origin'] = '*';\r\n\r\n        if (this.KEY) {\r\n            if (!ops.headers) ops.headers = {};\r\n            ops.headers[\"Authorization\"] = 'Basic ' + this.KEY;\r\n        }\r\n\r\n        if (ops.body && (typeof ops.body !== typeof \"\"))\r\n            ops.body = JSON.stringify(ops.body);\r\n\r\n        return fetch(DOMAIN + \"/\" + URI, ops).then(response => {\r\n            if (response.ok) return response.json();\r\n            return response.clone().json()\r\n                .catch(() => {\r\n                    return response.text().then(x => {\r\n                        throw {\r\n                            message: x,\r\n                            status: response.status,\r\n                            statusText: response.statusText\r\n                        }\r\n                    })\r\n                }).then(obj => {\r\n                    throw {\r\n                        ...obj,\r\n                        status: response.status,\r\n                        statusText: response.statusText\r\n                    }\r\n                })\r\n        }).catch(ex => {\r\n            if (ex.message === \"Failed to fetch\") {\r\n                throw {\r\n                    message: \"Este servicio no se encuentra disponible por el momento. Intentelo más tarde.\",\r\n                    status: 0\r\n                }\r\n            }\r\n            if (!ex.message) ex.message = ex.statusText;\r\n            throw ex;\r\n        });\r\n    }\r\n}\r\nexport default new API();\r\n\r\ninterface SpecialRequest extends RequestInit {\r\n    body?: any\r\n}\r\n\r\ninterface ActionBody {\r\n    action: \"SURVEY\" | \"APROBAR\" | \"RECHAZAR\" | \"ENVIAR\" | \"RECIBIR\" | \"FACTURAR\",\r\n    value?: any,\r\n    bienRecibido?: boolean,\r\n    observacionRecepcion?: string\r\n}","var prefix = \"\";\r\nexport default class Preferences {\r\n    static setPrefix(_prefix: string) {\r\n        prefix = _prefix || \"\";\r\n    }\r\n    static Get(_key_: \"current_order\" | \"direccion\" | \"user\" | \"factura\") {\r\n        var key = prefix + _key_;\r\n        var x = window.localStorage.getItem(key);\r\n        try {\r\n            return JSON.parse(x);\r\n        } catch (ex) { }\r\n        return x;\r\n    }\r\n    static Set(_key_: \"current_order\" | \"direccion\" | \"user\" | \"factura\", value: any = undefined) {\r\n        var key = prefix + _key_;\r\n        if (value === undefined) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        } else if (value === null) {\r\n            window.localStorage.removeItem(key);\r\n            return;\r\n        }\r\n        var value_txt = value;\r\n        if (typeof value === typeof {})\r\n            value_txt = JSON.stringify(value);\r\n\r\n        window.localStorage.setItem(key, value_txt);\r\n    }\r\n}","import React from \"react\";\r\nimport { Card, CardContent, TextField, Button, InputAdornment, IconButton, Typography, Divider } from \"@material-ui/core\";\r\nimport API from \"../Services/API\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Preferences from \"../Services/Preferences\";\r\n\r\nexport default class Login extends React.Component<{ onLoggedIn: (params: LoggedIn) => void }, LoginState> {\r\n    state = {\r\n        loading: false,\r\n        user: \"\",\r\n        pwd: \"\",\r\n        error: null,\r\n        isPasswordVisible: false\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handlePassword = this.handlePassword.bind(this);\r\n        API.KEY = \"\";\r\n        this.state.user = Preferences.Get(\"user\") || \"\";\r\n    }\r\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({\r\n            [name]: value\r\n        } as any);\r\n    }\r\n    componentDidMount() {\r\n        setTimeout(() =>\r\n            window.requestAnimationFrame(() => {\r\n                if (this.state.user) {\r\n                    document.getElementById(\"password-textfield\").focus();\r\n                } else {\r\n                    document.getElementById(\"user-textfield\").focus();\r\n                }\r\n            }), 100);\r\n    }\r\n    handleSubmit(event: any) {\r\n        event.preventDefault();\r\n        if (this.state.loading) return;\r\n        const user = this.state.user && this.state.user.toString().trim();\r\n        const pwd = this.state.pwd && this.state.pwd.toString().trim();\r\n        if (!user) return this.setState({ error: { message: \"Digite su usuario\" } });\r\n        if (!pwd) return this.setState({ error: { message: \"Digite su contraseña\" } });\r\n        this.setState({ loading: true, error: null });\r\n        API.Login({ user, pwd })\r\n            .then(r => {\r\n                // importante, se debe ejecutar ANTES de onLoggedIn\r\n                Preferences.Set(\"user\", user);\r\n                this.setState({ loading: null });\r\n                this.props.onLoggedIn({ ...r });\r\n            })\r\n            .catch(error => this.setState({ loading: null, error }));\r\n    }\r\n    handlePassword(event) {\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.isPasswordVisible = !state.isPasswordVisible;\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const { loading, error, user, pwd, isPasswordVisible } = this.state;\r\n        return (<div style={{ paddingTop: 20 }}>\r\n            <Card style={{ width: \"100%\", maxWidth: 300, margin: \"auto\", textAlign: \"center\" }}>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <CardContent>\r\n                        <img src=\"./logo.png\" alt=\"Logo\"\r\n                            style={{ height: 150, minHeight: 150, width: \"auto\" }} />\r\n                        <TextField\r\n                            inputProps={{ id: \"user-textfield\" }}\r\n                            onChange={this.handleChange}\r\n                            value={user}\r\n                            label=\"Usuario\"\r\n                            name=\"user\"\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                        />\r\n                        <TextField\r\n                            onChange={this.handleChange}\r\n                            value={pwd}\r\n                            name=\"pwd\"\r\n                            label=\"Contraseña\"\r\n                            type={isPasswordVisible ? \"input\" : \"password\"}\r\n                            fullWidth\r\n                            disabled={loading}\r\n                            style={defaultStyle}\r\n                            inputProps={{ id: \"password-textfield\" }}\r\n                            InputProps={{\r\n                                endAdornment: <InputAdornment position=\"end\">\r\n                                    <IconButton onClick={this.handlePassword}>\r\n                                        {isPasswordVisible ? <VisibilityOff /> : <Visibility />}\r\n                                    </IconButton>\r\n                                </InputAdornment>\r\n                            }}\r\n                        />\r\n                        {error && <Typography color=\"secondary\" variant=\"body1\" style={{ textAlign: \"center\" }}>{error.message}</Typography>}\r\n                        <Button type=\"submit\" variant=\"outlined\" style={defaultStyle} color=\"primary\" disabled={loading} fullWidth >\r\n                            {loading ? \"CARGANDO...\" : \"ENTRAR\"}\r\n                        </Button>\r\n\r\n                        <Divider style={{ margin: 20 }} />\r\n\r\n                        <Typography style={{ display: \"block\", textAlign: \"center\", margin: 5 }} variant=\"body2\" component={Link} to=\"/recover-password\">Olvidé mi contraseña</Typography>\r\n                        <Typography style={{ display: \"block\", textAlign: \"center\", margin: 5 }} variant=\"body2\" component={Link} to=\"/signin\">No eres asesor/a natú? Registrate aquí!</Typography>\r\n                    </CardContent>\r\n                </form>\r\n            </Card>\r\n        </div>)\r\n    }\r\n}\r\nconst defaultStyle = {\r\n    marginTop: 10,\r\n    marginBottom: 10\r\n}\r\n\r\nclass LoginState {\r\n    user = \"\";\r\n    pwd = \"\";\r\n    loading = false;\r\n    isPasswordVisible = false;\r\n    error = null;\r\n}","import React from \"react\";\r\nimport { Grid, Card, CardContent, CardActions, CardMedia, Typography, IconButton, Input, InputAdornment } from \"@material-ui/core\";\r\nimport { Add, Remove, AttachMoney } from \"@material-ui/icons\";\r\n\r\nexport default function ProductGrid(props: {\r\n    onActionClick: any;\r\n    items: any[];\r\n    visible: boolean;\r\n    productoSelecciones?: { [idProducto: number]: number[][] };\r\n    editablePrices: boolean;\r\n    onPriceChange: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\r\n}) {\r\n    const visible_style: any = {}\r\n    if (!props.visible) visible_style.display = \"none\";\r\n    return (<Grid\r\n        container\r\n        alignItems=\"center\"\r\n        style={{ flex: 1, /*overflow: \"auto\",*/ marginTop: 5, ...visible_style }}\r\n        spacing={3}>\r\n        {props.items.map((item: any) => {\r\n            return <ProductItem\r\n                key={item.id}\r\n                {...item}\r\n                editablePrice={props.editablePrices}\r\n                onPriceChange={props.onPriceChange}\r\n                onActionClick={props.onActionClick}\r\n            />\r\n        })}\r\n    </Grid>)\r\n}\r\n\r\nclass ProductItem extends React.PureComponent<any, any> {\r\n    render() {\r\n        const props = this.props;\r\n        const item = props;\r\n        return (<Grid item sm={6} md={4} xs={12}>\r\n            <Card>\r\n                <CardMedia component=\"img\" style={{ height: 180, objectFit: \"contain\" }} image={item.imgSrc || \"https://diegopq95.github.io/take-orders/img/default.png\"} />\r\n                <CardContent style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <Typography style={{ flex: 1, height: 60, overflow: \"hidden\" }} variant=\"subtitle1\">{item.nombre}</Typography>\r\n\r\n                    {props.editablePrice\r\n                        ? <Input\r\n                            style={{ width: 100 }}\r\n                            type=\"number\"\r\n                            onChange={props.onPriceChange}\r\n                            value={\"\" + item.pvp_final}\r\n                            name={\"\" + item.id}\r\n                            startAdornment={<InputAdornment position=\"start\" >\r\n                                <AttachMoney />\r\n                            </InputAdornment>}\r\n                        />\r\n                        : <Typography variant=\"h6\">$ {item.pvp_final.toFixed(2)}</Typography>}\r\n\r\n                </CardContent>\r\n                <CardActions>\r\n                    <IconButton onClick={props.onActionClick} name=\"+\" value={item.id}>\r\n                        <Add />\r\n                    </IconButton>\r\n                    <Typography variant=\"body1\">{item.cantidad}</Typography>\r\n                    <IconButton disabled={!(item.cantidad > 0)} onClick={props.onActionClick} name=\"-\" value={item.id}>\r\n                        <Remove />\r\n                    </IconButton>\r\n                </CardActions>\r\n            </Card>\r\n        </Grid>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, AppBar, Toolbar, Button, Typography, IconButton } from \"@material-ui/core\";\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Close } from \"@material-ui/icons\";\r\n\r\nconst Transition: any = React.forwardRef(function (props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n} as any);\r\n\r\nexport default function Modal(props: {\r\n    show: boolean,\r\n    onClose: (event: {}, reason?: \"backdropClick\" | \"escapeKeyDown\") => void,\r\n    fullScreen: boolean,\r\n    title: string,\r\n    closeButtonText?: string | \"ICON\",\r\n    children?: any\r\n}) {\r\n    const { show, onClose, fullScreen, title } = props;\r\n    var closeButtonText = props.closeButtonText || \"ICON\";\r\n    return (<Dialog open={show} onClose={onClose} fullScreen={fullScreen} TransitionComponent={Transition}>\r\n        {fullScreen && (\r\n            <AppBar position=\"relative\">\r\n                <Toolbar>\r\n                    <Typography color=\"inherit\" variant=\"h4\" style={{ flexGrow: 1 }}>{title}</Typography>\r\n                    {closeButtonText === \"ICON\"\r\n                        ? (<IconButton onClick={onClose} type=\"button\" color=\"inherit\">\r\n                            <Close />\r\n                        </IconButton>)\r\n                        : (<Button type=\"button\" onClick={onClose} color=\"inherit\">\r\n                            {closeButtonText || \"SALIR\"}\r\n                        </Button>)\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>)}\r\n        <DialogContent>\r\n            {props.children}\r\n        </DialogContent>\r\n    </Dialog>)\r\n}","import React from \"react\";\r\nimport { Grid, Card, CardMedia, CardActionArea, CardContent, Typography } from \"@material-ui/core\";\r\nimport Modal from \"../Modal\";\r\n\r\ninterface DoneObject {\r\n    id: number,\r\n    selections: number[]\r\n}\r\ninterface Props {\r\n    productList: Product[],\r\n    onDone: (DoneObject?) => void,\r\n    showingID: number,\r\n    match?: any\r\n}\r\n\r\nfunction ItemCard(props) {\r\n    const selectedStyle = props.selected ? { border: \"3px solid #333\" } : null;\r\n    return (<Card>\r\n        <CardActionArea onClick={props.onClick} value={props.id} style={selectedStyle} component=\"button\">\r\n            <CardMedia style={{ minHeight: 150, height: \"25vh\" }}\r\n                image={props.imgSrc}\r\n                title={props.nombre}\r\n            />\r\n            <CardContent>\r\n                <Typography>{props.nombre}</Typography>\r\n            </CardContent>\r\n        </CardActionArea>\r\n    </Card>);\r\n}\r\nexport default class ProductOptions extends React.Component<Props> {\r\n    state = { selections: [] }\r\n    handleClose = () => {\r\n        const Item = this._Item();\r\n        const maxItems = Item.maxItems || 0;\r\n\r\n        if (!this.state.selections.length)\r\n            return this.props.onDone();\r\n\r\n        if (maxItems < this.state.selections.length)\r\n            return alert(\"No se puede continuar selecciona \" + maxItems + \" items\");\r\n\r\n        this.props.onDone({\r\n            selections: this.state.selections,\r\n            id: this.props.showingID\r\n        });\r\n    }\r\n    componentWillReceiveProps(nextProps: Props) {\r\n        if (nextProps.showingID === null || nextProps.showingID === undefined) {\r\n            this.setState({ selections: [] });\r\n        }\r\n    }\r\n    // MIENTRAS ESTÉ CERRADO, EL COMPONENTE NO SE ACTUALIZARÁ\r\n    shouldComponentUpdate(nextProps) {\r\n        var isOpen = !(this.props.showingID === null || this.props.showingID === undefined);\r\n        var NextisOpen = !(nextProps.showingID === null || nextProps.showingID === undefined);\r\n        return (isOpen === NextisOpen && isOpen === false) ? false : true;\r\n    }\r\n    toggleSelect = event => {\r\n        const { value } = event.currentTarget;\r\n        const Item = this._Item();\r\n        const maxItems = Item.maxItems || 0;\r\n        this.setState(prev => {\r\n            const state: any = { ...prev };\r\n            state.selections = [...state.selections];\r\n            var existsIndex = state.selections.indexOf(+value);\r\n            if (existsIndex >= 0) {\r\n                state.selections.splice(existsIndex, 1);\r\n            } else {\r\n                state.selections.push(+value);\r\n                // quito el primero de la lista para agregar este!\r\n                if (state.selections.length > maxItems) {\r\n                    state.selections.splice(0, 1);\r\n                }\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n    _Item(): Product {\r\n        return this.props.productList.find(x => x.id === this.props.showingID) || {} as any;\r\n    }\r\n    render() {\r\n        const show = !(this.props.showingID === undefined || this.props.showingID === null);\r\n        const { selections } = this.state;\r\n        const Item = this._Item();\r\n        const opcionIDs = (Item.opciones || []).map(x => x.idOpcion);\r\n        const productList = this.props.productList.filter(x => opcionIDs.indexOf(x.id) >= 0);\r\n        return (<Modal\r\n            title=\"Crea tu combinación\"\r\n            onClose={this.handleClose}\r\n            show={show}\r\n            fullScreen={true}\r\n            closeButtonText={selections.length ? \"GUARDAR\" : \"SALIR\"}\r\n        >\r\n            <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\r\n                <Typography variant=\"h6\">{Item.nombre}</Typography>\r\n            </div>\r\n            <div style={{ paddingLeft: 10, paddingRight: 10, margin: \"auto\", width: \"calc(100% - 20px)\" }}>\r\n                <Grid container spacing={3}>\r\n                    {productList.map(x =>\r\n                        (<Grid key={x.id} item xs={12} sm={4}>\r\n                            <ItemCard\r\n                                {...x}\r\n                                onClick={this.toggleSelect}\r\n                                selected={selections.indexOf(x.id) >= 0}\r\n                            />\r\n                        </Grid>))}\r\n                </Grid>\r\n            </div>\r\n        </Modal>);\r\n    }\r\n}","import React from \"react\";\r\nimport { List, ListItem, Typography } from \"@material-ui/core\";\r\nexport default function ConfirmOrder(props: {\r\n    items: any[],\r\n    subtotal: number,\r\n    total: number,\r\n    show_next_discount?: boolean,\r\n    descuento?: DescuentoCalc,\r\n    LabelDescuentoComponent?: React.ReactElement\r\n}) {\r\n    var { items, show_next_discount, descuento, total, subtotal } = props;\r\n    if (!descuento) descuento = { porcentaje: 0, valor: 0 };\r\n    return (<List>\r\n        {items.map(item => <Row key={item.id} col1={item.nombre} col2={item.cantidad} col3={\"$ \" + (item.pvp_final * item.cantidad).toFixed(2)} />)}\r\n        <Row col1={\"SUBTOTAL\"} col3={`$ ${subtotal.toFixed(2)}`} />\r\n        <Row\r\n            col1={\r\n                props.LabelDescuentoComponent || `TU GANANCIA (${descuento.porcentaje}%) EN ESTE PEDIDO`\r\n            }\r\n            col3={`$ ${descuento.valor.toFixed(2)}`}\r\n            color=\"primary\"\r\n        />\r\n        <Row col1={\"TOTAL\"} variant={\"subtitle2\"} col3={`$ ${total.toFixed(2)}`} />\r\n        {(show_next_discount && descuento.sgte_descuento_porcentaje)\r\n            ? <ListItem>\r\n                <Typography variant=\"subtitle1\" color=\"secondary\">{`Obtén el ${descuento.sgte_descuento_porcentaje}% de descuento agregando ${descuento.sgte_descuento_falta.toFixed(2)} USD más a tu pedido`}</Typography>\r\n            </ListItem>\r\n            : null}\r\n    </List>);\r\n}\r\n\r\n\r\nfunction Row(props: { col1: any, col2?: string | number, col3: string, color?: any, variant?: any }) {\r\n    const { col1, col2, col3, color, variant } = props;\r\n    return (<ListItem>\r\n        <div style={{ width: \"100%\", display: \"table\" }}>\r\n            <Typography color={color || \"initial\"} style={{ display: \"table-cell\" }} variant={variant || \"body1\"}>{col1}</Typography>\r\n            {col2 && <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"15%\", maxWidth: 100, textAlign: \"right\" }} variant={variant || \"body1\"}>{col2}</Typography>}\r\n            <Typography color={color || \"initial\"} style={{ display: \"table-cell\", width: \"25%\", maxWidth: 100, textAlign: \"right\" }} variant={variant || \"body1\"}>{col3}</Typography>\r\n        </div>\r\n    </ListItem>)\r\n}","export function Totals(items: any[]) {\r\n    const result = {\r\n        total: 0,\r\n        cantidad: 0\r\n    }\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n        result.cantidad += item.cantidad;\r\n        result.total += (item.pvp_final * item.cantidad);\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function EstimarDescuento(total: number, tablaDescuentos: Descuento[]) {\r\n    // de MAYOR a MENOR\r\n    var sorted = tablaDescuentos.sort((a, b) => b.montoDesde - a.montoDesde);\r\n    var founded = -1;\r\n    var results: DescuentoCalc = {\r\n        porcentaje: 0,\r\n        valor: 0,\r\n        sgte_descuento_porcentaje: 0,\r\n        sgte_descuento_falta: 0\r\n    }\r\n    for (let i = 0; i < sorted.length; i++) {\r\n        const d = sorted[i];\r\n        if (total >= d.montoDesde) {\r\n            founded = i;\r\n            break;\r\n        }\r\n    }\r\n    if (founded >= 0) {\r\n        var desc = sorted[founded];\r\n        results.porcentaje = desc.porcentaje;\r\n        results.valor = (total * desc.porcentaje / 100);\r\n        // si no es el ultimo, busco al siguiente en la tabla\r\n    }\r\n    // si no existe, simulo que es el (MAXIMO+1), es decir esta fuera del rango\r\n    if (founded === -1) founded = sorted.length;\r\n    if ((founded - 1) >= 0) {\r\n        var next = sorted[founded - 1];\r\n        if (next) {\r\n            results.sgte_descuento_falta = next.montoDesde - total;\r\n            results.sgte_descuento_porcentaje = next.porcentaje;\r\n        }\r\n    }\r\n    return results;\r\n}\r\n\r\nexport function DocToString(doc: \"1\" | \"2\" | \"3\") {\r\n    if (doc.toString() === \"1\") return \"RUC\";\r\n    if (doc.toString() === \"2\") return \"Cedula\";\r\n    if (doc.toString() === \"3\") return \"Pasaporte\";\r\n    return \"\";\r\n}\r\n\r\nexport function MonthToString(index: number) {\r\n    var months = [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sept\", \"Oct\", \"Nov\", \"Dic\"];\r\n    return months[index];\r\n}\r\n","export class ValidateInput {\r\n    static tel(value) {\r\n        if (!value) return;\r\n        if (value.length < 7) return \"El número de telefono debe tener al menos 7 digitos\";\r\n        for (let i = 0; i < value.length; i++) {\r\n            if (!(value[i] === \"+\" || isDigit(value[i]) || value[i].trim() === \"\")) {\r\n                return \"El número debe tener uno de estos formatos: '09123456789' o '+5931234567890'\";\r\n            }\r\n        }\r\n    }\r\n    static email(value) {\r\n        if (!value) return;\r\n        if (value.length < 5) return \"El email no está escrito correctamente\";\r\n        let twoParts = value.split(\"@\");\r\n        if (twoParts.length !== 2) return \"El email no está escrito correctamente\";\r\n        if (!(twoParts[1].indexOf(\".\") >= 0)) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\" \") >= 0) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\"\\t\") >= 0) return \"El email no está escrito correctamente\";\r\n        if (value.trim().indexOf(\"\\r\") >= 0) return \"El email no está escrito correctamente\";\r\n    }\r\n}\r\n\r\nexport function ValidarIdentificacion(value: string, documento: any) {\r\n    if (!value) value = \"\";\r\n    documento = +documento;\r\n    if (documento === 3) { return; }\r\n    if (documento === 1) {\r\n        if (value.length !== 13) return \"Número de RUC debe tener 13 digitos\";\r\n        if (value.length === 13 && value === \"9999999999999\") return;\r\n    }\r\n    if (documento === 2) {\r\n        if (value.length !== 10) return \"Número de Cedula debe tener 10 digitos\";\r\n    }\r\n    return validadorCedulaRuc(value, false);\r\n}\r\nfunction validadorCedulaRuc(numero: string, vacioEstaBien?: boolean, exito?: Function, error?: Function) {\r\n    var mensaje = '';\r\n    var esValido = false;\r\n    if (vacioEstaBien && isEmptyOrNull(numero)) {\r\n        mensaje = '';\r\n        esValido = true;\r\n    } else {\r\n        if (isNumber(numero)) {\r\n\r\n            if (numero.length < 10) {\r\n                mensaje = \"El numero de Cedula debe tener 10 dígitos\";\r\n            } else if (numero.length > 10 && numero.length < 13) {\r\n                mensaje = \"El numero de RUC debe tener 13 dígitos\";\r\n            } else if (numero.length > 13) {\r\n                mensaje = \"El numero tiene más de 13 dígitos\";\r\n            }\r\n\r\n\r\n            var suma = 0;\r\n            var residuo = 0;\r\n            var pri = false;\r\n            var pub = false;\r\n            var nat = false;\r\n            var numeroProvincias = 22;\r\n            var modulo = 11;\r\n\r\n            /* Verifico que el campo no contenga letras */\r\n            var ok = 1;\r\n            /*for (i=0; i numeroProvincias){\r\n            mensaje = 'El código de la provincia (dos primeros dígitos) es inválido'); esValido = fals;\r\n        } */\r\n\r\n            /* Aqui almacenamos los digitos de la cedula en variables. */\r\n            const d1: any = numero.substr(0, 1);\r\n            const d2: any = numero.substr(1, 1);\r\n            const d3: any = numero.substr(2, 1);\r\n            const d4: any = numero.substr(3, 1);\r\n            const d5: any = numero.substr(4, 1);\r\n            const d6: any = numero.substr(5, 1);\r\n            const d7: any = numero.substr(6, 1);\r\n            const d8: any = numero.substr(7, 1);\r\n            const d9: any = numero.substr(8, 1);\r\n            const d10: any = numero.substr(9, 1);\r\n            if (!isDigit(d1)) mensaje = \"El digito 1 no es un número\";\r\n            if (!isDigit(d2)) mensaje = \"El digito 2 no es un número\";\r\n            if (!isDigit(d3)) mensaje = \"El digito 3 no es un número\";\r\n            if (!isDigit(d4)) mensaje = \"El digito 4 no es un número\";\r\n            if (!isDigit(d5)) mensaje = \"El digito 5 no es un número\";\r\n            if (!isDigit(d6)) mensaje = \"El digito 6 no es un número\";\r\n            if (!isDigit(d7)) mensaje = \"El digito 7 no es un número\";\r\n            if (!isDigit(d8)) mensaje = \"El digito 8 no es un número\";\r\n            if (!isDigit(d9)) mensaje = \"El digito 9 no es un número\";\r\n            if (!isDigit(d10)) mensaje = \"El digito 10 no es un número\";\r\n\r\n            if (numero.length > 10) {\r\n                const d11 = numero.substr(10, 1);\r\n                const d12 = numero.substr(10, 1);\r\n                const d13 = numero.substr(10, 1);\r\n                if (d11 && !isDigit(d11)) mensaje = \"El digito 11 no es un número\";\r\n                if (d12 && !isDigit(d12)) mensaje = \"El digito 12 no es un número\";\r\n                if (d13 && !isDigit(d13)) mensaje = \"El digito 13 no es un número\";\r\n            }\r\n\r\n            /* El tercer digito es: */\r\n            /* 9 para sociedades privadas y extranjeros */\r\n            /* 6 para sociedades publicas */\r\n            /* menor que 6 (0,1,2,3,4,5) para personas naturales */\r\n\r\n            let p1;\r\n            let p2;\r\n            let p3;\r\n            let p4;\r\n            let p5;\r\n            let p6;\r\n            let p7;\r\n            let p8;\r\n            let p9;\r\n\r\n            if (d3 == 7 || d3 == 8) {\r\n                mensaje = 'El tercer dígito ingresado es inválido';\r\n                esValido = false;\r\n            }\r\n\r\n            /* Solo para personas naturales (modulo 10) */\r\n            if (d3 < 6) {\r\n                nat = true;\r\n                p1 = d1 * 2; if (p1 >= 10) p1 -= 9;\r\n                p2 = d2 * 1; if (p2 >= 10) p2 -= 9;\r\n                p3 = d3 * 2; if (p3 >= 10) p3 -= 9;\r\n                p4 = d4 * 1; if (p4 >= 10) p4 -= 9;\r\n                p5 = d5 * 2; if (p5 >= 10) p5 -= 9;\r\n                p6 = d6 * 1; if (p6 >= 10) p6 -= 9;\r\n                p7 = d7 * 2; if (p7 >= 10) p7 -= 9;\r\n                p8 = d8 * 1; if (p8 >= 10) p8 -= 9;\r\n                p9 = d9 * 2; if (p9 >= 10) p9 -= 9;\r\n                modulo = 10;\r\n            }\r\n\r\n            /* Solo para sociedades publicas (modulo 11) */\r\n            /* Aqui el digito verficador esta en la posicion 9, en las otras 2 en la pos. 10 */\r\n            else if (d3 == 6) {\r\n                pub = true;\r\n                p1 = d1 * 3;\r\n                p2 = d2 * 2;\r\n                p3 = d3 * 7;\r\n                p4 = d4 * 6;\r\n                p5 = d5 * 5;\r\n                p6 = d6 * 4;\r\n                p7 = d7 * 3;\r\n                p8 = d8 * 2;\r\n                p9 = 0;\r\n            }\r\n\r\n            /* Solo para entidades privadas (modulo 11) */\r\n            else if (d3 == 9) {\r\n                pri = true;\r\n                p1 = d1 * 4;\r\n                p2 = d2 * 3;\r\n                p3 = d3 * 2;\r\n                p4 = d4 * 7;\r\n                p5 = d5 * 6;\r\n                p6 = d6 * 5;\r\n                p7 = d7 * 4;\r\n                p8 = d8 * 3;\r\n                p9 = d9 * 2;\r\n            }\r\n\r\n            suma = p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8 + p9;\r\n            residuo = suma % modulo;\r\n\r\n            /* Si residuo=0, dig.ver.=0, caso contrario 10 - residuo*/\r\n            const digitoVerificador = residuo == 0 ? 0 : modulo - residuo;\r\n\r\n            /* ahora comparamos el elemento de la posicion 10 con el dig. ver.*/\r\n            if (pub == true) {\r\n                if (digitoVerificador != d9) {\r\n                    mensaje = 'El ruc de la empresa del sector público es incorrecto.';\r\n                    esValido = false;\r\n                }\r\n                /* El ruc de las empresas del sector publico terminan con 0001*/\r\n                if (numero.substr(9, 4) != '0001') {\r\n                    mensaje = 'El ruc de la empresa del sector público debe terminar con 0001';\r\n                    esValido = false;\r\n                }\r\n            }\r\n            else if (pri == true) {\r\n                if (digitoVerificador != d10) {\r\n                    mensaje = 'El ruc de la empresa del sector privado es incorrecto.';\r\n                    esValido = false;\r\n                }\r\n                if (numero.substr(10, 3) != '001') {\r\n                    mensaje = 'El ruc de la empresa del sector privado debe terminar con 001';\r\n                    esValido = false;\r\n                }\r\n            }\r\n\r\n            else if (nat == true) {\r\n                if (digitoVerificador != d10) {\r\n                    mensaje = 'El número de cédula de la persona natural es incorrecto.';\r\n                    esValido = false;\r\n                }\r\n                if (numero.length > 10 && numero.substr(10, 3) != '001') {\r\n                    mensaje = 'El ruc de la persona natural debe terminar con 001';\r\n                    esValido = false;\r\n                }\r\n            }\r\n            esValido = true;\r\n\r\n        } else {\r\n            mensaje = 'Este campo solo admite numeros';\r\n        }\r\n    }\r\n\r\n    if (esValido && mensaje == '') {\r\n        if (exito) { exito(); }\r\n        return \"\";\r\n    } else {\r\n        if (mensaje == '') {\r\n            mensaje = 'La cantidad de digitos no corresponde a Cedula o RUC'\r\n        }\r\n        if (error) { error(mensaje); }\r\n        return mensaje;\r\n    }\r\n}\r\n\r\nexport function isDigit(char) { return char >= \"0\" && char <= \"9\"; }\r\nfunction isNumber(obj) { return !isNaN(parseFloat(obj)) }\r\nfunction isEmptyOrNull(obj) {\r\n    if (obj === '' || obj == undefined || obj == null || obj == 'undefined') {\r\n        return true\r\n    } else {\r\n        return false;\r\n    }\r\n}","import React from \"react\";\r\nimport { TextField } from \"@material-ui/core\";\r\nexport default function Input(props: InputProps) {\r\n    var { error, inputProps, ..._props } = props;\r\n    var other_props: any = {};\r\n    if (error) {\r\n        other_props.error = true;\r\n        other_props.helperText = error;\r\n    }\r\n    if (!other_props.inputProps) other_props.inputProps = {};\r\n    other_props.inputProps.id = _props.name;\r\n    return <TextField\r\n        {...other_props}\r\n        {..._props}\r\n    >{props.children}\r\n    </TextField>\r\n}\r\n\r\ninterface InputProps {\r\n    type?: string;\r\n    value?: string;\r\n    error?: string;\r\n\r\n\r\n    [key: string]: any;\r\n}","import React from \"react\";\r\nimport { TextField, Paper, Grid, Typography } from \"@material-ui/core\";\r\nimport { DocToString } from \"../../Services/Calcs\";\r\nimport { ValidarIdentificacion, ValidateInput } from \"../../Services/Validation\";\r\nimport Input from \"../Input\";\r\nexport default class Location extends React.PureComponent<DataProps, {}> {\r\n    /*state = {\r\n        defaultCenter: null\r\n    }\r\n    mapRef;\r\n    virtualMarker;\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleMapMounted = this.handleMapMounted.bind(this);\r\n        this.handleDragStart = this.handleDragStart.bind(this);\r\n        this.handleDragEnd = this.handleDragEnd.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        Geo.currentPosition()\r\n            .then(x => this.setState({ defaultCenter: x }))\r\n    }/*\r\n    handleDragStart() {\r\n        this.virtualMarker.classList.add(\"on-move\");\r\n    }\r\n    handleDragEnd() {\r\n        Geo.PlaceFromCoords(this.mapRef.getCenter())\r\n            .then(d => this.props.onValueChange(\"direccion\", d.inputText))\r\n            .catch(ex => console.warn(\"PlaceFromCoords ERROR\", ex));\r\n        this.virtualMarker.classList.remove(\"on-move\");\r\n    }\r\n    handleMapMounted(map) {\r\n        this.mapRef = map;\r\n        if (!this.mapRef) return;\r\n        this.virtualMarker = document.createElement(\"div\");\r\n        this.virtualMarker.className = \"centerMarker\";\r\n        map.getDiv().appendChild(this.virtualMarker);\r\n    }*/\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.props.onValueChange(name, value);\r\n    }\r\n    render() {\r\n\r\n        const { direccion, ciudad, referencia, sector, visible,\r\n            documento, identificacion, razonSocial,\r\n            direccion_factura, telefono_factura, email_factura,\r\n            nombre_contacto, telefono_contacto, identificacion_contacto, documento_contacto\r\n        } = this.props;\r\n\r\n        let identificacion_e = identificacion\r\n            ? ValidarIdentificacion(identificacion, documento)\r\n            : \"\";\r\n        let telefono_e = ValidateInput.tel(telefono_factura);\r\n        let email_e = ValidateInput.email(email_factura);\r\n\r\n        let identificacion_contacto_e = identificacion_contacto\r\n            ? ValidarIdentificacion(identificacion_contacto, documento_contacto)\r\n            : \"\";\r\n        let telefono_contacto_e = ValidateInput.tel(telefono_contacto);\r\n\r\n        return (<Paper style={{ margin: \"auto\", height: \"100%\", width: \"100%\", padding: 10, marginTop: 10, display: visible ? \"block\" : \"none\" }}>\r\n\r\n            <Grid container >\r\n                <Grid item sm={6}>\r\n                    <Typography variant=\"subtitle1\" style={{ marginLeft: 10 }}>Datos de Envío</Typography>\r\n\r\n                    <Typography variant=\"subtitle1\" style={{ marginLeft: 10, marginTop: 10 }}>Persona que recibe</Typography>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"nombre_contacto\"\r\n                        inputProps={{ id: \"nombre_contacto\" }}\r\n                        value={nombre_contacto}\r\n                        onChange={this.handleChange}\r\n                        label=\"Nombre *\"\r\n                        multiline\r\n                        rows={2}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        name=\"documento_contacto\"\r\n                        value={documento_contacto}\r\n                        inputProps={{ id: \"documento_contacto\" }}\r\n                        variant=\"outlined\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Documento *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    >\r\n                        <option value=\"1\">{DocToString(\"1\")}</option>\r\n                        <option value=\"2\">{DocToString(\"2\")}</option>\r\n                        <option value=\"3\">{DocToString(\"3\")}</option>\r\n                    </TextField>\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"identificacion_contacto\"\r\n                        value={identificacion_contacto}\r\n                        error={identificacion_contacto_e}\r\n                        onChange={this.handleChange}\r\n                        type=\"phone\"\r\n                        inputProps={{ maxLength: 20, id: \"identificacion_contacto\" }}\r\n                        label={\"Numero de \" + DocToString(documento_contacto) + \" *\"}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"telefono_contacto\"\r\n                        value={telefono_contacto}\r\n                        error={telefono_contacto_e}\r\n                        inputProps={{ maxLength: 20 }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Telefono *\"\r\n                        type=\"phone\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"ciudad\"\r\n                        inputProps={{ id: \"ciudad\" }}\r\n                        value={ciudad}\r\n                        onChange={this.handleChange}\r\n                        label=\"Ciudad *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"sector\"\r\n                        inputProps={{ id: \"sector\" }}\r\n                        value={sector}\r\n                        onChange={this.handleChange}\r\n                        label=\"Sector *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"direccion\"\r\n                        inputProps={{ id: \"direccion\" }}\r\n                        value={direccion}\r\n                        onChange={this.handleChange}\r\n                        label=\"Direccion Exacta* \"\r\n                        multiline\r\n                        rows={3}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"referencia\"\r\n                        inputProps={{ id: \"referencia\" }}\r\n                        value={referencia}\r\n                        onChange={this.handleChange}\r\n                        label=\"Referencia\"\r\n                        multiline\r\n                        rows={2}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                </Grid>\r\n                <Grid item sm={6}>\r\n                    <Typography style={{ marginLeft: 10 }} variant=\"subtitle1\">Datos de Facturación</Typography>\r\n                    <TextField\r\n                        name=\"documento\"\r\n                        value={documento}\r\n                        inputProps={{ id: \"documento\" }}\r\n                        variant=\"outlined\"\r\n                        select\r\n                        SelectProps={{ native: true }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Documento *\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    >\r\n                        <option value=\"1\">{DocToString(\"1\")}</option>\r\n                        <option value=\"2\">{DocToString(\"2\")}</option>\r\n                        <option value=\"3\">{DocToString(\"3\")}</option>\r\n                    </TextField>\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"identificacion\"\r\n                        value={identificacion}\r\n                        error={identificacion_e}\r\n                        onChange={this.handleChange}\r\n                        type=\"phone\"\r\n                        inputProps={{ maxLength: 20, id: \"identificacion\" }}\r\n                        label={\"Numero de \" + DocToString(documento) + \" *\"}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"razonSocial\"\r\n                        value={razonSocial}\r\n                        onChange={this.handleChange}\r\n                        label=\"Nombre / Empresa *\"\r\n                        inputProps={{ maxLength: 200, id: \"razonSocial\" }}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        name=\"direccion_factura\"\r\n                        value={direccion_factura}\r\n                        onChange={this.handleChange}\r\n                        label=\"Direccion *\"\r\n                        inputProps={{ maxLength: 300, id: \"direccion_factura\" }}\r\n                        multiline\r\n                        rows={2}\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"telefono_factura\"\r\n                        value={telefono_factura}\r\n                        error={telefono_e}\r\n                        inputProps={{ maxLength: 20 }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Telefono *\"\r\n                        type=\"phone\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                    <Input\r\n                        variant=\"outlined\"\r\n                        name=\"email_factura\"\r\n                        value={email_factura}\r\n                        error={email_e}\r\n                        inputProps={{ maxLength: 50 }}\r\n                        onChange={this.handleChange}\r\n                        label=\"Email *\"\r\n                        type=\"email\"\r\n                        style={{ margin: 10, width: \"calc(100% - 20px)\" }}\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n\r\n        </Paper>)\r\n    }\r\n}\r\n/*\r\nconst Map = withScriptjs(withGoogleMap(function (props: any) {\r\n    const { onMounted, ...google_maps_props } = props;\r\n    return (<GoogleMap\r\n        ref={onMounted}\r\n        {...google_maps_props}\r\n        options={{\r\n            disableDefaultUI: true,\r\n            zoomControl: true,\r\n            clickableIcons: false\r\n        }}\r\n    >\r\n\r\n    </GoogleMap>)\r\n}));\r\n\r\n            {defaultCenter && <Map\r\n                googleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyDxc5H1-I6rNF0PZH4Kiw2YsW0kMCWC9_Q&v=3.exp&libraries=geometry,drawing,places\"\r\n                loadingElement={<div style={{ height: `100%` }} />}\r\n                containerElement={<div id=\"location-map-container\" />}\r\n                mapElement={<div style={{ height: `100%` }} />}\r\n                defaultCenter={defaultCenter}\r\n                defaultZoom={15}\r\n                onMounted={this.handleMapMounted}\r\n                onDragStart={this.handleDragStart}\r\n                onDragEnd={this.handleDragEnd}\r\n            />}\r\n */\r\n\r\ninterface DataProps extends Order {\r\n    visible?: boolean,\r\n    onValueChange: (prop: string, value: string) => void\r\n} ","import React from \"react\";\r\nimport { Paper, Typography, TextField, Button, Divider, CircularProgress, CardActionArea, CardMedia, Switch, FormControlLabel } from \"@material-ui/core\";\r\nimport { Image } from \"@material-ui/icons\";\r\nexport default function (props: {\r\n    onValueChange: Function;\r\n    numeroTransaccion: string;\r\n    onImgChange: (file: File) => void;\r\n    usarImagen?: boolean;\r\n    imgTransaccion: string;\r\n    items: any[];\r\n    onDone: any;\r\n    total: number;\r\n    loading: boolean;\r\n    visible: boolean;\r\n}) {\r\n    function cardClick() {\r\n        document.getElementById(\"IMAGE_INPUT\").click();\r\n    }\r\n    function imageClick(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const files = event.currentTarget.files;\r\n        props.onImgChange((files && files.length && files[0]) || null);\r\n        // clean INPUT\r\n        var input: any = document.getElementById(\"IMAGE_INPUT\");\r\n        input.type = \"text\";\r\n        input.value = \"\";\r\n        input.type = \"file\";\r\n    }\r\n    return (<Paper style={{ maxWidth: 400, padding: 10, marginTop: 10, height: \"100%\", marginLeft: \"auto\", marginRight: \"auto\", display: props.visible ? \"block\" : \"none\" }}>\r\n        <form onSubmit={props.onDone} style={{ textAlign: \"center\" }}>\r\n            <input\r\n                hidden={true}\r\n                type=\"file\"\r\n                onChange={imageClick}\r\n                accept=\"image/*\"\r\n                id=\"IMAGE_INPUT\"\r\n            />\r\n            <Typography style={{ marginTop: 10, marginBottom: 10, textAlign: \"center\" }} variant=\"h6\">Total a Pagar: ${props.total.toFixed(2)}</Typography>\r\n            <Divider />\r\n            <div style={{ padding: 20 }}>\r\n                <Typography>Realiza tu pago mediante Transferencia o Deposito Bancario a la cuenta:</Typography>\r\n                <Typography>PRODUBANCO. Cta. Cte. #2005236823</Typography>\r\n                <Typography>RUC. 1792627192001</Typography>\r\n                <Typography>COSMETICOSNATU CIA.LTDA.</Typography>\r\n            </div>\r\n            <FormControlLabel\r\n                label=\"Subir una Imagen\"\r\n                control={<Switch\r\n                    checked={Boolean(props.usarImagen)}\r\n                    onChange={e => props.onValueChange(\"usarImagen\", e.currentTarget.checked)}\r\n                />}\r\n            />\r\n\r\n            {!props.usarImagen && <TextField\r\n                style={{ width: \"calc(100% - 20px)\", margin: 10 }}\r\n                variant=\"outlined\"\r\n                inputMode=\"numeric\"\r\n                inputProps={{ id: \"numeroTransaccion\" }}\r\n                onChange={event => props.onValueChange(\"numeroTransaccion\", event.currentTarget.value)}\r\n                value={props.numeroTransaccion}\r\n                label=\"Numero de Comprobante *\"\r\n            />}\r\n            {props.usarImagen &&\r\n                <CardActionArea onClick={cardClick} style={{ textAlign: \"center\" }}>\r\n                    {props.imgTransaccion\r\n                        ? <CardMedia className=\"transaction-img\" title=\"Imagen\" image={props.imgTransaccion} />\r\n                        : <div className=\"transaction-img\" style={{ display: \"table\", textAlign: \"center\", margin: \"auto\" }} >\r\n                            <div style={{ display: \"table-cell\", verticalAlign: \"middle\" }}>\r\n                                <Image />\r\n                                <Typography>Agrega una imagen</Typography>\r\n                            </div>\r\n                        </div>}\r\n                </CardActionArea>}\r\n\r\n            <Button type=\"submit\" disabled={props.loading} variant=\"outlined\" color=\"primary\" style={{ margin: 10, width: \"calc(100% - 20px)\" }}>\r\n                {props.loading ? <CircularProgress size={25} /> : \"ENVIAR\"}\r\n            </Button>\r\n        </form>\r\n    </Paper >)\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, TextField, DialogActions, Button, CircularProgress } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(class Survey extends React.Component<any, any> {\r\n    state = { txt1: \"\", txt2: \"\", loading: false, id: \"\" };\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.state.id = props.match.params.id;\r\n    }\r\n    handleChange(event) {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    unblock() { }\r\n    componentDidMount() {\r\n        this.unblock = this.props.history.block = () =>\r\n            this.state.loading ? \"Espera un momento, tu información se está guardando\" : null\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        const { txt1, txt2, loading, id } = this.state;\r\n        if (loading) return;\r\n        if (!txt1 && !txt2) {\r\n            return this.props.history.goBack();\r\n        }\r\n        this.setState({ loading: true });\r\n        API.ActionOrder(id, {\r\n            action: \"SURVEY\",\r\n            value: [txt1, txt2]\r\n        }).then(x => {\r\n            this.setState({ loading: false });\r\n            this.props.history.goBack();\r\n        }).catch(ex => {\r\n            this.setState({ loading: false });\r\n            alert(ex.message);\r\n        });\r\n    }\r\n    handleClose() {\r\n        if (this.state.loading) return;\r\n        this.props.history.goBack();\r\n    }\r\n    render() {\r\n        const { props } = this;\r\n        const { txt1, txt2, loading } = this.state;\r\n        return (<Dialog open={true} onClose={this.handleClose}>\r\n            <form onSubmit={this.handleSubmit}>\r\n                <DialogContent>\r\n                    <Typography style={{ textAlign: \"center\" }} variant=\"h6\" >{props.title}</Typography>\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">Cómo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                    <TextField autoFocus={true} name=\"txt1\" multiline rows={2} label=\"Escribe tu respuesta\" value={txt1} onChange={this.handleChange} fullWidth />\r\n\r\n                    <Typography style={{ marginTop: 10 }} variant=\"subtitle1\">Compártenos alguna experiencia que hayan tenido tus clientes usando nuestros productos</Typography>\r\n                    <TextField name=\"txt2\" multiline rows={3} label=\"Escribe tu respuesta\" value={txt2} onChange={this.handleChange} fullWidth />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button type=\"submit\" variant=\"outlined\" >{loading ? <CircularProgress size={25} /> : \"GUARDAR\"}</Button>\r\n                </DialogActions>\r\n            </form>\r\n        </Dialog>)\r\n    }\r\n});","import React from \"react\";\r\nimport { Dialog, DialogContent, Typography, DialogTitle, DialogActions, Button } from \"@material-ui/core\";\r\n\r\nexport default function Message(props: {\r\n    title?: string,\r\n    message?: string,\r\n    info?: string,\r\n    onClose: (ev) => void,\r\n    children?: any\r\n}) {\r\n    const { title, message, info, onClose } = props;\r\n    return (<Dialog open={Boolean(message) || Boolean(props.children)} onClose={onClose}>\r\n        <DialogTitle>{title}</DialogTitle>\r\n        <DialogContent style={{ textAlign: \"center\" }}>\r\n            {props.children || (<div>\r\n                <Typography variant=\"subtitle1\">{message}</Typography>\r\n                <Typography variant=\"body1\">{info}</Typography>\r\n            </div>)}\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button type=\"button\" onClick={props.onClose} >SALIR</Button>\r\n        </DialogActions>\r\n    </Dialog>);\r\n}","import React from \"react\";\r\nimport Message from \"./Message\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nexport default withRouter(class RouteMessage extends React.PureComponent<any> {\r\n    unblock = () => null;\r\n    componentDidMount() {\r\n        var params: any = new URLSearchParams(this.props.location.search);\r\n        var focusafter = params.get(\"focusafter\");\r\n        if (focusafter)\r\n            this.unblock = this.props.history.block(x => {\r\n                setTimeout(function () {\r\n                    window.requestAnimationFrame(function () {\r\n                        try {\r\n                            document.getElementById(focusafter).focus();\r\n                        } catch (ex) { }\r\n                    });\r\n                }, 100);\r\n            });\r\n    }\r\n    componentWillUnmount() {\r\n        this.unblock && this.unblock();\r\n    }\r\n    render() {\r\n        var params: any = new URLSearchParams(this.props.location.search);\r\n        return (<Message title={params.get(\"a\")} message={params.get(\"b\")} onClose={x => this.props.history.goBack()} />)\r\n    }\r\n});","import API from \"../../Services/API\";\r\nimport { DocToString } from \"../../Services/Calcs\";\r\nimport { ValidarIdentificacion, ValidateInput } from \"../../Services/Validation\";\r\nimport Preferences from \"../../Services/Preferences\";\r\nimport { OrderState } from \"./index\";\r\n\r\nexport function ValidateSave(state: OrderState) {\r\n    var { numeroTransaccion, ciudad, sector, direccion,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        email_factura, loading, usarImagen, imgTransaccion\r\n    } = state;\r\n    if (loading) return { loading: true };\r\n\r\n    var results: any = {};\r\n    var choosen = state.productList.filter(x => x.cantidad);\r\n\r\n    if (!choosen.length) return { productList: \"Debes elegir por lo menos un producto\" };\r\n\r\n    if (isEmpty(ciudad)) results.ciudad = \"Digita la ciudad\";\r\n    if (isEmpty(sector)) results.sector = \"Digita el sector\";\r\n    if (isEmpty(direccion)) results.direccion = \"Digita la direccion\";\r\n\r\n\r\n    if (isEmpty(documento_contacto)) results.documento_contacto = \"Selecciona el documento de identificación de la persona que recibe\";\r\n    if (isEmpty(identificacion_contacto)) {\r\n        results.identificacion_contacto = \"Digita el número de \" + DocToString(documento_contacto) + \" de la persona que recibe\";\r\n    } else {\r\n        let error = ValidarIdentificacion(identificacion_contacto, documento_contacto)\r\n        if (error) results.identificacion_contacto = \"La identificación de la persona que recibe es incorrecta: \" + error;\r\n    }\r\n    if (isEmpty(nombre_contacto)) results.nombre_contacto = \"Digita el nombre de la persona que recibe\";\r\n    if (isEmpty(telefono_contacto)) {\r\n        results.telefono_contacto = \"Digita el numero de Telefono de la persona que recibe\";\r\n    } else {\r\n        let error = ValidateInput.tel(telefono_contacto);\r\n        if (error) results.telefono_contacto = \"Telefono de persona que recibe inválido: \" + error;\r\n    }\r\n\r\n\r\n    if (isEmpty(documento)) results.documento = \"Selecciona un documento de identificación\";\r\n    if (isEmpty(identificacion)) {\r\n        results.identificacion = \"Digita el número de \" + DocToString(documento) + \" de facturación\";\r\n    } else {\r\n        let error = ValidarIdentificacion(identificacion, documento)\r\n        if (error) results.identificacion = \"La identificación de facturación está incorrecta: \" + error;\r\n    }\r\n    if (isEmpty(razonSocial)) results.razonSocial = \"Digita la Razon Social de la factura\";\r\n    if (isEmpty(telefono_factura)) {\r\n        results.telefono_factura = \"Digita el número de Telefono de facturación\";\r\n    } else {\r\n        let error = ValidateInput.tel(telefono_factura);\r\n        if (error) results.telefono_factura = \"Telefono de facturación inválido: \" + error;\r\n    }\r\n    if (isEmpty(direccion_factura)) results.direccion_factura = \"Digita la dirección de facturación\";\r\n    if (isEmpty(email_factura)) results.email_factura = \"Digita el email de facturación\";\r\n    if (isEmpty(email_factura)) {\r\n        results.email_factura = \"Digita el email de facturación\";\r\n    } else {\r\n        let error = ValidateInput.email(email_factura);\r\n        if (error) results.email_factura = error;\r\n    }\r\n\r\n    if (usarImagen) {\r\n        if (isEmpty(imgTransaccion)) results.imgTransaccion = \"Agrega la imagen del comprobante de pago\";\r\n    } else {\r\n        if (isEmpty(numeroTransaccion)) results.numeroTransaccion = \"Digita el numero de comprobante de pago\";\r\n    }\r\n\r\n    if (Object.keys(results).length) return results;\r\n    return null;\r\n}\r\nexport function Save(state: OrderState, imgFileTransaccion?) {\r\n    const { ciudad, sector, direccion, observacion, referencia,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n        descuentoAplica, position, subtotal, usarImagen\r\n    } = state;\r\n    var choosen = state.productList.filter(x => x.cantidad);\r\n\r\n    if (usarImagen) {\r\n        var fileTransaccion = imgFileTransaccion;\r\n    } else {\r\n        var numeroTransaccion = state.numeroTransaccion;\r\n    }\r\n    return API.SaveOrder({\r\n        ciudad, sector, direccion, observacion, referencia,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n        detalle: choosen,\r\n        descuentoPorcentaje: descuentoAplica && descuentoAplica.porcentaje,\r\n        descuentoTotal: descuentoAplica && descuentoAplica.valor,\r\n        total: subtotal - ((descuentoAplica && descuentoAplica.valor) || 0),\r\n        position, numeroTransaccion, fileTransaccion\r\n    }).then(x => {\r\n        Preferences.Set(\"current_order\");\r\n        Preferences.Set(\"direccion\", {\r\n            direccion, ciudad, sector, referencia,\r\n            documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto,\r\n        });\r\n        Preferences.Set(\"factura\", {\r\n            identificacion, documento, razonSocial,\r\n            telefono_factura, direccion_factura, email_factura,\r\n        });\r\n        return {\r\n            currentTab: 0,\r\n            descuentoAplica: null,\r\n            subtotal: 0,\r\n            numeroTransaccion: \"\",\r\n            observacion: \"\",\r\n            position: null,\r\n            loading: null,\r\n            productList: state.productList.map(x => {\r\n                x.cantidad = 0;\r\n                return x;\r\n            }),\r\n            isDirty: false,\r\n            id: x.id\r\n        }\r\n    })\r\n}\r\n\r\nexport function GuardarBorrador(state: OrderState) {\r\n    // actualizar todo!\r\n    var choosen = state.productList.filter(x => x.cantidad).map(x => ({ id: x.id, cantidad: x.cantidad }));\r\n    const { numeroTransaccion, observacion,\r\n        direccion, ciudad, sector, referencia, position,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto, productoSelecciones\r\n    } = state;\r\n    Preferences.Set(\"current_order\", {\r\n        numeroTransaccion, direccion, ciudad, choosen,\r\n        sector, observacion, referencia, position,\r\n        documento, identificacion, razonSocial, telefono_factura, direccion_factura, email_factura,\r\n        documento_contacto, identificacion_contacto, nombre_contacto, telefono_contacto, productoSelecciones\r\n    });\r\n}\r\n\r\nfunction isEmpty(val) {\r\n    return !(val && val.length && val.trim().length);\r\n}","export default function (file: Blob): Promise<string> {\r\n    return new Promise((resolve, reject) => {\r\n        if (file.size > (15 * 1024 * 1024)) {\r\n            var mb = (file.size / 1024 / 1024).toFixed(2);\r\n            return reject({ message: `Tu imagen (${mb} Mb) es muy pesada, selecciona otra máximo de 15 Mb` });\r\n        }\r\n        setTimeout(x => {\r\n            var reader = new FileReader();\r\n            reader.onload = function (event) {\r\n                resolve(event.target.result as string);\r\n            }\r\n            reader.onerror = reject;\r\n            reader.readAsDataURL(file);\r\n        }, 100);\r\n    });\r\n}\r\nexport function ImgFileToObject(file: Blob): Promise<{ ext: string, base64: string }> {\r\n    return new Promise((resolve, reject) => {\r\n        var reader = new FileReader();\r\n        reader.onload = function (event) {\r\n            resolve({\r\n                base64: base64ArrayBuffer(event.target.result as any),\r\n                ext: file.type.split(\"/\")[1]\r\n            });\r\n        }\r\n        reader.onerror = reject;\r\n        reader.readAsArrayBuffer(file);\r\n    });\r\n}\r\n\r\nfunction base64ArrayBuffer(arrayBuffer: ArrayBuffer): string {\r\n    var base64 = ''\r\n    var encodings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\r\n\r\n    var bytes = new Uint8Array(arrayBuffer);\r\n    var byteLength = bytes.byteLength;\r\n    var byteRemainder = byteLength % 3;\r\n    var mainLength = byteLength - byteRemainder;\r\n\r\n    var a, b, c, d;\r\n    var chunk;\r\n\r\n    // Main loop deals with bytes in chunks of 3\r\n    for (var i = 0; i < mainLength; i = i + 3) {\r\n        // Combine the three bytes into a single integer\r\n        chunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2]\r\n\r\n        // Use bitmasks to extract 6-bit segments from the triplet\r\n        a = (chunk & 16515072) >> 18 // 16515072 = (2^6 - 1) << 18\r\n        b = (chunk & 258048) >> 12 // 258048   = (2^6 - 1) << 12\r\n        c = (chunk & 4032) >> 6 // 4032     = (2^6 - 1) << 6\r\n        d = chunk & 63               // 63       = 2^6 - 1\r\n\r\n        // Convert the raw binary segments to the appropriate ASCII encoding\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + encodings[d]\r\n    }\r\n\r\n    // Deal with the remaining bytes and padding\r\n    if (byteRemainder === 1) {\r\n        chunk = bytes[mainLength]\r\n\r\n        a = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2\r\n\r\n        // Set the 4 least significant bits to zero\r\n        b = (chunk & 3) << 4 // 3   = 2^2 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + '=='\r\n    } else if (byteRemainder === 2) {\r\n        chunk = (bytes[mainLength] << 8) | bytes[mainLength + 1]\r\n\r\n        a = (chunk & 64512) >> 10 // 64512 = (2^6 - 1) << 10\r\n        b = (chunk & 1008) >> 4 // 1008  = (2^6 - 1) << 4\r\n\r\n        // Set the 2 least significant bits to zero\r\n        c = (chunk & 15) << 2 // 15    = 2^4 - 1\r\n\r\n        base64 += encodings[a] + encodings[b] + encodings[c] + '='\r\n    }\r\n    return base64\r\n}","import React from \"react\";\r\nimport { Typography, List, ListItem, ListItemSecondaryAction, ListItemText, IconButton } from \"@material-ui/core\";\r\nimport Modal from \"../Modal\";\r\nimport { Delete } from \"@material-ui/icons\";\r\n\r\ninterface Props {\r\n    productList: Product[];\r\n    selections: { [idProducto: number]: number[][] };\r\n    onDeleteSelection: (DoneObject?) => void;\r\n    id: number;\r\n}\r\n\r\nexport default function ProductSelections(props: Props) {\r\n\r\n    const { id, productList, selections } = props;\r\n    const show = !(id === undefined || id === null);\r\n    const Item = productList.find(x => x.id == id) || {} as Product;\r\n    const Rows = ((selections || {})[id] || []);\r\n\r\n    function deletionClick(event) {\r\n        const index = +event.currentTarget.value;\r\n        if (index === null || index === undefined || isNaN(index)) return;\r\n        props.onDeleteSelection({ id, index });\r\n    }\r\n\r\n    return (<Modal\r\n        title=\"Elimina una combinación\"\r\n        onClose={props.onDeleteSelection}\r\n        show={show}\r\n        fullScreen={true}\r\n    >\r\n        <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\r\n            <Typography variant=\"h6\">{Item.nombre}</Typography>\r\n        </div>\r\n        <div style={{ paddingLeft: 10, paddingRight: 10, margin: \"auto\", width: \"calc(100% - 20px)\" }}>\r\n            <List>\r\n                {Rows.map((r, index) => <ListItem>\r\n                    <ListItemText>\r\n                        {r.map(idOpcion => <Typography>{(\r\n                            productList.find(x => x.id === idOpcion) ||\r\n                            { nombre: `id ${idOpcion} - Not Found` }\r\n                        ).nombre}\r\n                        </Typography>)}\r\n                    </ListItemText>\r\n                    <ListItemSecondaryAction>\r\n                        <IconButton onClick={deletionClick} value={index}>\r\n                            <Delete />\r\n                        </IconButton>\r\n                    </ListItemSecondaryAction>\r\n                </ListItem>)}\r\n            </List>\r\n        </div>\r\n    </Modal>);\r\n}\r\n","import React from \"react\";\r\nimport { Tabs, Tab, Paper, Typography, CircularProgress, TextField, Fab } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport ProductGrid from \"./ProductGrid\";\r\nimport ProductOptions from \"./ProductOptions\";\r\nimport ConfirmOrder from \"./ConfirmOrder\";\r\nimport Data from \"./Data\";\r\nimport Payment from \"./Payment\";\r\nimport { Totals, EstimarDescuento } from \"../../Services/Calcs\";\r\nimport Survey from \"./Survey\";\r\nimport Preferences from \"../../Services/Preferences\";\r\nimport { withRouter, Route } from \"react-router-dom\";\r\nimport RouteMessage from \"../RouteMessage\";\r\nimport * as OrderSave from \"./OrderSave\";\r\nimport { Save } from \"@material-ui/icons\";\r\nimport ImageReader, { ImgFileToObject } from \"../../Services/ImageReader\";\r\nimport ProductSelections from \"./ProductSelections\";\r\n\r\nexport default withRouter(class Order extends React.PureComponent<OrderProps, OrderState> {\r\n    state = new OrderState()\r\n    unblockNavigation() { }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.handleTab = this.handleTab.bind(this);\r\n        this.handleProductAction = this.handleProductAction.bind(this);\r\n        this.handleValueChange = this.handleValueChange.bind(this);\r\n        this.handleDone = this.handleDone.bind(this);\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n\r\n        if (props.onMounted) props.onMounted(props.match.path);\r\n        this.state.tablaDescuentos = (props.descuentos || [])\r\n            .map((d, index) => {\r\n                d.id = d.id || index;\r\n                return d;\r\n            });\r\n    }\r\n    componentDidMount() {\r\n        window.onbeforeunload = _ =>\r\n            this.state.isDirty\r\n                ? \"Tu pedido aún está incompleto, deseas salir sin guardarlo?\"\r\n                : null;\r\n\r\n        this.unblockNavigation = this.props.history.block(this.routerWillLeave.bind(this));\r\n\r\n        API.GetProducts()\r\n            .then(productList => {\r\n                this.setState({ productList: productList.map(x => (x.cantidad = 0) === 0 && x), loading: null });\r\n                try {\r\n                    var updates: any = {};\r\n\r\n                    const stored_direccion = Preferences.Get(\"direccion\") || {};\r\n                    for (const key in stored_direccion) {\r\n                        if (this.state.hasOwnProperty(key) && stored_direccion[key]) {\r\n                            updates[key] = stored_direccion[key];\r\n                        }\r\n                    }\r\n\r\n                    const stored_factura = Preferences.Get(\"factura\") || {};\r\n                    for (const key in stored_factura) {\r\n                        if (this.state.hasOwnProperty(key) && stored_factura[key]) {\r\n                            updates[key] = stored_factura[key];\r\n                        }\r\n                    }\r\n\r\n                    const before = Preferences.Get(\"current_order\") || {};\r\n                    for (const key in before) {\r\n                        if (this.state.hasOwnProperty(key)) {\r\n                            updates[key] = before[key];\r\n                        }\r\n                    }\r\n                    if (!(Object.keys(updates).length || (before.choosen && before.choosen.length))) return;\r\n                    //updates.isDirty = Boolean(Object.keys(before).length) || Boolean(before.chooen && before.choosen.lengh);\r\n                    this.setState(updates);\r\n                    if (!before.choosen) return;\r\n                    for (let i = 0; i < before.choosen.length; i++) {\r\n                        const x = before.choosen[i];\r\n                        for (let times = 0; times < x.cantidad; times++) {\r\n                            this.handleProductAction({\r\n                                currentTarget: { name: \"+\", value: x.id }, avoidIsDirty: true\r\n                            } as any)\r\n                        }\r\n                    }\r\n                } catch (ex) { }\r\n            }).catch(ex => alert(ex.message));\r\n    }\r\n    componentWillUnmount() {\r\n        this.unblockNavigation && this.unblockNavigation();\r\n        window.onbeforeunload && (window.onbeforeunload = undefined);\r\n    }\r\n    handleTab(event: any, currentTab: number) {\r\n        this.setState({ currentTab });\r\n    }\r\n    routerWillLeave(nextLocation?) {\r\n        if (nextLocation && nextLocation.pathname.indexOf(this.props.match.path) === 0) return;\r\n        if (!this.state.isDirty) return;\r\n\r\n        var confirm = window.confirm(\"Tu pedido está incompleto, quieres guardarlo para completarlo después?\");\r\n        if (confirm) {\r\n            this.guardarBorrador();\r\n        } else {\r\n            // actualizar todo!\r\n            Preferences.Set(\"current_order\");\r\n        }\r\n    }\r\n    guardarBorrador = (event?) => {\r\n        if (event && !this.state.isDirty) return;\r\n        try {\r\n            OrderSave.GuardarBorrador(this.state);\r\n            if (event) {\r\n                this.props.history.push(this.props.match.path + \"/msg?\" + new URLSearchParams({\r\n                    a: \"Listo\",\r\n                    b: \"Tu pedido fue guardado como borrador.\"\r\n                }).toString());\r\n                this.setState({ isDirty: false });\r\n            }\r\n        } catch (ex) { }\r\n    }\r\n    handleDone(event: React.FormEvent) {\r\n        event.preventDefault();\r\n        if (this.state.loading) return;\r\n        this.setState({ loading: \"guardar\" });\r\n\r\n        var error = OrderSave.ValidateSave(this.state);\r\n        if (error) {\r\n            if (error.loading) return;\r\n            if (error.productList) {\r\n                this.failed_msg(error.productList);\r\n                return this.setState({ loading: null });\r\n            }\r\n            var keys = Object.keys(error);\r\n            if (keys.length) {\r\n                this.failed_msg(error[keys[0]], undefined, keys[0]);\r\n                let currentTab = this.state.currentTab;\r\n                if ([\r\n                    \"ciudad\", \"referencia\", \"direccion\", \"sector\",\r\n                    \"identificacion\", \"documento\", \"razonSocial\",\r\n                    \"direccion_factura\", \"telefono_factura\", \"email_factura\",\r\n                    \"identificacion_contacto\", \"nombre_contacto\", \"telefono_contacto\"\r\n                ].indexOf(keys[0]) >= 0) {\r\n                    currentTab = 2\r\n                }\r\n                return this.setState({ loading: null, currentTab });\r\n            }\r\n        }\r\n        if (this.state.imageFile) {\r\n            return ImgFileToObject(this.state.imageFile)\r\n                .then(imgJson => this._s(imgJson));\r\n        }\r\n        this._s();\r\n    }\r\n    private _s(imgJson?) {\r\n        return OrderSave.Save(this.state, imgJson)\r\n            .then(x => {\r\n                const { id, ...new_state } = x;\r\n                this.setState({ ...new_state, imgTransaccion: null, imageFile: null });\r\n                this.props.history.push(this.props.match.path + \"/survey/\" + x.id);\r\n            }).catch(ex => {\r\n                this.failed_msg(ex.message + \" \" + (ex.status || \"\"), \"Ocurrió un error\");\r\n                this.setState({ loading: null });\r\n            });\r\n    }\r\n    failed_msg(message, title?, focusafter?) {\r\n        var params = new URLSearchParams({\r\n            a: title || \"No se puede guardar\",\r\n            b: message,\r\n            focusafter\r\n        });\r\n        this.props.history.push(this.props.match.path + \"/msg?\" + params.toString());\r\n    }\r\n    handleProductAction(event: React.MouseEvent<HTMLButtonElement>) {\r\n        const { name, value } = event.currentTarget;\r\n        var avoidIsDirty = (event as any).avoidIsDirty;\r\n        this.setState(prev => {\r\n            const state: any = { ...prev };\r\n            state.productList = JSON.parse(JSON.stringify(state.productList));\r\n            var item: Product = state.productList.find((a: any) => a.id === +value);\r\n            var cant: number = (item.cantidad && !isNaN(+item.cantidad) && item.cantidad) || 0;\r\n            const { cantidad_desde } = item;\r\n            if (name === \"+\") {\r\n                if (item.opciones && item.opciones.length && !avoidIsDirty) {\r\n                    this.props.history.push(this.props.match.path + \"/select-product-options/\" + item.id);\r\n                    return state;\r\n                }\r\n                if (cant <= 0 && cantidad_desde) {\r\n                    cant = cantidad_desde;\r\n                } else {\r\n                    cant++;\r\n                }\r\n            } else if (name === \"-\") {\r\n                if (item.opciones && item.opciones.length) {\r\n                    this.props.history.push(this.props.match.path + \"/view-product-options/\" + item.id);\r\n                    return state;\r\n                }\r\n                if (cant <= 10 && cantidad_desde) {\r\n                    cant = 0;\r\n                } else {\r\n                    cant--;\r\n                }\r\n            }\r\n            item.cantidad = cant;\r\n            state.subtotal = Totals(state.productList.filter(x => x.cantidad)).total;\r\n            // en ROL 3, el descuento es MANUAL, no calculado\r\n            if (this.props.rol === 3) {\r\n                if (state.descuentoAplica)\r\n                    state.descuentoAplica.valor = (state.subtotal * state.descuentoAplica.porcentaje / 100);\r\n            } else {\r\n                state.descuentoAplica = EstimarDescuento(state.subtotal, state.tablaDescuentos);\r\n            }\r\n            if (!avoidIsDirty) state.isDirty = true;\r\n            return state;\r\n        });\r\n    }\r\n    handleValueChange(name: string, value: string) {\r\n        this.setState({ [name]: value, isDirty: true } as any);\r\n    }\r\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n        const { value, name } = event.currentTarget;\r\n        this.setState({ [name]: value, isDirty: true } as any);\r\n    }\r\n    handleDescuentoChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { value } = event.currentTarget;\r\n        var descuento = this.state.tablaDescuentos.find(x => x.id === +value);\r\n        if (descuento) {\r\n            var total = Totals(this.state.productList.filter(x => x.cantidad)).total;\r\n            this.setState({\r\n                descuentoAplica: {\r\n                    porcentaje: descuento.porcentaje,\r\n                    valor: (total * descuento.porcentaje / 100),\r\n                    id: descuento.id\r\n                }\r\n            });\r\n        }\r\n    }\r\n    imageChange = (imageFile: File) => {\r\n        if (!imageFile) return;\r\n        document.getElementById(\"loading-full-message\").style.display = \"block\";\r\n        ImageReader(imageFile)\r\n            .then(imgTransaccion => {\r\n                this.setState({ imgTransaccion, imageFile }, () => {\r\n                    document.getElementById(\"loading-full-message\").style.display = \"none\";\r\n                });\r\n            }).catch(ex => {\r\n                document.getElementById(\"loading-full-message\").style.display = \"none\";\r\n                this.failed_msg(\"No se pudo cargar tu imagen. \" + ex.message);\r\n            });\r\n    }\r\n    handleAddSelection = (result?) => {\r\n        if (result) {\r\n            const { id, selections } = result;\r\n            this.setState(prev => {\r\n                const state = { ...prev };\r\n                state.productoSelecciones = JSON.parse(JSON.stringify(state.productoSelecciones));\r\n                if (state.productoSelecciones.hasOwnProperty(id)) {\r\n                    state.productoSelecciones[id].push(selections);\r\n                } else {\r\n                    state.productoSelecciones[id] = [selections];\r\n                }\r\n                state.isDirty = true;\r\n                return state;\r\n            });\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    handleDeleteSelection = result => {\r\n        if (result) {\r\n            const { id, index } = result;\r\n            this.setState(prev => {\r\n                const state = { ...prev };\r\n                state.productoSelecciones = JSON.parse(JSON.stringify(state.productoSelecciones));\r\n                if (state.productoSelecciones.hasOwnProperty(id)) {\r\n                    var exists = state.productoSelecciones[id][index];\r\n                    if (exists) state.productoSelecciones[id].splice(index, 1);\r\n                }\r\n                return state;\r\n            });\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    handlePriceChange = event => {\r\n        const id = +event.currentTarget.name;\r\n        const pvp_final = event.currentTarget.value;\r\n        this.setState(prev => {\r\n            const state = { ...prev };\r\n            state.productList = [...state.productList];\r\n            var found = state.productList.find(x => x.id === id);\r\n            if (found) {\r\n                found.pvp_final = pvp_final;\r\n                //var foundIndex = state.productList.indexOf(found);\r\n                //state.productList[foundIndex] = { ...found, pvp_final };\r\n            }\r\n            return state;\r\n        });\r\n    }\r\n    render() {\r\n        const {\r\n            currentTab, productoSelecciones, numeroTransaccion, descuentoAplica, subtotal,\r\n            loading, observacion, imgTransaccion, usarImagen, tablaDescuentos,\r\n            productList: originalProductList,\r\n            ...remain_state\r\n        } = this.state;\r\n        var productList = originalProductList.map(x => {\r\n            var exists = productoSelecciones[x.id];\r\n            // Creo un nuevo articulo, para evitar la Mutación\r\n            if (exists && exists.length) return {\r\n                ...x,\r\n                cantidad: exists.length\r\n            };\r\n            return x;\r\n        });\r\n        const choosenItems = productList.filter((x: any) => x.cantidad);\r\n        console.info(\"Order render\");\r\n        const total = subtotal - ((descuentoAplica && descuentoAplica.valor) || 0);\r\n        if (loading === \"articulos\") {\r\n            return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }} >\r\n                <CircularProgress size={100} />\r\n                <Typography variant=\"h6\">CARGANDO...</Typography>\r\n            </div >);\r\n        }\r\n\r\n\r\n        return (<div style={{ width: \"100%\", height: \"calc(100% - 1px)\", display: \"flex\", flexDirection: \"column\", padding: 10, overflow: \"hidden\" }} >\r\n            <Tabs variant=\"fullWidth\" onChange={this.handleTab} value={currentTab}>\r\n                <Tab label=\"Productos\" />\r\n                <Tab label=\"Pedido\" />\r\n                <Tab label=\"Datos\" />\r\n                <Tab label=\"Pago\" />\r\n            </Tabs>\r\n            {currentTab === 0 && <ProductGrid\r\n                visible={true}\r\n                onActionClick={this.handleProductAction}\r\n                items={productList}\r\n                productoSelecciones={productoSelecciones}\r\n                editablePrices={this.props.editablePrices}\r\n                onPriceChange={this.handlePriceChange}\r\n            />}\r\n            {currentTab === 1 && (<Paper style={{ display: currentTab === 1 ? \"block\" : \"none\", textAlign: \"center\", padding: 10, margin: \"auto\", marginTop: 10, width: \"100%\", maxWidth: 500, height: \"100%\" }}>\r\n                <Typography variant=\"h5\">TU PEDIDO</Typography>\r\n                <ConfirmOrder\r\n                    show_next_discount={true}\r\n                    items={choosenItems}\r\n                    descuento={descuentoAplica}\r\n                    subtotal={subtotal}\r\n                    total={total}\r\n                    LabelDescuentoComponent={this.props.rol === 3\r\n                        ? (<TextField\r\n                            onChange={this.handleDescuentoChanged}\r\n                            value={(descuentoAplica && descuentoAplica.id) || \"\"}\r\n                            SelectProps={{ native: true }}\r\n                            select\r\n                        >\r\n                            <option>- SELECCIONA UN DESCUENTO -</option>\r\n                            {tablaDescuentos.map(d => (\r\n                                <option key={d.id} value={d.id}>DESCUENTO {d.porcentaje}%</option>\r\n                            ))}\r\n                        </TextField>)\r\n                        : null}\r\n                />\r\n                <TextField variant=\"outlined\" value={observacion} name=\"observacion\" onChange={this.handleChange} style={{ width: \"calc(100% - 20px)\", margin: 10 }} label=\"Observacion\" multiline rows=\"2\"\r\n                    inputProps={{ maxLength: 300, id: \"observacion\" }}\r\n                />\r\n            </Paper>)}\r\n            {currentTab === 2 && <Data visible={true} {...remain_state} onValueChange={this.handleValueChange} />}\r\n            {currentTab === 3 && <Payment\r\n                visible={true}\r\n                loading={loading === \"guardar\"}\r\n                total={total}\r\n                onDone={this.handleDone}\r\n                items={choosenItems}\r\n                numeroTransaccion={numeroTransaccion}\r\n                imgTransaccion={imgTransaccion}\r\n                onImgChange={this.imageChange}\r\n                usarImagen={usarImagen}\r\n                onValueChange={this.handleValueChange}\r\n            />}\r\n\r\n            <Route path={this.props.match.path + \"/msg\"} component={RouteMessage} />\r\n            <Route path={this.props.match.path + \"/survey/:id\"} component={Survey} />\r\n            <Route path={this.props.match.path + \"/select-product-options/:id\"}\r\n                children={({ match }) => <ProductOptions\r\n                    showingID={match && +match.params.id}\r\n                    onDone={this.handleAddSelection}\r\n                    productList={productList}\r\n                />}\r\n            />\r\n            <Route path={this.props.match.path + \"/view-product-options/:id\"}\r\n                children={({ match }) => <ProductSelections\r\n                    id={match && match.params.id}\r\n                    onDeleteSelection={this.handleDeleteSelection}\r\n                    productList={productList}\r\n                    selections={productoSelecciones}\r\n                />}\r\n            />\r\n            <Fab title=\"Guardar Borrador\" onClick={this.guardarBorrador} variant=\"extended\" style={{ position: \"fixed\", bottom: 20, right: 20 }} color=\"primary\">\r\n                <Save />\r\n            </Fab>\r\n        </div >)\r\n    }\r\n});\r\n\r\n\r\nexport class OrderState {\r\n    currentTab: number = 0;\r\n    productList: Product[] = [];\r\n    productoSelecciones: { [idProducto: number]: number[][] } = {};\r\n    tablaDescuentos: Descuento[] = [];\r\n    descuentoAplica: DescuentoCalc = null;\r\n    subtotal: number = 0;\r\n\r\n    position: { lat: number, lng: number } = null;\r\n    direccion: string = \"\";\r\n    sector: string = \"\";\r\n    ciudad: string = \"\";\r\n    referencia: string = \"\";\r\n\r\n    documento: \"1\" | \"2\" | \"3\" = \"1\";\r\n    razonSocial: string = \"\";\r\n    identificacion: string = \"\";\r\n    telefono_factura: string = \"\";\r\n    direccion_factura: string = \"\";\r\n    email_factura: string = \"\";\r\n\r\n    documento_contacto: \"1\" | \"2\" | \"3\" = \"2\";\r\n    identificacion_contacto: string = \"\";\r\n    nombre_contacto: string = \"\";\r\n    telefono_contacto: string = \"\";\r\n\r\n    observacion: string = \"\";\r\n    numeroTransaccion: string = \"\";\r\n    imgTransaccion = \"\";\r\n    usarImagen = false;\r\n\r\n    loading: \"articulos\" | \"guardar\" = null;\r\n    isDirty?: boolean = false;\r\n    imageFile?: Blob;\r\n}\r\n\r\ninterface OrderProps {\r\n    onMounted: (path: string) => void;\r\n    history: any;\r\n    match: any;\r\n    rol: number;\r\n    editablePrices?: boolean;\r\n    descuentos: Descuento[];\r\n}","import { OrderDetailsState } from \"../Components/OrderList/OrderDetails\";\r\nimport API from \"./API\";\r\n\r\nexport default class OrderActions {\r\n    static Aprobar(state: OrderDetailsState) {\r\n        let cf = window.confirm(\"Esta seguro de APROBAR este pedido?\");\r\n        if (!cf) return;\r\n        return API.ActionOrder(state.id, { action: \"APROBAR\" });\r\n    }\r\n    static Rechazar(state: OrderDetailsState) {\r\n        let cf = window.confirm(\"Esta seguro de RECHAZAR este pedido?\");\r\n        if (!cf) return;\r\n        let value = window.prompt(\"Digita el Motivo de Rechazo\");\r\n        if (!value) return;\r\n        return API.ActionOrder(state.id, { action: \"RECHAZAR\", value })\r\n    }\r\n    static Enviar(state: OrderDetailsState) {\r\n        const { _fechaEnvio } = state;\r\n        if (!(_fechaEnvio && _fechaEnvio.toString().trim().length && !isNaN(+new Date(_fechaEnvio)))) {\r\n            alert(\"Agregue una fecha de envío válida\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"_fechaEnvio\").focus();\r\n            });\r\n            return;\r\n        }\r\n        let cf = window.confirm(\"Esta seguro de seleccionar este pedido como ENVIADO?\");\r\n        if (!cf) return;\r\n        let value = new Date(\r\n            +_fechaEnvio.split(\"-\")[0],\r\n            (+_fechaEnvio.split(\"-\")[1]) - 1,\r\n            +_fechaEnvio.split(\"-\")[2]\r\n        );\r\n        return API.ActionOrder(state.id, { action: \"ENVIAR\", value })\r\n    }\r\n    static Recibir(state: OrderDetailsState) {\r\n        const { _fechaRecepcion, bienRecibido, observacionRecepcion } = state;\r\n        if (!(_fechaRecepcion && _fechaRecepcion.toString().trim().length && !isNaN(+new Date(_fechaRecepcion)))) {\r\n            alert(\"Agregue una fecha de recepción válida\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"_fechaRecepcion\").focus();\r\n            });\r\n            return;\r\n        }\r\n        if (!bienRecibido && !(observacionRecepcion && observacionRecepcion.toString().trim().length)) {\r\n            alert(\"Agregue la observación de la Recepción\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"observacionRecepcion\").focus();\r\n            });\r\n            return;\r\n        }\r\n        let value = new Date(\r\n            +_fechaRecepcion.split(\"-\")[0],\r\n            (+_fechaRecepcion.split(\"-\")[1]) - 1,\r\n            +_fechaRecepcion.split(\"-\")[2]\r\n        );\r\n        if (value.valueOf() < new Date(state.fechaEnvio).valueOf()) {\r\n            alert(\"La fecha de Recepción no puede ser menor a la fecha de envío\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"_fechaRecepcion\").focus();\r\n            });\r\n        }\r\n\r\n        let cf = window.confirm(\"Esta seguro de seleccionar este pedido como RECIBIDO?\");\r\n        if (!cf) return;\r\n\r\n        return API.ActionOrder(state.id, {\r\n            action: \"RECIBIR\",\r\n            value,\r\n            bienRecibido,\r\n            observacionRecepcion\r\n        });\r\n    }\r\n    static Facturar(state: OrderDetailsState) {\r\n        if (!(state.numeroFactura && state.numeroFactura.toString().trim().length)) {\r\n            alert(\"Agregue el número de factura\");\r\n            window.requestAnimationFrame(function () {\r\n                document.getElementById(\"numeroFactura\").focus();\r\n            });\r\n            return;\r\n        }\r\n        let cf = window.confirm(\"Esta seguro de FACTURAR este pedido?\");\r\n        if (!cf) return;\r\n        return API.ActionOrder(state.id, { action: \"FACTURAR\", value: state.numeroFactura });\r\n    }\r\n}","import React from \"react\";\r\nimport { Dialog, DialogContent, DialogTitle, Typography, TextField, Button, CircularProgress, DialogActions, Divider, FormControlLabel, Checkbox, CardMedia } from \"@material-ui/core\";\r\nimport ConfirmOrder from \"../Order/ConfirmOrder\";\r\nimport API from \"../../Services/API\";\r\nimport { DocToString } from \"../../Services/Calcs\";\r\nimport OrderActions from \"../../Services/OrderActions\";\r\n\r\nexport default class detaOrderDetails extends React.Component<{\r\n    onClose: (refresh: boolean) => void,\r\n    editable?: boolean,\r\n    id: number\r\n}> {\r\n    state = {\r\n        loading: \"data\",\r\n        _fechaEnvio: \"\",\r\n        _fechaRecepcion: \"\",\r\n    } as OrderDetailsState\r\n    componentWillMount() {\r\n        API.GetOrder(this.props.id)\r\n            .then(order => this.setState({ ...order, loading: null }));\r\n    }\r\n    handleClose = (event: React.MouseEvent<HTMLElement>) => {\r\n        this.props.onClose(this.state.shouldRefresh);\r\n    }\r\n    handleButton = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        const { name } = event.currentTarget;\r\n        if (this.state.loading) return;\r\n        if (name === \"APROBAR\") {\r\n            let promise = OrderActions.Aprobar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"RECHAZAR\") {\r\n            let promise = OrderActions.Rechazar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"ENVIAR\") {\r\n            let promise = OrderActions.Enviar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"RECIBIR\") {\r\n            let promise = OrderActions.Recibir(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        if (name === \"FACTURAR\") {\r\n            let promise = OrderActions.Facturar(this.state);\r\n            if (!promise) return;\r\n            promise.then(x => this.props.onClose(true))\r\n                .catch(ex => {\r\n                    alert(ex.message);\r\n                    this.setState({ loading: null });\r\n                });\r\n        }\r\n        this.setState({ loading: name });\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleCheck = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, checked } = event.currentTarget;\r\n        this.setState({ [name]: checked });\r\n    }\r\n    render() {\r\n        const { numero,\r\n\r\n            fechaCreacion, fechaEnvio, fechaRecepcion,\r\n            detalle,\r\n            descuentoPorcentaje, descuentoTotal, observacion,\r\n            direccion, sector, ciudad, referencia, numeroTransaccion, imgTransaccion,\r\n            estado, total, username,\r\n            survey1, survey2, loading,\r\n            documento, identificacion, razonSocial,\r\n            telefono_factura, direccion_factura, email_factura,\r\n            nombre_contacto, identificacion_contacto, documento_contacto, telefono_contacto,\r\n\r\n            numeroFactura, _fechaEnvio, _fechaRecepcion, bienRecibido, observacionRecepcion\r\n        } = this.state;\r\n        const editable = this.props.editable === true;\r\n\r\n        if (loading === \"data\")\r\n            return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\" >\r\n                <DialogContent style={{ textAlign: \"center\", paddingTop: 100, width: 400, height: 400 }}>\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </DialogContent>\r\n            </Dialog>);\r\n\r\n\r\n        return (<Dialog open={true} onClose={this.handleClose} maxWidth=\"md\">\r\n            <DialogTitle>PEDIDO #{numero}</DialogTitle>\r\n            <DialogContent>\r\n                <TextRow value={new Date(fechaCreacion).toLocaleString()} label=\"Fecha\" />\r\n                <TextRow value={username} label=\"Usuario\" />\r\n                <TextRow value={estado} label=\"Estado\" />\r\n\r\n                {numeroFactura && <TextRow value={numeroFactura} label=\"Factura #\" />}\r\n                {fechaEnvio && <TextRow value={new Date(fechaEnvio).toLocaleDateString()} label=\"Enviado\" />}\r\n                {fechaRecepcion && <TextRow value={new Date(fechaRecepcion).toLocaleDateString()} label=\"Recibido\" />}\r\n                {estado === \"RECIBIDO\" && <TextRow value={(bienRecibido ? \"NO\" : \"SI\")} label=\"Incompleto\" />}\r\n                {estado === \"RECIBIDO\" && <TextRow label=\"Comentarios\" value={observacionRecepcion} />}\r\n\r\n                <SectionHeader>PRODUCTOS</SectionHeader>\r\n                <ConfirmOrder items={detalle} descuento={{ porcentaje: descuentoPorcentaje, valor: descuentoTotal }} total={total} subtotal={total + descuentoTotal} />\r\n                <TextRow value={observacion} label=\"Observación\" />\r\n\r\n                <SectionHeader>DATOS DE ENTREGA</SectionHeader>\r\n\r\n                <TextRow value={nombre_contacto} label=\"Nombre\" />\r\n                <TextRow value={identificacion_contacto} label={DocToString(documento_contacto as any)} />\r\n                <TextRow value={telefono_contacto} label=\"Telefono\" />\r\n\r\n                <TextRow value={ciudad} label=\"Ciudad\" />\r\n                <TextRow value={sector} label=\"Sector\" />\r\n                <TextRow value={direccion} label=\"Direccion\" />\r\n                <TextRow value={referencia} label=\"Referencia\" />\r\n\r\n\r\n                <SectionHeader>DATOS DE FACTURACIÓN</SectionHeader>\r\n                <TextRow value={identificacion} label={DocToString(documento as any)} />\r\n                <TextRow value={razonSocial} label=\"Nombre\" />\r\n                <TextRow value={direccion_factura} label=\"Dirección\" />\r\n                <TextRow value={telefono_factura} label=\"Teléfono\" />\r\n                <TextRow value={email_factura} label=\"Email\" />\r\n\r\n                <SectionHeader>PAGO</SectionHeader>\r\n                {numeroTransaccion && <TextRow value={numeroTransaccion} label=\"Comprobante\" />}\r\n                {imgTransaccion && <CardMedia style={{ height: 400 }} image={imgTransaccion} title=\"Comprobante\" />}\r\n\r\n                <SectionHeader>ENCUESTA</SectionHeader>\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">Cómo podemos ayudarte a mejorar tus ventas?</Typography>\r\n                <Typography>{survey1 || \"\"}</Typography>\r\n                <Typography style={{ marginTop: 10 }} variant=\"caption\">\r\n                    Compártenos alguna experiencia que hayan tenido tus clientes usando nuestros productos\r\n                </Typography>\r\n                <Typography>{survey2 || \"\"}</Typography>\r\n\r\n                {estado === \"PENDIENTE\" && editable && <ActionButtons\r\n                    loadingAction={this.state.loading}\r\n                    label=\"APROBAR\"\r\n                    showReject={true}\r\n                    onClick={this.handleButton}\r\n                />}\r\n\r\n                {estado === \"APROBADO\" && editable && <React.Fragment>\r\n                    <SectionHeader>ENVIAR</SectionHeader>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\", marginTop: 15, marginBottom: 10 }}>\r\n                        <Typography variant=\"button\" style={{ marginRight: 10, paddingTop: 5 }} >Fecha de Envío</Typography>\r\n                        <TextField\r\n                            type=\"date\"\r\n                            fullWidth\r\n                            inputProps={{ id: \"_fechaEnvio\" }}\r\n                            name=\"_fechaEnvio\"\r\n                            value={_fechaEnvio || \"\"}\r\n                            style={{ flex: 1 }}\r\n                            onChange={this.handleChange}\r\n                        />\r\n                    </div>\r\n                    <ActionButtons\r\n                        loadingAction={this.state.loading}\r\n                        label=\"ENVIAR\"\r\n                        onClick={this.handleButton}\r\n                    />\r\n                </React.Fragment>}\r\n\r\n                {estado === \"ENVIADO\" && editable && <React.Fragment>\r\n                    <SectionHeader>RECIBIR</SectionHeader>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\", margin: 10 }}>\r\n                        <Typography variant=\"button\" style={{ marginRight: 10, paddingTop: 5 }} >Fecha Recepción</Typography>\r\n                        <TextField\r\n                            type=\"date\"\r\n                            fullWidth\r\n                            name=\"_fechaRecepcion\"\r\n                            value={_fechaRecepcion || \"\"}\r\n                            inputProps={{ id: \"_fechaRecepcion\" }}\r\n                            style={{ flex: 1 }}\r\n                            onChange={this.handleChange}\r\n                        /></div>\r\n                    <FormControlLabel\r\n                        label=\"El pedido se envió completo?\"\r\n                        control={<Checkbox\r\n                            checked={bienRecibido}\r\n                            onChange={this.handleCheck}\r\n                            name=\"bienRecibido\"\r\n                        />}\r\n                    />\r\n                    <TextField\r\n                        name=\"observacionRecepcion\"\r\n                        value={observacionRecepcion || \"\"}\r\n                        onChange={this.handleChange}\r\n                        rows={2}\r\n                        required={!bienRecibido}\r\n                        label=\"Comentarios\"\r\n                        fullWidth\r\n                        multiline\r\n                        inputProps={{\r\n                            id: \"observacionRecepcion\",\r\n                            maxLength: 300\r\n                        }}\r\n                    />\r\n                    <ActionButtons\r\n                        loadingAction={this.state.loading}\r\n                        name=\"RECIBIR\"\r\n                        label=\"COMPLETAR\"\r\n                        onClick={this.handleButton}\r\n                    />\r\n                </React.Fragment>}\r\n\r\n                {estado === \"RECIBIDO\" && editable && <React.Fragment>\r\n                    <SectionHeader>REGISTRAR FACTURA</SectionHeader>\r\n                    <TextField\r\n                        label=\"Numero de Factura\"\r\n                        placeholder=\"###-###-#####\"\r\n                        value={numeroFactura}\r\n                        inputProps={{\r\n                            id: \"numeroFactura\",\r\n                            maxLength: 20\r\n                        }}\r\n                        fullWidth\r\n                        onChange={this.handleChange}\r\n                        name=\"numeroFactura\"\r\n                    />\r\n                    <ActionButtons\r\n                        loadingAction={this.state.loading}\r\n                        label=\"FACTURAR\"\r\n                        onClick={this.handleButton}\r\n                    />\r\n                </React.Fragment>}\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={this.handleClose}>SALIR</Button>\r\n            </DialogActions>\r\n        </Dialog>);\r\n    }\r\n}\r\n\r\nexport interface OrderDetailsState extends Order {\r\n    loading: string;\r\n    _fechaEnvio: string;\r\n    _fechaRecepcion: string;\r\n    shouldRefresh?: boolean;\r\n}\r\n\r\nfunction TextRow(props: { value: any, label: any }) {\r\n    const { value, label } = props;\r\n    return <div style={{ width: \"100%\", textAlign: \"left\" }}>\r\n        <div style={{ width: 120, display: \"inline-block\" }}>\r\n            <Typography variant=\"body1\" >{label}</Typography>\r\n        </div>\r\n        <Typography variant=\"body2\" style={{ width: \"auto\", display: \"inline\" }}>{value}</Typography>\r\n    </div>\r\n}\r\n\r\nfunction SectionHeader(props: any) {\r\n    const style = { marginTop: 12, marginBottom: 5 } as any;\r\n    if (props.center) style.textAlign = \"center\";\r\n    return (\r\n        <div style={style}>\r\n            <Typography variant=\"h6\">{props.children}</Typography>\r\n            <Divider />\r\n        </div>);\r\n}\r\nfunction ActionButtons(props: {\r\n    loadingAction: string,\r\n    label: string,\r\n    onClick: any,\r\n    showReject?: boolean,\r\n    name?: string\r\n}) {\r\n    return <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n        <Button\r\n            style={{ margin: 10, flex: 1 }}\r\n            onClick={props.onClick}\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            disabled={Boolean(props.loadingAction)}\r\n            name={props.name || props.label}\r\n        >\r\n            {props.loadingAction === (props.name || props.label)\r\n                ? \"CARGANDO...\"\r\n                : props.label}\r\n        </Button>\r\n        {props.showReject &&\r\n            (<Button\r\n                style={{ margin: 10, flex: 1 }}\r\n                onClick={props.onClick}\r\n                variant=\"outlined\"\r\n                color=\"secondary\"\r\n                disabled={Boolean(props.loadingAction)}\r\n                name=\"RECHAZAR\"\r\n            >\r\n                {props.loadingAction === \"RECHAZAR\"\r\n                    ? \"CARGANDO...\"\r\n                    : \"RECHAZAR\"}\r\n            </Button>)}\r\n    </div>\r\n}","import React from \"react\";\r\nimport { List, ListItem, Grid, Paper, Typography, Hidden, CircularProgress, Tabs, Tab } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nimport { Route } from \"react-router-dom\";\r\nimport OrderDetails from \"./OrderDetails\";\r\nimport Message from \"../Message\";\r\nexport default class extends React.Component<any> {\r\n    state = {\r\n        data: [] as Order[],\r\n        msg: null,\r\n        loading: true\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleMessage = this.handleMessage.bind(this);\r\n    }\r\n    componentWillMount() {\r\n        API.GetOrders()\r\n            .then(data => this.setState({ data, loading: null }))\r\n            .catch(err => this.setState({\r\n                loading: null,\r\n                msg: { title: \"Ocurrió un error\", message: err.message, info: err.code }\r\n            }));\r\n    }\r\n    handleMessage() {\r\n        this.setState({ msg: null });\r\n    }\r\n    handleClick(event: React.MouseEvent<HTMLElement>) {\r\n        const { id } = event.currentTarget;\r\n        this.props.history.push(this.props.match.path + \"/\" + id);\r\n    }\r\n    handleClose(refresh: boolean) {\r\n        if (refresh) {\r\n            this.setState({ loading: true });\r\n            API.GetOrders()\r\n                .then(data => this.setState({ data, loading: null }))\r\n                .catch(ex => this.setState({\r\n                    msg: { title: \"No se pudo actualizar el listado\", message: ex.message, info: ex.code },\r\n                    loading: null\r\n                }));\r\n        }\r\n        this.props.history.push(this.props.match.path);\r\n    }\r\n    render() {\r\n        const { data, msg, loading } = this.state;\r\n        const { rol } = this.props;\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", textAlign: \"center\", paddingTop: 100 }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        return (<Paper style={{ width: \"calc(100%-20px)\", height: \"calc(100% - 30px)\", display: \"flex\", flexDirection: \"column\", margin: 10, padding: 10, paddingBottom: 0, overflowX: \"hidden\" }}>\r\n            <List>\r\n                <Hidden xsDown implementation=\"css\" >\r\n                    <ListItem>\r\n                        <Grid container spacing={1} style={{ borderBottom: \"1px solid #ebebeb\" }}>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Numero</Typography></Grid>\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Creado</Typography></Grid>\r\n\r\n                            {rol === 3 && <Grid sm={3} item><Typography variant=\"overline\">Usuario</Typography></Grid>}\r\n\r\n                            <Grid sm={1} item><Typography variant=\"overline\">Total</Typography></Grid>\r\n\r\n                            {rol === 1 && <Grid sm={1} item><Typography variant=\"overline\">Ganancia</Typography></Grid>}\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Estado</Typography></Grid>\r\n\r\n                            <Grid sm={2} item><Typography variant=\"overline\">Fecha de Envío</Typography></Grid>\r\n                        </Grid>\r\n                    </ListItem>\r\n                </Hidden>\r\n                {data.map(d => <ListItem key={d.id} id={\"\" + d.id} button onClick={this.handleClick}>\r\n                    <Grid container spacing={1} style={{ paddingTop: 5, paddingBottom: 5, borderBottom: \"1px solid #fafafa\" }}>\r\n\r\n                        <Grid xs={12} sm={2} item >\r\n                            <Hidden smUp >PEDIDO #</Hidden>\r\n                            {d.id}\r\n                        </Grid>\r\n                        <Grid xs={12} sm={2} item >\r\n                            {new Date(d.fechaCreacion).toLocaleDateString()}\r\n                        </Grid>\r\n\r\n                        {rol === 3 && <Grid xs={12} sm={3} item >\r\n                            {d.username}\r\n                        </Grid>}\r\n\r\n                        <Grid xs={12} sm={1} item >$ {d.total.toFixed(2)}</Grid>\r\n\r\n                        {rol === 1 && <Grid xs={12} sm={1} item >$ {(d.descuentoTotal || 0).toFixed(2)}</Grid>}\r\n\r\n                        <Grid xs={12} sm={2} item ><Typography color={EstadoToVariant(d.estado)}>{d.estado}</Typography></Grid>\r\n\r\n                        <Grid xs={12} sm={2} item >{d.fechaEnvio && new Date(d.fechaEnvio).toDateString()}</Grid>\r\n                    </Grid>\r\n                </ListItem>)}\r\n            </List>\r\n\r\n            {msg && <Message {...msg} onClose={this.handleMessage} />}\r\n\r\n            <Route\r\n                path={this.props.match.path + \"/:id\"}\r\n                render={props => <OrderDetails id={+props.match.params.id} onClose={this.handleClose} />}\r\n            />\r\n        </Paper>);\r\n    }\r\n}\r\n\r\nfunction EstadoToVariant(estado): any {\r\n    if (estado === \"APROBADO\") return \"primary\";\r\n    if (estado === \"RECHAZADO\") return \"secondary\";\r\n    return \"initial\";\r\n}","import React from \"react\";\r\nimport { CardContent, CardHeader, Card, List, ListItem, Typography, IconButton } from \"@material-ui/core\";\r\nimport { ArrowLeft, ArrowRight, HourglassEmpty } from \"@material-ui/icons\";\r\nexport default function RankingCard(props: RankProps) {\r\n    const {\r\n        data, title, col1, col2, secondColType, colType,\r\n        subtitle, onBackClick, onNextClick, loading\r\n    } = props;\r\n\r\n    return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n        <CardHeader\r\n            title={(<div style={{ flex: 1, display: \"flex\", flexDirection: \"row\" }}>\r\n                {onBackClick && <div><IconButton onClick={onBackClick} disabled={loading}>\r\n                    {loading ? <HourglassEmpty /> : <ArrowLeft />}\r\n                </IconButton></div>}\r\n                <div style={{ flex: 1 }}>\r\n                    <Typography variant=\"h5\">{title}</Typography>\r\n                    <Typography variant=\"body1\">{subtitle}</Typography>\r\n                </div>\r\n                {onNextClick && <div><IconButton onClick={onNextClick} disabled={loading}>\r\n                    {loading ? <HourglassEmpty /> : <ArrowRight />}\r\n                </IconButton></div>}\r\n            </div>)}\r\n            disableTypography={true}\r\n            style={{ textAlign: \"center\" }}\r\n        />\r\n        <CardContent style={{ flex: 1, overflow: \"auto\" }}>\r\n            <List>\r\n                {data.sort((a, b) => b[col1] - a[col1])\r\n                    .map((r, index) => {\r\n                        var value1 = r[col1];\r\n                        if (col2) {\r\n                            var value2 = r[col2];\r\n                            if (secondColType && secondColType === \"DATE\") {\r\n                                value2 = DateToString(r[col2]);\r\n                            } else {\r\n                                value2 = value2.toFixed(2);\r\n                            }\r\n                        }\r\n\r\n                        return (<ListItem key={index} id={\"ranking-listitem-\" + index} >\r\n                            <div style={{ display: \"table\", width: \"100%\" }} >\r\n\r\n                                <Typography style={{ display: \"table-cell\", width: 50 }} variant={r.me ? \"body1\" : \"caption\"}># {index + 1}</Typography>\r\n                                <Typography style={{ display: \"table-cell\" }} variant={r.me ? \"body1\" : \"caption\"} >\r\n                                    {r.username}\r\n                                </Typography>\r\n\r\n                                {colType === \"PERFOMANCE\" && <PerfomanceCell value={value1} me={r.me} />}\r\n\r\n                                {colType === \"MONEY\" && <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                    $ {value1.toFixed(2)}\r\n                                </Typography>}\r\n\r\n                                {colType === \"NUMBER\" && <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                    {value1}\r\n                                </Typography>}\r\n\r\n                                {col2\r\n                                    ? (secondColType === \"PERFOMANCE\"\r\n                                        ? <PerfomanceCell value={+value2} me={r.me} />\r\n                                        : <Typography style={{ display: \"table-cell\", textAlign: \"right\", width: 100, paddingLeft: 10 }} variant={r.me ? \"body1\" : \"caption\"}>\r\n                                            {secondColType === \"MONEY\" ? \"$\" : null} {value2}\r\n                                        </Typography>)\r\n                                    : null\r\n                                }\r\n                            </div>\r\n                        </ListItem>)\r\n                    })}\r\n            </List>\r\n        </CardContent>\r\n    </Card>)\r\n}\r\nfunction PerfomanceCell(props: { value: any, me: boolean }) {\r\n    return <Typography\r\n        color={props.value ? (props.value > 0 ? \"primary\" : \"secondary\") : \"inherit\"}\r\n        style={{ display: \"table-cell\", textAlign: \"right\", width: 100 }}\r\n        variant={props.me ? \"body1\" : \"caption\"}\r\n    >\r\n        % {props.value.toFixed(2)} {props.value ? (props.value > 0 ? \"↑\" : \"↓\") : null}\r\n    </Typography>\r\n}\r\n\r\nfunction DateToString(x) {\r\n    if (!x) return \"Nunca\";\r\n    var date = new Date(x);\r\n    if (isNaN(+date)) return x;\r\n    var ahora = new Date();\r\n    if (date.getDate() === ahora.getDate() &&\r\n        date.getMonth() === ahora.getMonth() &&\r\n        date.getFullYear() === ahora.getFullYear()) {\r\n        return date.toLocaleTimeString();\r\n    }\r\n\r\n    for (let i = 1; i < 30; i++) {\r\n        var este_dia = new Date(ahora.getFullYear(), ahora.getMonth(), ahora.getDate() - i);\r\n        if (date.getDate() === este_dia.getDate() &&\r\n            date.getMonth() === este_dia.getMonth() &&\r\n            date.getFullYear() === este_dia.getFullYear()) {\r\n            if (i === 1) return \"Ayer\";\r\n            return \"Hace \" + i + \" días\";\r\n        }\r\n    }\r\n    return date.toLocaleDateString();\r\n}\r\n\r\n\r\nexport interface RankProps {\r\n    data: Rank[];\r\n    title: string;\r\n    col1: string;\r\n    col2?: string;\r\n    colType: \"MONEY\" | \"PERFOMANCE\" | \"NUMBER\";\r\n    secondColType?: \"MONEY\" | \"DATE\" | \"PERFOMANCE\";\r\n\r\n    subtitle?: string;\r\n    onBackClick?: any;\r\n    onNextClick?: any;\r\n    loading?: boolean;\r\n}","import React from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\nimport { MonthToString } from \"../../Services/Calcs\";\r\n\r\nexport default class LineCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false,\r\n            bezierCurve: false,\r\n            scales: {\r\n                yAxes: [{\r\n\r\n                    ticks: {\r\n                        maxTicksLimit: 10,\r\n                        padding: 5\r\n                    }\r\n                }],\r\n                xAxes: [{\r\n                    ticks: {\r\n                        padding: 5\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        for (let i = 0; i < this.props.data.length; i++) {\r\n            const el = this.props.data[i];\r\n            if (el.we) {\r\n                var x = new Date(el.we);\r\n                labels.push(`${x.getDate()} ${MonthToString(x.getMonth())}`);\r\n            } else {\r\n                labels.push(el.label);\r\n            }\r\n            values.push(el.value);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor: \"#3f51b5\",\r\n                borderColor: \"#3f51b5\",\r\n                data: values,\r\n                lineTension: 0,\r\n                fill: false\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Line options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >);\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { Card, CardContent, Typography, CardHeader, List, ListItem, ListItemText, ListItemSecondaryAction } from \"@material-ui/core\";\r\n\r\nexport default function ProfitCard(props: { month: number, year: number }) {\r\n    const { month, year } = props;\r\n    var reservas = 0, promo = 0;\r\n    if (month) {\r\n        reservas = (month * 5) / 100;\r\n        promo = (month * 14) / 100;\r\n    }\r\n    return (<Card className=\"dashboard-card\">\r\n        <CardHeader title=\"GANANCIAS\" style={{ textAlign: \"center\" }} />\r\n        <CardContent>\r\n            <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                <div style={{ textAlign: \"center\", flex: 1 }}>\r\n                    <Typography color=\"primary\" variant=\"h5\" style={{ flex: 1 }}>$ {reduceMoney(month)}</Typography>\r\n                    <Typography color=\"primary\">ESTE MES</Typography>\r\n                </div>\r\n                <div style={{ borderLeft: \"1px solid black\", textAlign: \"center\", flex: 1 }}>\r\n                    <Typography variant=\"h5\" style={{ flex: 1 }} >$ {reduceMoney(year)}</Typography>\r\n                    <Typography>ESTE AÑO</Typography>\r\n                </div>\r\n            </div>\r\n            <Typography variant=\"subtitle1\" style={{ marginTop: 20, paddingLeft: 15, textAlign: \"left\" }}>Te aconsejamos apartar lo siguiente:</Typography>\r\n            <List>\r\n                <ListItem dense>\r\n                    <ListItemText primary=\"RESERVAS 5%\" />\r\n                    <ListItemSecondaryAction>$ {reservas.toFixed(2)}</ListItemSecondaryAction>\r\n                </ListItem>\r\n                <ListItem dense>\r\n                    <ListItemText primary=\"PROMOCION 14%\" />\r\n                    <ListItemSecondaryAction>$ {promo.toFixed(2)}</ListItemSecondaryAction>\r\n                </ListItem>\r\n            </List>\r\n        </CardContent >\r\n    </Card >)\r\n}\r\nfunction reduceMoney(value) {\r\n    if (!value) return 0;\r\n    if (value > 1000) return (+(value / 1000).toFixed(1)) + \" K\";\r\n    if (value > 1000000) return (+(value / 1000).toFixed(1)) + \" M\";\r\n    return +value.toFixed(2);\r\n}","import React from \"react\";\r\nimport API from \"../../Services/API\";\r\nimport { MonthToString } from \"../../Services/Calcs\";\r\nimport { RankProps } from \"./RankingCard\";\r\nexport default function (Component) {\r\n    return class extends React.Component<RankWithTimeTravel> {\r\n        state = {\r\n            data: [] as any,\r\n            current_week: null as Week,\r\n            statName: null as any,\r\n            reduceFn: null as (data: any[]) => any[],\r\n            loading: false\r\n        }\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = { ...props };\r\n        }\r\n        handleBack = () => {\r\n            if (this.state.loading) return;\r\n            this.setState({ loading: true });\r\n            var new_week = this.state.current_week.id - 1;\r\n            API.Stats([this.state.statName, \"current_week\"], new_week)\r\n                .then(this.updateData).catch(this.showError);\r\n        }\r\n        handleNext = () => {\r\n            if (this.state.loading) return;\r\n            this.setState({ loading: true });\r\n            var new_week = this.state.current_week.id + 1;\r\n            API.Stats([this.state.statName, \"current_week\"], new_week)\r\n                .then(this.updateData).catch(this.showError);\r\n        }\r\n        updateData = (results) => {\r\n            const { current_week, ...remain } = results;\r\n            this.setState({\r\n                data: remain[this.state.statName] || [],\r\n                current_week,\r\n                loading: false\r\n            });\r\n        }\r\n        showError = (ex) => {\r\n            this.setState({ loading: false });\r\n            alert(ex.message);\r\n        }\r\n        render() {\r\n            var { current_week, data, reduceFn, loading } = this.state;\r\n            var subtitle = \"\";\r\n            if (current_week) {\r\n                let desde = new Date(current_week.start);\r\n                let hasta = new Date(current_week.end);\r\n                subtitle = `${desde.getDate()} ${MonthToString(desde.getMonth())} - ` +\r\n                    `${hasta.getDate()} ${MonthToString(hasta.getMonth())}`;\r\n            }\r\n            if (reduceFn) data = reduceFn(data);\r\n\r\n            return (<Component\r\n                {...this.state}\r\n                data={data}\r\n                subtitle={subtitle}\r\n                loading={loading}\r\n                onBackClick={this.handleBack}\r\n                onNextClick={this.handleNext}\r\n            />);\r\n        }\r\n    }\r\n}\r\n\r\ninterface RankWithTimeTravel extends RankProps {\r\n    statName: string;\r\n    reduceFn?: (data: any[]) => any[];\r\n    current_week?: Week;\r\n}","import React from \"react\";\r\nimport { Pie } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default class PieCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        var backgroundColor = [];\r\n        var info = this.props.data.sort((a, b) => b.value - a.value);\r\n        for (let i = 0; i < info.length; i++) {\r\n            const el = info[i];\r\n            labels.push(el.label);\r\n            values.push(el.value);\r\n            backgroundColor.push(el.color);\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor,\r\n                data: values\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Pie options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Bar } from \"react-chartjs-2\";\r\nimport { Card, CardContent, CardHeader } from \"@material-ui/core\";\r\n\r\nexport default class BardCard extends React.PureComponent<{ data: any[], title: string }> {\r\n    state = {\r\n        options: {\r\n            title: { display: false },\r\n            legend: { display: false },\r\n            maintainAspectRatio: false,\r\n            scaleBeginAtZero: true,\r\n            scales: {\r\n                yAxes: [{\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    }\r\n                }]\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        var labels = [];\r\n        var values = [];\r\n        for (let i = 0; i < this.props.data.length; i++) {\r\n            const el = this.props.data[i];\r\n            labels.push(el.label);\r\n            if (el.we) {\r\n                values.push(new Date(el.we).toLocaleDateString());\r\n            } else {\r\n                values.push(el.value);\r\n            }\r\n        }\r\n        const data = {\r\n            labels,\r\n            datasets: [{\r\n                backgroundColor: \"#3f51b5\",\r\n                borderColor: \"#3f51b5\",\r\n                data: values,\r\n                fill: false\r\n            }]\r\n        }\r\n        return (<Card className=\"dashboard-card\" style={{ display: \"flex\", flexDirection: \"column\" }} >\r\n            <CardHeader style={{ textAlign: \"center\" }} title={this.props.title} />\r\n            <CardContent style={{ width: \"100%\", flex: 1, padding: 5 }}>\r\n                <Bar options={this.state.options} data={data} />\r\n            </CardContent>\r\n        </Card >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Grid, CircularProgress, Typography, Hidden, Divider } from \"@material-ui/core\";\r\nimport RankingCard from \"./RankingCard\";\r\nimport API from \"../../Services/API\";\r\nimport LineCard from \"./LineCard\"\r\nimport ProfitCard from \"./ProfitCard\";\r\nimport PieCard from \"./PieCard\";\r\nimport BardCard from \"./BarCard\";\r\nimport WithTimeTravel from \"./WithTimeTravel\";\r\n\r\nconst TimeTravelRank = WithTimeTravel(RankingCard);\r\n\r\nexport default class Feed extends React.Component<{ onMounted: Function, grupo: string, username: string, rol: number }> {\r\n    unmounted = false;\r\n    state = {\r\n        loading: true,\r\n        error: null,\r\n        week_ranking: [],\r\n        group_graph: [],\r\n        personal_graph: [],\r\n        year_sales: [],\r\n        product_resume: [],\r\n        group_ranking: [],\r\n        current_week: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    componentWillMount() {\r\n        API.Stats([\"week_ranking\",\r\n            \"personal_graph\",\r\n            \"group_graph\",\r\n            \"year_sales\",\r\n            \"product_resume\",\r\n            \"current_week\",\r\n            \"group_ranking\"])\r\n            .then(x => {\r\n                if (this.unmounted) return;\r\n                this.setState({ ...x, loading: null })\r\n            })\r\n            .catch(error => {\r\n                if (this.unmounted) return;\r\n                this.setState({ error, loading: null });\r\n            });\r\n    }\r\n    componentWillUnmount = () => this.unmounted = true;\r\n    productResumeReducer = data => data.map(a => {\r\n        a.username = a.label;\r\n        return a;\r\n    });\r\n    render() {\r\n        var { loading, error,\r\n            week_ranking,\r\n            personal_graph,\r\n            group_graph,\r\n            year_sales,\r\n            product_resume,\r\n            group_ranking,\r\n            current_week\r\n        } = this.state;\r\n        const { rol, grupo, username } = this.props;\r\n        var resume = { month: 0, year: 0 };\r\n        var ahora = new Date();\r\n        for (let i = 0; i < year_sales.length; i++) {\r\n            const x = year_sales[i];\r\n            x.createdAt = new Date(x.createdAt);\r\n            if (x.createdAt.getMonth() === ahora.getMonth() &&\r\n                x.createdAt.getFullYear() === ahora.getFullYear()) {\r\n                resume.month += x.profit;\r\n            }\r\n            resume.year += x.profit;\r\n        }\r\n\r\n        if (loading) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <CircularProgress size={100} />\r\n            <Typography variant=\"h6\">CARGANDO...</Typography>\r\n        </div>);\r\n\r\n        if (error) return (<div style={{ width: \"100%\", paddingTop: 100, textAlign: \"center\" }}>\r\n            <Typography variant=\"h5\">OCURRIÓ UN PROBLEMA</Typography>\r\n            <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n            <Typography variant=\"body1\">{error.status} {error.code}</Typography>\r\n        </div>);\r\n\r\n        return (<Grid container spacing={2} style={{ margin: \"auto\", width: \"calc(100% - 10px)\", textAlign: \"center\" }} >\r\n            <Grid item xs={12}>\r\n                <Typography color=\"primary\" variant=\"h6\">\r\n                    Hola {username}, Esta es tu cuenta personal de Natú.\r\n                </Typography>\r\n                <Typography variant=\"subtitle1\">\r\n                    Estamos aquí para prosperar juntos. Estos son los indicadores de tu trabajo.\r\n                </Typography>\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <TimeTravelRank\r\n                    statName=\"group_ranking\"\r\n                    data={group_ranking}\r\n                    current_week={current_week}\r\n                    title=\"RANKING DE GRUPOS\"\r\n                    colType={rol === 3 ? \"MONEY\" : \"PERFOMANCE\"}\r\n                    secondColType=\"MONEY\"\r\n                    col1={rol === 3 ? \"stat\" : \"perfomance\"}\r\n                    col2={rol === 3 ? \"ventas_lider\" : \"stat\"}\r\n                />\r\n            </Grid>\r\n\r\n            <Grid item sm={6} xs={12}>\r\n                <LineCard data={personal_graph} title={\"ESTADISTICA SEMANAL\"} />\r\n            </Grid>\r\n\r\n\r\n            {rol !== 3 && <React.Fragment>\r\n                <Grid item sm={6} xs={12}>\r\n                    <BardCard data={group_graph} title={grupo || \"ESTADISTICA MENSUAL\"} />\r\n                </Grid>\r\n\r\n                <Grid item sm={6} xs={12}>\r\n                    <PieCard data={product_resume} title=\"PRODUCTOS VENDIDOS\" />\r\n                </Grid>\r\n\r\n                <Grid item sm={6} xs={12}>\r\n                    <ProfitCard month={resume.month} year={resume.year} />\r\n                </Grid>\r\n            </React.Fragment>}\r\n\r\n            <Hidden smUp>\r\n                <Grid item xs={12}>\r\n                    <Divider />\r\n                </Grid>\r\n            </Hidden>\r\n\r\n            {rol === 3 && <Grid item sm={6} xs={12}>\r\n                <TimeTravelRank\r\n                    current_week={current_week}\r\n                    statName=\"product_resume\"\r\n                    reduceFn={this.productResumeReducer}\r\n                    data={product_resume}\r\n                    title=\"PRODUCTOS VENDIDOS\"\r\n                    colType=\"NUMBER\"\r\n                    col1=\"value\"\r\n                />\r\n            </Grid>}\r\n            <Grid item sm={6} xs={12}>\r\n                <TimeTravelRank\r\n                    statName=\"week_ranking\"\r\n                    current_week={current_week}\r\n                    data={week_ranking}\r\n                    reduceFn={data => rol === 3 ? data.filter(x => x.rol === 3) : week_ranking}\r\n                    title=\"RANKING DE LA SEMANA\"\r\n                    colType=\"MONEY\"\r\n                    secondColType=\"DATE\"\r\n                    col1=\"stat\"\r\n                    col2=\"ultimoPedido\"\r\n                />\r\n            </Grid>\r\n\r\n            {rol !== 3 && <Grid item sm={6} xs={12}>\r\n                <TimeTravelRank\r\n                    statName=\"week_ranking\"\r\n                    data={week_ranking}\r\n                    title=\"PROGRESO DE LA SEMANA\"\r\n                    colType=\"PERFOMANCE\"\r\n                    col1=\"perfomance\"\r\n                />\r\n            </Grid>}\r\n\r\n            {rol !== 1 && <Grid item sm={6} xs={12}>\r\n                <RankingCard\r\n                    data={week_ranking}\r\n                    title=\"RANKING ACUMULATIVO\"\r\n                    colType=\"MONEY\"\r\n                    col1=\"monto_acumulativo\"\r\n                />\r\n            </Grid>}\r\n\r\n        </Grid>);\r\n    }\r\n}","import React from \"react\";\r\nimport { Table, TableHead, TextField, TableCell, TableRow, Button, CircularProgress, Typography, TableBody } from \"@material-ui/core\";\r\nimport API from \"../../Services/API\";\r\nexport default class ProductSales extends React.Component {\r\n    state = {\r\n        loading: null,\r\n        error: null,\r\n        data: []\r\n    }\r\n    handleClick = () => {\r\n        if (this.state.loading) return;\r\n        var desde = this.valueOf(\"desde\");\r\n        var hasta = this.valueOf(\"hasta\");\r\n        var estado = this.valueOf(\"estado\");\r\n        if (!(desde && !isNaN(+new Date(desde)))) return alert(\"Selecciona la fecha desde\");\r\n        if (!(hasta && !isNaN(+new Date(hasta)))) return alert(\"Selecciona la fecha hasta\");\r\n        if (!estado) return alert(\"Selecciona el estado\");\r\n\r\n        this.setState({ loading: true });\r\n\r\n        desde = new Date(desde).toJSON();\r\n        hasta = new Date(hasta).toJSON();\r\n\r\n        API.ProductSalesReport({ desde, hasta, estado })\r\n            .then(data => this.setState({ data, loading: null, error: null }))\r\n            .catch(error => this.setState({ error, loading: null }));\r\n    }\r\n    valueOf(ID: string) {\r\n        var el = document.getElementById(ID) as any;\r\n        return el && el.value;\r\n    }\r\n    render() {\r\n        const { data, error, loading } = this.state;\r\n        return (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <div>\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"desde\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} type=\"datetime-local\" inputProps={{ id: \"hasta\" }} />\r\n                <TextField style={{ marginLeft: 10, marginRight: 10 }} select SelectProps={{ native: true }} inputProps={{ id: \"estado\" }} >\r\n                    <option value={1}>PENDIENTE</option>\r\n                    <option value={0}>APROBADO</option>\r\n                    <option value={2}>RECHAZADO</option>\r\n                    <option value={3}>ENTREGADO</option>\r\n                </TextField>\r\n                <Button disabled={loading} style={{ marginLeft: 10, marginRight: 10 }} variant=\"outlined\" onClick={this.handleClick} >GENERAR</Button>\r\n            </div>\r\n            {loading\r\n                ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                    <CircularProgress size={100} />\r\n                    <Typography variant=\"h6\">CARGANDO...</Typography>\r\n                </div>)\r\n                : (error\r\n                    ? (<div style={{ width: \"100%\", marginTop: 100, textAlign: \"center\" }} >\r\n                        <Typography variant=\"h4\">OCURRIÓ UN ERROR</Typography>\r\n                        <Typography variant=\"subtitle1\">{error.message}</Typography>\r\n                        <Typography variant=\"subtitle2\" >{error.code} {error.status}</Typography>\r\n                    </div>)\r\n                    : (<div>\r\n                        <Table>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell component=\"th\" >Fecha</TableCell>\r\n                                    <TableCell component=\"th\" >#</TableCell>\r\n                                    <TableCell component=\"th\" >Usuario</TableCell>\r\n                                    <TableCell component=\"th\" >Estado</TableCell>\r\n                                    <TableCell component=\"th\" >Observacion</TableCell>\r\n                                    <TableCell component=\"th\" >Fecha Envío</TableCell>\r\n                                    <TableCell component=\"th\" >Entregado</TableCell>\r\n                                    <TableCell component=\"th\" >Motivo Anulacion</TableCell>\r\n                                    <TableCell component=\"th\" >Producto</TableCell>\r\n                                    <TableCell component=\"th\" >Cant</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {data.map(d => (<TableRow key={d.id}>\r\n                                    <TableCell >{new Date(d.createdAt).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.idPedido}</TableCell>\r\n                                    <TableCell>{d.username}</TableCell>\r\n                                    <TableCell>{d.estado}</TableCell>\r\n                                    <TableCell>{d.observacion}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.fechaEntrega && new Date(d.fechaEntrega).toLocaleDateString()}</TableCell>\r\n                                    <TableCell>{d.motivoAnulacion}</TableCell>\r\n                                    <TableCell>{d.descripcion}</TableCell>\r\n                                    <TableCell>{d.cantidad}</TableCell>\r\n                                </TableRow>))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>)\r\n                )}\r\n        </div >)\r\n    }\r\n}","import React from \"react\";\r\nimport { Tabs, Tab, Paper } from \"@material-ui/core\";\r\nimport ProductSales from \"./ProductSales\";\r\n\r\nexport default class Reports extends React.Component<any> {\r\n    state = {\r\n        currentTab: 0\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n        props.onMounted(props.match.path);\r\n    }\r\n    handleChange = (x, currentTab) => {\r\n        this.setState({ currentTab });\r\n    }\r\n    render() {\r\n        const { currentTab } = this.state;\r\n        return (\r\n            <Paper style={{ margin: 10 }}>\r\n                <Tabs style={{ marginBottom: 10 }} value={currentTab} onChange={this.handleChange}>\r\n                    <Tab label=\"Detalle de Productos\" />\r\n                </Tabs>\r\n                {currentTab === 0 && <ProductSales />}\r\n            </Paper>)\r\n    }\r\n}","import React from \"react\";\r\nimport MUIDataTable from \"mui-datatables\";\r\n\r\nexport default class Queue extends React.PureComponent<{\r\n    data: any[],\r\n    columns: any[],\r\n    estado: string,\r\n    onClick: (id: number) => void\r\n}> {\r\n    handleClick = (values, index) => {\r\n        this.props.onClick(values[0]);\r\n    }\r\n    render() {\r\n        const { data, columns } = this.props;\r\n        const rows = data.filter(x => x.estado === this.props.estado)\r\n            .sort((a, b) => a.changedAt - b.changedAt)\r\n        return (\r\n            <MUIDataTable\r\n                data={rows}\r\n                columns={columns}\r\n                options={{\r\n                    selectableRows: \"none\",\r\n                    onRowClick: this.handleClick\r\n                }}\r\n            />\r\n        )\r\n    }\r\n}","export const entrada_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"numeroTransaccion\",\r\n        label: \"# Comprobante\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    }\r\n];\r\n\r\nexport const aprobado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: true\r\n        }\r\n    }\r\n];\r\nexport const enviado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaEnvio\",\r\n        label: \"Enviado\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: true\r\n        }\r\n    }\r\n];\r\nexport const recibido_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaRecepcion\",\r\n        label: \"Recepcion\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"bienRecibido\",\r\n        label: \"Incompleto\",\r\n        options: {\r\n            filter: true,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"observacionRecepcion\",\r\n        label: \"Observaciones\",\r\n        options: {\r\n            sort: false,\r\n            filter: false\r\n        }\r\n    }\r\n];\r\nexport const facturado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaRecepcion\",\r\n        label: \"Recepcion\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"bienRecibido\",\r\n        label: \"Incompleto\",\r\n        options: {\r\n            filter: true,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"observacionRecepcion\",\r\n        label: \"Observaciones\",\r\n        options: {\r\n            sort: false,\r\n            filter: false\r\n        }\r\n    },\r\n    {\r\n        name: \"numeroFactura\",\r\n        label: \"Factura\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    }\r\n];\r\n\r\nexport const rechazado_columns = [\r\n    {\r\n        name: \"id\",\r\n        label: \"#\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaCreacion\",\r\n        label: \"Fecha\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"fechaAnulacion\",\r\n        label: \"Rechazado\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"username\",\r\n        label: \"Usuario\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"razonSocial\",\r\n        label: \"Cliente\",\r\n        options: {\r\n            filter: true,\r\n            sort: true,\r\n        }\r\n    },\r\n    {\r\n        name: \"total\",\r\n        label: \"Total\",\r\n        options: {\r\n            filter: false,\r\n            sort: true\r\n        }\r\n    },\r\n    {\r\n        name: \"motivoAnulacion\",\r\n        label: \"Motivo\",\r\n        options: {\r\n            filter: false,\r\n            sort: false\r\n        }\r\n    }\r\n];","import React from \"react\";\r\nimport { Tabs, Tab, AppBar } from \"@material-ui/core\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport API from \"../../Services/API\";\r\nimport Queue from \"./Queue\";\r\nimport OrderDetails from \"../OrderList/OrderDetails\";\r\nimport { entrada_columns, aprobado_columns, enviado_columns, recibido_columns, facturado_columns, rechazado_columns } from \"./Columns\";\r\n\r\nexport default class OrderQueue extends React.Component<{\r\n    match?: any,\r\n    history?: any,\r\n    location?: any,\r\n    onMounted?: Function\r\n}> {\r\n    state = {\r\n        data: [],\r\n        loading: true,\r\n        error: null,\r\n        id: null\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.onMounted) this.props.onMounted(this.props.match.path);\r\n        this.loadData();\r\n    }\r\n    loadData() {\r\n        API.GetOrders()\r\n            .then(rawData => {\r\n                const data = rawData.map(x => {\r\n                    var fechaCreacion = new Date(x.fechaCreacion);\r\n                    x.fechaCreacion = fechaCreacion.toLocaleDateString() as any;\r\n                    x.fechaEnvio = x.fechaEnvio && new Date(x.fechaEnvio).toLocaleDateString() as any;\r\n                    x.fechaRecepcion = x.fechaRecepcion && new Date(x.fechaRecepcion).toLocaleDateString() as any;\r\n                    x.fechaAnulacion = x.fechaAnulacion && new Date(x.fechaAnulacion).toLocaleDateString() as any;\r\n                    if (x.fechaAnulacion) console.info(x);\r\n                    x.total = x.total.toFixed(2) as any;\r\n                    x.bienRecibido = (x.bienRecibido ? \"\" : \"SI\") as any;\r\n                    x.changedAt = (x.changedAt\r\n                        ? new Date(x.changedAt).valueOf()\r\n                        : 0) as any;\r\n\r\n                    x.numeroTransaccion = x.imgTransaccion ? \"IMAGEN\" : x.numeroTransaccion;\r\n                    return x;\r\n                });\r\n                this.setState({ data, loading: null });\r\n            })\r\n            .catch(error => this.setState({ error }));\r\n    }\r\n    handleTab = (_, value) => {\r\n        this.props.history.push(this.props.match.path + value);\r\n    }\r\n    openOrder = id => {\r\n        this.props.history.push(this.props.match.path + this.currentTab() + \"/\" + id);\r\n    }\r\n    closeOrder = shouldUpdate => {\r\n        if (shouldUpdate) this.loadData();\r\n        this.props.history.push(this.props.match.path + this.currentTab());\r\n    }\r\n    currentTab() {\r\n        return \"/\" + (this.props.location.pathname.split(\"/\")[2] || \"inbox\");\r\n    }\r\n    render() {\r\n        return (<div>\r\n            <AppBar position=\"relative\" color=\"primary\">\r\n                <Tabs onChange={this.handleTab} value={this.currentTab()} variant=\"fullWidth\">\r\n                    <Tab label=\"Entrada\" value=\"/inbox\" />\r\n                    <Tab label=\"Aprobado\" value=\"/ok\" />\r\n                    <Tab label=\"Enviado\" value=\"/sent\" />\r\n                    <Tab label=\"Recibido\" value=\"/ack\" />\r\n                    <Tab label=\"Facturado\" value=\"/invoice\" />\r\n                    <Tab label=\"Rechazado\" value=\"/denied\" />\r\n                </Tabs>\r\n            </AppBar>\r\n            <Switch>\r\n                <Route path={this.props.match.path + \"/inbox\"}\r\n                    render={_ => (<Queue\r\n                        columns={entrada_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"PENDIENTE\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/ok\"}\r\n                    render={_ => (<Queue\r\n                        columns={aprobado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"APROBADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/sent\"}\r\n                    render={_ => (<Queue\r\n                        columns={enviado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"ENVIADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/ack\"}\r\n                    render={_ => (<Queue\r\n                        columns={recibido_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"RECIBIDO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/invoice\"}\r\n                    render={_ => (<Queue\r\n                        columns={facturado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"FACTURADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/denied\"}\r\n                    render={_ => (<Queue\r\n                        columns={rechazado_columns}\r\n                        data={this.state.data}\r\n                        onClick={this.openOrder}\r\n                        estado=\"RECHAZADO\"\r\n                    />)}\r\n                />\r\n                <Route path={this.props.match.path + \"/\"} exact>\r\n                    <Redirect to={this.props.match.path + \"/inbox\"} />\r\n                </Route>\r\n            </Switch>\r\n            <Route path={this.props.match.path + \"/:group/:id\"}\r\n                render={routeProps => <OrderDetails\r\n                    id={+routeProps.match.params.id}\r\n                    onClose={this.closeOrder}\r\n                    editable={true} />}\r\n            />\r\n        </div>);\r\n    }\r\n}\r\n","import React from 'react';\nimport { Drawer, List, ListItem, ListItemIcon, ListItemText, Typography, CssBaseline, withStyles, AppBar, Toolbar, IconButton, Hidden } from '@material-ui/core';\nimport { ShoppingCart, ListAlt, Menu, Close, Help, Inbox, Report/*, Policy, Category, PeopleAlt*/ } from \"@material-ui/icons\";\nimport { Link, Switch, Route, Redirect, HashRouter } from \"react-router-dom\";\nimport Order from './../Components/Order';\nimport OrderList from './../Components/OrderList';\nimport Feed from './../Components/Feed';\nimport Reports from './../Components/Reports';\nimport OrderQueue from '../Components/OrderQueue';\n\nconst OPCIONES = [\n  { label: \"Inicio\", Icon: Inbox, path: \"/feed\" },\n  /** NINGUN PATH puede comenzar por order porque dana algunas partes de la logica */\n  { label: \"Nuevo Pedido\", Icon: ShoppingCart, path: \"/order\" },\n\n  { label: \"Pedidos\", Icon: ListAlt, path: \"/my-orders\" },\n  { label: \"Pedidos\", Icon: ListAlt, path: \"/queue\" },\n\n  //{ label: \"Politicas\", Icon: Policy, path: \"/policy\" },\n\n  /*{ label: \"Catálogo\", Icon: Category, path: \"/products\" },\n  { label: \"Usuarios\", Icon: PeopleAlt, path: \"/users\" },*/\n\n  { label: \"Reportes\", Icon: Report, path: \"/reports\" }\n];\n\nconst drawerWidth = 200;\n\nexport default withStyles(theme => ({\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  content: {\n    flexGrow: 1,\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: drawerWidth\n    }\n  },\n  appBar: {\n    display: \"block\"\n  }\n}))(class Main extends React.Component<MainProps, any> {\n\n  state = {\n    selected: \"\"\n    , puedeEditarPrecios: false\n    , isMenuOpen: false\n    , username: \"\"\n    , grupo: \"\"\n    , token: \"\"\n    , rol: 0\n    , accesos: []\n    , descuentos: [] as Descuento[]\n  };\n\n  constructor(props: any) {\n    super(props);\n    this.onMounted = this.onMounted.bind(this);\n    this.handleMenu = this.handleMenu.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n    this.state.username = props.username;\n    this.state.grupo = props.grupo;\n    this.state.rol = props.rol;\n    this.state.descuentos = props.descuentos || [];\n    this.state.puedeEditarPrecios = props.puedeEditarPrecios || [];\n    this.state.accesos = [...OPCIONES];\n    if (this.state.rol === 3) {\n      this.state.accesos.splice(2, 1);\n    } else {\n      this.state.accesos = [OPCIONES[0], OPCIONES[1], OPCIONES[2], OPCIONES[4]];\n    }\n  }\n  onMounted(selected: string) {\n    this.setState({ selected });\n  }\n  handleMenu() {\n    this.setState(prev => {\n      const state = { ...prev };\n      state.isMenuOpen = !state.isMenuOpen;\n      return state;\n    });\n  }\n  closeMenu() {\n    this.setState({ isMenuOpen: false });\n  }\n  render() {\n    const { selected, isMenuOpen, username, grupo } = this.state;\n    const { window, classes } = this.props;\n    const container = window !== undefined ? () => window().document.body : undefined;\n\n    const drawerChildren = (<div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      <div style={{ textAlign: \"center\", marginTop: 10, marginBottom: 10 }}>\n        <Typography style={{ display: \"block\" }} variant=\"button\">{username}</Typography>\n        <Typography style={{ display: \"block\" }} variant=\"caption\">{grupo}</Typography>\n      </div>\n      <List style={{ flex: 1 }}>\n        {this.state.accesos.map(o => (<ListItem onClick={this.closeMenu} selected={selected === o.path} component={Link} to={o.path} button key={o.label}>\n          <ListItemIcon >{<o.Icon />}</ListItemIcon>\n          <ListItemText style={{ flex: 1 }} primary={o.label} />\n        </ListItem>))}\n      </List>\n      <ListItem component=\"a\" target=\"_a\" href=\"https://wa.me/\" >\n        <ListItemIcon> <Help /> </ListItemIcon>\n        <ListItemText primary=\"AYUDA\" />\n      </ListItem>\n    </div>);\n\n    return (<HashRouter basename=\"/app\">\n      <div style={{ width: \"100%\", height: \"100%\", display: \"flex\", flexDirection: \"column\" }}>\n        <CssBaseline />\n        <nav className={classes.drawer}>\n          <Hidden smUp implementation=\"css\" >\n            <Drawer\n              container={container}\n              variant=\"temporary\"\n              anchor={'left'}\n              open={isMenuOpen}\n              onClose={this.closeMenu}\n              classes={{ paper: classes.drawerPaper }}\n              ModalProps={{\n                keepMounted: true, // Better open performance on mobile.\n              }}\n            >\n              <div className={classes.toolbar} style={{ textAlign: \"right\" }}>\n                <IconButton onClick={this.handleMenu}>\n                  <Close />\n                </IconButton>\n              </div>\n              {drawerChildren}\n            </Drawer>\n          </Hidden>\n          <Hidden xsDown implementation=\"css\">\n            <Drawer\n              classes={{ paper: classes.drawerPaper }}\n              variant=\"permanent\"\n              open\n            >\n              {drawerChildren}\n            </Drawer>\n          </Hidden>\n        </nav>\n\n        <Hidden smUp implementation=\"css\" >\n          <AppBar position=\"fixed\" className={classes.x}>\n            <Toolbar>\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open drawer\"\n                edge=\"start\"\n                onClick={this.handleMenu}\n              >\n                <Menu />\n              </IconButton>\n              <Typography style={{ flexGrow: 1 }}>{(OPCIONES.find(x => x.path === selected) || {}).label}</Typography>\n            </Toolbar>\n          </AppBar>\n        </Hidden>\n\n        <main className={classes.content}>\n          <Hidden smUp implementation=\"css\" >\n            <div className={classes.toolbar}></div>\n          </Hidden>\n          <Switch>\n            <Route path=\"/feed\" render={props => <Feed {...props} onMounted={this.onMounted} grupo={this.state.grupo} username={this.state.username} rol={this.state.rol} />} />\n            <Route path=\"/order\" render={_ => <Order onMounted={this.onMounted} rol={this.state.rol} descuentos={this.state.descuentos} editablePrices={this.state.puedeEditarPrecios} />} />\n            <Route path=\"/my-orders\" render={props => <OrderList {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\n            <Route path=\"/queue\" render={props => <OrderQueue {...props} onMounted={this.onMounted} />} />\n\n            <Route path=\"/policy\" >\n              <iframe title=\"Politicas de Natú\" style={{\n                height: \"calc(100% - 10px)\",\n                width: \"100%\"\n              }} src=\"https://docs.google.com/document/d/e/2PACX-1vSC-0iC8dbpYgrNhlDyRWAQdwdFM4esg40JLZQS-zg6Koix_w1B86KoGI3YPpq-TdNjoJV0eenbcRKv/pub?embedded=true\" />\n            </Route>\n\n            <Route path=\"/users\" render={props => <div>USUARIOS</div>} />\n            <Route path=\"/products\" render={props => <div>PRODUCTOS</div>} />\n\n            <Route path=\"/reports\" render={props => <Reports {...props} rol={this.state.rol} onMounted={this.onMounted} />} />\n            <Route path=\"/\" exact><Redirect to=\"/feed\" /></Route>\n          </Switch>\n        </main>\n      </div>\n    </HashRouter>)\n  }\n});\n\ninterface MainProps {\n  username: string;\n  rol: number;\n  grupo: string;\n  puedeEditarPrecios?: boolean;\n\n  token: string;\n  window?: any;\n  classes: any;\n}","import React from \"react\";\r\nimport { Paper, Typography, TextField, InputAdornment, IconButton, CircularProgress, Divider, Button, FormLabel } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport API from \"../Services/API\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Preferences from \"../Services/Preferences\";\r\n\r\nexport default class SignIn extends React.Component {\r\n    state = {\r\n        nombre: \"\",\r\n        identificacion: \"\",\r\n        telefono: \"\",\r\n        email: \"\",\r\n        fechaNacimiento: \"\",\r\n        nacionalidad: \"\",\r\n        ciudad: \"\",\r\n        direccion: \"\",\r\n        username: \"\",\r\n        password: \"\",\r\n        confirm_password: \"\",\r\n        error: null,\r\n        grupo: \"\",\r\n\r\n        grupos: [\r\n            { id: 'AGUILAS - FM', nombre: 'FAUSTO MIÑO' },\r\n            { id: 'FUEGO - PN', nombre: 'PAOLA MARULANDA ARIAS' },\r\n            { id: 'ENERGIA - NA', nombre: 'NATAHLI ARACELI ALDAZ RODRÍGUEZ' },\r\n            { id: 'ESPERANZA - EV', nombre: 'EDISON MARCELO VALVERDE GUEVARA' },\r\n        ],\r\n        loading: false,\r\n        fin_registro: null\r\n    }\r\n    componentDidMount() {\r\n        API.GetGroups()\r\n            .then(grupos => this.setState({ grupos })\r\n            ).catch(ex => this.setState({\r\n                error: {\r\n                    grupo: \"No se pudieron cargar los grupos: \" + ex.message\r\n                }\r\n            }));\r\n    }\r\n    handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, value } = event.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n    handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        if (this.state.loading) return;\r\n        var error = Validar(this.state);\r\n        if (error) return this.setState({ error });\r\n        this.setState({ loading: true, error: null });\r\n        setTimeout(() => {\r\n            API.SignIn(this.state)\r\n                .then(x => {\r\n                    this.setState({ loading: false, fin_registro: x.email });\r\n                    Preferences.Set(\"user\", this.state.username);\r\n                }).catch(error => this.setState({ error, loading: false }));\r\n        }, 2000);\r\n    }\r\n    render() {\r\n        const { state } = this;\r\n        const { loading, error, fin_registro, grupos } = this.state;\r\n\r\n        if (fin_registro) return (<div style={{ width: \"100%\", padding: 30, textAlign: \"center\" }}>\r\n            <Typography variant=\"h4\">Registro completado!</Typography>\r\n            <Typography variant=\"subtitle1\">\r\n                Para habilitar tu cuenta entra a tu correo ({fin_registro})\r\n            y abre el enlace que te enviamos.\r\n            </Typography>\r\n            <Typography variant=\"body1\">\r\n                Si no encuentras nuestro correo en tu Bandeja de Entreda, es posible que encuentre en SPAM o NO DESEADOS.\r\n            </Typography>\r\n        </div>);\r\n\r\n        return (<main style={{ width: \"100%\", padding: 10, textAlign: \"center\", backgroundColor: \"#fafafa\" }}>\r\n            <Paper style={{ padding: 20, margin: \"auto\", maxWidth: 600 }}>\r\n                <form noValidate onSubmit={this.handleSubmit}>\r\n                    <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                        <img style={{ height: 100 }} src=\"./logo.png\" alt=\"Natu - Logo\"></img>\r\n                        <div style={{ flexGrow: 1, margin: 20, textAlign: \"left\" }}>\r\n                            <Typography variant=\"h4\">REGISTRATE</Typography>\r\n                            <Typography component={Link} to=\"/login\" >Ya tienes una cuenta? Inicia sesión aquí</Typography>\r\n                        </div>\r\n                    </div>\r\n                    <Divider />\r\n                    <Typography variant=\"h6\" style={{ marginTop: 20 }}>Información personal</Typography>\r\n                    <Input disabled={loading} error={error && error.nombre} onChange={this.handleChange} value={state.nombre} name=\"nombre\" label=\"Nombres Completos\" />\r\n                    <Input disabled={loading} error={error && error.identificacion} onChange={this.handleChange} value={state.identificacion} name=\"identificacion\" label=\"Identificacion (Cedula, pasaporte, etc.)\" type=\"phone\" />\r\n                    <Input disabled={loading} error={error && error.telefono} onChange={this.handleChange} value={state.telefono} name=\"telefono\" label=\"Telefono\" type=\"phone\" />\r\n                    <Input disabled={loading} error={error && error.email} onChange={this.handleChange} value={state.email} name=\"email\" label=\"Correo Electronico\" type=\"email\" />\r\n                    <Input disabled={loading} error={error && error.nacionalidad} onChange={this.handleChange} value={state.nacionalidad} name=\"nacionalidad\" label=\"Nacionalidad\" />\r\n                    <Input disabled={loading} error={error && error.fechaNacimiento} onChange={this.handleChange} value={state.fechaNacimiento} name=\"fechaNacimiento\" label=\"Fecha de Nacimiento\" type=\"date\" />\r\n\r\n                    <Typography variant=\"h6\" style={{ marginTop: 30 }}>Agrega tu dirección</Typography>\r\n                    <Input disabled={loading} error={error && error.ciudad} onChange={this.handleChange} value={state.ciudad} name=\"ciudad\" label=\"Ciudad\" />\r\n                    <Input disabled={loading} error={error && error.direccion} onChange={this.handleChange} value={state.direccion} name=\"direccion\" label=\"Direccion\" />\r\n\r\n                    <Typography variant=\"h6\" style={{ marginTop: 30 }}>Crea tu Usuario</Typography>\r\n\r\n                    <Input disabled={loading} error={error && error.username} onChange={this.handleChange} value={state.username} name=\"username\" label=\"Usuario\" />\r\n                    <Password disabled={loading} error={error && error.password} onChange={this.handleChange} value={state.password} name=\"password\" label=\"Contraseña\" />\r\n                    <Password disabled={loading} error={error && error.confirm_password} onChange={this.handleChange} value={state.confirm_password} name=\"confirm_password\" label=\"Confirma tu contraseña\" />\r\n\r\n                    <Typography variant=\"subtitle1\" style={{ marginTop: 10 }} >A qué grupo quieres pertenecer?</Typography>\r\n                    <Input select\r\n                        disabled={loading}\r\n                        error={error && error.grupo}\r\n                        onChange={this.handleChange}\r\n                        value={state.grupo}\r\n                        name=\"grupo\"\r\n                        label=\"Grupo\"\r\n                        SelectProps={{ native: true }}\r\n                    >\r\n                        <option value=\"\">- SELECCIONA UN GRUPO -</option>\r\n                        {grupos.map(g => <option key={g.id} value={g.id} >{g.id} - {g.nombre}</option>)}\r\n                    </Input>\r\n\r\n                    {(error && error.guardar) ? <Typography color=\"secondary\">{error.guardar}</Typography> : null}\r\n                    <Button type=\"submit\" color=\"primary\" variant=\"outlined\" fullWidth style={{ marginTop: 20 }} >\r\n                        {loading ? <CircularProgress size={20} color=\"inherit\" /> : \"ENVIAR\"}\r\n                    </Button>\r\n                </form>\r\n            </Paper>\r\n        </main>);\r\n    }\r\n}\r\nfunction Validar(state: any) {\r\n    const { nombre,\r\n        telefono,\r\n        identificacion,\r\n        email,\r\n        fechaNacimiento,\r\n        nacionalidad,\r\n        ciudad,\r\n        direccion,\r\n        username,\r\n        password,\r\n        grupo,\r\n        confirm_password\r\n    } = state;\r\n    const result: any = {};\r\n    if (isEmpty(nombre)) result.nombre = \"Digita tu nombre\";\r\n\r\n    if (isEmpty(telefono)) {\r\n        result.telefono = \"Digita tu telefono\";\r\n    } else {\r\n        if (isNaN(parseInt(telefono))) result.telefono = \"El telefono solo puede contener numeros\";\r\n        if (telefono.length <= 5) result.telefono = \"El telefono debe tener mínimo 6 digitos\";\r\n    }\r\n\r\n    if (isEmpty(identificacion)) {\r\n        result.identificacion = \"Digita tu identificacion\";\r\n    }\r\n\r\n    if (isEmpty(email)) {\r\n        result.email = \"Digita tu email\";\r\n    } else {\r\n        if (email.indexOf(\"@\") === -1) result.email = \"El correo es incorrecto\";\r\n        if (email.indexOf(\".\") === -1) result.email = \"El correo es incorrecto\";\r\n    }\r\n\r\n    if (isEmpty(fechaNacimiento)) {\r\n        result.fechaNacimiento = \"Digita tu fecha de nacimiento\";\r\n    } else {\r\n        if (isNaN(+new Date(fechaNacimiento))) result.fechaNacimiento = \"La fecha no es válida\";\r\n\r\n    }\r\n\r\n    if (isEmpty(nacionalidad)) result.nacionalidad = \"Digita tu nacionalidad\";\r\n    if (isEmpty(ciudad)) result.ciudad = \"Digita tu ciudad\";\r\n    if (isEmpty(direccion)) result.direccion = \"Digita tu direccion\";\r\n\r\n    if (isEmpty(username)) result.username = \"Digita tu Usuario\";\r\n    if (isEmpty(password)) {\r\n        result.password = \"Digita la contraseña\";\r\n    } else {\r\n        if (password.length < 5) result.password = \"La contraseña debe tener más de 6 caracteres\";\r\n        if (password.trim() !== confirm_password.trim()) result.confirm_password = \"Las contraseñas no concuerdan entre si\";\r\n    }\r\n    if (isEmpty(grupo)) result.grupo = \"Selecciona tu grupo\";\r\n    if (Object.keys(result).length) {\r\n        var key = Object.keys(result)[0];\r\n        window.requestAnimationFrame(() => document.getElementById(key).focus());\r\n        return result;\r\n    }\r\n    return null;\r\n}\r\nfunction isEmpty(value) {\r\n    return !(value && value.length);\r\n}\r\nfunction Input(props: {\r\n    name: string,\r\n    value: any,\r\n    onChange: any,\r\n    label: string,\r\n    type?: string,\r\n    disabled?: boolean,\r\n    error?: any,\r\n    [key: string]: any\r\n}) {\r\n    const { error, type, label, ...other_props } = props;\r\n    var input_props: any = { type, inputProps: { id: props.name } };\r\n    if (error) {\r\n        input_props.error = true;\r\n        input_props.helperText = error;\r\n    }\r\n    if (type === \"date\")\r\n        return (<div style={{ width: \"100%\", display: \"flex\", flexDirection: \"row\", marginBottom: 5, marginTop: 15 }}>\r\n            <FormLabel style={{ paddingTop: 8, marginRight: 5 }}>{label}</FormLabel>\r\n            <TextField\r\n                required\r\n\r\n                {...input_props}\r\n                style={{ flex: 1 }}\r\n                {...other_props}\r\n            >{props.children} </TextField>\r\n        </div>);\r\n\r\n    input_props.label = label;\r\n\r\n    return (<TextField\r\n        fullWidth\r\n        required\r\n        {...input_props}\r\n        style={{ marginTop: 5, marginBottom: 5 }}\r\n        {...other_props}\r\n    />);\r\n}\r\nfunction Password(props: any) {\r\n    const { error, ...other_props } = props;\r\n    const [show_password, setPassword] = React.useState(false);\r\n    var input_props: any = { inputProps: { id: props.name } };\r\n    if (error) {\r\n        input_props.error = true;\r\n        input_props.helperText = error;\r\n    }\r\n    return (<TextField\r\n        type={show_password ? \"text\" : \"password\"}\r\n        {...other_props}\r\n        {...input_props}\r\n        fullWidth\r\n        required\r\n        style={{ marginTop: 5, marginBottom: 5 }}\r\n        InputProps={{\r\n            endAdornment: <InputAdornment position=\"end\" >\r\n                <IconButton onClick={x => setPassword(!show_password)}>\r\n                    {show_password ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n            </InputAdornment>\r\n        }}\r\n    />);\r\n}","import React from \"react\";\r\nimport { Router, Switch, Route, Redirect } from \"react-router-dom\";\r\nimport { createHashHistory } from \"history\";\r\nimport Login from \"./Components/Login\";\r\nimport Main from \"./Layouts/Main\";\r\nimport API from \"./Services/API\";\r\nimport SignIn from \"./Layouts/SignIn\";\r\nimport Preferences from \"./Services/Preferences\";\r\n\r\nexport default class App extends React.Component {\r\n    state = { user: null as LoggedIn }\r\n    history = createHashHistory();\r\n    constructor(props: any) {\r\n        super(props);\r\n        if (props.user) {\r\n            this.state.user = props.user;\r\n            API.KEY = props.user.token;\r\n        }\r\n    }\r\n    handleLoggedIn = (user: LoggedIn) => {\r\n        this.setState({ user });\r\n        // aun esta pendiente, por lo que tiene que ir directamente al curso\r\n        if (user.estado === \"PENDIENTE\")\r\n            return this.history.push(\"/classroom\");\r\n        this.history.push(\"/app\");\r\n        API.KEY = user.token;\r\n        try {\r\n            Preferences.setPrefix(user.id && (user.id + \"_\"));\r\n        } catch (ex) {\r\n            console.info(\"Ocurrio un error en Preferences.setPrefix\", ex);\r\n        }\r\n    }\r\n    render() {\r\n        const { user } = this.state;\r\n        var user_routes;\r\n        if (user) {\r\n            switch (user.estado) {\r\n                case \"PENDIENTE\":\r\n                    user_routes = <Route>BIENVENIDO A CLASSROOM</Route>;\r\n                    break;\r\n                case \"RECHAZADO\":\r\n                    user_routes = <Route>USUARIO ESTÁ DESHABILITADO</Route>;\r\n                    break;\r\n                default:\r\n                    user_routes = (<Switch>\r\n                        <Route path=\"/classroom\">BIENVENIDO A CLASSROOM</Route>\r\n                        <Route path=\"/app\" render={() => <Main {...user} />} />\r\n                        <Route>\r\n                            <Redirect to=\"/app\" />\r\n                        </Route>\r\n                    </Switch>);\r\n                    break;\r\n            }\r\n        }\r\n        return (<Router history={this.history} >\r\n            {user\r\n                ? user_routes\r\n                : (<Switch>\r\n                    <Route path=\"/signin\" component={SignIn} />\r\n                    <Route path=\"/recover-password\">AQUI PUEDE RECUPERAR TU CONTRAEÑA</Route>\r\n                    <Route path=\"/login\" render={_ => <Login onLoggedIn={this.handleLoggedIn} />} />\r\n                    <Route>\r\n                        <Redirect to=\"/login\" />\r\n                    </Route>\r\n                </Switch>)\r\n            }\r\n        </Router>)\r\n    }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\nimport App from \"./App\";\n/** \n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n*/\nReactDOM.render(<React.StrictMode>\n  <App />\n</React.StrictMode>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}